# DE 1000
#
with detail = 2 {
    let flwhag = path("simple.de.1000");

    with link = "line.de.1000" {
        track(:first :double :cat, flwhag[:flw, :hag]);
        with layer = 1 line_badge(:open, flwhag[:hag - 2.5km], "1000");
    }

    with link = "point.int.Harrislee-Padborg" {
        marker(:refdt :left, flwhag[:hag]);
        marker(:refdt :right, flwhag[:hag]);
    }
}


# DE 1001
#
with detail = 2 {
    let flwlin = path("simple.de.1001");

    with link = "line.de.1001" {
        with layer = -1 track(:second :closed, flwlin[:flw.r, :lin.a]);
        with layer = 1 line_badge(:closed, flwlin[:flw + 18km], "1001");
    }
}


# DE 1002
#
with detail = 2 {
    let flwfla = path("simple.de.1002");

    with link = "line.de.1002" {
        with layer = -1 track(:second :removed, flwfla[:wil.f, :fho]);
    }

    with link = "point.de.Flensburg-Alter-Bf" {
        with layer = 1 marker(:statdot :removed, flwfla[:fla]);
    }
}


# DE 1003
#
with detail = 2 {
    with link = "line.de.1003" {
        with layer = -1 track(:third :removed,
                path("simple.de.1003")[:fla, :f]
        );
    }
}


# DE 1005
#
with detail = 2 {
    with link = "line.de.1005" {
        track(:first :cat, path("simple.de.1005")[:fle.f, :ffle]);
    }
}


# DE 1010
#
with detail = 2 {
    let slesla = path("simple.de.1010");

    with link = "line.de.1010" {
        with layer = -1 track(:second :removed, slesla[:sle.f, :sla]);
    }

    with link = "point.de.Schleswig-Altstadt" {
        with layer = 1 marker(:statdot :removed, slesla[:sla]);
    }
}


# DE 1011
#
with detail = 2 {
    let jubhus = path("simple.de.1011");

    with link = "line.de.1011" {
        track(:second, jubhus[:jub.f, :hus.a]);
        with layer = 1 line_badge(:open, jubhus[:ohr - 4km], "1011");
        with layer = 1 line_badge(:open, jubhus[:ohr + 5.5km], "1011");
    }

    with link = "point.de.Ohrstedt" {
        with layer = 1 marker(:statdot, jubhus[:ohr]);
        slabel(:right, jubhus[:ohr + 3dt] << 3.5dt, "Ohrstedt");
    }
}


# DE 1012
#
with detail = 2 {
    let budhus = path("simple.de.1012");

    with link = "line.de.1012" {
        with layer = -1 track(:second :removed, budhus[:bud, :hus.a]);
        with layer = 1 line_badge(:removed, budhus[:bud + 14.8km], "1012");
        with layer = 1 line_badge(:removed, budhus[:hus - 7.5km], "1012");
    }

    with link = "point.de.Norderstapel" {
        with layer = 1 marker(:statdot :removed, budhus[:nor]);
        slabel(:left :removed, budhus[:nor] + (0dt, 4dt), "Norderstapel");
    }
}


# DE 1020
with detail = 2 {
    let hasfle = path("simple.de.1020");

    with link = "line.de.1020" {
        track(:second, hasfle[:has, :fle.f]);
        with layer = 1 line_badge(:open, hasfle[:nwi + 8.0km], "1020");
        with layer = 1 line_badge(:open, hasfle[:sud + 5.0km], "1020");
    }

    with link = "point.de.Suchsdorf" {
        with layer = 1 marker(:statdot, hasfle[:suc]);
        slabel(:left, hasfle[:suc - 1.5dt] << 1.5dt, "Suchsdorf");
    }

    with link = "point.de.Neuwittenbek" {
        with layer = 1 marker(:statdot, hasfle[:nwi]);
        slabel(:left, hasfle[:nwi] + (-2.0dt, 1.5dt), "Neuwittenbek");
    }

    with link = "point.de.Eckernförde" {
        with layer = 1 marker(:statdot, hasfle[:ecs]);
        slabel(:right, hasfle[:ecs] + (2.0dt, 1.0dt), "Eckernförde");
    }

    with link = "point.de.Süderbrarup" {
        with layer = 1 marker(:statdot, hasfle[:sud]);
        slabel(:right, hasfle[:sud] + (2.0dt, 1.5dt), "Süderbrarup");
    }

    with link = "point.de.Sörup" {
        with layer = 1 marker(:statdot, hasfle[:sor]);
        slabel(:left, hasfle[:sor] + (-2.0dt, 1.5dt), "Sörup");
    }
}


# DE 1021
#
with detail = 2 {
    let haskiw = path("simple.de.1021");

    with link = "line.de.1021" {
        with layer = -1 track(:second :removed, haskiw[:has.f, :f]);
    }

    with link = "point.de.Kiel-West" {
        with layer = 1 marker(:statdot :removed, haskiw[:kiw]);
    }
}


# DE 1022
#
with detail = 2 {
    let kieoro = path("simple.de.1022");

    with link = "line.de.1022" {
        track(:first, kieoro[:kie.a, :oro.a]);
        with layer = 1 line_badge(:open, kieoro[:has + 13.5km], "1022");
    }

    with link = "point.de.Kiel-Hassee" {
        with layer = 1 marker(:statdot, kieoro[:has]);
    }
}


# DE 1023
#
with detail = 2 {
    let kieneu = path("simple.de.1023");

    with link = "line.de.1023" {
        track(:first, kieneu[:kie.aa, :mal]);
        track(:first :double, kieneu[:mal, :eut]);
        with layer = -1 track(:second :removed, kieneu[:eut.f, :neg.a]);
        track(:first, kieneu[:neg.f, :nst]);

        with layer = 1 line_badge(:open, kieneu[:asc - 6.0km], "1023");
        with layer = 1 line_badge(:open, kieneu[:mal - 4.1km] << 0.5dt, "1023");
        with layer = 1 line_badge(:removed, kieneu[:neg - 5.0km], "1023");
    }

    with link = "point.de.Preetz" {
        with layer = 1 marker(:statdot, kieneu[:pre]);
        slabel(:right, kieneu[:pre + 2.5dt] << 1.5dt, "Preetz");
    }

    with link = "point.de.Ascheberg-Holst" {
        with layer = 1 marker(:statdot, kieneu[:asc]);
        label(kieneu[:asc] + (-2dt, 1.0dt),
            hbox(:left:top,
                hbox(:left:base :small,
                    "Ascheberg ",
                    span(:light, "(Holst)")
                )
            )
        );
    }

    with link = "point.de.Malente-Gremsmühlen" {
        with layer = 1 marker(:statdot, kieneu[:mal]);
        slabel(:right, kieneu[:mal + 2.0dt] << 1.2dt,
            "Bad Malente-G."
        );
    }

    with link = "point.de.Eutin" {
        with layer = 1 marker(:statdot, kieneu[:eut]);
        slabel(:left, kieneu[:eut + 2dt] >> 3.0dt, "Eutin");
    }

    with link = "point.de.Neustadt-Holst-Gbf" {
        with layer = 1 marker(:statdot, kieneu[:neg]);
    }

    with link = "point.de.Neustadt-Holst" {
        with layer = 1 marker(:statdot, kieneu[:nst]);
        slabel(:right, kieneu[:nst] + (0dt, 4dt),
            hbox(:left:base,
                "Neustadt ", span(:light, "(Holst)")
            )
        );
    }
}


# DE 1040
#
with detail = 2 {
    let neufle = path("simple.de.1040");

    with link = "line.de.1040" {
        track(:first :double :cat, neufle[:neu.ff, :fle]);
        with layer = 1 line_badge(:open, neufle[:oro - 10km], "1040");
        with layer = 1 line_badge(:open, neufle[:jub - 5.5km], "1040");
        with layer = 1 line_badge(:open, neufle[:flw - 8km], "1040");
    }

    with link = "point.de.Osterrönfeld" {
        with layer = 1 marker(:statdot, neufle[:oro]);
        label(neufle[:oro] + (2.0km, 0dt),
            hbox(:left:middle :small, "Osterrönfeld")
        );
    }

    with link = "point.de.Rendsburg" {
        with layer = 1 marker(:statdot, neufle[:ren]);
        label(neufle[:ren] + (-2dt, 1.0dt),
            hbox(:right:middle :small, "Rendsburg")
        );
    }

    with link = "point.de.Owschlag" {
        with layer = 1 marker(:statdot, neufle[:ows]);
        label(neufle[:ows] << 2dt,
            hbox(:right:middle :small, "Owschlag")
        );
    }

    with link = "point.de.Schleswig" {
        with layer = 1 marker(:statdot, neufle[:sle]);
        label(neufle[:sle] + (2.5dt, -0.5dt),
            hbox(:left:middle :small, "Schleswig")
        );
    }

    with link = "point.de.Jübek" {
        with layer = 1 marker(:statdot, neufle[:jub]);
        slabel(:right, neufle[:jub - 1dt] >> 2dt, "Jübek");
    }

    with link = "point.de.Flensburg-Weiche" {
        with layer = 1 marker(:statdot, neufle[:flw]);
        label(neufle[:flw] + (-2.0km, 0dt),
            hbox(:right:top :small, "F. Weiche")
        );
    }

    with link = "point.de.Flensburg" {
        with layer = 1 marker(:statdot, neufle[:fle]);
        with layer = 2 label(neufle[:fle] + (0dt, 1.7km),
            hbox(:left:top :small :frosted, "Flensburg")
        );
    }
}


# DE 1041
#
with detail = 2 {
    let neuasc = path("simple.de.1041");

    with link = "line.de.1041" {
        with layer = -1 track(:first :closed, neuasc[:neu.f, :asc]);
        with layer = 1 line_badge(:closed, neuasc[:wan - 5.0km], "1041");
    }

    with link = "point.de.Wankendorf" {
        with layer = 1 marker(:statdot :closed, neuasc[:wan]);
        label(neuasc[:wan + 2.5dt] >> 0.5dt,
            hbox(:left:top :small :closed, "Wankendorf")
        );
    }
}


# DE 1042
#
with detail = 2 {
    let neuhei = path("simple.de.1042");

    with link = "line.de.1042" {
        track(:second, neuhei[:neu.f, :hei.a]);
        with layer = 1 line_badge(:open, neuhei[:neu + 13.5km], "1042");
        with layer = 1 line_badge(:open, neuhei[:hei - 22.0km], "1042");
    }

    with link = "point.de.Hohenwestedt" {
        with layer = 1 marker(:statdot, neuhei[:hwe]);
        label(neuhei[:hwe + 1dt] << 1.5dt,
            vbox(:left:top :small,
                "Hohen-", "westedt"
            )
        );
    }
}


# DE 1043
#
with detail = 2 {
    let neuold = path("simple.de.1043");

    with link = "line.de.1043" {
        track(:first, neuold[:neu.a, :old.a]);
        with layer = 1 line_badge(:open, neuold[:seg - 10km], "1043");
    }

    with link = "point.de.Neumünster-Süd" {
        with layer = 1 marker(:statdot, neuold[:nes]);
    }

    with link = "point.de.Bad-Segeberg" {
        with layer = 1 marker(:statdot, neuold[:seg]);
        label(neuold[:seg - 1dt] >> 1.0dt,
            hbox(:right:top :small, "Bad Segeberg")
        );
    }
}

