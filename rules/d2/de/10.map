# Detail Level 2.
#
let altkie = path("path.de.1220");
let budhus = path("path.de.1012");
let eggsol = path("path.de.10112");
let flafhw = path("path.de.1003");
let flwfho = path("path.de.1002");
let flwhag = path("path.de.1000");
let hasfle = path("path.de.1020");
let haskiw = path("path.de.1021");
let jubhus = path("path.de.1011");
let kieneu = path("path.de.1023");
let kieost = path("path.de.1022");
let ohrklo = path("path.de.10111");
let ororen = path("path.de.10221");
let neuasc = path("path.de.1041");
let neufle = path("path.de.1040");
let neuold = path("path.de.1043");
let slesla = path("path.de.1010");
let suloro = path("path.de.10222");

with detail = 2 {
    with link = "line.de.1000" {
        track(:first :double :cat,
            neufle[:apad - 0.1dl, :apad] .. flwhag[:fri, :f]
        );
    }

    with link = "line.de.1001" {
        with layer = -1 track(:second :closed,
                neufle[:flin + .1dl, :flin]
            ..  path("path.de.1001")[:flw.f, :lin.aa]
        );
    }

    with link = "line.de.10021" {
        with layer = -1 track(:second :removed,
                hasfle[:mag, :mag + .1dt]
            ..  path("path.de.10021")[:mag.ff, :fsat]
        );
    }

    with link = "line.de.1002", layer = -1 {
        track(:second :closed,
               neufle[:afla - .1dl, :afla]
            .. flwfho[:fla - 1dl, :fla]
        );
        track(:station :closed, flwfho[:fla, :f]);
    }

    with link = "line.de.1003", layer = -1 {
        track(:station :closed,
                flwfho[:afhw - .1dl, :afhw]
            ..  flafhw[:a, :f]
        );
    }

    with link = "line.de.1005" {
        track(:first:cat,
                neufle[:fle, :afri]
             .. path("path.de.1005")[:fle.f, :fri.aa]
             .. flwhag[:fri - .1dl, :fri]
        );
    }

    with link = "line.de.1010" {
        with layer = -1 track(:second :removed,
                neufle[:asla - .1dl, :asla] >> 0.5dt
            ..  slesla[:a, :sla]
        );
    }

    with link = "line.de.10101" {
        with layer = -1 track(:first :gone,
                path("path.de.10101")[:a, :f]
            ..  slesla[:a - .1dl, :a]
        );
    }

    with link = "line.de.1011" {
        track(:second,
                neufle[:ahus - .1dl, :ahus]
            ..  jubhus[:a, :hus.a]
        );
    }

    with link = "line.de.10111" {
        with layer = -1 track(:first :gone,
                jubhus[:ohr + .1dl, :ohr]
            ..  ohrklo[:a, :f]
            ..  neufle[:klg, :klg - 1.dl]
        );
    }

    with link = "line.de.10112" {
        with layer = -1 track(:first :gone,
                neufle[:egg, :fohr]
            ..  eggsol[:a, :f]
            ..  jubhus[:sog, :sog + .1dl]
        );
    }

    with link = "line.de.1012" {
        track(:station,
                neufle[:bud, :bud + .1dl]
            ..  budhus[:a, :gen]
        );
        track(:second :removed, budhus[:gen, :f]);
    }

    with link = "line.de.1020" {
        track(:second,
                kieost[:afle - .1dl, :afle]
            ..  hasfle[:has.ff, :fle.aaa]
            ..  neufle[:afri, :afri - .1dl]
        );
    }

    with link = "line.de.1021" {
        with layer = -1 track(:second :removed,
                hasfle[:has.f, :has.f + .1dl]
            ..  haskiw[:a, :f]
        );
    }

    with link = "line.de.1022" {
        track(:first,
                kieost[:kie, :oro.aa]
            ..  neufle[:fkie, :fkie + .1dl]
        );
    }

    with link = "line.de.10221" {
        with layer = -1 track(:first :gone,
                neufle[:osh, :osh + .01dl]
            ..  ororen[:a, :f]
            ..  neufle[:fgla, :fgla + .01dl]
        );
    }

    with link = "line.de.10222" {
        with layer = -1 track(:first :gone,
                kieost[:aoro - .1dl, :aoro]
            ..  suloro[:a, :f - .2km]
            ..  ororen[:fkie, :fkie + .1dl]
        );
    }

    with link = "line.de.1023" {
        track(:first,
                altkie[:fasc + 0.1dl, :fasc]
            ..  kieneu[:kss.a, :mal]
        );
        track(:first :double, kieneu[:mal, :eut]);
        track(:first, kieneu[:eut, :alub]);
        with layer = -1 track(:second :removed, kieneu[:alub, :neg]);
        track(:first, kieneu[:neg, :nst]);
    }

    with link = "line.de.1040" {
        track(:first :double :cat, 
                altkie[:aren - 0.1dl, :aren]
            ..  neufle[:aa, :fle]
        );
    }

    with link = "line.de.1041" {
        with layer = -1 track(:first :closed,
                altkie[:aasc - 0.1dl, :aasc]
            ..  neuasc[:aa, :ff]
            ..  kieneu[:fneu, :fneu + 0.1dl]
        );
    }

    with link = "line.de.1042" {
        track(:second,
                altkie[:ahei - 0.1dl, :ahei]
            ..  path("path.de.1042")[:aa, :hei]
        );
    }

    with link = "line.de.1043" {
        track(:first,
                altkie[:neu.a, :neu.a - 0.1dl]
            ..  neuold[:aa, :f]
        );
    }
}

