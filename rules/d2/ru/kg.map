with detail = 2 {
    let kalmam = path("path.ru.kg.1");
    with link = "line.ru.kg.1" {
        track(:first :double,
            path("path.ru.kg.1")[:kal, :gr]
        );
    }

    with link = "point.ru.Калининград-Пассажирский" {
        slabel(:right, path("path.ru.kg.1")[:kal] >> 2pt,
            vbox(:left:bottom,
                span(:gone, "Königsberg"),
                span(:open, "Калининград")
            )
        );
    }
}

with detail = 2 {
    let kalter = path("path.ru.kg.2");

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:kal, :gr]);
    }

    with link = "point.ru.Черняховск" {
        slabel(:left, kalter[:tja - 1.5km] << 1.0dt,
            vbox(:center:bottom,
                span(:gone, "Insterburg"),
                span(:open, "Черняховск")
            )
        );
    }
}

with detail = 2 {
    let tjasow = path("path.ru.kg.3");

    with link = "line.ru.kg.3" {
        track(:first, tjasow[:a, :gr]);
    }

    with link = "point.ru.Советск" {
        slabel(:left, tjasow[:sow] << 1.0dt,
            vbox(:right:bottom,
                span(:gone, " Tilsit"),
                span(:open, "Советск")
            )
        );
    }
}

with detail = 2 {
    let kalbal = path("path.ru.kg.4");

    with link = "line.ru.kg.4" {
        track(:first, kalbal[:amam, :f]);
    }

    with link = "point.ru.Приморск-Новый" {
        slabel(:left, kalbal[:pri + 0.8ssw] >> 0.5dt,
            vbox(:center:bottom,
                span(:gone, "Fischhausen"),
                span(:open, "Приморск-Новый")
            )
        );
    }

    with link = "point.ru.Балтийск" {
        slabel(:left, kalbal[:bal + 0.5ssw] >> 1.0dt,
            vbox(:right:bottom,
                span(:gone, "Pillau Seestadt"),
                span(:open, "Балтийск")
            )
        );
    }

}

