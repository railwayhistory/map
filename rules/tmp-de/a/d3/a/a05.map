# DE A05.  Husum - Flensburg Weiche
#
let hf = path("d4.de.a05");

with detail = 3 {
    # point.de.Husum  de.1210

    with link = "line.de.A05" {
        track(:second :removed,
                path("d4.de.1210")[:hus - 1sw, :hus - 1.01sw] << 1.5dt
            ..  hf[:hus.aa, :hus.yf] << 1dt
            ..  hf[:hus.yyf + 0.5dt, :swe - 1sw]
        );
    }

    with link = "point.de.Schwesing-Nord" {
        track(:second:station :removed, hf[:swe - 1sw, :swe + 1sw]);
        marker(:right :de.hp :removed, hf[:swe]);
        slabel(:left :removed, hf[:swe - 1.5sw] << 0.5dt,
            vbox(:right:bottom, "Schwesing", "Nord")
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:swe + 1sw, :imm - 1sw]);
    }

    with link = "point.de.Immenstedt-Schlesw" {
        track(:second:station :removed, hf[:imm - 1sw, :imm + 1sw]);
        marker(:right :de.hp :removed, hf[:imm]);
        slabel(:right :removed, hf[:imm - 0.8sw] >> 2.0sh,
            vbox(:left:middle, "Immenstedt", span(:light, " (Schlesw)"))
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:imm + 1sw, :vio - 1sw]);
        line_label(:left:e :removed, hf[:imm + 1.7km], "A05");
    }

    with link = "point.de.Viöl" {
        track(:second:station :removed, hf[:vio - 1sw, :vio + 1sw]);
        marker(:right :de.hp :removed, hf[:vio]);
        slabel(:right :removed, hf[:vio - 0.4sw] >> 1.7sh, "Viöl");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:vio + 1sw, :has - 1sw]);
    }

    with link = "point.de.Haselund" {
        track(:second:station :removed, hf[:has - 1sw, :has + 1sw]);
        marker(:right :de.hp :removed, hf[:has]);
        slabel(:right :removed, hf[:has - 0.5sw] >> 1.5sh, "Haselund");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:has + 1sw, :low - 1sw]);
    }

    with link = "point.de.Löwenstedt" {
        track(:second:station :removed, hf[:low - 1sw, :low.yb]);
        track(:second:station :removed,
                hf[:low - 0.5sw - 1.1dl, :low - 0.5sw - 1dl]
            ..  hf[:low - 0.5sw, :low.yb] << 1dt
        );
        marker(:left :de.hp :removed, hf[:low] << 1dt);
        slabel(:right :removed :bold, hf[:low - 0.7sw] >> 1.3dt,
            "Löwenstedt"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:low.yb, :jol - 1sw]);
        line_label(:right:w :removed, hf[:jol - 1.5km], "A05");
    }

    with link = "point.de.Joldelund" {
        track(:second:station :removed, hf[:jol - 1sw, :jol + 1sw]);
        marker(:left :de.hp :removed, hf[:jol]);
        slabel(:left :removed, hf[:jol - 0.5sw] << 1.5sh, "Joldelund");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:jol + 1sw, :sil - 1sw]);
    }

    with link = "point.de.Sillerup" {
        track(:second:station :removed, hf[:sil - 1sw, :sil + 1sw]);
        marker(:left :de.hp :removed, hf[:sil]);
        slabel(:left :removed, hf[:sil - 0.7sw] << 1.2sh, "Sillerup");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:sil + 1sw, :gwi - 1sw]);
    }

    with link = "point.de.Großenwiehe" {
        track(:second:station :removed, hf[:gwi - 1sw, :gwi + 1sw]);
        marker(:left :de.hp :removed, hf[:gwi]);
        slabel(:top :removed, hf[:gwi] << 1.0sh, "Großenwiehe");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:gwi + 1sw, :wan - 1sw]);
    }

    with link = "point.de.Wanderup" {
        track(:second:station :removed, hf[:wan - 1sw, :wan + 1sw]);
        marker(:right :de.hp :removed, hf[:wan]);
        slabel(:bottom :removed, hf[:wan] >> 1.3sh, "Wanderup");
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:wan + 1sw, :hau - 1sw]);
    }

    with link = "point.de.Haurup" {
        track(:second:station :removed, hf[:hau - 1sw, :hau + 1sw]);
        marker(:right :de.hp :removed, hf[:hau]);
        slabel(:left :removed, hf[:hau - 0.7sw] << 1.3dt, "Haurup");
    }

    with link = "line.de.A05" {
        track(:second :removed,
                hf[:hau + 1sw, :flw.aal - 1.5sw]
            ..  hf[:flw.aal + 749m, :flw.aal + 750m] << 1.5dt
        );
        line_label(:left:e :removed, hf[:hau + 1.3km], "A05");
    }
}

