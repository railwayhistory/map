# IT AAT.  Alessandria - Acqui Terme
with detail = 2 {
    let aa = path("d2.it.aat");

    with link = "line.it.AAT" {
        track(:first :double :cat:dc30 :pax, aa[:ale.ya, :can]);
    }

    with link = "point.it.Cantalupo" {
        track(:first:station :double :cat:dc30 :pax, aa[:can, :can.yc]);
        statdot(:cat:dc30, aa[:can]);
        slabel(:left :cat:dc30, aa[:can] + (-0.5dt, -1.3dt), "Cantalupo");
    }

    with link = "line.it.AAT" {
        track(:first :cat:dc30 :pax, aa[:can.yc, :acq.ya]);
        line_label(:left:w :cat:dc30 :pax, aa[:can.yc + 11km], "AAT");
    }
}


# IT AAV.  Tranvia  Asti - Altavilla
with detail = 2 {
    let aa = path("d2.it.aav");

    with link = "line.it.AAV" {
        track(:tram :removed, aa[:ast.ya, :avi]);
        line_label(:right:w :tram :removed, aa[:ast.ya + 12km], "AAV");
    }

    with link = "point.it.Altavilla-Monferrato" {
        statdot(:tram :removed, aa[:avi]);
        slabel(:left :tram :removed, aa[:avi] + (-1.0dt, -0.3dt), "Altavilla");
    }
}


# IT ACA.  Tranvia  Asti - Canale d’Alba
with detail = 2 {
    let tc = path("d2.it.aca");

    with link = "line.it.ACA" {
        track(:tram :removed, tc[:ast.yt, :tor]);
        track(:tram :removed, tc[:tor, :can]);

        line_label(:right:e :tram :removed, tc[:can - 7km], "ACA");
    }

    with link = "point.it.Canale-Alba" {
        statdot(:tram :removed, tc[:can]);
        slabel(:left :tram :removed, tc[:can] + (-1.5dt, 0.8dt),
            "Canale d’Alba"
        );
    }
}


# IT ACM.  Tranvia  Alessandria - Casale Monferrato
with detail = 2 {
    let ac = path("d2.it.acm");

    with link = "line.it.ACM" {
        track(:tram :removed, ac[:ale.yv, :cam]);
        track(:tram :removed, ac[:cam, :cas]);

        line_label(:left:ne :tram :removed, ac[:cam - 8km], "ACM");
    }

    with link = "point.it.Casale-Monferrato-Tranvia" {
        statdot(:tram :removed, ac[:cas]);
    }
}


# IT ACV.  Asti - Chivasso
with detail = 2 {
    let ac = path("d2.it.acv");

    with link = "line.it.ACV" {
        track(:first :museum, ac[:ast.yb, :chi.ya]);
        line_label(:left:ne :museum, ac[:chi.ya - 22km], "ACV");
    }
}


# IT ALA.  Tranvia  Alessandria - Altavilla Monferrato
with detail = 2 {
    let aa = path("d2.it.ala");

    with link = "line.it.ALA" {
        track(:tram :removed, aa[:ale.yv, :avi]);
        line_label(:left:n :tram :removed, aa[:avi - 8km], "ALA");
    }
}


# IT ALO.  Alessandria - Ovada
with detail = 2 {
    let ao = path("d2.it.alo");

    with link = "line.it.ALO" {
        track(:first :cat:dc30, ao[:ale.yo, :ova.ya]);
        line_label(:right:e :cat:dc30, ao[:ova.ya - 12km], "ALO");
    }
}


# IT ALS.  Tranvia  Alessandria - Sale
with detail = 2 {
    let as = path("d2.it.als");

    with link = "line.it.ALS" {
        track(:tram :removed, as[:ale, :mar]);
    }

    with link = "point.it.Marengo" {
        statdot(:tram :removed, as[:mar]);
    }

    with link = "line.it.ALS" {
        track(:tram :removed, as[:mar, :sal]);
        line_label(:left:e :tram :removed, as[:sal - 6km], "ALS");
    }

    with link = "point.it.Sale" {
        statdot(:tram :removed, as[:sal]);
        slabel(:top :tram :removed, as[:sal] + (0dt, -0.8dt), "Sale");
    }
}


# IT ANA.  Alessandria - Novara - Arona
with detail = 2 {
    let aa = path("d2.it.ana");

    with link = "line.it.ANA" {
        track(:first :double :cat:dc30 :pax, aa[:ale.yn, :val]);
        line_label(:right:w :double :cat:dc30 :pax, aa[:ale.yn + 6km], "ANA");
    }

    with link = "point.it.Valenza" {
        track(:first:station :double :cat:dc30 :pax, aa[:val, :val.yv]);
        statdot(:cat:dc30 :pax, aa[:val]);
        slabel(:right :cat:dc30 :pax, aa[:val] + (1.5dt, 0.8dt), "Valenza");
    }

    with link = "line.it.ANA" {
        track(:first :double :cat:dc30 :pax, aa[:val.yv, :tor]);
    }

    with link = "point.it.Torreberetti" {
        statdot(:cat:dc30 :pax, aa[:tor]);
        slabel(:right :cat:dc30 :pax, aa[:tor] + (1.0dt, 0dt),
            hbox(:left:top, "Torreberetti")
        );
    }

    with link = "line.it.ANA" {
        track(:first :double :cat:dc30 :pax, aa[:tor, :mor.ya]);
        line_label(:right:w :double :cat:dc30 :pax, aa[:mor.ya - 10km], "ANA");
    }

    with link = "point.it.Mortara" {
        track(:first:station :double :cat:dc30 :pax, aa[:mor.ya, :mor.ym]);
        statdot(:cat:dc30 :pax, aa[:mor]);
        slabel(:left :cat:dc30 :pax, aa[:mor] + (-1.5dt, 0.8dt), "Mortara");
    }

    with link = "line.it.ANA" {
        track(:first :double :cat:dc30 :pax, aa[:mor.ya, :nov.ym]);
        line_label(:right:w :double :cat:dc30 :pax, aa[:nov.ym - 10km], "ANA");
    }

    # point.it.Novara: it.TR

    with link = "line.it.ANA" {
        track(:first :double :cat:dc30 :pax, aa[:nov.ya, :vig]);
    }

    with link = "point.it.Vignale" {
        track(:first:station :double :cat:dc30 :pax, aa[:vig, :vig.yd]);
        statdot(:cat:dc30 :pax, aa[:vig]);
        slabel(:right :cat:dc30 :pax, aa[:vig] + (1.5dt, -0.8dt), "Vignale");
    }

    with link = "line.it.ANA" {
        track(:first :cat:dc30 :pax, aa[:vig.yd, :ole]);
        line_label(:right:w :cat:dc30 :pax, aa[:vig.yd + 7km], "ANA");
    }

    with link = "point.it.Oleggio" {
        statdot(:cat:dc30 :pax, aa[:ole]);
        slabel(:right :cat:dc30 :pax, aa[:ole] + (1.5dt, 0.8dt), "Oleggio");
    }

    with link = "line.it.ANA" {
        track(:first :cat:dc30 :pax, aa[:ole, :aro.yn]);
        line_label(:left:e :cat:dc30 :pax, aa[:ole + 5km], "ANA");
    }
}


# IT API.  Alessandria - Piacenza
with detail = 2 {
    let ap = path("d2.it.1.api");

    with link = "line.it.API" {
        track(:first :double :cat:dc30 :pax, ap[:ale.yt, :tor.yn]);
        track(:first :double :cat:dc30 :pax, ap[:tor.yn, :tor.ya]);

        line_badge(:cat:dc30 :pax, ap[:ale.yt + 11km], "API");
    }

    with link = "point.it.Tortona" {
        track(:first:station :double :cat:dc30 :pax, ap[:tor.ya, :tor]);
        statdot(:cat:dc30 :pax, ap[:tor]);
        slabel(:right :cat:dc30 :pax, ap[:tor] + (0.3dt, 0.8dt),
            hbox(:left:top, "Tortona")
        );
    }

    with link = "line.it.API" {
        track(:first :double :cat:dc30 :pax, ap[:tor, :vog]);

        line_badge(:cat:dc30 :pax, ap[:tor + 7km], "API");
    }
}


# IT ARD.  Arona - Domodossola
with detail = 2 {
    let ad = path("d2.it.ard");

    with link = "line.it.ARD" {
        track(:first :double :cat:dc30 :pax, ad[:aro, :str]);
        line_label(:left:se :double :cat:dc30 :pax, ad[:aro + 7km], "ARD");
    }

    with link = "point.it.Stresa" {
        statdot(:cat:dc30 :pax, ad[:str]);
        slabel(:right :cat:dc30 :pax, ad[:str] + (-0.8dt, -1.5dt), "Stresa");
    }

    with link = "line.it.ARD" {
        track(:first :double :cat:dc30 :pax, ad[:str, :cuz.yn]);
        track(:first :double :cat:dc30 :pax, ad[:cuz.yn, :dom.yn]);

        line_label(:right:s :double :cat:dc30 :pax, ad[:cuz + 3km], "ARD");
    }

    with link = "point.it.Domodossola" {
        track(:first:station :double :cat:dc30 :pax, ad[:dom.yn, :dom]);
        statdot(:cat:dc30 :pax, ad[:dom]);
        slabel(:left :cat:dc30 :pax, ad[:dom] + (-1.5dt, 0.8dt),
            span(:bold, "Domodossola")
        );
    }
}


# IT ASL.  Airasca - Saluzzo
with detail = 2 {
    let as = path("d2.it.asl");

    with link = "line.it.ASL" {
        track(:first :removed, as[:air.ys, :mor]);
        line_label(:left:w :removed, as[:air.ys + 7km], "ASL");
    }

    with link = "point.it.Moretta" {
        statdot(:removed, as[:mor]);
        slabel(:left :removed, as[:mor] + (-1.6dt, 1.3dt), "Moretta");
    }

    with link = "line.it.ASL" {
        track(:first :removed, as[:mor, :sal.ya]);
        line_label(:right:e :removed, as[:mor + 5km], "ASL");
    }
}


# IT AVC.  Tranvia  Altavilla Monferrato - Casale Monferrato
with detail = 2 {
    let ac = path("d2.it.avc");

    with link = "line.it.AVC" {
        track(:tram :removed, ac[:avi, :cam]);
        line_label(:left:se :tram :removed, ac[:avi + 8km], "AVC");
    }
}

