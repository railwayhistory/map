# IT SAR.  Santhià - Arona
with detail = 2 {
    let sa = path("d2.it.sar");

    with link = "line.it.SAR" {
        track(:first, sa[:san.ya, :rov]);
        track(:first, sa[:rov, :rom.ys]);
        track(:first, sa[:rom.ya, :bor.ys]);
        track(:first, sa[:bor.ya, :aro.ys]);

        line_badge(:open, sa[:rov - 7km], "SAR");
        line_label(:right:w, sa[:rom.ya + 5km], "SAR");
        line_label(:left:s, sa[:bor.ya + 4km], "SAR");
    }
}


# IT SCM.  Savona - Ceva
with detail = 2 {
    let sc = path("d2.it.scm");

    with link = "line.it.SCM" {
        track(:first :cat:dc30 :pax, sc[:sav.yc, :sgi.ys]);
        line_label(:right:s :cat:dc30 :pax, sc[:sav.yc + 7.5km], "SCM");
    }

    with link = "point.it.S-Giuseppe-di-Cairo" {
        track(:first:station :cat:dc30 :pax, sc[:sgi.ys, :sgi.ya]);
        statdot(:cat:dc30 :pax, sc[:sgi]);
        slabel(:right :cat:dc30 :pax, sc[:sgi] + (0dt, -1.5dt),
            vbox(:left:bottom, " S. Giuseppe", "di Cairo")
        );
    }

    with link = "line.it.SCM" {
        track(:first :cat:dc30 :pax, sc[:sgi.ya, :cev.yo]);
        line_label(:left:n :cat:dc30 :pax, sc[:sgi.ya + 8.9km], "SCM");
    }

    with link = "point.it.Ceva" {
        track(:first:station :double :cat:dc30 :pax, sc[:cev.yo, :cev.yf]);
        statdot(:cat:dc30 :pax, sc[:cev]);
        slabel(:left :cat:dc30 :pax, sc[:cev] + (-0.5dt, 0dt),
            hbox(:right:top, "Ceva")
        );
    }

    with link = "line.it.SCM" {
        track(:first :removed, sc[:cev.yf, :bas]);
        line_label(:left:n :removed, sc[:bas - 3.7km], "SCM ");
    }

    with link = "point.it.Bastia-Mondovì" {
        track(:first:station :removed, sc[:bas, :bas.ym]);
        statdot(:removed, sc[:bas]);
        slabel(:right :removed, sc[:bas] + (1.3dt, -0.3dt), "Bastia Mondovì");
    }

    with link = "line.it.SCM" {
        track(:first :removed, sc[:bas.ym, :mon]);
        line_label(:right:w :removed, sc[:bas.ym + 7km], "SCM");
    }

    with link = "point.it.Monchiero-Dogliani" {
        statdot(:removed, sc[:mon]);
        slabel(:left :removed, sc[:mon] + (-1.8dt, 1.0dt),
            vbox(:right:middle, "Monchiero-", "Dogliani ")
        );
    }

    with link = "line.it.SCM" {
        track(:first :removed, sc[:mon, :che]);
    }

    with link = "point.it.Cherasco" {
        statdot(:first, sc[:che]);
        slabel(:right, sc[:che] + (1.5dt, 0.8dt), "Cherasco");
    }

    with link = "line.it.SCM" {
        track(:first, sc[:che, :bra.ys]);
    }

    with link = "line.it.SCM" {
        track(:first :cat:dc30 :pax, sc[:bra.yc, :car.yb]);
        line_badge(:cat:dc30 :pax, sc[:bra.yc + 8.5km], "SCM");
    }
}


# IT SGC.  Savona - Altare - S. Giuseppe di Cairo
with detail = 2 {
    let sg = path("d2.it.sgc");

    with link = "line.it.SGC" {
        track(:first :cat:dc30 :pax, sg[:sav.yc, :sgi.ys]);
        line_label(:left:n :cat:dc30 :pax, sg[:sgi.ys - 6km], "SGC");
    }
}


# IT SLC.  Tranvia  Saluzzo - Cuneo
with detail = 2 {
    let sc = path("d2.it.slc");

    with link = "line.it.SLC" {
        track(:tram :removed, sc[:sal, :cos]);
        line_label(:right:e :tram :removed, sc[:sal + 5km], "SLC");
    }

    with link = "point.it.Costigliole" {
        statdot(:tram :removed, sc[:cos]);
        slabel(:right :tram :removed, sc[:cos] + (1.5dt, -0.3dt),
            "Costigliole"
        );
    }

    with link = "line.it.SLC" {
        track(:tram :removed, sc[:cos, :cun]);
        line_label(:right:e :tram :removed, sc[:cun - 10km], "SLC");
    }
}


# IT SLP.  Tranvia  Saluzzo - Pinerolo
with detail = 2 {
    let sp = path("d2.it.slp");

    with link = "line.it.SLP" {
        track(:tram :removed, sp[:sal.yp, :pin]);
        line_label(:right:w :tram :removed, sp[:pin - 9km], "SLP");
    }

    with link = "point.it.Pinerolo-Traniva" {
        statdot(:tram :removed, sp[:pin]);
    }
}



# IT SPC.  Settimo Torinese - Pont Canavese
with detail = 2 {
    let sr = path("d2.it.spc.1");
    let rp = path("d2.it.spc.2");

    with link = "line.it.SPC" {
        track(:first :cat:dc30 :pax, sr[:set.yp, :vol]);
    }

    with link = "point.it.Volpiano" {
        statdot(:cat:dc30 :pax, sr[:vol]);
        slabel(:left :cat:dc30 :pax, sr[:vol] + (-1.5dt, 0dt), "Volpiano");
    }

    with link = "line.it.SPC" {
        track(:first :cat:dc30 :pax, sr[:vol, :riv]);
        line_badge(:cat:dc30 :pax, sr[:vol + 8km], "SPC");
    }

    with link = "point.it.Rivarolo" {
        statdot(:cat:dc30 :pax, sr[:riv]);
        slabel(:right :cat:dc30 :pax, sr[:riv] + (1.8dt, 1.3dt), "Rivarolo");
    }

    with link = "line.it.SPC" {
        track(:first :pax, rp[:riv.yp, :pca]);
        line_label(:left:e :pax, rp[:pca - 7.7km], "SPC");
    }

    with link = "point.it.Pont-Canavese" {
        statdot(:pax, rp[:pca]);
        slabel(:top :pax, rp[:pca] + (0dt, -0.8dt), "Pont Canavese");
    }
}


# IT SRM.  Stresa FSM - Mottarone
with detail = 2 {
    let sm = path("d2.it.srm");

    with link = "line.it.SRM" {
        track(:first :narrow:g1000 :removed, sm[:str.ym, :mot]);

        line_label(:right:s :removed, sm[:mot - 0.8km], "SRM");
    }

    with link = "point.it.Mottarone" {
        statdot(:removed, sm[:mot]);
        slabel(:bottom :removed, sm[:mot] + (3.5dt, 1.5km), "Mottarone");
    }
}


# IT SRP.  Tranvia  Saluzzo - Revello - Paesana
with detail = 2 {
    let sp = path("d2.it.srp");

    with link = "line.it.SRP" {
        track(:tram :removed, sp[:sal, :rev]);
    }

    with link = "point.it.Revello" {
        statdot(:tram :removed, sp[:rev]);
        slabel(:right :tram :removed, sp[:rev] + (0.3dt, -1.3dt), "Revello");
    }

    with link = "line.it.SRP" {
        track(:tram :removed, sp[:rev, :pae]);
        line_label(:left:n :tram :removed, sp[:rev + 3km], "SRP");
    }

    with link = "point.it.Paesana-Santa-Maria" {
        statdot(:tram :removed, sp[:pae]);
        slabel(:left :tram :removed, sp[:pae] + (-1.5dt, 0.8dt), "Paesana");
    }
}


# IT STB.  Santhià - Biella
with detail = 2 {
    let sb = path("d2.it.stb");

    with link = "line.it.STB" {
        track(:first :cat:dc30 :pax, sb[:san.yb, :can.yb]);
        track(:first :removed, sb[:can.yb, :bie]);

        line_label(:left:e :cat:dc30 :pax, sb[:san.yb + 11km], "STB");
    }

    with link = "point.it.Biella" {
        statdot(:removed, sb[:bie]);
    }
}


# IT SUP.  Tranvia  Sassi - Superga
with detail = 2 {
    let su = path("d2.it.sup");

    with link = "point.it.Sassi-GTT" {
        statdot(:tram :cat:dc6 :pax, su[:sas]);
    }

    with link = "line.it.SUP" {
        track(:tram :cat:dc6 :pax, su[:sas, :sup]);
    }

    with link = "point.it.Superga" {
        statdot(:tram :cat:dc6 :pax, su[:sup]);
        slabel(:right :tram :cat:dc6 :pax, su[:sup] + (1.5dt, 0.8dt),
            "Superga"
        );
    }
}


# IT SVS.  Savigliano - Saluzzo
with detail = 2 {
    let sl = path("d2.it.svs");

    with link = "line.it.SVS" {
        track(:first :pax, sl[:sav.ys, :sal.ya]);
        line_badge(:pax, sl[:sav.ys + 7km], "SVS");
    }

    with link = "point.it.Saluzzo" {
        track(:first:station :pax, sl[:sal.ya, :sal]);
        statdot(:pax, sl[:sal]);
        slabel(:left :pax, sl[:sal] + (-1.8dt, 2.0dt), "Saluzzo");
    }
}

