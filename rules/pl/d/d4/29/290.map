# PL 290.  Mikułowa - Granica Państwa (Krzewina Zgorzelecka)
#
let mk = path("d3.pl.290");

with detail = 4,
    railway = :second :nopax
{
    # point.pl.Mikułowa                           pl.274

    with link = "line.pl.290" {
        track(:ror :removed, mk[:mik.yb, :mik.yb + 0.32km]);
        line_label(:left:nw :removed, mk[:mik.yb + 0.32km] << 0.5mt, "290");
        track(:ror :removed, mk[:mik.yb + 0.32km, :las]);
    }

    with link = "point.pl.Las", railway = :station {
        marker(:left :de.abzw :removed, mk[:las] << 0.5mt);
        station(:right:left_align :removed,
            mk[:las] << 0.5mt << 1sh + (1.3dt, 1.8dt),
            span(:small :bold, "Las"),
            hbox(:center:top,
                vbox(:right:top, "779: ", "290: "),
                vbox(:sep:top,
                    hbox(:sep:base, "0,", anchor(), "987"),
                    hbox(:sep:base, "0,", anchor(), "850")
                )
            )
        );
    }

    with link = "line.pl.290" {
        track(mk[:las, :sul - 0.5sw]);
    }

    with link = "point.pl.Sulików", railway = :station {
        track(mk[:sul - 0.5sw, :sul + 0.5sw]);
        marker(:left :de.gbf, mk[:sul] << 0.5mt);
        station(:right, mk[:sul] << 0.5mt << 1sh + (1.5dt, 1.8dt),
            "Sulików", "290: 3,373"
        );
    }

    with link = "line.pl.290" {
        track(:second, mk[:sul + 0.5sw, :sul + 1.8km]);
        line_label(:left:nw, mk[:sul + 1.8km] << 0.5mt, "290");
        track(:second, mk[:sul + 1.8km, :wil]);
    }

    with link = "point.pl.Wilka", railway = :station {
        marker(:left :de.abzw, mk[:wil] << 0.5mt);
        station(:right:left_align, mk[:wil] << 0.5mt << 1sh + (1.3dt, 1.8dt),
            span(:small :bold, "Wilka"),
            hbox(:center:top,
                vbox(:right:top, "290: ", "344: "),
                vbox(:sep:top,
                    hbox(:sep:base, "8,", anchor(), "333"),
                    hbox(:sep:base, "0,", anchor(), "096")
                )
            )
        );
    }

    with link = "line.pl.290" {
        track(mk[:wil, :wi1]);
    }

    with link = "point.pl.Wilka-1", railway = :station {
        marker(:left :de.abzw :removed, mk[:wi1] << 0.5mt);
        station(:left :removed,
            mk[:wi1] << 0.5mt << 1sh + (-1.3dt, 1dt),
            span(:small :bold, "Wilka 1"),
            hbox(:center:top,
                vbox(:right:top, "290: ", "780: "),
                vbox(:sep:top,
                    hbox(:sep:base, "8,", anchor(), "985"),
                    hbox(:sep:base, "0,", anchor(), "890")
                )
            )
        );
    }

    with link = "line.pl.290" {
        track(mk[:wi1, :wi1 + 1.1km]);
        line_label(:right:s, mk[:wi1 + 1.1km] >> 0.5mt, (0.8dt, 0dt), "290");
        track(mk[:wi1 + 1.1km, :wi3]);
        track(mk[:wi3, :rad - 0.5sw]);
    }

    with link = "point.pl.Radomierzyce", railway = :station {
        track(mk[:rad - 0.5sw, :rad + 0.5sw]);
        marker(:right :de.hp :removed, mk[:rad] >> 0.5mt);
        station(:left :removed, mk[:rad] >> 0.5mt >> 1sh + (-1.5dt, 0.5dt),
            "Radomierzyce", "290: 12,392"
        );
    }

    with link = "line.pl.290" {
        track(:second, mk[:rad + 0.5sw, :rec]);
    }
}

with detail = 4,
    railway = :second :pax
{
    with link = "point.pl.Ręczyn", railway = :station {
        marker(:right :de.abzw :nopax, mk[:rec] >> 0.5mt);
        station(:left:right_align :nopax,
            mk[:rec] >> 0.5mt >> 1sh + (-1.3dt, 1dt),
            span(:small :bold, "Ręczyn"),
            hbox(:center:top,
                vbox(:right:top, "324: ", "290: "),
                vbox(:sep:top,
                    hbox(:sep:base, "0,", anchor(), "001"),
                    hbox(:sep:base, "14,", anchor(), "400")
                )
            )
        );
    }

    with link = "line.pl.290" {
        track(mk[:rec, :rec + 1.5km]);
        line_label(:left:nw, mk[:rec + 1.5km] << 0.5mt, "290");
        track(mk[:rec + 1.5km, :krz - 0.5sw]);
    }

    with link = "point.pl.Krzewina-Zgorzelecka", railway = :station {
        track(mk[:krz - 0.5sw, :krz + 0.5sw]);
        marker(:right :de.bf :pax, mk[:krz] >> 0.5mt);
        station(:left :pax, mk[:krz] >> 0.5mt >> 1sh + (-1.3dt, 0.8dt),
            "Krzewina Zgorzelecka", "290: 17,514"
        );
    }

    with link = "line.pl.290" {
        track(mk[:krz + 0.5sw, :bra - 0.5sw]);
    }

    with link = "point.pl.Bratków-Zgorzelecki", railway = :station {
        track(mk[:bra - 1sw, :bra + 1sw]);
        marker(:right :de.hp :removed, mk[:bra] >> 0.5mt);
        station(:left :removed, mk[:bra] >> 0.5mt >> 1sh + (-1.2dt, 0.9dt),
            "Bratków Zgorzelecki", "290: 19,704"
        );
    }

    with link = "line.pl.290" {
        track(mk[:bra + 0.5sw, :bra + 2.8km]);
        line_label(:left:w, mk[:bra + 2.8km] << 0.5mt, "290");
        track(mk[:bra + 2.8km, :gkr - 0.3sw]);
    }

    with link = "point.int.Krzewina-Zgorzelecka-Rosenthal", railway = :station {
        track(mk[:gkr - 0.3sw, :gkr + 0.3sw]);
        marker(:left :de.dirgr :pax, mk[:gkr] << 0.5mt);
        marker(:right :de.dirgr :pax, mk[:gkr] >> 0.5mt);
        label(mk[:gkr] >> 0.5mt >> 1.3sh,
            hbox(:right:base :xsmall,
                vbox(:left:middle,
                    " PL ", hrule(), " DE "
                ),
                vbox(:right:middle,
                    "290: ", hrule(), "6589: "
                ),
                vbox(:sep:middle,
                    hbox(:sep:base, "24,", anchor(), "746"),
                    hrule(),
                    hbox(:sep:base, "10,", anchor(), "027")
                )
            )
        );
    }

    with link = "point.de.Rosenthal", railway = :station {
        track(mk[:gkr + 0.3sw, :ros + 0.5sw]);
        marker(:left :de.hp :removed, mk[:ros] << 0.5mt);
        station(:right :removed, mk[:ros] << 0.5mt << 1sh + (1.3dt, 0dt),
            "Rosenthal", "DE 6589: 9,96"
        );
    }

    with link = "line.de.6589" {
        track(mk[:ros + 0.5sw, :gtr - 0.3sw]);
    }

    with link = "point.int.Rosenthal-Trzciniec-Zgorzelecki",
         railway = :station
    {
        track(mk[:gkr + 0.3sw, :gtr + 0.3sw]);
        marker(:left :de.dirgr, mk[:gtr] << 0.5mt);
        marker(:right :de.dirgr, mk[:gtr] >> 0.5mt);
        label(mk[:gtr] << 0.5mt << 1.2sh + (0.3dt, -1dt),
            hbox(:left:top :xsmall,
                vbox(:left:top, "DE ", hrule(), "PL "),
                vbox(:right:top, " 6589: ", hrule(), "786: "),
                vbox(:sep:top,
                    hbox(:sep:base, "9,", anchor(), "768"),
                    hrule(),
                    hbox(:sep:base, "24,", anchor(), "991")
                )
            )
        );
    }
}

