# PL KBN.  Krotoszyn Wąskotorowy – Broniszewice
with detail = 2 {
    let kb = path("d2.pl.kbn");

    with railway = :third :narrower:g750 :removed {
        with link = "line.pl.KBN" {
            track(kb[:kro.yb, :ple]);
            with zoom = :high line_label(:right:nw, kb[:kro.yb + 15km], "KBN");
        }
    }

    with railway = :second :narrower:g750 :pax {
        with link = "line.pl.KBN" {
            track(kb[:ple, :plm]);
        }

        with link = "point.pl.Pleszew-Miasto" {
            statdot(kb[:plm]);
        }
    }

    with railway = :second :narrower:g750 :nopax {
        with link = "line.pl.KBN" {
            track(kb[:plm, :plw]);
        }

        with link = "point.pl.Pleszew-Wschód" {
            statdot(kb[:plw]);
        }
    }

    with railway = :third :narrower:g750 :removed {
        with link = "line.pl.KBN" {
            track(kb[:plw, :bro]);
            line_label(:right:w, kb[:bro - 3.5km], "KBN");
        }

        with link = "point.pl.Broniszewice" {
            with zoom = :high {
                statdot(kb[:bro]);
                slabel(:top, kb[:bro] + (0dt, -0.7dt), "Broniszewice");
            }
        }
    }
}


# PL KKE.  Krerowo - Kleszczewo Wielkopolskie
with detail = 2 {
    let ke = path("d2.pl.kke");

    with railway = :third :narrower:g750 :removed {
        with link = "line.pl.KKE" {
            track(ke[:kre.ye, :kle]);
        }

        with link = "point.pl.Kleszczewo-Wielkopolskie" {
            with zoom = :high {
                statdot(ke[:kle]);
                slabel(:right, ke[:kle] + (-2.5dt, -0.7dt),
                    vbox(:left:bottom, "Klesz-", "czewo", "Wlkp.")
                );
            }
        }
    }
}


# PL KKO.  Krerowo - Klony
with detail = 2 {
    let ko = path("d2.pl.kko");

    with railway = :third :narrower:g750 :removed {
        with link = "line.pl.KKO" {
            track(ko[:kre, :kre.ye]);
            track(ko[:kre.ye, :klo]);
            with zoom = :high line_label(:right:nw, ko[:klo - 2.25km], "KKO");
        }

        with link = "point.pl.Klony" {
            with zoom = :high {
                statdot(ko[:klo]);
                slabel(:right, ko[:klo] + (1.5dt, 0.8dt), "Klony");
            }
        }
    }
}


# PL KRL.  Krzelów - Leszno Dworzec Mały
with detail = 2 {
    let kl = path("d2.pl.p.krl");

    with railway = :third :removed {
        with link = "line.pl.KRL" {
            track(kl[:rax, :gor.yk]);
            line_label(:right:w, kl[:rax + 1km], "KRL");
            line_label(:left:se, kl[:gor.yk - 6.2km], "KRL");

            track(kl[:sla.yl, :les.yk]);
            line_label(:left:e, kl[:sla.yl + 7km], "KRL");
        }
    }
}


