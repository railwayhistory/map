# RU KG 2.  Калининград-Пассажирский - Чернышевское
#
let kalter = path("path.ru.kg.2");

with detail = 3 {
    with link = "line.ru.kg.2" {
        track(:first, kalter[:kal + 1ssw, :aiw - 1ssw] << 0.5dt);
        track(:first :removed, kalter[:kal + 1ssw, :wos] >> 0.5dt);
        track(:first, kalter[:wos, :aiw - 1ssw] >> 0.5dt);
    }


    with link = "point.ru.Айвазовский" {
        track(:first:station :double, kalter[:aiw - 1ssw, :aiw + 1ssw]);
        marker(:de.hp :right, kalter[:aiw] >> 0.5dt);
        slabel(:right, kalter[:aiw - 0.3ssw] << 1.5dt,
            "Айвазовский"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:aiw + 1ssw, :lug - 1ssw]);
    }


    with link = "point.ru.Луговое-Новое" {
        track(:first:station :double, kalter[:lug - 1ssw, :lug + 1ssw]);
        marker(:de.bf :right, kalter[:lug] >> 0.5dt);
        slabel(:left, kalter[:lug + 0.5sw] >> 0.5dt >> 2.2ssw,
            "Луговое Новое"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:lug + 1ssw, :op1271 - 1ssw]);
    }


    with link = "point.ru.Оп-1271-км" {
        track(:first:station :double, kalter[:op1271 - 1ssw, :op1271 + 1ssw]);
        marker(:de.hp :left, kalter[:op1271] << 0.5dt);
        slabel(:top, kalter[:op1271] << 0.5dt << 1.4ssw,
            "1271 км"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1271 + 1ssw, :kom - 1ssw]);
    }

    with link = "point.ru.Комсомольск-Западный" {
        track(:first:station :double, kalter[:kom - 1ssw, :kom + 1ssw]);
        marker(:de.hp :left, kalter[:kom] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, kalter[:kom] << 0.5dt);
        slabel(:right, kalter[:kom - 1ssw] << 0.5dt << 1.0ssw,
            vbox(:left:bottom :bold,
                span(:gone, "Löwenhagen"),
                span(:open, "Комсомольск"),
                span(:open, "Западный")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:kom + 1ssw, :ose - 1ssw]);
    }


    with link = "point.ru.Озерки-Новые" {
        track(:first:station :double, kalter[:ose - 1ssw, :ose + 1ssw]);
        marker(:de.bf :left, kalter[:ose] << 0.5dt);
        slabel(:top, kalter[:ose] << 0.5dt << 1.4ssw,
            vbox(:center:bottom,
                span(:open, "Озерки"),
                span(:open, "Новые")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:ose + 1ssw, :op1252 - 1ssw]);
    }


    with link = "point.ru.Оп-1252-км" {
        track(:first:station :double, kalter[:op1252 - 1ssw, :op1252 + 1ssw]);
        marker(:de.hp :left, kalter[:op1252] << 0.5dt);
        slabel(:top, kalter[:op1252] << 0.5dt << 1.3ssw,
            "1252 км"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1252 + 1ssw, :gwa - 1ssw]);
    }

    with link = "point.ru.Гвардейск" {
        track(:first:station :double, kalter[:gwa - 1ssw, :gwa + 1ssw]);
        marker(:de.bf :left, kalter[:gwa] << 0.5dt);
        slabel(:top, kalter[:gwa] << 0.5dt << 1.3ssw,
            span(:bold, "Гвардейск")
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:gwa + 1ssw, :sna - 1ssw]);
        with layer = 1 line_badge(:open, kalter[:gwa + 5.0km], "КГ 2");
    }

    with link = "point.ru.Знаменск" {
        track(:first:station :double, kalter[:sna - 1ssw, :sna + 1ssw]);
        marker(:de.bf :left, kalter[:sna] << 0.5dt);
        slabel(:top, kalter[:sna] << 0.5dt << 1.2ssw,
            vbox(:center:bottom :bold,
                span(:gone, "Wehlau"),
                span(:open, "Знаменск")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:sna + 1ssw, :pus - 1ssw]);
    }

    with link = "point.ru.Пушкарёво" {
        track(:first:station :double, kalter[:pus - 1ssw, :pus + 1ssw]);
        marker(:de.hp :left, kalter[:pus] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, kalter[:pus] << 0.5dt);
        slabel(:top, kalter[:pus] << 0.5dt << 1.2ssw, "Пушкарёво");
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pus + 1ssw, :mot - 1ssw]);
    }

    with link = "point.ru.Моторное" {
        track(:first:station :double, kalter[:mot - 1ssw, :mot + 1ssw]);
        with layer = -1 marker(:de.hp :removed :left, kalter[:mot] << 0.5dt);
        slabel(:top :removed, kalter[:mot] << 0.5dt << 1.2ssw, "Моторное");
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:mot + 1ssw, :mes - 1ssw]);
    }

    with link = "point.ru.Междуречье" {
        track(:first:station :double, kalter[:mes - 1ssw, :mes + 1ssw]);
        marker(:de.bf :left, kalter[:mes] << 0.5dt);
        slabel(:top, kalter[:mes] << 0.5dt << 1.2ssw, "Междуречье");
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:mes + 1ssw, :pas - 1ssw]);
    }

    with link = "point.ru.Пастухово" {
        track(:first:station :double, kalter[:pas - 1ssw, :pas + 1ssw]);
        marker(:de.bf :right, kalter[:pas] >> 0.5dt);
        slabel(:bottom, kalter[:pas] >> 0.5dt >> 1.2ssw, "Пастухово");
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pas + 1ssw, :tja - 1ssw]);
        with layer = 1 line_badge(:open, kalter[:pas + 6km], "КГ 2");
    }

    with link = "point.ru.Черняховск" {
        track(:first:station :double, kalter[:tja - 1sw, :tja + 1ssw]);
        marker(:de.bf :left, kalter[:tja] << 0.5dt);
        slabel(:top, kalter[:tja] << 0.5dt << 1.6ssw,
            vbox(:center:bottom :bold,
                span(:gone, "Insterburg"),
                span(:open, "Черняховск")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:tja + 1ssw, :pen - 1ssw]);
    }

    with link = "point.ru.Pendershof" {
        track(:first:station :double, kalter[:pen - 1sw, :pen + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalter[:pen] >> 0.5dt);
        slabel(:bottom :removed, kalter[:pen] >> 0.5dt >> 1.2ssw,
            "Pendershof"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pen + 1ssw, :wes - 1ssw]);
    }

    with link = "point.ru.Веселовка" {
        track(:first:station :double, kalter[:wes - 1ssw, :wes + 1ssw]);
        marker(:de.hp :right, kalter[:wes] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, kalter[:wes] >> 0.5dt);
        slabel(:bottom :removed, kalter[:wes] >> 0.5dt >> 1.2ssw,
            "Веселовка"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:wes + 1ssw, :gus - 1ssw]);
    }

    with link = "point.ru.Гусев" {
        track(:first:station :double, kalter[:gus - 1ssw, :gus + 1ssw]);
        marker(:de.bf :left, kalter[:gus] << 0.5dt);
        slabel(:top, kalter[:gus] << 0.5dt << 1.2ssw,
            vbox(:center:bottom :bold,
                span(:gone, "Gumbinnen"),
                span(:open, "Гусев")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:gus + 1ssw, :op1163 - 1ssw]);
    }

    with link = "point.ru.Оп-1163-км" {
        track(:first:station :double, kalter[:op1163 - 1ssw, :op1163 + 1ssw]);
        marker(:de.hp :right, kalter[:op1163] >> 0.5dt);
        slabel(:right, kalter[:op1163 - 1.0ssw] >> 0.5dt >> 2.4ssw,
            "1163 км"
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1163 + 1ssw, :diw - 1ssw]);
    }

    with link = "point.ru.Дивное" {
        track(:first:station :double, kalter[:diw - 1ssw, :diw + 1ssw]);
        marker(:de.hp :right, kalter[:diw] >> 0.5dt);
        slabel(:bottom, kalter[:diw] >> 0.5dt >> 1.2ssw, "Дивное");
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:diw + 1ssw, :nes - 1ssw]);
    }

    with link = "point.ru.Нестеров" {
        track(:first:station :double, kalter[:nes - 1ssw, :nes + 1ssw]);
        marker(:de.bf :left, kalter[:nes] << 0.5dt);
        slabel(:top, kalter[:nes] << 0.5dt << 1.4ssw,
            vbox(:center:bottom :bold,
                span(:gone, "Stallupönen"),
                span(:gone, "Ebenrode"),
                span(:open, "Нестеров")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:nes + 1ssw, :ter - 1ssw]);
    }


    with link = "point.ru.Чернышевское" {
        track(:first:station :double, kalter[:ter - 1ssw, :ter + 1ssw]);
        marker(:de.bf :left, kalter[:ter] << 0.5dt);
        slabel(:left, kalter[:ter + 0.5ssw] << 0.5dt << 1.0ssw,
            vbox(:right:bottom :bold,
                span(:gone, "Eydtkuhnen"),
                span(:gone, "Eydtkau"),
                span(:open, "Чернышевское")
            )
        );
    }

    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:ter + 1ssw, :gr - 0.5ssw]);
    }


    with link = "point.int.Kybartai-Чернышевское" {
        track(:first:station :double, kalter[:gr - 0.5ssw, :gr + 0.5ssw]);
        marker(:de.dirgr :right, kalter[:gr] >> 0.5dt);
        marker(:de.dirgr :left, kalter[:gr] << 0.5dt);
    }
}

