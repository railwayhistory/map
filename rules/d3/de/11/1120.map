# DE 1120.  Lübeck Hbf - Hamburg Hbf
#

# Lübeck Hbf (einschl) - Hamburg-Wandsbek (ausschl)
#
with detail = 3 {
    let lubham = path("path.de.1120");
    let lubham.old = path("path.de.1120.old");

    with link = "point.de.Lübeck-Hbf" {
        track(:first:station :double :cat, lubham[:fluh, :lub.f]);
        marker(:de.bf :open :left, lubham[:lub] << 0.5dt);
        slabel(:right, lubham[:lub] << 0.5dt << 3.2ssw - (2ssw, 0ssw),
            span(:bold, "Lübeck Hbf")
        );
    }

    with link = "point.de.Lübeck-Hgbf" {
        track(:first:station :double :cat, lubham[:lub.f, :lua - 1ssw]);
        marker(:de.gbf :left, lubham[:lua - 2ssw] << 0.5dt);
    }

    with link = "point.de.Lübeck-Hgbf-Abzw" {
        track(:first:station :double :cat, lubham[:lua - 1ssw, :akle + 1ssw]);
        marker(:de.abzw :right, lubham[:lua] >> 0.5dt);
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:akle + 1ssw, :nie - 1ssw]);
    }


    with link = "point.de.Lübeck-Niendorf" {
        track(:first:station :double :cat, lubham[:nie - 1ssw, :nie + 1ssw]);
        with layer = -1 marker(:de.bf :closed :right, lubham[:nie] >> 0.5dt);
        slabel(:top :closed, lubham[:nie] >> 0.5dt >> 1.2ssw,
            "L.-Niendorf"
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:nie + 1ssw, :rei - 1ssw]);
    }

    with link = "point.de.Wesenberg-Holst" {
        with layer = -1 marker(:de.bk :removed :left, lubham[:wes] << 0.5dt);
    }

    with link = "point.de.Reinfeld-Holst" {
        track(:first:station :double :cat, lubham[:rei - 1ssw, :rei + 1ssw]);
        marker(:de.bf :open :right, lubham[:rei] >> 0.5dt);
        slabel(:left :open, lubham[:rei - 1ssw] >> 0.5dt >> 1.4ssw,
            hbox(:center:base,
                span(:regular, "Reinfeld "),
                span(:light, "(Holst)")
            )
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:rei + 1ssw, :old.aa]);
    }

    with link = "point.de.Steinfeld" {
        with layer = -1 marker(:de.bk :removed :left, lubham[:ste] << 0.5dt);
    }

    with link = "point.de.Bad-Oldesloe" {
        let neuold = path("d3.de.1043");

        # Str. 1120
        track(:first:station :double :cat,
                lubham[:old.aa, :old.aa + 1m]
            ..  lubham.old[:old.a, :old + 1ssw]
        );

        # Str. 1043
        track(:first:station,
                neuold[:old.bb, :old.bb + 1m] << 0.5dt
            ..  lubham.old[:old.a - 1m, :old.a] << 0.5dt
        );
        with layer = -1 track(:first:station :removed,
                neuold[:old.bb, :old.bb + 1m] >> 0.5dt
            ..  lubham.old[:old.a - 1m, :old.a] >> 0.5dt
        );
                

        marker(:de.bf :open :right, lubham[:old] >> 0.5dt);
        slabel(:left, lubham[:old + 0.4ssw] >> 1.6ssw,
            span(:bold, "Bad Oldesloe")
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:old + 1ssw, :kup - 1ssw]);
        with layer = -1 casing(:first :double,
            lubham[:rup.x - 200m, :rup.x + 200m]
        );
    }

    with link = "point.de.Kupfermühle" {
        track(:first:station :double :cat, lubham[:kup - 1ssw, :kup + 1ssw]);
        marker(:de.hp :right, lubham[:kup] >> 0.5dt);
        slabel(:left, lubham[:kup + 0.6ssw] >> 0.5dt >> 1.4ssw,
            "Kupfermühle"
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:kup + 1ssw, :bar - 1ssw]);
    }


    with link = "point.de.Tremsbüttel" {
        with layer = -1 marker(:de.bk :removed :left, lubham[:tre] << 0.5dt);
    }

    with link = "point.de.Bargteheide" {
        track(:first:station :double :cat, lubham[:bar - 1ssw, :bar + 1ssw]);
        marker(:de.bf :right, lubham[:bar] >> 0.5dt);
        slabel(:left, lubham[:bar + 0.6ssw] >> 0.5dt >> 1.4ssw,
            "Bargteheide"
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:bar + 1ssw, :gar - 1ssw]);
        with layer = 1 line_badge(:open, lubham[:bar + 1.7km], "1120");
    }

    with link = "point.de.Delingsdorf" {
        with layer = -1 marker(:de.bk :removed :right, lubham[:del] >> 0.5dt);
    }

    with link = "point.de.Ahrensburg-Gartenholz" {
        track(:first:station :double :cat, lubham[:gar - 1ssw, :gar + 1ssw]);
        marker(:de.hp :left, lubham[:gar] << 0.5dt);
        label(lubham[:gar] << 0.5dt << 1.6ssw,
            vbox(:left:middle :small,
                span(:open, "Ahrensburg-"),
                span(:open, "Gartenholz")
            )
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:gar + 1ssw, :ahr - 1ssw]);
    }

    with link = "point.de.Ahrensburg-Nord" {
        marker(:de.awanst :right, lubham[:ahn] >> 0.5dt);
    }


    with link = "point.de.Ahrensburg" {
        track(:first:station :double :cat, lubham[:ahr - 1ssw, :ahr + 1ssw]);
        marker(:de.bf :right, lubham[:ahr] >> 0.5dt);
        slabel(:left, lubham[:ahr + 0.5ssw] >> 0.5dt >> 1.4ssw,
            "Ahrensburg"
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:ahr + 1ssw, :rab - 1ssw]);
    }

    with link = "point.de.Meiendorf" {
        with layer = -1 marker(:de.bk :removed :right, lubham[:mei] >> 0.5dt);
    }

    with link = "point.de.Hamburg-Rahlstedt-Bbf" {
        track(:first:station :double :cat, lubham[:rab - 1ssw, :rab + 1ssw]);
        marker(:de.bft :right, lubham[:rab] >> 0.5dt);
    }

    with link = "point.de.Hamburg-Rahlstedt" {
        track(:first:station :double :cat, lubham[:rab + 1ssw, :rah + 1ssw]);
        marker(:de.bf :left, lubham[:rah] << 0.5dt);
        slabel(:right, lubham[:rah + 0.3ssw] << 0.5dt << 1.8ssw,
            "Hamburg-Rahlstedt"
        );
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:ahr + 1ssw, :ton - 1ssw]);
    }

    with link = "point.de.Wandsbek-Ost-Bk" {
        with layer = -1 marker(:de.bk :removed :left, lubham[:wab] << 0.5dt);
    }

    with link = "point.de.Hamburg-Tonndorf" {
        track(:first:station :double :cat, lubham[:ton - 1ssw, :ton + 1ssw]);
        marker(:de.bf :right, lubham[:ton] >> 0.5dt);
    }
}

# Hamburg-Wandsbek (einschl.) - Hamburg Hbf
#
with detail = 3 {
    let lubham = path("metro.de.hmb.1120");

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:ton + 1ssw, :wan - 1ssw]);
    }

    with link = "point.de.Hamburg-Wandsbek" {
        track(:first:station :double :cat, lubham[:wan - 1ssw, :wan + 1ssw]);
        marker(:de.bf :right, lubham[:wan] >> 0.5dt);
    }

    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:wan + 1ssw, :ham.aa - 1ssw]);
        with layer = -1 casing(:first :double :cat, lubham[:wan + 1ssw, :has]);

        track(:first:station :double :cat, lubham[:ham.aa - 1ssw, :ham.aa]);
    }
}

