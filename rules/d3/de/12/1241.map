# DE 1241.  Hamburg Hbf - Hamburg-Poppenbüttel
#
let hampop = path("metro.de.hmb.1241");
let lubham = path("metro.de.hmb.1120");

with detail = 3, style = :de.sbahn {
    with link = "line.de.1241" {
        with layer = 2 track(:first:double :rail,
                hampop[:ham.aa, :has - 2dt] << 2dt
            ..  hampop[:wan + 2dt, :bap + 0.5ssw] << 2dt
            ..  hampop[:bap + 0.5ssw + 4dt, :ohl - 1ssw] >> 1dt
        );
        with layer = 1 casing(:first:double :rail,
                hampop[:bap, :bap + 0.5ssw] << 2dt
            ..  hampop[:bap + 0.5ssw + 4dt, :bap + 0.5ssw + 4.1dt] >> 1dt
        );
    }

    with link = "point.de.Hamburg-Landwehr" {
        marker(:de.hp :left, hampop[:lan - 1dt] << 2.5dt);
    }

    with link = "point.de.Hamburg-Hasselbrook-S-Bahn" {
        marker(:de.bf :left, hampop[:has - 2dt] << 2.5dt);
    }

    with link = "point.de.Hamburg-Wandsbeker-Chaussee" {
        marker(:de.hp :left, hampop[:wan + 2dt] << 2.5dt);
    }

    with link = "point.de.Hamburg-Friedrichsberg" {
        marker(:de.hp :left, hampop[:fri + 2dt] << 2.5dt);
    }

    with link = "point.de.Hamburg-Barmbek-S-Bahn" {
        with layer = 2 marker(:de.bf :left, hampop[:bap] << 2.5dt);
    }

    with link = "point.de.Hamburg-Alte-Wöhr" {
        with layer = 2 marker(:de.hp :right, hampop[:awo] >> 1.5dt);
    }

    with link = "point.de.Hamburg-Rübenkamp" {
        marker(:de.hp :right, hampop[:rub] >> 1.5dt);
    }

    with link = "point.de.Hamburg-Ohlsdorf-S-Bahn" {
        track(:first:station :double :rail,
                hampop[:ohl - 1ssw, :aair] >> 1dt
        );
        marker(:de.bf :right, hampop[:ohl] >> 1.5dt);
        slabel(:right, hampop[:ohl - 0.5ssw] >> 1.5dt >> 1.8ssw,
            hbox(:left:base, "H.-", span(:bold, "Ohlsdorf"))
        );
    }

    with link = "line.de.1241" {
        track(:first :double :rail,
                hampop[:aair - 0.1dl, :aair] >> 1dt
            ..  hampop[:kor - 1ssw, :pop - 1ssw]
        );
    }

    with link = "point.de.Hamburg-Kornweg-Klein-Borstel" {
        marker(:de.hp :left, hampop[:kor] << 0.5dt);
    }

    with link = "point.de.Hamburg-Hoheneichen" {
        marker(:de.hp :left, hampop[:hoh] << 0.5dt);
    }

    with link = "point.de.Hamburg-Wellingsbüttel" {
        marker(:de.hp :right, hampop[:wel] >> 0.5dt);
    }

    with link = "point.de.Hamburg-Poppenbüttel" {
        track(:first:station :double :rail,
                hampop[:pop - 1ssw, :pop + 0.6ssw]
        );
        marker(:de.bf :right, hampop[:pop] >> 0.5dt);
        slabel(:right, hampop[:pop - 0.4ssw] >> 0.5dt >> 1.8ssw,
            hbox(:left:base, "H.-", span(:bold, "Poppenbüttel"))
        );
    }
}

