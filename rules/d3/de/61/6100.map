# DE 6100.  Berlin-Spandau (ausschl.) - Hamburg-Altona
#

# Berlin-Spandau (ausschl) - Hamburg-Bergedorf (einsschl.)
#
with detail = 3 {
    let spaalt = path("path.de.6100");

    with link = "line.de.6100" {
        let berleh = path("path.de.6107");
        
        track(:first :double :cat,
                berleh[:anau - 1m, :anau]
            ..  spaalt[:a, :alb - 1ssw]
        );
    }

    with link = "point.de.Berlin-Albrechtshof" {
        track(:first:station :double :cat, spaalt[:alb - 1ssw, :alb.hp + 1ssw]);
        marker(:de.hp :right, spaalt[:alb.hp] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, spaalt[:alb] >> 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:alb.hp + 1sw, :see - 1sw]);
    }

    with link = "point.de.Seegefeld" {
        track(:first:station :double :cat, spaalt[:see - 1ssw, :see + 1ssw]);
        marker(:de.hp :right, spaalt[:see] >> 0.5dt);
        slabel(:left, spaalt[:see - 0.4ssw] << 0.5dt << 6pt,
            "Seegefeld"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:see + 1ssw, :fal - 1ssw]);
    }


    with link = "point.de.Falkensee" {
        track(:first:station :double :cat, spaalt[:fal - 1ssw, :fal + 1ssw]);
        marker(:de.bf :right, spaalt[:fal] >> 0.5dt);
        slabel(:right, spaalt[:fal + 1ssw] >> 0.5dt >> 1.3ssw, "Falkensee");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:fal + 1ssw, :fin - 1ssw]);
    }


    with link = "point.de.Finkenkrug" {
        track(:first:station :double :cat, spaalt[:fin - 1ssw, :fin.hp + 1ssw]);
        with layer = -1 marker(:de.bf :removed :right, spaalt[:fin] >> 0.5dt);
        marker(:de.hp :right, spaalt[:fin.hp] >> 0.5dt);
        slabel(:right, spaalt[:fin.hp - 0.8ssw] >> 0.5dt >> 1.3ssw,
            "Finkenkrug"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:fin.hp + 1ssw, :afi - 0.5sw]);
    }

    with link = "point.de.Finkenkrug-Afi" {
        track(:first:station :double :cat, spaalt[:afi - 0.5sw, :afi + 0.5sw]);
        marker(:de.abzw :right, spaalt[:afi] >> 0.5dt);
        slabel(:right, spaalt[:afi + 1ssw] >> 0.5dt >> 1.3ssw,
            span(:bold, "Finkenkrug (Afi)")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:afi + 0.5ssw, :fbar - 0.5ssw]);
    }

    with link = "point.de.Brieselang" {
        track(:first:station :double :cat,
                spaalt[:fbar - 1ssw, :bri.neu + 1ssw]
        );
        with layer = -1 marker(:de.bf :removed :right, spaalt[:bri] >> 0.5dt);
        marker(:de.bf :right, spaalt[:bri.neu] >> 0.5dt);
        slabel(:left, spaalt[:bri.neu - 0.5ssw] << 0.5dt << 6pt,
            span(:bold, "Brieselang")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:bri.neu + 1ssw, :nau - 1ssw]);
    }

    with link = "point.de.Graben-Nauen" {
        with layer = -1 marker(:de.bk :removed, spaalt[:gra] >> 0.5dt);
    }

    with link = "point.de.Nauen" {
        track(:first:station :double :cat, spaalt[:nau - 1ssw, :nau + 1ssw]);
        marker(:de.bf :left, spaalt[:nau] << 0.5dt)
        slabel(:bottom, spaalt[:nau] << 0.5dt << 1.4ssw,
            span(:bold, "Nauen")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:nau + 1ssw,  :bed - 1ssw]);
        with layer = 1 line_badge(:open, spaalt[:bed - 2.0km], "6100");
    }

    with link = "point.de.Nauen-Lietzow" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:lie] << 0.5dt);
    }

    with link = "point.de.Berger-Damm" {
        track(:first:station :double :cat, spaalt[:bed - 1ssw, :bed + 1ssw]);
        with layer = -1 marker(:de.bf :removed :right, spaalt[:bed] >> 0.5dt);
        slabel(:right :removed, spaalt[:bed - 0.4ssw] >> 0.5dt >> 1.4ssw,
            "Berger Damm"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:bed + 1ssw, :pao - 1ssw]);
    }

    with link = "point.de.Selbelang-Bk" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:sel] >> 0.5dt);
    }

    with link = "point.de.Paulinenaue-Ost" {
        track(:first:station :double :cat, spaalt[:pao - 1ssw, :pao + 1ssw]);
        marker(:de.bft :left, spaalt[:pao] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:pao + 1ssw, :pau - 1ssw]);
    }

    with link = "point.de.Paulinenaue" {
        track(:first:station :double :cat, spaalt[:pau - 1ssw, :pau + 1ssw]);
        marker(:de.bf :left, spaalt[:pau] << 0.5dt);
        slabel(:right, spaalt[:pau - 0.4ssw] >> 1.5dt,
            span(:bold, "Paulinenaue")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:pau + 1ssw, :vie - 1ssw]);
    }

    with link = "point.de.Brädikow-Bk" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:bra] >> 0.5dt);
    }

    with link = "point.de.Vietznitz" {
        track(:first:station :double :cat, spaalt[:vie - 1ssw, :vie + 1ssw]);
        with layer = -1 marker(:de.hp :closed :left, spaalt[:vie] << 0.5dt);
        with layer = -1 marker(:de.bf :gone :left, spaalt[:vie] << 0.5dt);
        slabel(:left :closed, spaalt[:vie - 0.2ssw] << 0.5dt << 2.2ssw,
            "Vietznitz"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:vie + 1ssw, :fri - 1ssw]);
    }

    with link = "point.de.Friesack-Mark" {
        track(:first:station :double :cat, spaalt[:fri - 1ssw, :fri + 1ssw]);
        marker(:de.bf :left, spaalt[:fri] << 0.5dt);
        slabel(:left, spaalt[:fri - 0.2ssw] << 0.5dt << 2.2ssw,
            hbox(:center:base,
                span(:regular, "Friesack "),
                span(:light, "(Mark)")
            )
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:fri + 1ssw, :nsg - 0.5ssw]);
    }

    with link = "point.de.Segeletz" {
        track(:first:station :double :cat,
                spaalt[:seg - 0.5ssw, :seg + 0.5ssw]
        );
        with layer = -1 marker(:de.abzw :removed :left, spaalt[:seg] << 0.5dt);
        slabel(:left :closed, spaalt[:seg - 0.2ssw] << 0.5dt << 2.2ssw,
            "Segeletz"
        );
    }

    with link = "point.de.Schäferberg" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:saf] >> 0.5dt);
    }

    with link = "point.de.Neustadt-Dosse-Ns" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:nns] >> 0.5dt);
    }

    with link = "point.de.Neustadt-Dosse-Gbf" {
        track(:first:station :double :cat,
            spaalt[:nsg - 0.5ssw, :nsg + 0.5ssw]
        );
        marker(:de.bft :left, spaalt[:nsg] << 0.5dt);
    }

    with link = "point.de.Neustadt-Dosse" {
        track(:first:station :double :cat, spaalt[:nsg + 0.5ssw, :nst + 1ssw]);
        marker(:de.bf :left, spaalt[:nst] << 0.5dt);
        slabel(:left, spaalt[:nst - 0.2ssw] << 0.5dt << 1.8ssw,
            hbox(:center:base,
                span(:bold, "Neustadt "),
                span(:regular, "(Dosse) ")
            )
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:nst + 1ssw, :zer - 1ssw]);
    }

    with link = "point.de.Plänitz" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:plz] << 0.5dt);
    }

    with link = "point.de.Zernitz" {
        track(:first:station :double :cat, spaalt[:zer - 1ssw, :zer + 1ssw]);
        with layer = -1 marker(:de.bf :removed :right, spaalt[:zer] >> 0.5dt);
        slabel(:top :removed, spaalt[:zer] >> 0.5dt >> 1.6ssw, "Zernitz");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:zer + 1ssw, :stu - 1ssw]);
    }

    with link = "point.de.Stüdenitz" {
        track(:first:station :double :cat, spaalt[:stu - 1ssw, :stu + 1ssw]);
        with layer = -1 marker(:de.hp :removed :left, spaalt[:stu] << 0.5dt);
        with layer = -2 marker(:de.bf :gone :left, spaalt[:stu] << 0.5dt);
        slabel(:bottom :removed, spaalt[:stu] << 0.5dt << 1.4ssw,
            "Stüdenitz"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:stu + 1ssw, :bre - 1ssw]);
    }

    with link = "point.de.Breddin" {
        track(:first:station :double :cat, spaalt[:bre - 1ssw, :bre + 1ssw]);
        marker(:de.bf :left, spaalt[:bre] << 0.5dt);
        slabel(:bottom, spaalt[:bre] << 0.5dt << 1.2ssw,
            span(:bold, "Breddin")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:bre + 1ssw, :glo - 1ssw]);
    }

    with link = "point.de.Damelak" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:dak] >> 0.5dt);
    }

    with link = "point.de.Glöwen" {
        track(:first:station :double :cat, spaalt[:glo - 1ssw, :glo + 1ssw]);
        marker(:de.bf :left, spaalt[:glo] << 0.5dt);
        slabel(:bottom, spaalt[:glo] << 0.5dt << 1.4ssw,
            span(:bold, "Glöwen")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:glo + 1ssw, :wil - 1ssw]);
        with layer = 1 line_badge(:open, spaalt[:glo + 3.0km], "6100");
    }

    with link = "point.de.Roddan" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:ron] << 0.5dt);
    }

    with link = "point.de.Bad-Wilsnack" {
        track(:first:station :double :cat, spaalt[:wil - 1ssw, :wil + 1ssw]);
        marker(:de.bf :left, spaalt[:wil] << 0.5dt);
        slabel(:left, spaalt[:wil] << 0.5dt << 2.2ssw, "Bad Wilsnack");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:wil + 1ssw, :kuh - 1ssw]);
    }

    with link = "point.de.Lüben" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:lun] >> 0.5dt);
    }

    with link = "point.de.Kuhblank" {
        track(:first:station :double :cat, spaalt[:kuh - 1ssw, :kuh + 1ssw]);
        with layer = -1 marker(:de.uest :right, spaalt[:kuh] >> 0.5dt);
        with layer = -2 marker(:de.bf :removed, spaalt[:kuh] >> 0.5dt);
        slabel(:top :closed, spaalt[:kuh] >> 0.5dt >> 1.3ssw, "Kuhblank");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:kuh + 1ssw, :wib - 1ssw]);
    }

    with link = "point.de.Breese" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:brs] >> 0.5dt);
    }

    with link = "point.de.Wittenberge-Süd" {
        marker(:de.hp :removed :left, spaalt[:wis] << 0.5dt);
        slabel(:right :removed, spaalt[:wis + 0.2ssw] << 0.5dt << 2.8ssw,
            "W. Süd"
        );
    }

    with link = "point.de.Wittenberge" {
        track(:first:station :double :cat, spaalt[:wib - 1ssw, :wit.u]);
        marker(:de.bf :left, spaalt[:wib] << 0.5dt);
        slabel(:left, spaalt[:wib - 0.4ssw] << 0.5dt << 1.6ssw,
            span(:bold, "Wittenberge")
        );
    }

    with link = "point.de.Wittenberge-Nord" {
        track(:first:station :double :cat, spaalt[:wit.u, :win + 1ssw]);
        marker(:de.bft :left, spaalt[:win] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:win + 1ssw, :der - 1ssw]);
    }

    with link = "point.de.Schilde" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:sld] >> 0.5dt);
    }

    with link = "point.de.Dergenthin" {
        track(:first:station :double :cat, spaalt[:der - 1ssw, :der + 1ssw]);
        marker(:de.bf :left, spaalt[:der] << 0.5dt);
        slabel(:left, spaalt[:der - 0.5ssw] << 0.5dt << 1.5ssw,
            "Dergenthin"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:der + 1ssw, :kat - 1ssw]);
    }

    with link = "point.de.Nebelin" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:neb] >> 0.5dt);
    }

    with link = "point.de.Karstädt" {
        track(:first:station :double :cat, spaalt[:kat - 1ssw, :kat + 1ssw]);
        marker(:de.bf :right, spaalt[:kat] >> 0.5dt);
        slabel(:left :right_align, spaalt[:kat - 0.4ssw] << 2dt,
            span(:bold, "Karstädt")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:kat + 1ssw, :wrn - 1ssw]);
        with layer = 1 line_badge(:open, spaalt[:kat + 3.0km], "6100");
    }

    with link = "point.de.Streesow" {
        with layer = -1 marker(:de.abzw :removed :right, spaalt[:stw] >> 0.5dt);
    }

    with link = "point.de.Klein-Warnow" {
        track(:first:station :double :cat, spaalt[:wrn - 1ssw, :wrn + 1ssw]);
        marker(:de.bf :right, spaalt[:wrn] >> 0.5dt);
        slabel(:right, spaalt[:wrn - 0.5ssw] >> 0.5dt >> 1.3ssw,
            "Klein Warnow"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:wrn + 1ssw, :grb - 1ssw]);
    }

    with link = "point.de.Neese" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:nee] >> 0.5dt);
    }

    with link = "point.de.point.de.Grabow-Meckl" {
        track(:first:station :double :cat, spaalt[:grb - 1ssw, :grb + 1ssw]);
        marker(:de.bf :left, spaalt[:grb] << 0.5dt);
        slabel(:right, spaalt[:grb - 0.5ssw] >> 1.0dt,
            hbox(:center:base,
                span(:regular, "Grabow "),
                span(:light, "(Meckl)")
            )
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:grb + 1ssw, :lud - 1ssw]);
    }

    with link = "point.de.Grünhof" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:grh] >> 0.5dt);
    }

    with link = "point.de.Ludwigslust" {
        track(:first:station :double :cat, spaalt[:lud - 1ssw, :lud + 1ssw]);
        marker(:de.bf :left, spaalt[:lud] << 0.5dt);
        slabel(:left, spaalt[:lud - 0.4ssw] << 0.5dt << 2.2ssw,
            span(:bold, "Ludwigslust")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:lud + 1ssw, :wes - 1ssw]);
    }

    with link = "point.de.Weselsdorf" {
        track(:first:station :double :cat, spaalt[:wes - 1ssw, :wes + 1ssw]);
        with layer = -1 marker(:de.hp :closed :left, spaalt[:wes] << 0.5dt);
        slabel(:left :closed, spaalt[:wes - 0.4ssw] << 0.5dt << 2.4ssw,
            "Weselsdorf"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:wes + 1ssw, :jas - 1ssw]);
    }

    with link = "point.de.Niendorf-Ludwigslust" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:nie] >> 0.5dt);
    }

    with link = "point.de.Jasnitz" {
        track(:first:station :double :cat, spaalt[:jas - 1ssw, :jas + 1ssw]);
        marker(:de.bf :right, spaalt[:jas] >> 0.5dt);
        slabel(:top, spaalt[:jas] >> 0.5dt >> 1.4ssw, "Jasnitz");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:jas + 1ssw, :str - 1ssw]);
    }

    with link = "point.de.Strohkirchen" {
        track(:first:station :double :cat, spaalt[:str - 1ssw, :str + 1ssw]);
        marker(:de.hp :right, spaalt[:str] >> 0.5dt);
        with layer = -1 marker(:de.bk :removed :right, spaalt[:str] >> 0.5dt);
        slabel(:top, spaalt[:str] >> 0.5dt >> 1.4ssw,
            "Strohkirchen"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:str + 1ssw, :hag - 1ssw]);
    }

    with link = "point.de.Moraas" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:mor] >> 0.5dt);
    }

    with link = "point.de.point.de.Hagenow-Land" {
        track(:first:station :double :cat, spaalt[:hag - 1ssw, :hag + 1ssw]);
        marker(:de.bf :right, spaalt[:hag] >> 0.5dt);
        label(spaalt[:hag + 1ssw] >> 0.5dt >> 2.0ssw,
            vbox(:left:bottom :small,
                span(:bold, "Hagenow"),
                span(:bold, "Land")
            )
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:hag + 1ssw, :war - 1ssw]);
    }

    with link = "point.de.Paetow" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:pat] >> 0.5dt);
    }

    with link = "point.de.Warlitz" {
        track(:first:station :double :cat, spaalt[:war - 1ssw, :war + 1ssw]);
        with layer = -1 marker(:de.hp :closed :left, spaalt[:war] << 0.5dt);
        with layer = -2 marker(:de.bk :gone :left, spaalt[:war] << 0.5dt);
        slabel(:bottom :closed, spaalt[:war] << 0.5dt << 1.3ssw, "Warlitz");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:war + 1ssw, :pri - 1ssw]);
    }

    with link = "point.de.Pritzier" {
        track(:first:station :double :cat, spaalt[:pri - 1ssw, :pri + 1ssw]);
        marker(:de.bf :left, spaalt[:pri] << 0.5dt);
        slabel(:bottom, spaalt[:pri] << 0.5dt << 1.3ssw, "Pritzier");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:pri + 1ssw, :brh - 1ssw]);
    }

    with link = "point.de.Melkof" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:mel] << 0.5dt);
    }

    with link = "point.de.Brahlstorf" {
        track(:first:station :double :cat, spaalt[:brh - 1ssw, :brh + 1ssw]);
        marker(:de.bf :right, spaalt[:brh] >> 0.5dt);
        slabel(:top, spaalt[:brh] >> 0.5dt >> 1.4ssw,
            span(:bold, "Brahlstorf")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:brh + 1ssw, :kfd - 1ssw]);
    }

    with link = "point.de.Kuhlenfeld" {
        track(:first:station :double :cat, spaalt[:kfd - 1ssw, :kfd + 1ssw]);
        with layer = -1 marker(:de.bf :removed :left, spaalt[:kfd] << 0.5dt);
        slabel(:bottom :removed, spaalt[:kfd] << 0.5dt << 1.2ssw,
            "Kuhlenfeld"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:kfd + 1ssw, :boi + 1ssw]);
    }

    with link = "point.de.Melkof" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:ngu] << 0.5dt);
    }


    with link = "point.de.Boizenburg" {
        track(:first:station :double :cat, spaalt[:boi - 1ssw, :boi + 1ssw]);
        marker(:de.bf :left, spaalt[:boi] << 0.5dt);
        slabel(:bottom, spaalt[:boi] << 0.5dt << 1.6ssw,
            span(:bold, "Boizenburg")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:boi + 1ssw, :sah - 1ssw]);
        with layer = 1 line_badge(:open, spaalt[:sah - 1.8km], "6100");
    }

    with link = "point.de.Metlitzhof" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:met] >> 0.5dt);
    }

    with link = "point.de.Schwanheide" {
        track(:first:station :double :cat, spaalt[:sah - 1sw, :sah + 1sw]);
        marker(:de.hp :right, spaalt[:sah] >> 0.5dt);
        marker(:de.uest :right, spaalt[:sah] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, spaalt[:sah] >> 0.5dt);
        slabel(:right, spaalt[:sah - 0.6ssw] >> 0.5dt >> 1.3ssw,
            "Schwanheide"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:sah + 1ssw, :gsah - 0.5ssw]);
    }

    with link = "point.de.Zweedorf" {
        with layer = -1 marker(:de.bk :removed :left, spaalt[:zwe] << 0.5dt);
    }

    with link = "point.de.Schwanheide-LGr" {
        track(:first:station :double :cat,
                spaalt[:gsah - 0.5ssw, :gsah + 0.5ssw]
        );
        marker(:de.lgr :right, spaalt[:gsah] >> 0.5dt);
        marker(:statdt :right, spaalt[:gsah] << 0.5dt);
        marker(:de.lgr :left, spaalt[:gsah] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:gsah + 0.5ssw, :buc - 0.5ssw]);
    }

    with link = "point.de.Büchen" {
        track(:first:station :double :cat,
                spaalt[:buc - 0.5ssw, :buc.u]
        );
        marker(:de.bf :left, spaalt[:buc] << 0.5dt);
        slabel(:left, spaalt[:buc - 0.3ssw] << 0.5dt << 2.2ssw,
            span(:bold, "Büchen")
        );
    }

    with link = "point.de.Büchen-Bbf" {
        track(:first:station :double :cat, spaalt[:buc.u, :bcb + 0.5ssw]);
        marker(:de.bft :left, spaalt[:bcb] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:bcb + 0.5ssw, :stt - 0.5ssw]);
    }

    with link = "point.de.Büchen-Steinautal" {
        track(:first:station :double :cat,
                spaalt[:stt - 0.5ssw, :stt + 0.5ssw]
        );
        marker(:de.uest :right, spaalt[:stt] >> 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:stt + 0.5ssw, :mus - 1ssw]);
    }

    with link = "point.de.Müssen" {
        track(:first:station :double :cat, spaalt[:mus - 1ssw, :mus + 1ssw]);
        marker(:de.hp :left, spaalt[:mus] << 0.5dt);
        with layer = -1 marker(:de.bf :gone :left, spaalt[:mus] << 0.5dt);
        slabel(:left, spaalt[:mus - 1ssw] << 0.5dt << 2.4ssw, "Müssen");
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:mus + 1ssw, :swa + 1ssw]);
    }

    with link = "point.de.Schwarzenbek" {
        track(:first:station :double :cat, spaalt[:swa - 1ssw, :swa + 1ssw]);
        marker(:de.bf :left, spaalt[:swa] << 0.5dt);
        slabel(:left, spaalt[:swa - 1ssw] << 0.5dt << 2.4ssw,
            span(:bold, "Schwarzenbek")
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:swa + 1ssw, :frr - 1ssw]);
    }

    with link = "point.de.Radekamp" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:rap] >> 0.5dt);
    }

    with link = "point.de.Sachsenwald" {
        with layer = -1 marker(:de.bk :removed :right, spaalt[:sad] >> 0.5dt);
    }

    with link = "point.de.Friedrichsruh" {
        track(:first:station :double :cat, spaalt[:frr - 1ssw, :frr + 1ssw]);
        marker(:de.hp :right, spaalt[:frr] >> 0.5dt);
        with layer = -1 marker(:de.bf :gone :right, spaalt[:frr] >> 0.5dt);
        slabel(:right, spaalt[:frr + 1ssw] >> 0.5dt >> 1.4ssw,
            "Friedrichsruh"
        );
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:frr + 1ssw, :aua - 1ssw]);
    }

    with link = "point.de.Aumühle-Abzw" {
        track(:first:station :double :cat, spaalt[:aua - 1ssw, :aua + 1ssw]);
        marker(:de.bft.abzw :left, spaalt[:aua] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:aua + 1ssw, :ber - 1ssw]);
    }

    with link = "point.de.Hamburg-Bergedorf" {
        track(:first:station :double :cat, spaalt[:ber - 1ssw, :ber + 1ssw]);
        marker(:de.bf :left, spaalt[:ber] << 0.5dt);
        slabel(:right, spaalt[:ber + 0.3ssw] << 0.5dt << 2.0ssw + (0.5dt, 0dt),
            span(:bold, "H.-Bergedorf")
        );
    }
}


# Hamburg-Bergedorf (ausschl.) - Hamburg-Altona
#
with detail = 3 {
    let spaalt = path("metro.de.hmb.6100");

    with link = "line.de.6100" {
        track(:first :double :cat,
                path("path.de.6100")[:ber + 1ssw, :ber + 1.1ssw]
            ..  spaalt[:ber.f, :all - 1ssw]
        );
    }

    with link = "point.de.Hamburg-Allermöhe" {
        track(:first:station :double :cat, spaalt[:all - 1ssw, :all + 1ssw]);
        track(:first:station :cat,
                spaalt[:all - 1.1dl, :all - 1dl] << 0.5dt
            --  spaalt[:all, :all + 1ssw] << 1.5dt
        );
        marker(:de.abzw :left, spaalt[:all] << 1.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:all + 1ssw, :rtk - 1ssw]);
    }

    # point.de.Hamburg-Rothenburgsort-Tk: de.1280

    with link = "line.de.6100" {
        with layer = 2 track(:first :double :cat,
                spaalt[:rtk + 1ssw, :ahar - 1ssw]
        );
        with layer = 1 casing(:first :double :cat,
                spaalt[:rtk + 1ssw, :ahar - 1ssw]
        );
    }

    with link = "point.de.Hamburg-Rothenburgsort-Rop" {
        track(:first:station :double :cat, spaalt[:ahar - 1ssw, :ahar]);
    }

    with link = "line.de.6100" {
        track(:first :cat, spaalt[:ahar, :anc - 1ssw] >> 0.5dt);
    }

    with link = "point.de.Hamburg-Anckelmannsplatz" {
        track(:first:station :cat, spaalt[:anc - 1ssw, :anc + 1ssw] >> 0.5dt);
        track(:first:station :cat,
                spaalt[:anc - 1.1dl, :anc - 1dl] >> 0.5dt
            --  spaalt[:anc, :anc + 1ssw] << 0.5dt
        );
    }

    with link = "line.de.6100" {
        track(:first:station :double, spaalt[:anc + 1ssw, :ham - 1ssw]);
    }

    with link = "point.de.Hamburg-Hbf" {
        let wanham = path("metro.de.hmb.2200");

        track(:first:station :double :cat,
                spaalt[:ham - 1ssw, :ham + 0.5ssw + 3dl]
        );
        with layer = -1 casing(:first:station :double :cat,
                spaalt[:ham, :ham + 0.5ssw + 3dl]
        );

        track(:first:station :cat,
                wanham[:ham - 1ssw, :ham + 0.5ssw + 1dl] << 1.5dt
        );
        with layer = -1 casing(:first:station :cat,
                spaalt[:ham, :ham + 0.5ssw + 1dl] << 1.5dt
        );

        track(:first:station :cat,
                wanham[:ham - 1ssw, :ham + 0.5ssw] << 2.5dt
            --  spaalt[:ham + 0.5ssw + 2dl, :ham + 0.5ssw + 2.1dl] << 0.5dt
        );
        with layer = -1 casing(:first:station :cat,
                spaalt[:ham, :ham + 0.5ssw] << 2.5dt
            --  spaalt[:ham + 0.5ssw + 2dl, :ham + 0.5ssw + 2.1dl] << 0.5dt
        );

        marker(:de.bf :left, spaalt[:ham] << 2.5dt);
    }

    with link = "line.de.6100" {
        track(:first :double :cat, spaalt[:ham + 0.5ssw + 3dl, :rai]);
    }

    with link = "point.de.Hamburg-Dammtor" {
        marker(:de.hp :left, spaalt[:dam] << 0.5dt);
    }

    with link = "line.de.6100" {
        track(:first:station :double :cat,
                spaalt[:rai - 0.1dl, :rai]
            ..  path("metro.de.hmb.1220")[:aham, :aham - 0.1dl] >> 1dt
        );
        with layer = -1 casing(:first:station :double :cat,
                spaalt[:rai - 0.1dl, :rai]
            ..  path("metro.de.hmb.1220")[:aham, :aham - 0.1dl] >> 1dt
        );
    }
}
