# DE 1001.  Flensburg Weiche (ausschl) - Lindholm (ausschl)
#
let flwlin = path("path.de.1001");

with detail = 3 {
    with link = "line.de.1001" {
        with layer = -1 track(:second :closed,
                path("path.de.1040")[:flw - 0.9ssw, :flw - 1ssw] >> 0.5dt
            ..  flwlin[:flw.f, :han - 1ssw]
        );
    }

    track(:second :closed :station, flwlin[:han - 1ssw, :han + 1ssw]);
    marker(:de.hst :closed :left, flwlin[:han]);
    slabel(:bottom :closed, flwlin[:han] << 1.3ssw, "Handewitt");

    track(:second :closed, flwlin[:han + 1ssw, :una - 1ssw]);

    track(:second :closed :station, flwlin[:una - 1ssw, :una + 1ssw]);
    marker(:de.hp :closed :right, flwlin[:una]);
    slabel(:top :closed, flwlin[:una] >> 1.6ssw, "Unaften");

    track(:second :closed, flwlin[:una + 1ssw, :wal - 1ssw]);

    track(:second :closed :station, flwlin[:wal - 1ssw, :wal + 1ssw]);
    marker(:de.bf :closed :left, flwlin[:wal]);
    slabel(:bottom :closed, flwlin[:wal] << 1.3ssw + (5pt, 0pt), "Wallsbüll");

    track(:second :closed, flwlin[:wal + 1ssw, :saf - 1ssw]);

    track(:second :closed :station, flwlin[:saf - 1ssw, :saf + 1ssw]);
    marker(:de.hst :closed :left, flwlin[:saf]);
    slabel(:bottom :closed, flwlin[:saf] << 1.3ssw, "Schafflund");

    track(:second :closed, flwlin[:saf + 1ssw, :spr - 1ssw]);
    with layer = 1 line_badge(:closed, flwlin[:saf + 3.2km], "1001");

    track(:second :closed :station, flwlin[:spr - 1ssw, :spr + 1ssw]);
    marker(:de.bf :closed :right, flwlin[:spr]);
    slabel(:top :closed, flwlin[:spr] >> 1.6ssw, "Sprakebüll");

    track(:second :closed, flwlin[:spr + 1ssw, :ach - 1ssw]);

    track(:second :closed :station, flwlin[:ach - 1ssw, :ach + 1ssw]);
    marker(:de.hst :removed :left, flwlin[:ach]);
    slabel(:bottom :removed, flwlin[:ach] << 1.3ssw, "Achtrup");

    track(:second :closed, flwlin[:ach + 1ssw, :lec - 1ssw]);

    track(:second :closed :station, flwlin[:lec - 1ssw, :lec + 1ssw]);
    marker(:de.bf :closed :left, flwlin[:lec]);
    slabel(:bottom :closed, flwlin[:lec] << 1.3ssw, "Leck");

    with link = "line.de.1001" {
        with layer = -1 track(:second :closed,
                flwlin[:lec + 1ssw, :lin.aa - 500m]
            ..  path("path.de.1210")[:lin - 1ssw, :lin - 0.9ssw] >> 0.5dt
        );
    }
}

