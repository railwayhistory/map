# DE 1011.  Jübeck (ausschl.) - Husum (ausschl.)
#
let jubhus = path("path.de.1011");
let neufle = path("path.de.1040");
let ohrklo = path("path.de.A10");

with detail = 3 {
    # Jübek (ausschl.) - Sollbrück (ausschl.)
    track(:second :station,
            neufle[:ahus - .1dl, :ahus] << 0.5dt
        ..  jubhus[:a, :a + 1dl]
    );
    track(:second, jubhus[:a + 1dl, :sol - 1ssw]);
    with layer = 1 line_badge(:open, jubhus[:sol - 2km], "1011");

    # Sollbrück
    track(:second :station, jubhus[:sol - 1ssw, :sol + 1ssw]);
    with layer = -1 marker(:de.hst :closed :right, jubhus[:sol]);
    with layer = -2 marker(:de.bf :gone:right, jubhus[:sol]);
    slabel(:top :closed, jubhus[:sol] >> 1.6ssw - (2ssw, 0dt), "Sollbrück");

    # Sollbrück (ausschl.) - Ohrstedt (ausschl.)
    track(:second, jubhus[:sol + 1ssw, :ohr.a]);
    with layer = -1 marker(:de.hst :closed :left, jubhus[:ahr]);
    with layer = -2 marker(:de.bf :gone :left, jubhus[:ahr]);
    slabel(:bottom :closed,
        jubhus[:ahr] << 1.6ssw + (1.5ssw, 0dt),
        "Ahrenviöl"
    );

    # Ohrstedt
    track(:second :station, jubhus[:ohr.a, :ohr + 1ssw]);
    marker(:de.awanst :right, jubhus[:ohr]);
    with layer = -1 marker(:de.bf :gone :right, jubhus[:ohr]);
    slabel(:bottom, jubhus[:ohr] << 1dt + (2ssw, 0dt), "Ohrstedt");

    # Ohrstedt (ausschl.) - Wester-Ohrstedt (ausschl.)
    track(:second, jubhus[:ohr + 1ssw, :wes - 1ssw]);

    # Wester-Ohrstedt
    track(:second :station, jubhus[:wes - 1ssw, :wes + 1ssw]);
    with layer = -1 marker(:de.hp :closed :right, jubhus[:wes]);
    slabel(:left :closed,
        jubhus[:wes] >> 1.6ssw + (1.5ssw, 0dt),
        "Wester-Ohrstedt"
    );

    # Wester-Ohrstedt (ausschl.) - Schwesing (ausschl.)
    track(:second, jubhus[:wes + 1ssw, :swe - 1ssw]);
    with layer = 1 line_badge(:open, jubhus[:swe - 1.2km], "1011");

    # Schwesing
    track(:second :station, jubhus[:swe - 1ssw, :swe + 1ssw]);
    with layer = -1 marker(:de.bf :closed :right, jubhus[:swe]);
    label(jubhus[:swe] << 0.2dt,
        hbox(:left :top, span(:small :closed, "Schwesing"))
    );

    # Schwesing (ausschl.) - Rosendahl (ausschl.)
    track(:second, jubhus[:swe + 1ssw, :ros - 1ssw]);

    # Rosendahl
    track(:second :station, jubhus[:ros - 1ssw, :ros + 1ssw]);
    with layer = -1 marker(:de.hp :closed :right, jubhus[:ros]);

    # Rosendahl (ausschl.) - Husum (ausschl.)
    track(:second, jubhus[:ros + 1ssw, :hus.a]);
}

