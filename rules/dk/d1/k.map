with detail = 1 {
    with link = "line.dk.KFA" {
        let kf = path("d1.dk.kfa");

        with railway = :first :double :cat:ac25 :pax {
            track(kf[:kob, :kob.yk]);
            track(kf[:kob.yk, :val.yf]);
            track(kf[:val.yf, :hvf.yv]);
            track(kf[:hvf.yv, :ros.yn]);
            track(kf[:ros.yn, :ros.yk]);
            track(kf[:ros.yk, :kva.yk]);
            track(kf[:kva.yk, :rin.yf]);
            track(kf[:rin.yf, :rin.yk]);
            track(kf[:rin.yk, :rin.yr]);
            track(kf[:rin.yr, :sor.yv]);
            track(kf[:sor.yv, :sla.yv]);
            track(kf[:sla.yv, :sve.yk]);
            track(kf[:sve.yk, :nyb.ys]);
            track(kf[:nyb.ys, :nyb.yr]);
            track(kf[:nyb.yr, :ode.ym]);
            track(kf[:ode.ym, :ode.ys]);
            track(kf[:ode.ys, :tom.ya]);
            track(kf[:tom.ya, :mid.yb]);
            track(kf[:mid.yb, :sno]);
            track(kf[:sno, :fre.yt]);
            track(kf[:fre.yt, :fre]);

            with link = "point.dk.København-H" {
                slabel(:bottom :medium :bold,
                    kf[:kob] + (0dt, 6km) + (-0.5dt, 0.5dt),
                    vbox(:center:top,
                        "Køben-", "     havn"
                    )
                );
            }

            with link = "point.dk.Fredericia" {
                slabel(:right, kf[:fre] + (1dt, -1dt), "Fredericia");
            }
        }
    }

    with link = "line.dk.KFS" {
        let kf = path("d1.dk.kfs");

        with railway = :first :double :cat:dc15 :pax {
            track(kf[:val.yf, :van.yf]);
            track(kf[:van.yf, :fre]);
        }
    }

    with link = "line.dk.KFX" {
        let kf = path("d1.dk.kfx");

        with railway = :first :pax {
            track(kf[:kog.yf, :har.yr]);
            track(kf[:har.yr, :fal]);
        }
    }

    with link = "line.dk.KHK" {
        with layer = -1 track(:first :double :cat:dc15 :pax,
                path("d1.dk.khk")[:vig.yk, :kox]
        );
    }

    with link = "line.dk.KHR" {
        let kh = path("d1.dk.khr");

        with railway = :first :double :cat:ac25 :pax {
            track(kh[:kob, :hel.yv]);
            track(kh[:hel.yv, :hel.yh]);
            track(kh[:hel.yh, :ved.yj]);
            track(kh[:ved.yj, :sne.yh]);
            track(kh[:sne.yh, :hor]);
        }
    }

    with link = "line.dk.KPH" {
        let kp = path("d1.dk.kph");

        with railway = :first :double :cat:ac25 :pax {
            track(kp[:kob.yk, :kob.yg]);
            track(kp[:kob.yg, :kal.yv]);
            track(kp[:kal.yv, :peg]);
        }
    }

    with link = "line.dk.KRS" {
        track(:first :pax :removed, path("d1.dk.krs")[:kog.yr, :rin.yk]);
    }

    with link = "line.dk.KTD" {
        track(:first :pax, path("d1.dk.ktd")[:kag.yt, :til]);
    }

    with link = "line.dk.KVH" {
        track(:first :double :cat:ac25 :pax,
                path("d1.dk.kvh")[:kob.yg, :hvf.yv]
        );
    }
}

