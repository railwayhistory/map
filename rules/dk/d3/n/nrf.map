# DK NRF.  Nyborg - Ringe - Faaborg
#
let nf = path("d3.dk.nrf");

with detail = 3,
     railway = :first :pax :removed
{
    # point.dk.Nyborg-Færge  dk.NYB

    with link = "line.dk.NRF" {
        track(:ror, nf[:nyb.yn, :nyb.yr] << 0.5md << 1ms << 0.5mt);
        track(:ror,
                nf[:nyb.yr - 0.1dl, :nyb.yr] << 0.5md << 1ms << 0.5mt
            ..  nf[:nyb.xr + 1md, :nyb.xr + 1.01md]
        );
        track(nf[:nyb.xr + 1md, :nyb.yr + 2.7km]);
        line_label(:right:s, nf[:nyb.yr + 2.7km] >> 0.5mt, "NRF");
        track(nf[:nyb.yr + 2.7km, :lam - 0.5sw]);
    }

    with link = "point.dk.Lamdrup", railway = :station {
        track(nf[:lam - 0.5sw, :lam + 0.5sw]);
        marker(:left :de.bf, nf[:lam] << 0.5mt);
        slabel(:left, nf[:lam] >> 0.5mt + (-0.8dt, -0.3dt), "Lamdrup");
    }

    with link = "line.dk.NRF" {
        track(nf[:lam + 0.5sw, :ref - 0.5sw]);
    }

    with link = "point.dk.Refsvindinge", railway = :station {
        track(nf[:ref - 0.5sw, :ref + 0.5sw]);
        marker(:right :de.bf, nf[:ref] >> 0.5mt);
        slabel(:left, nf[:ref] >> 0.5mt >> 1sh + (-1.2dt, 0.6dt),
            "Refsvindinge"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:ref + 0.5sw, :orb - 0.5sw]);
    }

    with link = "point.dk.Ørbæk", railway = :station {
        track(nf[:orb - 0.5sw, :orb + 0.5sw]);
        marker(:left :de.bf, nf[:orb] << 0.5mt);
        slabel(:right, nf[:orb] << 0.5mt << 1sh + (1.3dt, 1.5dt),
            "Ørbæk"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:orb + 0.5sw, :ell - 0.5sw]);
    }

    with link = "point.dk.Ellested", railway = :station {
        track(nf[:ell - 0.5sw, :ell + 0.5sw]);
        marker(:left :de.bf, nf[:ell] << 0.5mt);
        slabel(:right, nf[:ell] << 0.5mt << 1sh + (1.4dt, 1.8dt),
            "Ellested"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:ell + 0.5sw, :fje - 0.5sw]);
    }

    with link = "point.dk.Fjellerup", railway = :station {
        track(nf[:fje - 0.5sw, :fje + 0.5sw]);
        marker(:left :de.bf, nf[:fje] << 0.5mt);
        slabel(:bottom, nf[:fje] << 0.5mt << 1sh + (0.5dt, 0.5dt),
            "Fjellerup"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:fje + 0.5sw, :rys - 0.5sw]);
    }

    with link = "point.dk.Ryslinge", railway = :station {
        track(nf[:rys - 0.5sw, :rys + 0.5sw]);
        marker(:right :de.bf, nf[:rys] >> 0.5mt);
        slabel(:top, nf[:rys] >> 0.5mt >> 1sh + (0dt, -0.4dt),
            "Ryslinge"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:rys + 0.5sw, :rin.xn - 0.4km]);
        line_label(:right:s, nf[:rin.xn - 0.4km] >> 0.5mt, "NRF");
        track(nf[:rin.xn - 0.4km, :rin.xn - 1mt]);
        track(:ror,
                nf[:rin.xn - 1.01mt, :rin.xn - 1mt]
            ..  nf[:rin.yn, :rin.yn + 0.1dl] << 1ms << 1mt
        );
    }

    # point.dk.Ringe  dk.OSB

    with link = "line.dk.NRF" {
        track(:lor, nf[:rin.yf, :rin.yf + 1seg]);
        track(nf[:rin.yf + 1seg, :rin.yf + 1km]);
        line_label(:right:se, nf[:rin.yf + 1km] >> 0.5mt, "NRF");
        track(nf[:rin.yf + 1km, :bol - 0.5sw]);
    }

    with link = "point.dk.Boltinggård", railway = :station {
        track(nf[:bol - 0.5sw, :bol + 0.5sw]);
        marker(:left :de.hp, nf[:bol] << 0.5mt);
        slabel(:left, nf[:bol] >> 0.5mt + (-1.3dt, 0.6dt),
            "Boltinggård"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:bol + 0.5sw, :esp - 0.5sw]);
    }

    with link = "point.dk.Espe", railway = :station {
        track(nf[:esp - 0.5sw, :esp + 0.5sw]);
        marker(:left :de.bf, nf[:esp] << 0.5mt);
        slabel(:bottom, nf[:esp] << 0.5mt << 1sh + (0.5dt, 0.3dt),
            "Espe"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:esp + 0.5sw, :hoj - 0.5sw]);
    }

    with link = "point.dk.Højrup", railway = :station {
        track(nf[:hoj - 0.5sw, :hoj + 0.5sw]);
        marker(:right :de.bf, nf[:hoj] >> 0.5mt);
        slabel(:left, nf[:hoj] >> 0.5mt >> 1sh + (-1.3dt, 0.6dt),
            "Højrup"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:hoj + 0.5sw, :hag - 0.5sw]);
    }

    with link = "point.dk.Hågerup", railway = :station {
        track(nf[:hag - 0.5sw, :hag + 0.5sw]);
        marker(:left :de.hp, nf[:hag] << 0.5mt);
        slabel(:right, nf[:hag] << 0.5mt << 1sh + (1dt, 1.2dt),
            "Hågerup"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:hag + 0.5sw, :kor - 0.5sw]);
    }
}

with detail = 3,
     railway = :first :museum
{

    with link = "point.dk.Korinth", railway = :station {
        track(nf[:kor - 0.5sw, :kor + 0.5sw]);
        marker(:right :de.bf, nf[:kor] >> 0.5mt);
        slabel(:right, nf[:kor] << 0.5mt + (1.4dt, 1dt),
            "Korinth"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:kor + 0.5sw, :gro - 0.5sw]);
    }

    with link = "point.dk.Grønderup", railway = :station {
        track(nf[:gro - 0.5sw, :gro + 0.5sw]);
        marker(:left :de.hp, nf[:gro] << 0.5mt);
        slabel(:right, nf[:gro] << 0.5mt << 1sh + (0.9dt, 1dt),
            "Grønderup"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:gro + 0.5sw, :gro + 1.2km]);
        line_label(:right:e, nf[:gro + 1.2km] >> 0.5mt, "NRF");
        track(nf[:gro + 1.2km, :pej - 0.5sw]);
    }

    with link = "point.dk.Pejrup", railway = :station {
        track(nf[:pej - 0.5sw, :pej + 0.5sw]);
        marker(:left :de.bf, nf[:pej] << 0.5mt);
        slabel(:left, nf[:pej] >> 0.5mt + (-1dt, 0.8dt),
            "Pejrup"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:pej + 0.5sw, :kat.ys - 1seg]);
        track(:lor, nf[:kat.ys - 1seg, :kat.ys]);
    }

    with link = "point.dk.Katterød", railway = :station {
        track(:removed :pax,
                nf[:kat.ys, :kat + 0.5sw] << 1ms << 1mt
            --  nf[:kat + 0.5sw + 1dl, :kat + 0.5sw + 1.1dl]
        );
        track(nf[:kat.ys, :kat + 0.5sw + 2dl]);
        marker(:left :de.hp, nf[:kat] << 1ms << 1.5mt);
        marker(:left :de.exbf, nf[:kat] << 1ms << 1.5mt);
        slabel(:bottom :bold,
            nf[:kat] << 1ms << 1.5mt << 1.4sh + (0.5dt, 0.4dt),
            "Katterød"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:kat + 0.5sw + 2dl, :luc - 0.5sw]);
    }

    with link = "point.dk.Lucienhøj", railway = :station {
        track(nf[:luc - 0.5sw, :luc + 0.5sw]);
        marker(:left :de.hp :casing, nf[:luc] << 0.5mt);
        slabel(:bottom, nf[:luc] << 0.5mt << 1sh + (-1dt, 0.5dt),
            "Lucienhøj"
        );
    }

    with link = "line.dk.NRF" {
        track(nf[:luc + 0.5sw, :luc + 0.8km]);
        line_label(:right:sw, nf[:luc + 0.8km] >> 0.5mt, "NRF");
        track(nf[:luc + 0.8km, :faa - 0.5sw]);
    }

    with link = "point.dk.Faaborg", railway = :station {
        track(nf[:faa - 0.5sw, :faa + 0.5sw]);
        marker(:right :de.bf, nf[:faa] >> 0.5mt);
        slabel(:bottom :bold, nf[:faa] << 0.5mt + (-2dt, 0.3dt),
            "Faaborg"
        );
    }
}

