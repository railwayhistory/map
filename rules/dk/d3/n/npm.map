# DK NPM.  Næstved - Præstø - Mern
#
let np = path("d3.dk.npm.1");
let pm = path("d3.dk.npm.2");

with detail = 3,
     railway = :first :pax :removed
{
    # point.dk.Næstved  dk.RSR

    with link = "line.dk.NPM" {
        track(:ror,
                np[:nas.yp - 0.1dl, :nas.yp] << 0.5md << 1ms << 0.5mt
            ..  np[:nas.zp, :nas.zp + 0.1dl]
        );
        track(np[:nas.zp, :ron - 0.5sw]);
    }

    with link = "point.dk.Rønnebæk", railway = :station {
        track(np[:ron - 0.5sw, :ron + 0.5sw]);
        marker(:right :de.hp, np[:ron] >> 0.5mt);
        slabel(:right, np[:ron + 0.3sw] << 1.2mt, "Rønnebæk");
    }

    with link = "line.dk.NPM" {
        track(np[:ron + 0.5sw, :nst - 0.5sw]);
    }

    with link = "point.dk.Næstelsø", railway = :station {
        track(np[:nst - 0.5sw, :nst + 0.5sw]);
        marker(:right :de.hp, np[:nst] >> 0.5mt);
        slabel(:bottom, np[:nst] >> 0.5mt >> 1.1sh + (-4dt, 0dt), "Næstelsø");
    }

    with link = "line.dk.NPM" {
        track(np[:nst + 0.5sw, :bra - 0.5sw]);
    }

    with link = "point.dk.Brandelev", railway = :station {
        track(np[:bra - 0.5sw, :bra + 0.5sw]);
        marker(:right :de.bf, np[:bra] >> 0.5mt);
        slabel(:right, np[:bra] << 1.5mt, "Brandelev");
    }

    with link = "line.dk.NPM" {
        track(np[:bra + 0.5sw, :bra + 2km]);
        line_label(:right:ne, np[:bra + 2km] >> 0.5mt, "NPM");
        track(np[:bra + 2km, :bog - 0.5sw]);
    }

    with link = "point.dk.Bøgesø", railway = :station {
        track(np[:bog - 0.5sw, :bog + 0.5sw]);
        marker(:left :de.bf, np[:bog] << 0.5mt);
        slabel(:right, np[:bog] << 0.5mt << 1sh << 1.3dt + (0dt, 1.2dt),
            "Bøgesø"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:bog + 0.5sw, :ask - 0.5sw]);
    }

    with link = "point.dk.Askov-Huse", railway = :station {
        track(np[:ask - 0.5sw, :ask + 0.5sw]);
        marker(:left :de.hp, np[:ask] << 0.5mt);
        slabel(:right, np[:ask] << 0.5mt << 1sh << 1.3dt + (0dt, 1.4dt),
            "Askov Huse"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:ask + 0.5sw, :sne - 0.5sw]);
    }

    with link = "point.dk.Snesere", railway = :station {
        track(np[:sne - 0.5sw, :sne + 0.5sw]);
        marker(:right :de.bf, np[:sne] >> 0.5mt);
        slabel(:bottom, np[:sne] >> 0.5mt >> 1.2sh + (-1.5dt, 0dt), "Snesere");
    }

    with link = "line.dk.NPM" {
        track(np[:sne + 0.5sw, :lro - 0.5sw]);
    }

    with link = "point.dk.Lille-Røttinge", railway = :station {
        track(np[:lro - 0.5sw, :lro + 0.5sw]);
        marker(:left :de.hp, np[:lro] << 0.5mt);
        slabel(:right, np[:lro] << 0.5mt << 1sh << 1.8dt + (0dt, 1.4dt),
            "Lille Røttinge"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:lro + 0.5sw, :tap - 0.5sw]);
    }

    with link = "point.dk.Tappernøje", railway = :station {
        track(np[:tap - 0.5sw, :tap + 0.5sw]);
        marker(:right :de.bf, np[:tap] >> 0.5mt);
        slabel(:right, np[:tap] << 0.5mt << 1dt + (0dt, 1dt), "Tappernøje");
    }

    with link = "line.dk.NPM" {
        track(np[:tap + 0.5sw, :tap + 2.75km]);
        line_label(:left:w, np[:tap + 2.75km] << 0.5mt, (0dt, -0.2dt), "NPM");
        track(np[:tap + 2.75km, :fak - 0.5sw]);
    }

    with link = "point.dk.Faksinge", railway = :station {
        track(np[:fak - 0.5sw, :fak + 0.5sw]);
        marker(:right :de.hp, np[:fak] >> 0.5mt);
        slabel(:left, np[:fak] >> 0.5mt >> 1sh >> 1dt + (0dt, 1dt),
            "Faksinge"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:fak + 0.5sw, :pra.ym - 350m]);
    }

    with link = "point.dk.Præstø", railway = :station {
        track(np[:pra.ym - 350m, :pra + 0.5sw]);
        track(pm[:pra.ym, :pra.ym + 350m]);
        marker(:right :de.bf, np[:pra] >> 0.5mt);
        slabel(:nw, np[:pra + 0.5sw] >> 0.5mt >> 1sh,
            "Præstø"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:pra.ym + 350m, :ski - 0.5sw]);
    }

    with link = "point.dk.Skibinge", railway = :station {
        track(pm[:ski - 0.5sw, :ski + 0.5sw]);
        marker(:left :de.hp, pm[:ski] << 0.5mt);
        slabel(:right, pm[:ski] << 0.5mt << 1sh << 1.3dt + (0dt, 0.6dt),
            "Skibinge"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:ski + 0.5sw, :ski + 1.5km]);
        line_label(:right:e, pm[:ski + 1.5km] >> 0.5mt, (0dt, 0.2dt), "NPM");
        track(pm[:ski + 1.5km, :all - 0.5sw]);
    }

    with link = "point.dk.Allerslev", railway = :station {
        track(pm[:all - 0.5sw, :all + 0.5sw]);
        marker(:left :de.bf, pm[:all] << 0.5mt);
        slabel(:right, pm[:all + 0.5sw] << 0.5mt << 1sh << 0.8dt,
            "Allerslev"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:all + 0.5sw, :mer - 0.5sw]);
    }

    with link = "point.dk.Mern", railway = :station {
        track(pm[:mer - 0.5sw, :mer.f]);
        marker(:left :de.bf, pm[:mer] << 0.5mt);
        slabel(:right :bold, pm[:mer] << 0.5mt << 1sh << 1.2dt + (0dt, 1.2dt),
            "Mern"
        );
    }
}

