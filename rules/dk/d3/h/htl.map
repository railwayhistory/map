# DK HTL.  Høng - Tølløse
#
let ht = path("d3.dk.htl");

with detail = 3,
     railway = :first :pax
{
    # point.dk.Høng  dk.SVL

    with link = "line.dk.HTL" {
        track(:lor,
                ht[:hon.yt - 0.1dl, :hon.yt] >> 1mt >> 1ms
            ..  ht[:hon.xt, :hon.xt + 0.1dl]
        );
        track(ht[:hon.xt, :kul - 0.5sw]);
    }

    with link = "point.dk.Kulby", railway = :station {
        track(ht[:kul - 0.5sw, :kul + 0.5sw]);
        marker(:left :de.hp :removed, ht[:kul] << 0.5mt);
        marker(:left :de.exbf :removed, ht[:kul] << 0.5mt);
        slabel(:left :removed, ht[:kul - 0.4sw] << 0.5mt << 1.6sh, "Kulby");
    }

    with link = "line.dk.HTL" {
        track(ht[:kul + 0.5sw, :kul + 1.7km]);
        line_label(:right:nw, ht[:kul + 1.7km] >> 0.5mt, "HTL");
        track(ht[:kul + 1.7km, :rud - 0.5sw]);
    }

    with link = "point.dk.Ruds-Vedby", railway = :station {
        track(ht[:rud - 0.5sw, :rud + 0.5sw]);
        marker(:left :de.bf, ht[:rud] << 0.5mt);
        slabel(:left, ht[:rud] << 0.5mt << 1.5sh + (1.5sw, 0dt), "Ruds Vedby");
    }

    with link = "line.dk.HTL" {
        track(ht[:rud + 0.5sw, :hes - 0.5sw]);
    }

    with link = "point.dk.Hestehavens", railway = :station {
        track(ht[:hes - 0.5sw, :hes + 0.5sw]);
        marker(:right :de.hp :removed, ht[:hes] >> 0.5mt);
        slabel(:bottom :removed, ht[:hes] >> 0.5mt >> 1.1sh,
            "Hestehavens"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:hes + 0.5sw, :con - 0.5sw]);
    }

    with link = "point.dk.Conradineslyst", railway = :station {
        track(ht[:con - 0.5sw, :con + 0.5sw]);
        marker(:left :de.hp :removed, ht[:con] << 0.5mt);
        slabel(:top :removed, ht[:con] << 0.5mt << 1.1sh,
            "Conradineslyst"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:con + 0.5sw, :ske - 0.5sw]);
    }

    with link = "point.dk.Skellebjerg", railway = :station {
        track(ht[:ske - 0.5sw, :ske + 0.5sw]);
        marker(:right :de.bf, ht[:ske] >> 0.5mt);
        slabel(:bottom, ht[:ske] >> 0.5mt >> 1.1sh,
            "Skellebjerg"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:ske + 0.5sw, :ske + 1.6km]);
        line_label(:left:s, ht[:ske + 1.6km] << 0.5mt, "HTL");
        track(ht[:ske + 1.6km, :dia - 0.5sw]);
    }

    with link = "point.dk.Dianalund", railway = :station {
        track(ht[:dia - 0.5sw, :dia + 0.5sw]);
        marker(:right :de.bf, ht[:dia] >> 0.5mt);
        slabel(:bottom, ht[:dia] >> 0.5mt >> 1.1sh, "Dianalund");
    }

    with link = "line.dk.HTL" {
        track(ht[:dia + 0.5sw, :ved.ys]);
    }

    with link = "point.dk.Vedde", railway = :station {
        track(ht[:ved.ys, :ved + 0.5sw]);
        track(:removed, ht[:ved.ys, :ved + 0.5sw] >> 1mt >> 1ms);
        marker(:right :de.hp, ht[:ved] >> 1.5mt >> 1ms);
        marker(:right :de.exbf, ht[:ved] >> 1.5mt >> 1ms);
        slabel(:bottom :bold, ht[:ved] >> 1.5mt >> 1ms >> 1.7sh + (2dt, 0dt),
            "Vedde"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:ved + 0.5sw, :ste - 0.5sw]);
    }

    with link = "point.dk.Stenlille", railway = :station {
        track(ht[:ste - 0.5sw, :ste + 0.5sw]);
        marker(:right :de.bf, ht[:ste] >> 0.5mt);
        slabel(:bottom, ht[:ste] >> 0.5mt >> 1.2sh, "Stenlille");
    }

    with link = "line.dk.HTL" {
        track(ht[:ved + 0.5sw, :ste - 0.5sw]);
    }

    with link = "point.dk.Stenlille", railway = :station {
        track(ht[:ste - 0.5sw, :ste + 0.5sw]);
        marker(:right :de.bf, ht[:ste] >> 0.5mt);
        slabel(:bottom, ht[:ste] >> 0.5mt >> 1.2sh, "Stenlille");
    }

    with link = "line.dk.HTL" {
        track(ht[:ste + 0.5sw, :ste + 1.6km]);
        line_label(:left:s, ht[:ste + 1.6km] << 0.5mt, "HTL");
        track(ht[:ste + 1.6km, :nyr - 0.5sw]);
    }

    with link = "point.dk.Nyrup", railway = :station {
        track(ht[:nyr - 0.5sw, :nyr + 0.5sw]);
        marker(:left :de.hp, ht[:nyr] << 0.5mt);
        marker(:left :de.exbf, ht[:nyr] << 0.5mt);
        slabel(:top, ht[:nyr] << 0.5mt << 1.6sh, "Nyrup");
    }

    with link = "line.dk.HTL" {
        track(ht[:nyr + 0.5sw, :bag - 0.5sw]);
    }

    with link = "point.dk.Bagmarken", railway = :station {
        track(ht[:bag - 0.5sw, :bag + 0.5sw]);
        marker(:right :de.hp, ht[:bag] >> 0.5mt);
        slabel(:bottom, ht[:bag] >> 0.5mt >> 1.05sh - (1dt, 0dt), "Bagmarken");
    }

    with link = "line.dk.HTL" {
        track(ht[:bag + 0.5sw, :sme - 0.5sw]);
    }

    with link = "point.dk.Store-Merløse", railway = :station {
        track(ht[:sme - 0.5sw, :sme + 0.5sw]);
        marker(:right :de.bf, ht[:sme] >> 0.5mt);
        slabel(:nw, ht[:sme] >> 0.5mt >> 1.2sh + (-2dt, 0dt), "Store Merløse");
    }

    with link = "line.dk.HTL" {
        track(ht[:sme + 0.5sw, :uds - 0.5sw]);
    }

    with link = "point.dk.Udstrup", railway = :station {
        track(ht[:uds - 0.5sw, :uds + 0.5sw]);
        marker(:left :de.hp :removed, ht[:uds] << 0.5mt);
        slabel(:left :removed, ht[:uds] << 0.5mt << 1.6sh + (0dt, 1.2dt),
            "Udstrup"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:uds + 0.5sw, :kes - 0.5sw]);
    }

    with link = "point.dk.Kirke-Eskilstrup", railway = :station {
        track(ht[:kes - 0.5sw, :kes + 0.5sw]);
        marker(:left :de.bf, ht[:kes] << 0.5mt);
        slabel(:left, ht[:kes] << 0.5mt << 1.5sh + (0dt, 1dt),
            "Kirke Eskilstrup"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:kes + 0.5sw, :kes + 1.8km]);
        line_label(:left:e, ht[:kes + 1.8km] << 0.5mt, "HTL");
        track(ht[:kes + 1.8km, :tol.xh - 2mt]);
        track(:ror,
                ht[:tol.xh - 2.1mt, :tol.xh - 2mt]
            ..  ht[:tol.yh, :tol.yh + 0.1dl] << 0.5md << 1ms << 0.5mt
        );
    }

    # point.dk.Tølløse  dk.RKB
}

