# DK HFH.  Hillerød - Frederiksværk - Hundested Havn
#
let hh = path("d3.dk.hfh");

with detail = 3,
     railway = :first :pax
{
    # point.dk.Hillerød  dk.HHS

    with link = "line.dk.HFH" {
        track(:lor, hh[:hil + 0.5sw, :hil.yh] >> 0.5md >> 1ms >> 0.5mt);
    }

    with link = "point.dk.Favrholm", railway = :station {
        track(hh[:hil.yh, :fav + 0.5sw] >> 0.5md >> 1ms >> 0.5mt);
        marker(:right :de.hp, hh[:fav] >> 0.5md >> 1ms >> 1mt);
    }

    with link = "line.dk.HFH" {
        track(hh[:fav + 0.5sw, :sth - 0.5sw] >> 0.5md >> 1ms >> 0.5mt);
    }

    with link = "point.dk.St-Hestehave", railway = :station {
        track(hh[:sth - 0.5sw, :sth + 0.5sw] >> 0.5md >> 1ms >> 0.5mt);
        marker(:left :de.hp :removed, hh[:sth] >> 0.5md >> 1ms);
        slabel(:left :removed, hh[:sth + 1sw] >> 0.5md >> 1ms >> 1.5mt,
            "St. Hestehave"
        );
    }

    with link = "line.dk.HFH" {
        track(
                hh[:sth + 0.49sw, :sth + 0.5sw] >> 0.5md >> 1ms >> 0.5mt
            ..  hh[:hil.xh + 8md, :bro - 0.5sw]
        );
    }

    with link = "point.dk.Brødeskov", railway = :station {
        track(hh[:bro - 0.5sw, :bro.ys]);
        marker(:left :de.bf, hh[:bro] << 0.5mt);
        slabel(:nw, hh[:bro - 0.5sw] << 0.5mt << 1.2sh, "Brødeskov");
    }

    with link = "line.dk.HFH" {
        track(hh[:bro.ys, :bro + 2.7km]);
        line_label(:right:s, hh[:bro + 2.7km] >> 0.5mt, "HFH");
        track(hh[:bro + 2.7km, :gor - 0.5sw]);
    }

    with link = "point.dk.Gørløse", railway = :station {
        track(hh[:gor - 0.5sw, :gor + 0.5sw]);
        marker(:right :de.bf, hh[:gor] >> 0.5mt);
        slabel(:right, hh[:gor] >> 0.5mt >> 1.4sh + (-1.2sw, 0dt), "Gørløse");
    }

    with link = "line.dk.HFH" {
        track(hh[:gor + 0.5sw, :bor - 0.5sw]);
    }

    with link = "point.dk.Borupgård", railway = :station {
        track(hh[:bor - 0.5sw, :bor + 0.5sw]);
        marker(:right :de.hp :removed, hh[:bor] >> 0.5mt);
        slabel(:right :removed, hh[:bor] >> 0.5mt >> 1.6sh + (0dt, 1.2dt),
            "Borupgård"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:bor + 0.5sw, :ska.yh]);
        track(hh[:ska.yh, :ska - 0.5sw]);
    }

    with link = "point.dk.Skævinge", railway = :station {
        track(hh[:ska - 0.5sw, :ska + 0.5sw]);
        marker(:right :de.bf, hh[:ska] >> 0.5mt);
        slabel(:top :bold, hh[:ska] >> 0.5mt >> 1.1sh,
            "Skævinge"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ska + 0.5sw, :str - 0.5sw]);
    }

    with link = "point.dk.Strølille", railway = :station {
        track(hh[:str - 0.5sw, :str + 0.5sw]);
        marker(:left :de.hp :removed, hh[:str] << 0.5mt);
        slabel(:bottom :removed, hh[:str] << 0.5mt << 1.2sh + (-1dt, 0dt),
            "Strølille"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:str + 0.5sw, :gri - 0.5sw]);
    }

    with link = "point.dk.Grimstrup", railway = :station {
        track(hh[:gri - 0.5sw, :gri + 0.5sw]);
        marker(:left :de.hp, hh[:gri] << 0.5mt);
        slabel(:bottom, hh[:gri] << 0.5mt << 1.15sh + (-3dt, 0dt),
            "Grimstrup"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:gri + 0.5sw, :gri + 1km]);
        line_label(:right:s, hh[:gri + 1km] >> 0.5mt, (1dt, 0dt), "HFH");
        track(hh[:gri + 1km, :ols - 0.5sw]);
    }

    with link = "point.dk.Ølsted", railway = :station {
        track(hh[:ols - 0.5sw, :ols + 0.5sw]);
        marker(:left :de.bf, hh[:ols] << 0.5mt);
        slabel(:bottom, hh[:ols] << 0.5mt << 1.3sh + (-2.5dt, 0dt),
            "Ølsted"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ols + 0.5sw, :kre - 0.5sw]);
    }

    with link = "point.dk.Kregme", railway = :station {
        track(hh[:kre - 0.5sw, :kre + 0.5sw]);
        marker(:right :de.bf, hh[:kre] >> 0.5mt);
        slabel(:right, hh[:kre] >> 0.5mt >> 1.6sh + (0dt, 1.2dt),
            "Kregme"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:kre + 0.5sw, :krk - 0.5sw]);
    }

    with link = "point.dk.Kregme-Kirkesti", railway = :station {
        track(hh[:krk - 0.5sw, :krk + 0.5sw]);
        marker(:right :de.hp :removed, hh[:krk] >> 0.5mt);
        slabel(:right :removed, hh[:krk] >> 0.5mt >> 1.6sh + (0dt, 1.4dt),
            "Kregme Kirkesti"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:krk + 0.5sw, :lil - 0.5sw]);
    }

    with link = "point.dk.Lille-Kregme", railway = :station {
        track(hh[:lil - 0.5sw, :lil + 0.5sw]);
        marker(:right :de.hp, hh[:lil] >> 0.5mt);
        slabel(:right, hh[:lil] >> 0.5mt >> 1.6sh + (0dt, 1.2dt),
            "Lille Kregme"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:lil + 0.5sw, :lil + 1.5km]);
        line_label(:left:e, hh[:lil + 1.5km] << 0.5mt, (0dt, 0.2dt), "HFH");
        track(hh[:lil + 1.5km, :fre - 0.5sw]);
    }

    with link = "point.dk.Frederiksværk", railway = :station {
        track(hh[:fre - 0.5sw, :fre + 0.5sw]);
        marker(:right :de.bf, hh[:fre] >> 0.5mt);
        slabel(:right, hh[:fre] >> 0.5mt >> 1.5sh + (0dt, 1dt),
            "Frederiksværk"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:fre + 0.5sw, :han - 0.5sw]);
    }

    with link = "point.dk.Hanehoved", railway = :station {
        track(hh[:han - 0.5sw, :han + 0.5sw]);
        marker(:right :de.hp, hh[:han] >> 0.5mt);
        slabel(:right, hh[:han] >> 0.5mt >> 1.6sh + (0dt, 1.4dt),
            "Hanehoved"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:han + 0.5sw, :mel - 0.5sw]);
    }

    with link = "point.dk.Melby", railway = :station {
        track(hh[:mel - 0.5sw, :mel + 0.5sw]);
        marker(:right :de.bf, hh[:mel] >> 0.5mt);
        slabel(:top, hh[:mel] >> 0.5mt >> 1.2sh, "Melby");
    }

    with link = "line.dk.HFH" {
        track(hh[:mel + 0.5sw, :dys - 0.5sw]);
    }

    with link = "point.dk.Dyssekilde", railway = :station {
        track(hh[:dys - 0.5sw, :dys + 0.5sw]);
        marker(:left :de.bf, hh[:dys] << 0.5mt);
        slabel(:bottom, hh[:dys] << 0.5mt << 1.2sh + (1sw, 0dt), "Dyssekilde");
    }

    with link = "line.dk.HFH" {
        track(hh[:dys + 0.5sw, :ost - 0.5sw]);
    }

    with link = "point.dk.Østerbjerg", railway = :station {
        track(hh[:ost - 0.5sw, :ost + 0.5sw]);
        marker(:left :de.bf, hh[:ost] << 0.5mt);
        slabel(:bottom, hh[:ost] << 0.5mt << 1.4sh + (1.5sw, 0dt),
            "Østerbjerg"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ost + 0.5sw, :ost + 1km]);
        line_label(:right:se, hh[:ost + 1km] >> 0.5mt, "HFH");
        track(hh[:ost + 1km, :ull - 0.5sw]);
    }

    with link = "point.dk.Ullerup", railway = :station {
        track(hh[:ull - 0.5sw, :ull + 0.5sw]);
        marker(:right :de.hp :removed, hh[:ull] >> 0.5mt);
        slabel(:nw :removed, hh[:ull - 0.5sw] << 0.5mt,
            "Ullerup"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ull + 0.5sw, :vib - 0.5sw]);
    }

    with link = "point.dk.Vibehus", railway = :station {
        track(hh[:vib - 0.5sw, :vib + 0.5sw]);
        marker(:left :de.hp, hh[:vib] << 0.5mt);
        slabel(:right, hh[:vib] << 0.5mt << 1.8sh + (0dt, 0.6dt),
            "Vibehus"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:vib + 0.5sw, :hun - 0.5sw]);
    }

    with link = "point.dk.Hundested", railway = :station {
        track(hh[:hun - 0.5sw, :hun + 0.5sw]);
        marker(:left :de.bf, hh[:hun] << 0.5mt);
        slabel(:ne, hh[:hun - 0.3sw] << 0.5mt << 1.4sh,
            "Hundested"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:hun + 0.5sw, :huh - 0.5sw]);
    }

    with link = "point.dk.Hundested-Havn", railway = :station {
        track(hh[:huh - 0.5sw, :huh + 0.5sw]);
        with layer = 1 marker(:left :de.bf :casing, hh[:huh] << 0.5mt);
        slabel(:left :bold, hh[:huh] >> 1.5mt,
            "Hundested Havn"
        );
    }
}

