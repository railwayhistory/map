# DK TAS.  Tommerup - Assens
#
let ta = path("d3.dk.tas");

with detail = 3,
     railway = :first :pax :closed
{
    # point.dk.Tommerup  dk.KFA

    with link = "line.dk.TAS" {
        track(:lor,
                ta[:tom.ya - 0.1dl, :tom.ya] >> 0.5md >> 1ms >> 0.5mt
            ..  ta[:tom.xa + 1.5md, :tom.xa + 1.51md]
        );
        track(ta[:tom.xa + 1.5md, :tom.xa + 1km]);
        line_label(:right:ne, ta[:tom.xa + 1km] >> 0.5mt, "TAS");
        track(ta[:tom.xa + 1km, :kna - 0.5sw]);
    }

    with link = "point.dk.Knarreborg", railway = :station {
        track(ta[:kna - 0.5sw, :kna + 0.5sw]);
        marker(:left :de.bf, ta[:kna] << 0.5mt);
        slabel(:right, ta[:kna] << 0.5mt << 1sh + (1.2dt, 1.2dt),
            "Knarreborg"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kna + 0.5sw, :kiv - 0.5sw]);
    }

    with link = "point.dk.Kivsmose", railway = :station {
        track(ta[:kiv - 0.5sw, :kiv + 0.5sw]);
        marker(:right :de.hp, ta[:kiv] >> 0.5mt);
        slabel(:left, ta[:kiv] >> 0.5mt >> 1sh + (-1.5dt, 0.5dt),
            "Kivsmose"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kiv + 0.5sw, :nar - 0.5sw]);
    }

    with link = "point.dk.Nårup", railway = :station {
        track(ta[:nar - 0.5sw, :nar + 0.5sw]);
        marker(:right :de.bf, ta[:nar] >> 0.5mt);
        slabel(:left, ta[:nar] >> 0.5mt >> 1sh + (-1.5dt, 0.5dt),
            "Nårup"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:nar + 0.5sw, :hol - 0.5sw]);
    }

    with link = "point.dk.Holtegård", railway = :station {
        track(ta[:hol - 0.5sw, :hol + 0.5sw]);
        marker(:right :de.hp, ta[:hol] >> 0.5mt);
        slabel(:left, ta[:hol] >> 0.5mt >> 1sh + (-1.4dt, 0.8dt),
            "Holtegård"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:hol + 0.5sw, :gla - 0.5sw]);
    }

    with link = "point.dk.Glamsbjerg", railway = :station {
        track(ta[:gla - 0.5sw, :gla + 0.5sw]);
        marker(:left :de.bf, ta[:gla] << 0.5mt);
        slabel(:right, ta[:gla] << 0.5mt << 1sh + (1.2dt, 1.8dt),
            "Glamsbjerg"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:gla + 0.5sw, :kop - 0.5sw]);
    }

    with link = "point.dk.Koppenbjerg", railway = :station {
        track(ta[:kop - 0.5sw, :kop + 0.5sw]);
        marker(:right :de.hp, ta[:kop] >> 0.5mt);
        slabel(:left, ta[:kop] >> 0.5mt >> 1sh + (-1.4dt, 1dt),
            "Koppenbjerg"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kop + 0.5sw, :kop + 1.1km]);
        line_label(:left:w, ta[:kop + 1.1km] << 0.5mt, "TAS");
        track(ta[:kop + 1.1km, :fle - 0.5sw]);
    }

    with link = "point.dk.Flemløse", railway = :station {
        track(ta[:fle - 0.5sw, :fle + 0.5sw]);
        marker(:right :de.hp, ta[:fle] >> 0.5mt);
        slabel(:left, ta[:fle] >> 0.5mt >> 1sh + (-1.3dt, 0dt),
            "Flemløse"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:fle + 0.5sw, :hoe - 0.5sw]);
    }

    with link = "point.dk.Høed", railway = :station {
        track(ta[:hoe - 0.5sw, :hoe + 0.5sw]);
        marker(:left :de.hp, ta[:hoe] << 0.5mt);
        slabel(:bottom, ta[:hoe] << 0.5mt << 1sh + (0dt, 0.2dt),
            "Høed"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:hoe + 0.5sw, :ebb - 0.5sw]);
    }

    with link = "point.dk.Ebberup", railway = :station {
        track(ta[:ebb - 0.5sw, :ebb + 0.5sw]);
        marker(:left :de.bf, ta[:ebb] << 0.5mt);
        slabel(:bottom, ta[:ebb] << 0.5mt << 1sh + (-1dt, 0.4dt),
            "Ebberup"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:ebb + 0.5sw, :kar - 0.5sw]);
    }

    with link = "point.dk.Kærum", railway = :station {
        track(ta[:kar - 0.5sw, :kar + 0.5sw]);
        marker(:left :de.hp, ta[:kar] << 0.5mt);
        slabel(:bottom, ta[:kar] << 0.5mt << 1sh + (-1dt, 0.3dt),
            "Kærum"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kar + 0.5sw, :kar + 2.7km]);
        line_label(:left:ne, ta[:kar + 2.7km] << 0.5mt, "TAS");
        track(ta[:kar + 2.7km, :ass.x]);
    }
}

with detail = 3,
     railway = :first :pax :removed
{
    with link = "line.dk.TAS" {
        track(ta[:ass.x, :ass - 0.5sw]);
    }

    with link = "point.dk.Assens", railway = :station {
        track(ta[:ass - 0.5sw, :ass + 0.5sw]);
        marker(:right :de.bf, ta[:ass] >> 0.5mt);
        slabel(:right :bold, ta[:ass] >> 0.5mt >> 1sh + (1dt, 1dt),
            "Assens"
        );
    }
}

