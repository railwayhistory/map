# DK SNN.  Stubbekøbing - Nykøbing - Nysted
#
let sn = path("d3.dk.snn");

with detail = 3,
     railway = :first :pax :removed
{
    with link = "point.dk.Stubbekøbing", railway = :station {
        track(sn[:stu, :stu + 0.5sw]);
        marker(:bottom :de.bf, sn[:stu]);
        slabel(:left :bold, sn[:stu] + (-1sh, 0dt) + (-1.5dt, 0dt),
            "Stubbekøbing"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:stu + 0.5sw, :stu + 1.6km]);
        line_label(:left:w, sn[:stu + 1.6km] << 0.5mt, "SNN");
        track(sn[:stu + 1.6sw, :ast - 0.5sw]);
    }

    with link = "point.dk.Åstrup", railway = :station {
        track(sn[:ast - 0.5sw, :ast + 0.5sw]);
        marker(:left :de.hst, sn[:ast] << 0.5mt);
        slabel(:right, sn[:ast] << 0.5mt << 1sh + (1dt, 1.2dt), "Åstrup");
    }

    with link = "line.dk.SNN" {
        track(sn[:ast + 0.5sw, :sar - 0.5sw]);
    }

    with link = "point.dk.Særslev", railway = :station {
        track(sn[:sar - 0.5sw, :sar + 0.5sw]);
        marker(:right :de.hp, sn[:sar] >> 0.5mt);
        slabel(:right, sn[:sar] << 1.8mt + (0dt, 1.2dt), "Særslev");
    }

    with link = "line.dk.SNN" {
        track(sn[:sar + 0.5sw, :hor - 0.5sw]);
    }

    with link = "point.dk.Horbelev", railway = :station {
        track(sn[:hor - 0.5sw, :hor + 0.5sw]);
        marker(:right :de.bf, sn[:hor] >> 0.5mt);
        slabel(:right, sn[:hor] << 1.8mt + (0dt, 1dt), "Horbelev");
    }

    with link = "line.dk.SNN" {
        track(sn[:hor + 0.5sw, :mee - 0.5sw]);
    }

    with link = "point.dk.Meelse", railway = :station {
        track(sn[:mee - 0.5sw, :mee + 0.5sw]);
        marker(:right :de.hp, sn[:mee] >> 0.5mt);
        slabel(:left, sn[:mee + 0.5sw] >> 0.5mt >> 1.2sh, "Meelse");
    }

    with link = "line.dk.SNN" {
        track(sn[:mee + 0.5sw, :kar - 0.5sw]);
    }

    with link = "point.dk.Karleby", railway = :station {
        track(sn[:kar - 0.5sw, :kar + 0.5sw]);
        marker(:left :de.bf, sn[:kar] << 0.5mt);
        slabel(:nw, sn[:kar - 0.5sw] << 0.5mt << 1sh, "Karleby");
    }

    with link = "line.dk.SNN" {
        track(sn[:kar + 0.5sw, :ege - 0.5sw]);
    }

    with link = "point.dk.Egebjerg", railway = :station {
        track(sn[:ege - 0.5sw, :ege + 0.5sw]);
        marker(:right :de.bf, sn[:ege] >> 0.5mt);
        slabel(:right, sn[:ege] << 1.8mt + (0dt, 1dt), "Egebjerg");
    }

    with link = "line.dk.SNN" {
        track(sn[:ege + 0.5sw, :sor - 0.5sw]);
    }

    with link = "point.dk.Sønder-Ørslev", railway = :station {
        track(sn[:sor - 0.5sw, :sor + 0.5sw]);
        marker(:right :de.bf, sn[:sor] >> 0.5mt);
        slabel(:nw, sn[:sor - 0.5sw] << 0.3mt, "Sønder Ørslev");
    }

    with link = "line.dk.SNN" {
        track(sn[:sor + 0.5sw, :ide - 0.5sw]);
    }

    with link = "point.dk.Idestrup", railway = :station {
        track(sn[:ide - 0.5sw, :ide + 0.5sw]);
        marker(:right :de.hp, sn[:ide] >> 0.5mt);
        slabel(:bottom, sn[:ide] << 0.8mt, "Idestrup");
    }

    with link = "line.dk.SNN" {
        track(sn[:ide + 0.5sw, :ide + 2km]);
        line_label(:left:ne, sn[:ide + 2km] << 0.5mt, "SNN");
        track(sn[:ide + 2km, :sve - 0.5sw]);
    }

    with link = "point.dk.Sønder-Vedby", railway = :station {
        track(sn[:sve - 0.5sw, :sve + 0.5sw]);
        marker(:right :de.hp, sn[:sve] >> 0.5mt);
        slabel(:right, sn[:sve] >> 0.5mt >> 1sh + (1.5dt, 0.8dt),
            vbox(:left:base, "Sønder", "Vedby")
        );
    }

    with link = "line.dk.SNN" {
        track(
                sn[:sve + 0.5sw, :nyk.xs - 2md]
            ..  sn[:nyk.ys, :nyk.ys + 0.1dl] << 0.5md << 2ms << 1.5mt
        );
    }

    # point.dk.Nykøbing-Falster  dk.RSR

    with link = "line.dk.SNN" {
        track(sn[:nyk.yg, :oto.yn]);
    }

    # point.dk.Øster-Toreby  dk.NNS

    with link = "line.dk.SNN" {
        track(sn[:oto + 0.5sw, :tor - 0.5sw]);
    }

    with link = "point.dk.Toreby", railway = :station {
        track(sn[:tor - 0.5sw, :tor + 0.5sw]);
        marker(:right :de.hp, sn[:tor] >> 0.5mt);
        slabel(:left, sn[:tor + 0.5sw] >> 0.5mt >> 1.2sh,
            "Toreby"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:tor + 0.5sw, :fli - 0.5sw]);
    }

    with link = "point.dk.Flintinge", railway = :station {
        track(sn[:fli - 0.5sw, :fli + 0.5sw]);
        marker(:right :de.bf :casing, sn[:fli] >> 0.5mt);
        slabel(:right, sn[:fli] << 0.5mt + (1dt, 1.2dt),
            "Flintinge"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:fli + 0.5sw, :fug - 0.5sw]);
    }

    with link = "point.dk.Fuglsang", railway = :station {
        track(sn[:fug - 0.5sw, :fug + 0.5sw]);
        marker(:right :de.hp, sn[:fug] >> 0.5mt);
        slabel(:right, sn[:fug] << 0.5mt + (0.8dt, 1.2dt),
            "Fuglsang"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:fug + 0.5sw, :slo - 0.5sw]);
    }

    with link = "point.dk.Sløsserup", railway = :station {
        track(sn[:slo - 0.5sw, :slo + 0.5sw]);
        marker(:right :de.hp, sn[:slo] >> 0.5mt);
        slabel(:right, sn[:slo] << 0.5mt + (0.8dt, 1.2dt),
            "Sløsserup"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:slo + 0.5sw, :slo + 1km]);
        line_label(:right:e, sn[:slo + 1km] >> 0.5mt, (0dt, -0.1dt), "SNN");
        track(sn[:slo + 1km, :fre - 0.5sw]);
    }

    with link = "point.dk.Frejlev", railway = :station {
        track(sn[:fre - 0.5sw, :fre + 0.5sw]);
        marker(:left :de.bf, sn[:fre] << 0.5mt);
        slabel(:right, sn[:fre] << 0.5mt << 1sh + (1dt, 1.5dt),
            "Frejlev"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:fre + 0.5sw, :frm - 0.5sw]);
    }

    with link = "point.dk.Frejlev-Mejerivej", railway = :station {
        track(sn[:frm - 0.5sw, :frm + 0.5sw]);
        marker(:left :de.hp, sn[:frm] << 0.5mt);
        slabel(:nw, sn[:frm - 0.4sw] << 0.5mt << 1sh,
            "Frejlev Mejerivej"
        );
    }

    with link = "line.dk.SNN" {
        track(sn[:frm + 0.5sw, :ket - 0.5sw]);
    }

    with link = "point.dk.Kettinge", railway = :station {
        track(sn[:ket - 0.5sw, :ket + 0.5sw]);
        marker(:right :de.bf, sn[:ket] >> 0.5mt);
        slabel(:left, sn[:ket] >> 0.5mt >> 1sh + (-1dt, 1dt), "Kettinge");
    }

    with link = "line.dk.SNN" {
        track(sn[:ket + 0.5sw, :nys - 0.5sw]);
    }

    with link = "point.dk.Nysted", railway = :station {
        track(sn[:nys - 0.5sw, :nys + 0.5sw]);
        marker(:right :de.bf, sn[:nys] >> 0.5mt);
        slabel(:left :bold, sn[:nys] >> 0.5mt >> 1sh + (-1.3dt, 1.3dt),
            "Nysted"
        );
    }
}

