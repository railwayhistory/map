# DK SBF.  Svendbor - Katterød (- Faaborg)
#
let sk = path("d3.dk.sbf");

with detail = 3,
     railway = :first :pax :removed
{
    # point.dk.Svendborg  dk.OSB

    with link = "line.dk.SBF" {
        track(:ror, sk[:sve + 0.5sw, :sve.yf] << 1ms << 1mt);
        track(:ror,
                sk[:sve.yf - 0.1dl, :sve.yf] << 1ms << 1mt
            ..  sk[:sve.xf + 2mt, :sve.xf + 2.01mt]
        );
        track(sk[:sve.xf + 2mt, :sko - 0.5sw]);
    }

    with link = "point.dk.Skovsbo", railway = :station {
        track(sk[:sko - 0.5sw, :sko + 0.5sw]);
        marker(:left :de.hp, sk[:sko] << 0.5mt);
        slabel(:bottom, sk[:sko] << 0.5mt << 1sh + (0dt, 0.3dt), "Skovsbo");
    }

    with link = "line.dk.SBF" {
        track(sk[:sko + 0.5sw, :ege - 0.5sw]);
    }

    with link = "point.dk.Egense", railway = :station {
        track(sk[:ege - 0.5sw, :ege + 0.5sw]);
        marker(:right :de.bf, sk[:ege] >> 0.5mt);
        slabel(:left, sk[:ege] << 0.5mt + (-1.5dt, 1dt), "Egense");
    }

    with link = "line.dk.SBF" {
        track(sk[:ege + 0.5sw, :ege + 1.4km]);
        line_label(:right:sw, sk[:ege + 1.4km] >> 0.5mt, "SBF");
        track(sk[:ege + 1.4km, :oll - 0.5sw]);
    }

    with link = "point.dk.Ollerup", railway = :station {
        track(sk[:oll - 0.5sw, :oll + 0.5sw]);
        marker(:right :de.bf, sk[:oll] >> 0.5mt);
        slabel(:right, sk[:oll] >> 0.5mt >> 1sh + (1.5dt, 0.3dt), "Ollerup");
    }

    with link = "line.dk.SBF" {
        track(sk[:oll + 0.5sw, :aki - 0.5sw]);
    }

    with link = "point.dk.Åkilde", railway = :station {
        track(sk[:aki - 0.5sw, :aki + 0.5sw]);
        marker(:right :de.hp, sk[:aki] >> 0.5mt);
        slabel(:top, sk[:aki] >> 0.5mt >> 1sh + (0dt, -0.3dt), "Åkilde");
    }

    with link = "line.dk.SBF" {
        track(sk[:aki + 0.5sw, :vsk - 0.5sw]);
    }

    with link = "point.dk.Vester-Skerninge", railway = :station {
        track(sk[:vsk - 0.5sw, :vsk + 0.5sw]);
        marker(:right :de.bf, sk[:vsk] >> 0.5mt);
        slabel(:bottom, sk[:vsk] << 0.5mt + (0dt, 0.3dt),
            vbox(:center:top, "Vester", "Skerninge")
        );
    }

    with link = "line.dk.SBF" {
        track(sk[:vsk + 0.5sw, :ulb - 0.5sw]);
    }

    with link = "point.dk.Ulbølle", railway = :station {
        track(sk[:ulb - 0.5sw, :ulb + 0.5sw]);
        marker(:right :de.bf, sk[:ulb] >> 0.5mt);
        slabel(:top, sk[:ulb] >> 0.5mt >> 1sh + (2dt, -0.3dt), "Ulbølle");
    }

    with link = "line.dk.SBF" {
        track(sk[:ulb + 0.5sw, :ulb + 2.3km]);
        line_label(:right:sw, sk[:ulb + 2.3km] >> 0.5mt, "SBF");
        track(sk[:ulb + 2.3km, :vab - 0.5sw]);
    }

    with link = "point.dk.Vester-Åby", railway = :station {
        track(sk[:vab - 0.5sw, :vab + 0.5sw]);
        marker(:left :de.bf, sk[:vab] << 0.5mt);
        slabel(:top, sk[:vab] >> 0.5mt + (0dt, -1dt),
            vbox(:center:bottom, "Vester", "Åby")
        );
    }

    with link = "line.dk.SBF" {
        track(sk[:vab + 0.5sw, :nak - 0.5sw]);
    }

    with link = "point.dk.Nakkebølle", railway = :station {
        track(sk[:nak - 0.5sw, :nak + 0.5sw]);
        marker(:right :de.hp, sk[:nak] >> 0.5mt);
        slabel(:bottom, sk[:nak] << 0.5mt + (0dt, 60m) + (0dt, 0.3dt),
            "Nakkebølle"
        );
    }

    with link = "line.dk.SBF" {
        track(sk[:nak + 0.5sw, :kat.xs - 4mt]);
        track(:ror,
                sk[:kat.xs - 4.1mt, :kat.xs - 4mt]
            ..  sk[:kat.ys, :kat.ys + 0.1dl] << 1mt << 1ms
        );
    }
}

