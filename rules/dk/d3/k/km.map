# DK KM.  København H - Peberholm grænse
#
let km = path("d4.dk.km");

with detail = 3 {
    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax,
                km[:kob + 1sw, :kob.yk] << 2dt
            ..  km[:kob.yyk + 3dt, :kal - 1sw]
        );
    }

    with link = "point.dk.Kalvebod" {
        track(:first:station :cat:ac25 :pax,
                km[:kal - 1sw, :kal] << 1.5dt
            --  km[:kal + 1dl, :kal + 1.1dl] << 0.5dt
        );
        track(:first:station :double :cat:ac25 :pax,
                km[:kal - 1sw, :kal + 1sw]
        );
        track(:first:station :cat:ac25 :pax,
                km[:kal - 1sw, :kal - 0.5sw - 1dl] >> 1.5dt
            --  km[:kal - 0.5sw, :kal - 0.49sw] >> 0.5dt
        );
        marker(:right :de.bbf :cat:ac25, km[:kal] >> 0.5dt);
        slabel(:right :cat:ac25, km[:kal + 0.2sw] << 2.5dt, "Kalvebod");
    }

    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax, km[:kal + 1sw, :ore - 1sw]);
    }

    with link = "point.dk.Ørestad" {
        track(:first:station :double :cat:ac25 :pax,
                km[:ore - 1sw, :ore + 1sw]
        );
        marker(:right :de.hp :cat:ac25 :pax, km[:ore] >> 0.5dt);
        slabel(:left :cat:ac25 :pax, km[:ore + 1sw] >> 0.5dt >> 1.1sh,
            hbox(:right:top, "Ørestad")
        );
    }

    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax, km[:ore + 1sw, :tar - 1sw]);
    }

    with link = "point.dk.Tårnby" {
        track(:first:station :double :cat:ac25 :pax,
                km[:tar - 1sw, :tar + 1sw]
        );
        marker(:right :de.hp :cat:ac25 :pax, km[:tar] >> 0.5dt);
        slabel(:top :cat:ac25 :pax, km[:tar] << 1.5dt, "Tårnby");
    }

    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax, km[:tar + 1sw, :kas - 1sw]);
    }

    with link = "point.dk.Københavns-Lufthavn-Kastrup" {
        track(:first:station :double :cat:ac25 :pax,
                km[:kas - 1sw, :kas + 1sw]
        );
        marker(:right :de.bf :cat:ac25 :pax, km[:kas] >> 0.5dt);
        slabel(:bottom :cat:ac25 :pax, km[:kas] >> 0.5dt >> 1.1sh,
            vbox(:center:top, "Københavns", "Lufthavn", "Kastrup")
        );
    }

    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax, km[:kas + 1sw, :peb - 1sw]);
    }

    with link = "point.dk.Peberholm" {
        track(:first:station :double :cat:ac25 :pax,
                km[:peb - 1sw, :peb + 1sw]
        );
        marker(:right :de.bbf :cat:ac25, km[:peb] >> 0.5dt);
        slabel(:left :cat:ac25, km[:peb + 0.3sw] >> 0.5dt >> 1.9sh,
            "Peberholm"
        );
    }

    with link = "line.dk.KM" {
        track(:first :double :cat:ac25 :pax, km[:peb + 1sw, :peg - 0.5sw]);
        line_badge(:cat:ac25 :pax, km[:peb - 3km], "KM");
    }

    with link = "point.int.Lernacken-Peberholm" {
        track(:first:station :double :cat:ac25 :pax,
                km[:peg - 0.5sw, :peg + 0.5sw]
        );
        marker(:right :de.dirgr :cat:ac25 :pax, km[:peg] >> 0.5dt);
        marker(:statdt :cat:ac25, km[:peg] << 0.5dt);
        marker(:left :de.dirgr :cat:ac25 :pax, km[:peg] << 0.5dt);
        label(:cat:ac25 :pax :badgesize, km[:peg] >> 5dt,
            hbox(:right:middle,
                vbox(:left:middle,
                    " DK KM  ", hbar(0.3), " SE"
                )
            )
        );
            
    }
}

