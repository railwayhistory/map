# DK KFX.  Køge - Faxe
#
let kf = path("d3.dk.kfx");

with detail = 3,
     railway = :first :pax
{
    # point.dk.Køge  dk.RKN
 
    with link = "line.dk.KFX" {
        track(:ror,
                kf[:kog.yf - 0.1dl, :kog.yf] << 1mt << 1ms
            ..  kf[:kog.xf + 2mt, :kog.xf + 2.01mt]
        );
        track(kf[:kog.xf + 2mt, :kog.xf + 1.3km]);
        line_label(:left:w, kf[:kog.xf + 1.3km] << 0.5mt, "KFX");
        track(kf[:kog.xf + 1.3km, :ego - 0.5sw]);
    }

    with link = "point.dk.Egøje", railway = :station {
        track(kf[:ego - 0.5sw, :ego + 0.5sw]);
        marker(:right :de.bf, kf[:ego] >> 0.5mt);
        slabel(:right, kf[:ego] << 1.5mt + (0dt, 1dt), "Egøje");
    }

    with link = "line.dk.KFX" {
        track(kf[:ego + 0.5sw, :val - 0.5sw]);
    }

    with link = "point.dk.Vallø", railway = :station {
        track(kf[:val - 0.5sw, :val + 0.5sw]);
        marker(:left :de.bf, kf[:val] << 0.5mt);
        slabel(:right, kf[:val] << 0.5mt << 1.5sh + (0dt, 1.1dt), "Vallø");
    }

    with link = "line.dk.KFX" {
        track(kf[:val + 0.5sw, :gru - 0.5sw]);
    }

    with link = "point.dk.Grubberholm", railway = :station {
        track(kf[:gru - 0.5sw, :gru + 0.5sw]);
        marker(:left :de.bf, kf[:gru] << 0.5mt);
        slabel(:right, kf[:gru] << 0.5mt << 1.5sh + (0dt, 1.1dt),
            "Grubberholm"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:gru + 0.5sw, :him - 0.5sw]);
    }

    with link = "point.dk.Himlingøje", railway = :station {
        track(kf[:him - 0.5sw, :him + 0.5sw]);
        marker(:left :de.hp, kf[:him] << 0.5mt);
        slabel(:right, kf[:him] << 0.5mt << 1.6sh + (0dt, 1.3dt),
            "Himlingøje"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:him + 0.5sw, :him + 1km]);
        line_label(:right:e, kf[:him + 1km] >> 0.5mt, "KFX");
        track(kf[:him + 1km, :har.yr - 100m]);
    }

    with link = "point.dk.Hårlev", railway = :station {
        track(kf[:har.yr - 100m, :har + 0.6sw + 2dl]);
        track(
                kf[:har.yr, :har + 0.6sw] << 1ms << 1mt
            --  kf[:har + 0.6sw + 1dl, :har + 0.6sw + 1.1dl]
        );
        marker(:left :de.bf, kf[:har] << 1.5mt << 1ms);
        slabel(:left :bold, kf[:har] >> 2mt + (0dt, 1dt),
            "Hårlev"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:har + 0.6sw + 2dl, :lli - 0.5sw]);
    }

    with link = "point.dk.Lille-Linde", railway = :station {
        track(kf[:lli - 0.5sw, :lli + 0.5sw]);
        marker(:left :de.hp, kf[:lli] << 0.5mt);
        slabel(:right, kf[:lli] << 0.5mt << 1.5sh + (0dt, 1dt),
            "Lille Linde"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:lli + 0.5sw, :sli - 0.5sw]);
    }

    with link = "point.dk.Store-Linde", railway = :station {
        track(kf[:sli - 0.5sw, :sli + 0.5sw]);
        marker(:right :de.hp :removed, kf[:sli] >> 0.5mt);
        slabel(:left :removed, kf[:sli] >> 0.5mt >> 1.5sh + (0dt, 1dt),
            "Store Linde"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:sli + 0.5sw, :sli + 1.2km]);
        line_label(:left:w, kf[:sli + 1.2km] << 0.5mt, "KFX");
        track(kf[:sli + 1.2km, :kar - 0.5sw]);
    }

    with link = "point.dk.Karise", railway = :station {
        track(kf[:kar - 0.5sw, :kar + 0.5sw]);
        marker(:left :de.bf, kf[:kar] << 0.5mt);
        slabel(:right, kf[:kar] << 0.5mt << 1.7sh + (0dt, 1dt),
            "Karise"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:kar + 0.5sw, :gan - 0.5sw]);
    }

    with link = "point.dk.Ganneskov", railway = :station {
        track(kf[:gan - 0.5sw, :gan + 0.5sw]);
        marker(:left :de.hp :removed, kf[:gan] << 0.5mt);
        slabel(:right :removed, kf[:gan] << 0.5mt << 1.5sh + (0dt, 1.5dt),
            "Ganneskov"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:gan + 0.5sw, :tok - 0.5sw]);
    }

    with link = "point.dk.Tokkerup", railway = :station {
        track(kf[:tok - 0.5sw, :tok + 0.5sw]);
        marker(:right :de.hp, kf[:tok] >> 0.5mt);
        marker(:right :de.exbf, kf[:tok] >> 0.5mt);
        slabel(:left, kf[:tok] >> 0.5mt >> 2sh + (0dt, 1dt),
            "Tokkerup"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:tok + 0.5sw, :fax - 0.5sw]);
    }

    with link = "point.dk.Fakse", railway = :station {
        track(kf[:fax - 0.5sw, :fax + 0.5sw]);
        marker(:right :de.bf :removed, kf[:fax] >> 0.5mt);
        slabel(:left :removed, kf[:fax] >> 0.5mt >> 1.4sh + (0dt, 1dt),
            "Fakse"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:fax + 0.5sw, :fas - 0.5sw]);
    }

    with link = "point.dk.Faxe-Syd", railway = :station {
        track(kf[:fas - 0.5sw, :fas + 0.5sw]);
        marker(:right :de.bf, kf[:fas] >> 0.5mt);
        slabel(:left, kf[:fas] >> 0.5mt >> 1.6sh + (0dt, 0.8dt),
            "Faxe Syd*"
        );
    }

    with link = "line.dk.KFX" {
        track(kf[:fas + 0.5sw, :fas + 1.4km]);
        line_label(:left:w, kf[:fas + 1.4km] << 0.5mt, (0dt, -0.2dt), "KFX");
        track(kf[:fas + 1.4km, :fal - 0.5sw]);
    }

    with link = "point.dk.Faxe-Ladeplads", railway = :station {
        track(kf[:fal - 0.5sw, :fal + 0.5sw]);
        marker(:left :de.bf, kf[:fal] << 0.5mt);
        slabel(:right :bold, kf[:fal] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Faxe Ladeplads"
        );
    }
}

