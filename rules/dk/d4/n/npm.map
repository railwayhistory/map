# DK NPM.  Næstved - Præstø - Mern
#
let np = path("d3.dk.npm.1");
let pm = path("d3.dk.npm.2");

with detail = 4,
     railway = :first :pax :removed
{
    # point.dk.Næstved  dk.RSR

    with link = "line.dk.NPM" {
        track(:ror,
                np[:nas.yp - 0.1dl, :nas.yp] << 1.5mo
            ..  np[:nas.zp, :nas.zp + 0.1dl]
        );
        track(np[:nas.zp, :ron - 0.5sw]);
    }

    with link = "point.dk.Rønnebæk", railway = :station {
        track(np[:ron - 0.5sw, :ron + 0.5sw]);
        marker(:right :de.hp, np[:ron] >> 0.5mt);
        station(:bottom, np[:ron] >> 0.5mt >> 1.2sh,
            "Rønnebæk", "NPM: 3,3"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:ron + 0.5sw, :nst - 0.5sw]);
    }

    with link = "point.dk.Næstelsø", railway = :station {
        track(np[:nst - 0.5sw, :nst + 0.5sw]);
        marker(:right :de.hp, np[:nst] >> 0.5mt);
        station(:bottom, np[:nst] >> 0.5mt >> 1.2sh,
            "Næstelsø", "NPM: 5,8"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:nst + 0.5sw, :bra - 0.5sw]);
    }

    with link = "point.dk.Brandelev", railway = :station {
        track(np[:bra - 0.5sw, :bra + 0.5sw]);
        marker(:right :de.bf, np[:bra] >> 0.5mt);
        station(:bottom, np[:bra] >> 0.5mt >> 1.3sh,
            "Brandelev", "NPM: 6,8"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:bra + 0.5sw, :bra + 2km]);
        line_label(:right:ne, np[:bra + 2km] >> 0.5mt, "NPM");
        track(np[:bra + 2km, :bog - 0.5sw]);
    }

    with link = "point.dk.Bøgesø", railway = :station {
        track(np[:bog - 0.5sw, :bog + 0.5sw]);
        marker(:left :de.bf, np[:bog] << 0.5mt);
        station(:right:left_align,
            np[:bog] << 0.5mt << 1sh << 2dt + (0dt, 1.6dt),
            "Bøgesø", " NPM: 10,3"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:bog + 0.5sw, :ask - 0.5sw]);
    }

    with link = "point.dk.Askov-Huse", railway = :station {
        track(np[:ask - 0.5sw, :ask + 0.5sw]);
        marker(:left :de.hp, np[:ask] << 0.5mt);
        station(:right, np[:ask] << 0.5mt << 1sh << 1.6dt + (0dt, 1.4dt),
            "Askov Huse", "NPM: 11,8"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:ask + 0.5sw, :sne - 0.5sw]);
    }

    with link = "point.dk.Snesere", railway = :station {
        track(np[:sne - 0.5sw, :sne + 0.5sw]);
        marker(:right :de.bf, np[:sne] >> 0.5mt);
        station(:bottom, np[:sne] >> 0.5mt >> 1.3sh + (-1.5dt, 0dt),
            "Snesere", "NPM: 13,3"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:sne + 0.5sw, :lro - 0.5sw]);
    }

    with link = "point.dk.Lille-Røttinge", railway = :station {
        track(np[:lro - 0.5sw, :lro + 0.5sw]);
        marker(:left :de.hp, np[:lro] << 0.5mt);
        station(:right, np[:lro + 0.5sw] << 0.5mt << 1sh << 0.8dt,
            "Lille Røttinge", "NPM: 15,0"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:lro + 0.5sw, :tap - 0.5sw]);
    }

    with link = "point.dk.Tappernøje", railway = :station {
        track(np[:tap - 0.5sw, :tap + 0.5sw]);
        marker(:right :de.bf, np[:tap] >> 0.5mt);
        station(:right, np[:tap] << 0.5mt << 1dt + (0dt, 1dt),
            "Tappernøje", "NPM: 16,4"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:tap + 0.5sw, :tap + 2.75km]);
        line_label(:left:w, np[:tap + 2.75km] << 0.5mt, (0dt, -0.2dt), "NPM");
        track(np[:tap + 2.75km, :fak - 0.5sw]);
    }

    with link = "point.dk.Faksinge", railway = :station {
        track(np[:fak - 0.5sw, :fak + 0.5sw]);
        marker(:right :de.hp, np[:fak] >> 0.5mt);
        station(:left, np[:fak] >> 0.5mt >> 1sh >> 1.5dt + (0dt, 1dt),
            "Faksinge", "NPM: 21,0"
        );
    }

    with link = "line.dk.NPM" {
        track(np[:fak + 0.5sw, :pra.ym - 200m]);
    }

    with link = "point.dk.Præstø", railway = :station {
        track(np[:pra.ym - 200m, :pra.f]);
        track(pm[:pra.ym, :pra.ym + 200m]);
        marker(:right :de.bf, np[:pra] >> 0.5mt);
        station(:right, np[:pra + 0.5sw] >> 0.5mt >> 1sh >> 0.5dt,
            hbox(:left:top, "Præstø"), "NPM: 23,0"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:pra.ym + 200m, :ski - 0.5sw]);
    }

    with link = "point.dk.Skibinge", railway = :station {
        track(pm[:ski - 0.5sw, :ski + 0.5sw]);
        marker(:left :de.hp, pm[:ski] << 0.5mt);
        station(:right, pm[:ski] << 0.5mt << 1sh << 1.8dt + (0dt, 1dt),
            "Skibinge", "NPM: 25,1"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:ski + 0.5sw, :ski + 1.5km]);
        line_label(:right:e, pm[:ski + 1.5km] >> 0.5mt, (0dt, 0.2dt), "NPM");
        track(pm[:ski + 1.5km, :all - 0.5sw]);
    }

    with link = "point.dk.Allerslev", railway = :station {
        track(pm[:all - 0.5sw, :all + 0.5sw]);
        marker(:left :de.bf, pm[:all] << 0.5mt);
        station(:right, pm[:all + 0.5sw] << 0.5mt << 1sh << 1.2dt,
            "Allerslev", "NPM: 28,0"
        );
    }

    with link = "line.dk.NPM" {
        track(pm[:all + 0.5sw, :mer - 0.5sw]);
    }

    with link = "point.dk.Mern", railway = :station {
        track(pm[:mer - 0.5sw, :mer.f]);
        marker(:left :de.bf, pm[:mer] << 0.5mt);
        station(:right:left_align,
            pm[:mer] << 0.5mt << 1sh << 1.2dt + (0dt, 1.4dt),
            span(:bold, "Mern"), "NPM: 32,5"
        );
    }
}

