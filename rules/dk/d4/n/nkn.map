# DK NKN.  Nakskov - Kragenæs
#
let nk = path("d3.dk.nkn");

with detail = 4,
     railway = :first :pax :removed
{
    # point.dk.Nakskov  dk.NNS

    with link = "line.dk.NKN" {
        track(nk[:nak.f, :nak + 2.7km]);
        line_label(:left:ne, nk[:nak + 2.7km] << 0.5mt, "NKN");
        track(nk[:nak + 2.7km, :har - 0.5sw]);
    }

    with link = "point.dk.Harpelunde", railway = :station {
        track(nk[:har - 0.5sw, :har + 0.5sw]);
        marker(:left :de.bf, nk[:har] << 0.5mt);
        station(:left, nk[:har] << 0.5mt << 1sh + (-1.3dt, 1.5dt),
            "Harpelunde", "NKN: 5,8"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:har + 0.5sw, :tjo - 0.5sw]);
    }

    with link = "point.dk.Tjørnevang", railway = :station {
        track(nk[:tjo - 0.5sw, :tjo + 0.5sw]);
        marker(:right :de.hp, nk[:tjo] >> 0.5mt);
        station(:right, nk[:tjo] >> 0.5mt >> 1sh + (1.5dt, 1.6dt),
            "Tjørnevang", "NKN: 7,0"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:tjo + 0.5sw, :kob - 0.5sw]);
    }

    with link = "point.dk.Købelev", railway = :station {
        track(nk[:kob - 0.5sw, :kob + 0.5sw]);
        marker(:left :de.bf, nk[:kob] << 0.5mt);
        station(:left, nk[:kob] << 0.5mt << 1sh + (-1.5dt, 0.8dt),
            "Købelev", "NKN: 9,5"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:kob + 0.5sw, :ons - 0.5sw]);
    }

    with link = "point.dk.Onsevig", railway = :station {
        track(nk[:ons - 0.5sw, :ons + 0.5sw]);
        marker(:left :de.bf, nk[:ons] << 0.5mt);
        station(:top, nk[:ons] << 0.5mt << 1sh + (-0.5dt, -0.8dt),
            "Onsevig", "NKN: 12,7"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:ons + 0.5sw, :kas - 0.5sw]);
    }

    with link = "point.dk.Kastager", railway = :station {
        track(nk[:kas - 0.5sw, :kas + 0.5sw]);
        marker(:left :de.bf, nk[:kas] << 0.5mt);
        station(:top, nk[:kas] << 0.5mt << 1sh + (0dt, -0.6dt),
            "Kastager", "NKN: 15,0"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:kas + 0.5sw, :hor - 0.5sw]);
    }

    with link = "point.dk.Horslunde", railway = :station {
        track(nk[:hor - 0.5sw, :hor + 0.5sw]);
        marker(:right :de.bf, nk[:hor] >> 0.5mt);
        station(:bottom, nk[:hor] >> 0.5mt >> 1sh + (0dt, 0.8dt),
            "Horslunde", "NKN: 17,0"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:hor + 0.5sw, :ors - 0.5sw]);
    }

    with link = "point.dk.Ørsløkkevej", railway = :station {
        track(nk[:ors - 0.5sw, :ors + 0.5sw]);
        marker(:right :de.hp, nk[:ors] >> 0.5mt);
        station(:bottom, nk[:ors] >> 0.5mt >> 1sh + (0.8dt, 0.8dt),
            "Ørsløkkevej", "NKN: 18,6"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:ors + 0.5sw, :svi - 0.5sw]);
    }

    with link = "point.dk.Svinsbjerg", railway = :station {
        track(nk[:svi - 0.5sw, :svi + 0.5sw]);
        marker(:left :de.bf, nk[:svi] << 0.5mt);
        station(:top, nk[:svi] << 0.5mt << 1sh + (-0.5dt, -0.9dt),
            "Svinsbjerg", "NKN: 20,1"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:svi + 0.5sw, :egh - 0.5sw]);
    }

    with link = "point.dk.Egholm", railway = :station {
        track(nk[:egh - 0.5sw, :egh + 0.5sw]);
        marker(:left :de.hp, nk[:egh] << 0.5mt);
        station(:top, nk[:egh] << 0.5mt << 1sh + (1dt, -0.8dt),
            "Egholm", "NKN: 22,0"
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:egh + 0.5sw, :egh + 0.5km]);
        line_label(:right:n, nk[:egh + 0.5km] >> 0.5mt, (-0.4dt, 0dt), "NKN");
        track(nk[:egh + 0.5km, :tor - 0.5sw]);
    }

    with link = "point.dk.Torrig", railway = :station {
        track(nk[:tor - 0.5sw, :tor.ym + 100m]);
        marker(:right :de.bf, nk[:tor] >> 0.5mt);
        station(:bottom, nk[:tor] >> 0.5mt >> 1sh + (0dt, 0.5dt),
            span(:bold, "Torrig"),
            hbox(:center:top,
                vbox(:right:top, "NKN: ", "MTR: "),
                vbox(:sep:top,
                    hbox(:sep:base, "24,", anchor(), "1"),
                    hbox(:sep:base, "23,", anchor(), "7")
                )
            )
        );
    }

    with link = "line.dk.NKN" {
        track(nk[:tor.ym + 100m, :tor.ym + 1km]);
        line_label(:left:se, nk[:tor.ym + 1km] << 0.5mt, "NKN");
        track(nk[:tor.ym + 1km, :kra - 0.5sw]);
    }

    with link = "point.dk.Kragenæs", railway = :station {
        track(nk[:kra - 0.5sw, :kra.f]);
        marker(:right :de.bf, nk[:kra] >> 0.5mt);
        station(:top, nk[:kra] << 0.5mt + (1dt, -0.8dt),
            span(:bold, "Kragenæs"), "NKN: 26,7"
        );
    }
}

