# DK TAS.  Tommerup - Assens
#
let ta = path("d3.dk.tas");

with detail = 4,
     railway = :first :pax :closed
{
    # point.dk.Tommerup  dk.KFA

    with link = "line.dk.TAS" {
        track(:lor,
                ta[:tom.ya - 0.1dl, :tom.ya] >> 0.5md >> 1.5mo
            ..  ta[:tom.xa + 1.5mo, :tom.xa + 1.51mo]
        );
        track(ta[:tom.xa + 1.5mo, :tom.xa + 1km]);
        line_label(:right:ne, ta[:tom.xa + 1km] >> 0.5mt, "TAS");
        track(ta[:tom.xa + 1km, :kna - 0.5sw]);
    }

    with link = "point.dk.Knarreborg", railway = :station {
        track(ta[:kna - 0.5sw, :kna + 0.5sw]);
        marker(:left :de.bf, ta[:kna] << 0.5mt);
        station(:right, ta[:kna] << 0.5mt << 1sh + (1.5dt, 1.5dt),
            "Knarreborg", "TAS: 3,3"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kna + 0.5sw, :kiv - 0.5sw]);
    }

    with link = "point.dk.Kivsmose", railway = :station {
        track(ta[:kiv - 0.5sw, :kiv + 0.5sw]);
        marker(:right :de.hp, ta[:kiv] >> 0.5mt);
        station(:top, ta[:kiv] >> 0.5mt >> 1sh + (-1.8dt, -1.1dt),
            "Kivsmose", "TAS: 5,6"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kiv + 0.5sw, :nar - 0.5sw]);
    }

    with link = "point.dk.Nårup", railway = :station {
        track(ta[:nar - 0.5sw, :nar + 0.5sw]);
        marker(:right :de.bf, ta[:nar] >> 0.5mt);
        station(:top, ta[:nar] >> 0.5mt >> 1sh + (-2dt, -1.1dt),
            "Nårup", "TAS: 7,0"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:nar + 0.5sw, :hol - 0.5sw]);
    }

    with link = "point.dk.Holtegård", railway = :station {
        track(ta[:hol - 0.5sw, :hol + 0.5sw]);
        marker(:right :de.hp, ta[:hol] >> 0.5mt);
        station(:left, ta[:hol] >> 0.5mt >> 1sh + (-1.8dt, 0.8dt),
            "Holtegård", "TAS: 8,6"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:hol + 0.5sw, :gla - 0.5sw]);
    }

    with link = "point.dk.Glamsbjerg", railway = :station {
        track(ta[:gla - 0.5sw, :gla + 0.5sw]);
        marker(:left :de.bf, ta[:gla] << 0.5mt);
        station(:right, ta[:gla] << 0.5mt << 1sh + (1.8dt, 2.3dt),
            "Glamsbjerg", "TAS: 11,3"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:gla + 0.5sw, :kop - 0.5sw]);
    }

    with link = "point.dk.Koppenbjerg", railway = :station {
        track(ta[:kop - 0.5sw, :kop + 0.5sw]);
        marker(:right :de.hp, ta[:kop] >> 0.5mt);
        station(:left, ta[:kop] >> 0.5mt >> 1sh + (-1.8dt, 1dt),
            "Koppenbjerg", "TAS: 13,3"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kop + 0.5sw, :kop + 1.1km]);
        line_label(:left:w, ta[:kop + 1.1km] << 0.5mt, "TAS");
        track(ta[:kop + 1.1km, :fle - 0.5sw]);
    }

    with link = "point.dk.Flemløse", railway = :station {
        track(ta[:fle - 0.5sw, :fle + 0.5sw]);
        marker(:right :de.hp, ta[:fle] >> 0.5mt);
        station(:top, ta[:fle] >> 0.5mt >> 1sh + (-2dt, -1dt),
            "Flemløse", "TAS: 16,1"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:fle + 0.5sw, :hoe - 0.5sw]);
    }

    with link = "point.dk.Høed", railway = :station {
        track(ta[:hoe - 0.5sw, :hoe + 0.5sw]);
        marker(:left :de.hp, ta[:hoe] << 0.5mt);
        station(:bottom, ta[:hoe] << 0.5mt << 1sh + (0dt, 0.8dt),
            "Høed", "TAS: 18,8"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:hoe + 0.5sw, :ebb - 0.5sw]);
    }

    with link = "point.dk.Ebberup", railway = :station {
        track(ta[:ebb - 0.5sw, :ebb + 0.5sw]);
        marker(:left :de.bf, ta[:ebb] << 0.5mt);
        station(:bottom, ta[:ebb] << 0.5mt << 1sh + (-1dt, 1dt),
            "Ebberup", "TAS: 22,1"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:ebb + 0.5sw, :kar - 0.5sw]);
    }

    with link = "point.dk.Kærum", railway = :station {
        track(ta[:kar - 0.5sw, :kar + 0.5sw]);
        marker(:left :de.hp, ta[:kar] << 0.5mt);
        station(:bottom, ta[:kar] << 0.5mt << 1sh + (-1dt, 0.8dt),
            "Kærum", "TAS: 24,9"
        );
    }

    with link = "line.dk.TAS" {
        track(ta[:kar + 0.5sw, :kar + 2.7km]);
        line_label(:left:ne, ta[:kar + 2.7km] << 0.5mt, "TAS");
        track(ta[:kar + 2.7km, :ass.x]);
    }
}

with detail = 4,
     railway = :first :pax :removed
{
    with link = "line.dk.TAS" {
        track(ta[:ass.x, :ass - 0.5sw]);
    }

    with link = "point.dk.Assens", railway = :station {
        track(ta[:ass - 0.5sw, :ass + 0.5sw]);
        marker(:right :de.bf, ta[:ass] >> 0.5mt);
        station(:right, ta[:ass] >> 0.5mt >> 1sh + (1.3dt, 1dt),
            span(:bold, "Assens"), "TAS: 29,2"
        );
    }
}

