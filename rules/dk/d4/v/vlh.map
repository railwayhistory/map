# DK VLH.  København Syd - Hellerup
#
let vh = path("d3.dk.vlh");

with detail = 4,
     railway = :first :cat:dc15 :pax
{
    with link = "line.dk.VLH" {
        track(:double :lor, vh[:nel + 0.5sw, :vig - 0.5sw] >> 2mo);
        track(:double :lor, vh[:vig.yr + 3dl, :via - 0.5sw] >> 2mo);
    }

    with link = "point.dk.Vigerslev-Allé", railway = :station {
        track(:double, vh[:via - 0.5sw, :via + 0.5sw] >> 2mo);
        marker(:right :de.hp, vh[:via] >> 2.5mo >> 0.5mt);
        station(:left, vh[:via + 0.5sw] + (-4.5mo, -0.5mo),
            hbox(:right:top, "Vigerslev Allé"),
            "VLH: 3,425"
        );
    }

    with link = "line.dk.VLH" {
        track(:double :casing,
                vh[:via + 0.49sw, :via + 0.5sw] >> 2mo
            ..  vh[:dan.x + 2mo, :dan.x + 2.5mo + 1mt]
        );
    }

    with link = "point.dk.Danshøj", railway = :station {
        track(:double :casing,
                vh[:dan.x + 2.5mo + 1mt, :dan.x + 2.5mo + 1mt + 1sw]
        );
        marker(:right :de.hp,
            vh[:dan.x + 2.5mo + 1mt + 0.5sw] >> 0.5mo >> 0.5mt
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:dan.x + 2mo + 1sh, :alh - 0.5sw]);
    }

    with link = "point.dk.Ålholm", railway = :station {
        track(:double, vh[:alh - 0.5sw, :alh + 0.5sw]);
        marker(:right :de.hp, vh[:alh] >> 0.5mo >> 0.5mt);
        station(:left:right_align, vh[:alh] << 0.5mo << 2.5mt + (0dt, 1dt),
            "Ålholm", "VLH: 4,958"
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:alh + 0.5sw, :kbh - 0.5sw]);
    }

    with link = "point.dk.KB-Hallen", railway = :station {
        track(:double, vh[:kbh - 0.5sw, :kbh + 0.5sw]);
        marker(:right :de.hp, vh[:kbh] >> 0.5mo >> 0.5mt);
        station(:left, vh[:kbh] << 0.5mo << 2.5mt + (0dt, 1dt),
            "KB Hallen", "VLH: 5,599"
        );
    }

    with link = "line.dk.VLH" {
        track(:double :casing, vh[:kbh + 0.5sw, :fli - 0.5sw]);
    }

    with link = "point.dk.Flintholm", railway = :station {
        track(:double :casing, vh[:fli - 0.5sw, :fli + 0.5sw]);
        marker(:right :de.bf, vh[:fli] >> 0.5mo >> 0.5mt);
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:fli + 0.5sw, :cfr - 0.5sw]);
    }

    with link = "point.dk.C-F-Richs-Vej", railway = :station {
        track(:double, vh[:cfr - 0.5sw, :cfr + 0.5sw]);
        marker(:right :de.hp :removed, vh[:cfr] >> 0.5mo >> 0.5mt);
        station(:right :removed, vh[:cfr] >> 0.5mo >> 0.5mt + (1.3sw, 0.8sh),
            "C.F. Richs Vej", "VLH: ??"
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:cfr + 0.5sw, :gro - 0.5sw]);
    }

    with link = "point.dk.Grøndal", railway = :station {
        track(:double, vh[:gro - 0.5sw, :gro + 0.5sw]);
        marker(:right :de.hp, vh[:gro] >> 0.5mo >> 0.5mt);
        label(vh[:gro + 0.5sw] >> 0.5mo >> 0.5mt >> 1.3sh + (0dt, 2dt),
            vbox(:left:base,
                hbox(:left:base, " ", span(:former, "Godthåbsvej")),
                vbox(:center:topbase,
                    "Grøndal",
                    span(:xsmall, "VLH: 7,800")
                )
            )
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:gro + 0.5sw, :fug - 0.5sw]);
    }

    with link = "point.dk.Fuglebakken", railway = :station {
        track(:double, vh[:fug - 0.5sw, :fug + 0.5sw]);
        marker(:right :de.hp, vh[:fug] >> 0.5mo >> 0.5mt);
        station(:top:right_align, vh[:fug + 0.5sw] << 0.5mo << 1mt,
            "Fuglebakken", "VLH: 8,700"
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:fug + 0.5sw, :nor - 0.5sw]);
    }

    with link = "point.dk.Nørrebro", railway = :station {
        track(:double, vh[:nor - 0.5sw, :nor + 0.5sw]);
        marker(:right :de.hp, vh[:nor] >> 0.5mo >> 0.5mt);
        station(:right, vh[:nor] >> 0.5mo >> 0.5mt >> 1.4sh + (0dt, 1dt),
            "Nørrebro", "VLH: 9,740"
        );
    }

    with link = "line.dk.VLH" {
        track(:double :lor, vh[:nor + 0.5sw, :bis - 0.5sw]);
    }

    with link = "point.dk.Bispebjerg", railway = :station {
        track(:double, vh[:bis - 0.5sw, :bis + 0.5sw]);
        marker(:right :de.hp, vh[:bis] >> 0.5mo >> 0.5mt);
        station(:right, vh[:bis] >> 0.5mo >> 0.5mt >> 1.6sh + (0dt, 1dt),
            "Bispebjerg", "VLH: 10,387"
        );
    }

    with link = "line.dk.VLH" {
        track(:double :lor, vh[:bis + 0.5sw, :ler - 0.5sw]);
    }

    with link = "point.dk.Lersøen", railway = :station {
        track(:double, vh[:ler - 0.5sw, :ler + 0.5sw]);
        marker(:right :de.bbf :nopax, vh[:ler] >> 0.5mo >> 0.5mt);
        label(vh[:ler - 0.3sw] << 1.5mo << 1.5mt,
            vbox(:right:base,
                hbox(:center:top :xsmall,
                    vbox(:right:top, "VLH: ", span(:nocat, "??: ")),
                    vbox(:sep:top,
                        hbox(:sep:base, "10,", anchor(), "600"),
                        hbox(:sep:base :nocat, "10,", anchor(), "600")
                    )
                ),
                span(:bold, "Lersøen")
            )
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:ler + 0.5sw, :ler.yh - 2dl]);
    }

    with link = "point.dk.Lersøen", railway = :station {
        track(:double, vh[:ler.yh - 2dl, :ler.yh + 1dl]);
        track(:nocat,
                vh[:ler.yh - 1.1dl, :ler.yh - 1dl] >> 0.5mo
            --  vh[:ler.yh, :ler.yh + 1dl] >> 1.5mo
        );
    }

    with link = "line.dk.VLH" {
        with layer = -1 track(:double :ror, vh[:ler.yh + 1dl, :ryp.yf]);
        track(:double :ror, vh[:ryp.yf, :ryp - 0.5sw]);
    }

    with link = "point.dk.Ryparken", railway = :station {
        track(:double, vh[:ryp - 0.5sw, :ryp + 0.5sw]);
        marker(:left :de.hp, vh[:ryp] << 0.5mo << 0.5mt);
        label(vh[:ryp] << 0.5mo << 0.5mt << 1.5sh + (0dt, 1.2dt),
            vbox(:right:base,
                vbox(:center:base,
                    hbox(:center:top :xsmall,
                        vbox(:right:top, "VLH: ", "SMS: "),
                        vbox(:sep:top,
                            hbox(:sep:base, "12,", anchor(), "000"),
                            hbox(:sep:base, "7,", anchor(), "100")
                        )
                    ),
                    span(:former, "Lyngbyvej")
                ),
                "Ryparken"
            )
        );
    }

    with link = "line.dk.VLH" {
        track(:double, vh[:ryp + 0.5sw, :hel.xv]);
        track(:double :ror:lor :casing,
                vh[:hel.xv - 1.51md, :hel.xv - 1.5md]
            ..  vh[:hel.yv, :hel.yv + 0.1dl] << 3mo
        );
        track(:double :ror:lor, vh[:hel.yv, :hel - 0.5sw] << 3mo);
    }
}

