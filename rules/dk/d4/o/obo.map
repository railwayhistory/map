# DK OBO.  Odense - Bogense
#
let ob = path("d3.dk.obo");

with detail = 4,
     railway = :first :pax :removed
{
    # point.dk.Odense  dk.KFA
 
    with link = "line.dk.OBO" {
        track(:lor,
                ob[:ode.yb - 0.1dl, :ode.yb] >> 3.5mo
            ..  ob[:ode.ym - 0.1dl, :ode.ym] >> 1mo
        );
        track(:lor,
                ob[:ode.ym - 0.1dl, :ode.ym] >> 1mo
            ..  ob[:ode.xm, :ode.xm + 0.1dl]
        );
        track(ob[:ode.xm, :sna - 0.49sw]);
    }

    with link = "point.dk.Snapind", railway = :station {
        track(ob[:sna - 0.5sw, :sna + 0.5sw]);
        marker(:left :de.hst, ob[:sna] << 0.5mt);
        station(:left, ob[:sna] << 0.5mt << 1sh + (-1.5dt, 1.2dt),
            "Snapind", "OBO: 2,6"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:sna + 0.49sw, :nas - 0.49sw]);
    }

    with link = "point.dk.Næsby", railway = :station {
        track(ob[:nas - 0.5sw, :nas + 0.5sw]);
        marker(:right :de.hp, ob[:nas] >> 0.5mt);
        marker(:right :de.exbf, ob[:nas] >> 0.5mt);
        station(:right, ob[:nas] >> 0.5mt >> 1.5sh + (1.5dt, 1.8dt),
            "Næsby", "OBO: 4,2"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:nas + 0.49sw, :nas + 0.9km]);
        line_label(:right:w, ob[:nas + 0.9km] >> 0.5mt, "OBO");
        track(ob[:nas + 0.9km, :soh - 0.49sw]);
    }

    with link = "point.dk.Søhus", railway = :station {
        track(ob[:soh - 0.5sw, :soh + 0.5sw]);
        marker(:left :de.bf, ob[:soh] << 0.5mt);
        station(:left, ob[:soh] << 0.5mt << 1sh + (-1.6dt, 1.5dt),
            "Søhus", "OBO: 6,1"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:soh + 0.49sw, :lum - 0.49sw]);
    }

    with link = "point.dk.Lumby", railway = :station {
        track(ob[:lum - 0.5sw, :lum + 0.5sw]);
        marker(:right :de.hp, ob[:lum] >> 0.5mt);
        station(:right, ob[:lum] >> 0.5mt >> 1sh + (1.5dt, 1dt),
            "Lumby", "OBO: 8,2"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:lum + 0.49sw, :bel - 0.49sw]);
    }

    with link = "point.dk.Beldringe", railway = :station {
        track(ob[:bel - 0.5sw, :bel + 0.5sw]);
        marker(:right :de.bf, ob[:bel] >> 0.5mt);
        station(:right, ob[:bel] >> 0.5mt >> 1sh + (1.5dt, 1.3dt),
            "Beldringe", "OBO: 10,2"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:bel + 0.49sw, :lun - 0.49sw]);
    }

    with link = "point.dk.Lunde", railway = :station {
        track(ob[:lun - 0.5sw, :lun + 0.5sw]);
        marker(:left :de.bf, ob[:lun] << 0.5mt);
        station(:left:right_align, ob[:lun] << 0.5mt << 1sh + (-1.8dt, 0.8dt),
            "Lunde", "OBO: 13,4 "
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:lun + 0.49sw, :ott - 0.49sw]);
    }

    with link = "point.dk.Otterup", railway = :station {
        track(ob[:ott - 0.5sw, :ott + 0.5sw]);
        marker(:right :de.bf, ob[:ott] >> 0.5mt);
        station(:right, ob[:ott] >> 0.5mt >> 1sh + (1.8dt, 1.1dt),
            "Otterup", "OBO: 16,4"
        )
    }

    with link = "line.dk.OBO" {
        track(ob[:ott + 0.49sw, :bra - 0.49sw]);
    }

    with link = "point.dk.Brandsby", railway = :station {
        track(ob[:bra - 0.5sw, :bra + 0.5sw]);
        marker(:right :de.hp, ob[:bra] >> 0.5mt);
        station(:right, ob[:bra] >> 0.5mt >> 1sh + (2dt, 0.5dt),
            "Brandsby", "OBO: 18,8"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:bra + 0.49sw, :kap - 0.49sw]);
    }

    with link = "point.dk.Kappendrup", railway = :station {
        track(ob[:kap - 0.5sw, :kap + 0.5sw]);
        marker(:right :de.bf, ob[:kap] >> 0.5mt);
        station(:top, ob[:kap] >> 0.5mt >> 1sh + (0dt, -0.7dt),
            "Kappendrup", "OBO: 20,3"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:kap + 0.49sw, :kap + 1.3km]);
        line_label(:left:n, ob[:kap + 1.3km] << 0.5mt, "OBO");
        track(ob[:kap + 1.3km, :ugg - 0.49sw]);
    }

    with link = "point.dk.Uggerslev", railway = :station {
        track(ob[:ugg - 0.5sw, :ugg + 0.5sw]);
        marker(:right :de.bf, ob[:ugg] >> 0.5mt);
        station(:top, ob[:ugg] >> 0.5mt >> 1sh + (-0.5dt, -0.8dt),
            "Uggerslev", "OBO: 22,8"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:ugg + 0.49sw, :ska - 0.49sw]);
    }

    with link = "point.dk.Skamby", railway = :station {
        track(ob[:ska - 0.5sw, :ska + 0.5sw]);
        marker(:right :de.bf, ob[:ska] >> 0.5mt);
        station(:top, ob[:ska] >> 0.5mt >> 1sh + (-0.5dt, -0.8dt),
            "Skamby", "OBO: 24,7"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:ska + 0.49sw, :ros - 0.49sw]);
    }

    with link = "point.dk.Rostrup", railway = :station {
        track(ob[:ros - 0.5sw, :ros + 0.5sw]);
        marker(:right :de.hp, ob[:ros] >> 0.5mt);
        station(:top, ob[:ros] >> 0.5mt >> 1sh + (0dt, -0.8dt),
            "Rostrup", "OBO: 26,1"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:ros + 0.49sw, :jul - 0.49sw]);
    }

    with link = "point.dk.Jullerup", railway = :station {
        track(ob[:jul - 0.5sw, :jul + 0.5sw]);
        marker(:right :de.bf, ob[:jul] >> 0.5mt);
        station(:top, ob[:jul] >> 0.5mt >> 1sh + (0.5dt, -0.8dt),
            "Jullerup", "OBO: 29,1"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:jul + 0.49sw, :gul - 0.49sw]);
    }

    with link = "point.dk.Guldbjerg", railway = :station {
        track(ob[:gul - 0.5sw, :gul + 0.5sw]);
        marker(:right :de.bf, ob[:gul] >> 0.5mt);
        station(:top, ob[:gul] >> 0.5mt >> 1sh + (0.5dt, -1dt),
            "Guldbjerg", "OBO: 33,1"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:gul + 0.49sw, :gul + 1.4km]);
        line_label(:left:ne, ob[:gul + 1.4km] << 0.5mt, "OBO");
        track(ob[:gul + 1.4km, :har - 0.49sw]);
    }

    with link = "point.dk.Harritslev", railway = :station {
        track(ob[:har - 0.5sw, :har + 0.5sw]);
        marker(:left :de.hp, ob[:har] << 0.5mt);
        station(:bottom, ob[:har] << 0.5mt << 1sh + (-3dt, 1.3dt),
            "Harritslev", "OBO: 36.0"
        );
    }

    with link = "line.dk.OBO" {
        track(ob[:har + 0.49sw, :bog.yb - 0.5seg]);
    }

    with link = "point.dk.Bogense", railway = :station {
        track(ob[:bog.yb, :bog + 75m] << 1mo);
        track(:side :nopax,
                ob[:bog + 75m, :bog + 75m + 1dl] << 1mo
            --  ob[:bog + 75m + 2dl, :bog + 75m + 2.1dl]
        );

        track(ob[:bog.yb - 0.5seg, :bog + 75m]);
        track(:side :nopax, ob[:bog + 75m, :bog.f]);

        marker(:right :de.bf, ob[:bog] >> 0.5mt);
        station(:top, ob[:bog] >> 0.5mt >> 1sh + (2dt, -1dt),
            span(:bold, "Bogense"),
            hbox(:center:top,
                vbox(:right:top, "OBO: ", "BRB: "),
                vbox(:sep:top,
                    hbox(:sep:base, "38,", anchor(), "1"),
                    hbox(:sep:base, "12,", anchor(), "6")
                )
            )
        );
    }
}


