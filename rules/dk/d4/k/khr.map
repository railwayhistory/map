# DK KHR.  København H - Helsingør
#
let kh = path("d3.dk.khr");

with detail = 4,
     railway = :first :cat:ac25 :pax
{
    # point.dk.København-H  dk.KF

    with link = "line.dk.KHR" {
        track(:double :lor, kh[:kob.a, :nor - 0.5sw]);
    }

    with link = "point.dk.Nørreport", railway = :station {
        track(:double, kh[:nor - 0.5sw, :nor + 0.5sw]);
        marker(:right :de.hp :cat:ac25 :pax, kh[:nor] >> 0.5mo >> 0.5mt);
        station(:right, kh[:nor + 0.6sw] >> 0.5md >> 1.4sh,
            hbox(:left:top, "Nørreport"),
            hbox(:center:top,
                vbox(:right:top, span(:cat:dc15, "KKB: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :cat:dc15, "1,", anchor(), "50"),
                    hbox(:sep:base, "1,", anchor(), "50")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double :lor, kh[:nor + 0.5sw, :nor + 0.8km]);
        line_label(:right:nw, kh[:nor + 0.8km] >> 0.5mo >> 0.5mt, "KHR");
        track(:double :lor, kh[:nor + 0.8km, :ost - 0.5sw]);
    }

    with link = "point.dk.Østerport", railway = :station {
        track(:double, kh[:ost - 0.5sw, :ost + 0.5sw]);
        marker(:right :de.bf, kh[:ost] >> 0.5mo >> 0.5mt);
        station(:right, kh[:ost - 0.2sw] >> 0.5mo >> 0.5mt >> 1.9sh,
            "Østerport",
            hbox(:center:top,
                vbox(:right:top, span(:cat:dc15, "KKB: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :cat:dc15, "3,", anchor(), "06"),
                    hbox(:sep:base, "3,", anchor(), "06")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double :lor, kh[:ost + 0.5sw, :nha - 0.5sw]);
        track(:double :lor, kh[:nha - 0.5sw, :nha + 0.5sw]);
        track(:double :lor, kh[:nha + 0.5sw, :heg - 0.5sw]);
    }

    with link = "point.dk.Helgoland", railway = :station {
        track(:double, kh[:heg - 0.5sw, :heg + 0.5sw]);
        marker(:right :de.bbf :nopax, kh[:heg] >> 0.5mo >> 0.5mt);
        station(:right :nopax, kh[:heg - 0.5sw] >> 0.5mo >> 0.5mt >> 1.2sh,
            "Helgoland", "KHR: 5,20"
        );
    }

    with link = "line.dk.KHR" {
        track(:double :lor, kh[:heg + 0.5sw, :sva - 400m]);
        track(:double :lor, kh[:sva - 400m, :sva.yf]);
        track(:double :lor, kh[:sva.yf, :sva.xf]);
        track(:double :lor, kh[:sva.xf, :hel.xv]);
        track(:double :lor, kh[:hel.xv, :hel.yv]);
        track(:double :lor, kh[:hel.yv, :hel - 0.5sw]);
    }

    with link = "point.dk.Hellerup", railway = :station {
        track(:double, kh[:hel - 0.5sw, :hel.yh]);
        marker(:right :de.bf, kh[:hel] >> 0.5mo >> 0.5mt);
        station(:right:left_align,
            kh[:hel - 0.4sw] >> 0.5mo >> 0.5mt >> 1.5sh,
            span(:bold, "Hellerup"),
            hbox(:center:top :cat:dc15,
                vbox(:right:top,
                    span(:cat:ac25, "KHR: "), "??: ", "KKB: ", "[VLH: "
                ),
                vbox(:sep:top,
                    hbox(:sep:base :cat:ac25, "7,", anchor(), "825"),
                    hbox(:sep:base, "??", anchor(), ""),
                    hbox(:sep:base, "7,", anchor(), "825"),
                    hbox(:sep:base, "13,", anchor(), "876]")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double :lor, kh[:hel.yh, :hel.yb]);
        track(:double :lor, kh[:hel.yb, :hel.zh]);
        track(:double :lor, kh[:hel.zh, :cha - 0.5sw]);
        track(:double :lor, kh[:cha - 0.5sw, :cha + 0.5sw]);
        track(:double :lor, kh[:cha + 0.5sw, :cha + 0.7km]);
        line_label(:right:w, kh[:cha + 0.7km] >> 0.5mo >> 0.5mt,
            (0dt, 0.4dt), "KHR"
        );
        track(:double :lor, kh[:cha + 0.7km, :ord - 0.5sw]);
        track(:double :lor, kh[:ord - 0.5sw, :ord + 0.5sw]);
        track(:double :lor, kh[:ord + 0.5sw, :kla - 0.5sw]);
    }

    with link = "point.dk.Klampenborg", railway = :station {
        track(:double, kh[:kla - 0.5sw, :kla + 100m]);
        marker(:right :de.bf :cat:ac25 :pax, kh[:kla] >> 0.5mo >> 0.5mt);
        station(:right, kh[:kla - 0.5sw] >> 0.5mo >> 0.5mt >> 1.3sh,
            span(:bold, "Klampenborg"),
            hbox(:center:top,
                vbox(:right:top, span(:cat:dc15, "KKB: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :cat:dc15, "13,", anchor(), "312"),
                    hbox(:sep:base, "13,", anchor(), "312")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:kla + 100m, :kla + 2.3km]);
        line_label(:right:w, kh[:kla + 2.3km] >> 0.5md, "KHR");
        track(:double, kh[:kla + 2.3km, :sko - 0.5sw]);
    }

    with link = "point.dk.Skodsborg", railway = :station {
        track(:double, kh[:sko - 0.5sw, :sko + 0.5sw]);
        marker(:right :de.bf, kh[:sko] >> 0.5mo >> 0.5mt);
        station(:right, kh[:sko - 0.5sw] >> 0.5mo >> 0.5mt >> 1.4sh,
            "Skodsborg", "KHR: 18,81"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:sko + 0.5sw, :ved.yj - 4mo]);
        track(:double :lor, kh[:ved.yj - 4mo, :ved.yj]);
        track(:double, kh[:ved.yj, :ved - 0.5sw]);
    }

    with link = "point.dk.Vedbæk", railway = :station {
        track(:double, kh[:ved - 0.5sw, :ved + 0.5sw]);
        marker(:right :de.hp, kh[:ved] >> 0.5mo >> 0.5mt);
        marker(:right :de.exbf, kh[:ved] >> 0.5mo >> 0.5mt);
        station(:right:left_align,
            kh[:ved - 0.35sw] >> 0.5mo >> 0.5mt >> 1.8sh,
            span(:bold, "Vedbæk"),
            hbox(:center:top,
                vbox(:right:top, span(:removed, "JBV: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :removed, "12,", anchor(), "1"),
                    hbox(:sep:base, "22,", anchor(), "158")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:ved + 0.5sw, :run - 0.5sw]);
    }

    with link = "point.dk.Rungsted-Kyst", railway = :station {
        track(:double, kh[:run - 0.5sw, :run + 0.5sw]);
        marker(:left :de.bf, kh[:run] << 0.5mo << 0.5mt);
        station(:left, kh[:run + 0.7sw] << 0.5mo << 0.5mt << 1.2sh,
            hbox(:right:top, "Rungsted Kyst"), "KHR: 26,05"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:run + 0.5sw, :run + 1.5km]);
        line_label(:right:sw, kh[:run + 1.5km] >> 0.5mo >> 0.5mt, "KHR");
        track(:double, kh[:run + 1.5km, :kok - 0.5sw]);
    }

    with link = "point.dk.Kokkedal", railway = :station {
        track(:double, kh[:kok - 0.5sw, :kok + 0.5sw]);
        marker(:left :de.hp, kh[:kok] << 0.5mo << 0.5mt);
        station(:left, kh[:kok - 0.35sw] << 0.5mo << 0.5mt << 1.6sh,
            "Kokkedal", "KHR: 29,07"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:kok + 0.5sw, :niv - 0.5sw]);
    }

    with link = "point.dk.Nivå", railway = :station {
        track(:double, kh[:niv - 0.5sw, :niv + 0.5sw]);
        marker(:right :de.bf, kh[:niv] >> 0.5mo >> 0.5mt);
        station(:right:left_align, kh[:niv - 0.3sw] >> 0.5mo >> 0.5mt >> 1.8sh,
            "Nivå", "KHR: 32,48"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:niv + 0.5sw, :hum - 0.5sw]);
    }

    with link = "point.dk.Humlebæk", railway = :station {
        track(:double, kh[:hum - 0.5sw, :hum + 0.5sw]);
        marker(:right :de.hp, kh[:hum] >> 0.5mo >> 0.5mt);
        station(:right, kh[:hum - 0.35sw] >> 0.5mo >> 0.5mt >> 1.7sh,
            "Humlebæk", "KHR: 36,21"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:hum + 0.5sw, :hum + 2km]);
        line_label(:right:w, kh[:hum + 2km] >> 0.5mo >> 0.5mt, "KHR");
        track(:double, kh[:hum + 2km, :esp - 0.5sw]);
    }

    with link = "point.dk.Espergærde" {
        track(:double, kh[:esp - 0.5sw, :esp + 0.5sw]);
        marker(:right :de.hp, kh[:esp] >> 0.5mo >> 0.5mt);
        station(:right, kh[:esp - 0.5sw] >> 0.5mo >> 0.5mt >> 1.6sh,
            "Espergærde", "KHR: 40,00"
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:esp + 0.5sw, :sne.xh]);
        track(:double :lor, kh[:sne.xh, :sne.yh]);
    }

    with link = "point.dk.Snekkersten", railway = :station {
        track(
                kh[:sne.yh, :sne + 220m - 1dl] << 1.5mo
            --  kh[:sne + 220m, :sne + 221m] << 0.5mo
        );
        track(:double, kh[:sne.yh, :sne + 250m]);
        marker(:right :de.bf, kh[:sne] >> 0.5mo >> 0.5mt);
        station(:right, kh[:sne - 0.5sw] >> 0.5mo >> 0.5mt >> 1.05sh,
            hbox(:left:top :bold, "Snekkersten"),
            hbox(:center:top,
                vbox(:right:top, span(:nocat, "[HHS: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :nocat, "57,", anchor(), "39]"),
                    hbox(:sep:base, "42,", anchor(), "72")
                )
            )
        );
    }

    with link = "line.dk.KHR" {
        track(:double, kh[:sne + 220m, :sne + 1.8km]);
        line_label(:right:w, kh[:sne + 1.8km] >> 0.5mo >> 0.5mt, "KHR");
        track(:double, kh[:sne + 1.8km, :hor - 680m]);
    }

    with link = "point.dk.Helsingør", railway = :station {
        track(:double, kh[:hor - 680m, :hor]);
        track(:nocat,
                kh[:hor - 651m, :hor - 650m] << 0.5mo
            --  kh[:hor - 650m + 1dl, :hor + 120m] << 1.5mo
        );
        marker(:top :de.bf, kh[:hor] >> 0.5sw << 1.5mo >> 1.5mt);
        station(:right, kh[:hor + 1.2sh] >> 1.0sw << 1.5mo >> 1.5mt,
            hbox(:left:top :bold, "Helsingør"),
            hbox(:center:top,
                vbox(:right:top, span(:nocat, "HRG: "), "KHR: "),
                vbox(:sep:top,
                    hbox(:sep:base :nocat, "0,", anchor(), "000"),
                    hbox(:sep:base, "46,", anchor(), "161")
                )
            )
        );
    }
}

