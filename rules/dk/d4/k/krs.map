# DK KRS.  Køge - Ringsted
#
let kr = path("d3.dk.krs");

with detail = 4,
     railway = :first :pax :removed
{
    # point.dk.Køge  dk.RKN

    with link = "line.dk.KRS" {
        track(
                kr[:kog.yr - 0.1dl, :kog.yr] << 2mo
            ..  kr[:kob - 0.5sw, :kob - 0.49sw]
        );
    }

    with link = "point.dk.Københavnsvej", railway = :station {
        track(kr[:kob - 0.5sw, :kob + 0.5sw]);
        marker(:right :de.hp, kr[:kob] >> 0.5mt);
        label(kr[:kob] >> 0.5mt >> 1.4sh + (0.3sw, -0.3dt),
            hbox(:right:base,
                vbox(:center:base,
                    span(:xsmall, "KRS: 1,0"),
                    "Københavnsvej"
                )
            )
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:kob + 0.5sw, :kob + 2km]);
        line_label(:left:n, kr[:kob + 2km] << 0.5mt, "KRS");
        track(kr[:kob + 2km, :osm - 0.5sw]);
    }

    with link = "point.dk.Østermark", railway = :station {
        track(kr[:osm - 0.5sw, :osm + 0.5sw]);
        marker(:right :de.hp, kr[:osm] >> 0.5mt);
        station(:top, kr[:osm] >> 0.5mt >> 1.2sh, "Østermark", "KRS: 4,4");
    }

    with link = "line.dk.KRS" {
        track(kr[:osm + 0.5sw, :lel - 0.5sw]);
    }

    with link = "point.dk.Lellinge", railway = :station {
        track(kr[:lel - 0.5sw, :lel + 0.5sw]);
        marker(:right :de.bf, kr[:lel] >> 0.5mt);
        station(:top, kr[:lel] >> 0.5mt >> 1.3sh + (0.5dt, 0dt),
            "Lellinge", "KRS: 5,9"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:lel + 0.5sw, :nle - 0.5sw]);
    }

    with link = "point.dk.Ny-Lellinge", railway = :station {
        track(kr[:nle - 0.5sw, :nle + 0.5sw]);
        marker(:left :de.hp, kr[:nle] << 0.5mt);
        station(:bottom, kr[:nle] << 0.5mt << 1.3sh,
            "Ny Lellinge", "KRS: 7,6"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:nle + 0.5sw, :yde - 0.5sw]);
    }

    with link = "point.dk.Yderholm", railway = :station {
        track(kr[:yde - 0.5sw, :yde + 0.5sw]);
        marker(:right :de.hp, kr[:yde] >> 0.5mt);
        station(:top, kr[:yde] >> 0.5mt >> 1.2sh, "Yderholm", "KRS: 8,3");
    }

    with link = "line.dk.KRS" {
        track(kr[:yde + 0.5sw, :vem - 0.5sw]);
    }

    with link = "point.dk.Vemmedrup", railway = :station {
        track(kr[:vem - 0.5sw, :vem + 0.5sw]);
        marker(:left :de.hp, kr[:vem] << 0.5mt);
        station(:right, kr[:vem - 0.5sw] << 0.5mt << 1.2sh,
            hbox(:left:top, "Vemmedrup"), "KRS: 8,9"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:vem + 0.5sw, :lun - 0.5sw]);
    }

    with link = "point.dk.Lundsgårdsvej", railway = :station {
        track(kr[:lun - 0.5sw, :lun + 0.5sw]);
        marker(:right :de.hp, kr[:lun] >> 0.5mt);
        station(:left, kr[:lun + 0.5sw] >> 0.5mt >> 1.2sh,
            "Lundsgårdsvej", "KRS: 9,4"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:lun + 0.5sw, :bja - 0.5sw]);
    }

    with link = "point.dk.Bjæverskov", railway = :station {
        track(kr[:bja - 0.5sw, :bja + 0.5sw]);
        marker(:left :de.bf, kr[:bja] << 0.5mt);
        station(:right, kr[:bja] << 0.5mt << 1.7sh + (0dt, 1dt),
            "Bjæverskov", "KRS: 11,2"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:bja + 0.5sw, :mol - 0.5sw]);
    }

    with link = "point.dk.Bjæverskov-Mølle", railway = :station {
        track(kr[:mol - 0.5sw, :mol + 0.5sw]);
        marker(:left :de.hp, kr[:mol] << 0.5mt);
        station(:right, kr[:mol] << 0.5mt << 1.7sh + (0dt, 1dt),
            "Bjæverskov Mølle", "KRS: 12,2"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:mol + 0.5sw, :gra - 0.5sw]);
    }

    with link = "point.dk.Græsmarksvej", railway = :station {
        track(kr[:gra - 0.5sw, :gra + 0.5sw]);
        marker(:right :de.hp, kr[:gra] >> 0.5mt);
        station(:left, kr[:gra] >>  0.5mt >> 1.5sh + (0dt, 1dt),
            "Græsmarksvej", "KRS: 12,9"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:gra + 0.5sw, :gun - 0.5sw]);
    }

    with link = "point.dk.Gummersmark", railway = :station {
        track(kr[:gun - 0.5sw, :gun + 0.5sw]);
        marker(:left :de.hp, kr[:gun] << 0.5mt);
        marker(:left :de.exbf, kr[:gun] << 0.5mt);
        station(:right, kr[:gun] << 0.5mt << 2sh + (0dt, 1dt),
            "Gummersmark", "KRS: 13,5"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:gun + 0.5sw, :gor - 0.5sw]);
    }

    with link = "point.dk.Gørslevgård", railway = :station {
        track(kr[:gor - 0.5sw, :gor + 0.5sw]);
        marker(:right :de.hp, kr[:gor] >> 0.5mt);
        station(:left, kr[:gor] >>  0.5mt >> 1.6sh + (0dt, 1.4dt),
            "Gørslevgård", "KRS: 13,5"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:gor + 0.5sw, :osv - 0.5sw]);
    }

    with link = "point.dk.Østervang", railway = :station {
        track(kr[:osv - 0.5sw, :osv + 0.5sw]);
        marker(:right :de.bf, kr[:osv] >> 0.5mt);
        station(:left, kr[:osv] >> 0.5mt >> 1.7sh + (0dt, 1.2dt),
            "Østervang", "KRS: 15,0"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:osv + 0.5sw, :osv + 1.2km]);
        line_label(:left:w, kr[:osv + 1.2km] << 0.5mt, (0dt, 0.2dt), "KRS");
        track(kr[:osv + 1.2km, :nyv - 0.5sw]);
    }

    with link = "point.dk.Nyvang", railway = :station {
        track(kr[:nyv - 0.5sw, :nyv + 0.5sw]);
        marker(:right :de.hp, kr[:nyv] >> 0.5mt);
        station(:left, kr[:nyv] >> 0.5mt >> 1.7sh + (0dt, 1.2dt),
            "Nyvang", "KRS: 17,5"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:nyv + 0.5sw, :ors - 0.5sw]);
    }

    with link = "point.dk.Ørslev", railway = :station {
        track(kr[:ors - 0.5sw, :ors + 0.5sw]);
        marker(:left :de.bf, kr[:ors] << 0.5mt);
        station(:right, kr[:ors - 0.4sw] << 0.5mt << 1.2sh,
            hbox(:left:top, "Ørslev"), "KRS: 20,5"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:ors + 0.5sw, :ott - 0.5sw]);
    }

    with link = "point.dk.Ottestrup", railway = :station {
        track(kr[:ott - 0.5sw, :ott + 0.5sw]);
        marker(:left :de.hp, kr[:ott] << 0.5mt);
        station(:bottom, kr[:ott] << 0.5mt << 1.2sh + (-0.3dt, 0dt),
            "Ottestrup", "KRS: 22,0"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:ott + 0.5sw, :far - 0.5sw]);
    }

    with link = "point.dk.Farendløse", railway = :station {
        track(kr[:far - 0.5sw, :far + 0.5sw]);
        marker(:left :de.hp, kr[:far] << 0.5mt);
        station(:bottom, kr[:far] << 0.5mt << 1.1sh,
            "Farendløse", "KRS: 23,3"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:far + 0.5sw, :fre - 0.5sw]);
    }

    with link = "point.dk.Fredsgårde", railway = :station {
        track(kr[:fre - 0.5sw, :fre + 0.5sw]);
        marker(:right :de.hp, kr[:fre] >> 0.5mt);
        station(:top, kr[:fre] >> 0.5mt >> 1.4sh + (-0.5dt, 0dt),
            "Fredsgårde", "KRS: 24,9"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:fre + 0.5sw, :sne - 0.5sw]);
    }

    with link = "point.dk.Sneslev", railway = :station {
        track(kr[:sne - 0.5sw, :sne + 0.5sw]);
        marker(:left :de.bf, kr[:sne] << 0.5mt);
        station(:bottom, kr[:sne] << 0.5mt << 1.4sh + (-0.5dt, 0dt),
            "Sneslev", "KRS: 26,5"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:sne + 0.5sw, :all - 0.5sw]);
    }

    with link = "point.dk.Allikegårde", railway = :station {
        track(kr[:all - 0.5sw, :all + 0.5sw]);
        marker(:right :de.hp, kr[:all] >> 0.5mt);
        station(:left, kr[:all] << 2.5mt + (0dt, 1.2dt),
            "Allikegårde", "KRS: 27,7"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:all + 0.5sw, :all + 0.9km]);
        line_label(:right:w, kr[:all + 0.9km] >> 0.5mt, (0dt, -0.2dt), "KRS");
        track(kr[:all + 0.9km, :hav - 0.5sw]);
    }

    with link = "point.dk.Havbyrd", railway = :station {
        track(kr[:hav - 0.5sw, :hav + 0.5sw]);
        marker(:left :de.hp, kr[:hav] << 0.5mt);
        station(:left, kr[:hav] << 0.5mt << 1.6sh + (0dt, 0.8dt),
            "Havbyrd", "KRS: 29,2"
        )
    }

    with link = "line.dk.KRS" {
        track(kr[:hav + 0.5sw, :tol - 0.5sw]);
    }

    with link = "point.dk.Tolstrup", railway = :station {
        track(kr[:tol - 0.5sw, :tol + 0.5sw]);
        marker(:right :de.hp, kr[:tol] >> 0.5mt);
        station(:right, kr[:tol] >> 0.5mt >> 1.4sh + (0dt, 1.2dt),
            "Tolstrup", "KRS: 30,6"
        );
    }

    with link = "line.dk.KRS" {
        track(kr[:tol + 0.5sw, :tol + 1km]);
        line_label(:right:w, kr[:tol + 1km] >> 0.5mt, (0dt, -0.2dt), "KRS");
        track(
                kr[:tol + 1km, :rin.xk]
            ..  kr[:rin.yk, :rin.yk + 0.1dl] << 2.5mo
        );
    }

    # point.dk.Ringsted  dk.KFA
}


