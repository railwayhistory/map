# DK HTL.  Høng - Tølløse
#
let ht = path("d3.dk.htl");

with detail = 4,
     railway = :first :pax
{
    # point.dk.Høng  dk.SVL

    with link = "line.dk.HTL" {
        track(:lor,
                ht[:hon.yt - 0.1dl, :hon.yt] >> 1mo
            ..  ht[:hon.xt, :hon.xt + 0.1dl]
        );
        track(ht[:hon.xt, :kul - 0.5sw]);
    }

    with link = "point.dk.Kulby", railway = :station {
        track(ht[:kul - 0.5sw, :kul + 0.5sw]);
        marker(:left :de.hp :removed, ht[:kul] << 0.5mt);
        marker(:left :de.exbf :removed, ht[:kul] << 0.5mt);
        station(:top :removed, ht[:kul] << 0.5mt << 1.7sh + (-0.8dt, 0dt),
            "Kulby", "HTL: ??"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:kul + 0.5sw, :kul + 1.7km]);
        line_label(:right:nw, ht[:kul + 1.7km] >> 0.5mt, "HTL");
        track(ht[:kul + 1.7km, :rud - 0.5sw]);
    }

    with link = "point.dk.Ruds-Vedby", railway = :station {
        track(ht[:rud - 0.5sw, :rud + 0.5sw]);
        marker(:left :de.bf, ht[:rud] << 0.5mt);
        station(:top, ht[:rud] << 0.5mt << 1.4sh, "Ruds Vedby", "HTL: 7,200");
    }

    with link = "line.dk.HTL" {
        track(ht[:rud + 0.5sw, :hes - 0.5sw]);
    }

    with link = "point.dk.Hestehavens", railway = :station {
        track(ht[:hes - 0.5sw, :hes + 0.5sw]);
        marker(:right :de.hp :removed, ht[:hes] >> 0.5mt);
        station(:bottom :removed, ht[:hes] >> 0.5mt >> 1.2sh,
            "Hestehavens", "HTL: ??"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:hes + 0.5sw, :con - 0.5sw]);
    }

    with link = "point.dk.Conradineslyst", railway = :station {
        track(ht[:con - 0.5sw, :con + 0.5sw]);
        marker(:left :de.hp :removed, ht[:con] << 0.5mt);
        station(:top :removed, ht[:con] << 0.5mt << 1.2sh,
            "Conradineslyst", "HTL: ??"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:con + 0.5sw, :ske - 0.5sw]);
    }

    with link = "point.dk.Skellebjerg", railway = :station {
        track(ht[:ske - 0.5sw, :ske + 0.5sw]);
        marker(:right :de.bf, ht[:ske] >> 0.5mt);
        station(:bottom, ht[:ske] >> 0.5mt >> 1.3sh,
            "Skellebjerg", "HTL: 11,978"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:ske + 0.5sw, :ske + 1.6km]);
        line_label(:left:s, ht[:ske + 1.6km] << 0.5mt, "HTL");
        track(ht[:ske + 1.6km, :dia - 0.5sw]);
    }

    with link = "point.dk.Dianalund", railway = :station {
        track(ht[:dia - 0.5sw, :dia + 0.5sw]);
        marker(:right :de.bf, ht[:dia] >> 0.5mt);
        station(:bottom, ht[:dia] >> 0.5mt >> 1.3sh,
            "Dianalund", "HTL: 15,200"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:dia + 0.5sw, :ved.ys]);
    }

    with link = "point.dk.Vedde", railway = :station {
        track(ht[:ved.ys, :ved + 0.5sw]);
        track(:removed, ht[:ved.ys, :ved + 0.5sw] >> 1mo);
        marker(:right :de.hp, ht[:ved] >> 1mo >> 0.5mt);
        marker(:right :de.exbf, ht[:ved] >> 1mo >> 0.5mt);
        station(:bottom, ht[:ved] >> 1mo >> 0.5mt >> 1.7sh + (1dt, 0dt),
            span(:bold, "Vedde"),
            hbox(:center:top,
                vbox(:right:top, "HTL: ", span(:removed, "SRV: ")),
                vbox(:sep:top,
                    hbox(:sep:base, "18,", anchor(), "300"),
                    hbox(:sep:base, "15,", anchor(), "9")
                )
            )
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:ved + 0.5sw, :ste - 0.5sw]);
    }

    with link = "point.dk.Stenlille", railway = :station {
        track(ht[:ste - 0.5sw, :ste + 0.5sw]);
        marker(:right :de.bf, ht[:ste] >> 0.5mt);
        station(:bottom, ht[:ste] >> 0.5mt >> 1.3sh,
            "Stenlille", "HTL: 21,200"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:ste + 0.5sw, :ste + 1.6km]);
        line_label(:left:s, ht[:ste + 1.6km] << 0.5mt, "HTL");
        track(ht[:ste + 1.6km, :nyr - 0.5sw]);
    }

    with link = "point.dk.Nyrup", railway = :station {
        track(ht[:nyr - 0.5sw, :nyr + 0.5sw]);
        marker(:left :de.hp, ht[:nyr] << 0.5mt);
        marker(:left :de.exbf, ht[:nyr] << 0.5mt);
        station(:top, ht[:nyr] << 0.5mt << 1.8sh + (-0.5dt, 0dt),
            "Nyrup", "HTL: 25,200"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:nyr + 0.5sw, :bag - 0.5sw]);
    }

    with link = "point.dk.Bagmarken", railway = :station {
        track(ht[:bag - 0.5sw, :bag + 0.5sw]);
        marker(:right :de.hp, ht[:bag] >> 0.5mt);
        station(:bottom, ht[:bag] >> 0.5mt >> 1.2sh,
            "Bagmarken", "HTL: 27,240"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:bag + 0.5sw, :sme - 0.5sw]);
    }

    with link = "point.dk.Store-Merløse", railway = :station {
        track(ht[:sme - 0.5sw, :sme + 0.5sw]);
        marker(:right :de.bf, ht[:sme] >> 0.5mt);
        station(:bottom, ht[:sme] >> 0.5mt >> 1.3sh + (0.5dt, 0dt),
            "Store Merløse", "HTL: 28,900"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:sme + 0.5sw, :uds - 0.5sw]);
    }

    with link = "point.dk.Udstrup", railway = :station {
        track(ht[:uds - 0.5sw, :uds + 0.5sw]);
        marker(:left :de.hp :removed, ht[:uds] << 0.5mt);
        station(:left :removed, ht[:uds] << 0.5mt << 1.6sh + (0dt, 1.2dt),
            "Udstrup", "HTL: ??"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:uds + 0.5sw, :kes - 0.5sw]);
    }

    with link = "point.dk.Kirke-Eskilstrup", railway = :station {
        track(ht[:kes - 0.5sw, :kes + 0.5sw]);
        marker(:left :de.bf, ht[:kes] << 0.5mt);
        station(:left, ht[:kes] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Kirke Eskilstrup", "HTL: 33,800"
        );
    }

    with link = "line.dk.HTL" {
        track(ht[:kes + 0.5sw, :kes + 1.8km]);
        line_label(:left:e, ht[:kes + 1.8km] << 0.5mt, "HTL");
        track(ht[:kes + 1.8km, :tol.xh]);
        track(:ror,
                ht[:tol.xh - 0.1mt, :tol.xh]
            ..  ht[:tol.yh, :tol.yh + 0.1dl] << 1.5mo
        );
    }

    # point.dk.Tølløse  dk.RKB
}

