# DK HFH.  Hillerød - Frederiksværk - Hundested Havn
#
let hh = path("d3.dk.hfh");

with detail = 4,
     railway = :first :pax
{
    # point.dk.Hillerød  dk.HHS

    with link = "line.dk.HFH" {
        track(:lor, hh[:hil + 0.5sw, :hil.yh] >> 1.5mo);
    }

    with link = "point.dk.Favrholm", railway = :station {
        track(hh[:hil.yh, :fav + 0.5sw] >> 1.5mo);
        marker(:right :de.hp, hh[:fav] >> 1.5mo >> 0.5mt);
    }

    with link = "line.dk.HFH" {
        track(
                hh[:fav + 0.49sw, :fav + 0.5sw] >> 1.5mo
            ..  hh[:sth - 0.5sw, :sth - 0.49sw] >> 1mo
        );
    }

    with link = "point.dk.St-Hestehave", railway = :station {
        track(hh[:sth - 0.5sw, :sth + 0.5sw] >> 1mo);
        marker(:left :de.hp :removed, hh[:sth] >> 1mo << 0.5mt);
        station(:left :removed, hh[:sth + 0.4sw] >> 1mo >> 2mt,
            "St. Hestehave", "HFH: 2,6"
        );
    }

    with link = "line.dk.HFH" {
        track(
                hh[:sth + 0.49sw, :sth + 0.5sw] >> 1mo
            ..  hh[:hil.xh + 4mo, :bro - 0.5sw]
        );
    }

    with link = "point.dk.Brødeskov", railway = :station {
        track(hh[:bro - 0.5sw, :bro.ys]);
        marker(:left :de.bf, hh[:bro] << 0.5mt);
        station(:right, hh[:bro - 0.5sw] << 0.5mt << 1.2sh,
            hbox(:left:top, "Brødeskov"),
            "HFH: 4,873"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:bro.ys, :bro + 2.7km]);
        line_label(:right:s, hh[:bro + 2.7km] >> 0.5mt, "HFH");
        track(hh[:bro + 2.7km, :gor - 0.5sw]);
    }

    with link = "point.dk.Gørløse", railway = :station {
        track(hh[:gor - 0.5sw, :gor + 0.5sw]);
        marker(:right :de.bf, hh[:gor] >> 0.5mt);
        station(:top, hh[:gor] >> 0.5mt >> 1.25sh, "Gørløse", "HFH: 9,817");
    }

    with link = "line.dk.HFH" {
        track(hh[:gor + 0.5sw, :bor - 0.5sw]);
    }

    with link = "point.dk.Borupgård", railway = :station {
        track(hh[:bor - 0.5sw, :bor + 0.5sw]);
        marker(:right :de.hp :removed, hh[:bor] >> 0.5mt);
        station(:right :removed, hh[:bor] >> 0.5mt >> 1.7sh + (0dt, 1.4dt),
            "Borupgård", "HFH: 12,0"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:bor + 0.5sw, :ska.yh]);
        track(hh[:ska.yh, :ska - 0.5sw]);
    }

    with link = "point.dk.Skævinge", railway = :station {
        track(hh[:ska - 0.5sw, :ska + 0.5sw]);
        marker(:right :de.bf, hh[:ska] >> 0.5mt);
        station(:top, hh[:ska] >> 0.5mt >> 1.3sh + (0.5dt, 0dt),
            span(:bold, "Skævinge"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:removed, "HRS: "),
                    "HFH: "
                ),
                vbox(:sep:top,
                    hbox(:sep:base :removed, "??", anchor(), ""),
                    hbox(:sep:base, "14,", anchor(), "243")
                )
            )
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ska + 0.5sw, :str - 0.5sw]);
    }

    with link = "point.dk.Strølille", railway = :station {
        track(hh[:str - 0.5sw, :str + 0.5sw]);
        marker(:left :de.hp :removed, hh[:str] << 0.5mt);
        station(:bottom :removed, hh[:str] << 0.5mt << 1.3sh + (-0.5dt, 0dt),
            "Strølille", "HFH: 15,7"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:str + 0.5sw, :gri - 0.5sw]);
    }

    with link = "point.dk.Grimstrup", railway = :station {
        track(hh[:gri - 0.5sw, :gri + 0.5sw]);
        marker(:left :de.hp, hh[:gri] << 0.5mt);
        station(:bottom, hh[:gri] << 0.5mt << 1.2sh + (-3dt, 0dt),
            "Grimstrup", "HFH: 17,363"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:gri + 0.5sw, :gri + 1km]);
        line_label(:right:s, hh[:gri + 1km] >> 0.5mt, (1dt, 0dt), "HFH");
        track(hh[:gri + 1km, :ols - 0.5sw]);
    }

    with link = "point.dk.Ølsted", railway = :station {
        track(hh[:ols - 0.5sw, :ols + 0.5sw]);
        marker(:left :de.bf, hh[:ols] << 0.5mt);
        station(:bottom:right_align, hh[:ols - 0.5sw] << 0.5mt << 1.1sh,
            "Ølsted", "HFH: 19,304"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ols + 0.5sw, :kre - 0.5sw]);
    }

    with link = "point.dk.Kregme", railway = :station {
        track(hh[:kre - 0.5sw, :kre + 0.5sw]);
        marker(:right :de.bf, hh[:kre] >> 0.5mt);
        station(:right:left_align, hh[:kre] >> 0.5mt >> 1.6sh + (0dt, 1.5dt),
            "Kregme", " HFH: 21,593"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:kre + 0.5sw, :krk - 0.5sw]);
    }

    with link = "point.dk.Kregme-Kirkesti", railway = :station {
        track(hh[:krk - 0.5sw, :krk + 0.5sw]);
        marker(:right :de.hp :removed, hh[:krk] >> 0.5mt);
        station(:right :removed, hh[:krk] >> 0.5mt >> 1.6sh + (0dt, 1.6dt),
            "Kregme Kirkesti", "HFH: 22,4"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:krk + 0.5sw, :lil - 0.5sw]);
    }

    with link = "point.dk.Lille-Kregme", railway = :station {
        track(hh[:lil - 0.5sw, :lil + 0.5sw]);
        marker(:right :de.hp, hh[:lil] >> 0.5mt);
        station(:right, hh[:lil] >> 0.5mt >> 1.6sh + (0dt, 1.6dt),
            "Lille Kregme", "HFH: 23,094"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:lil + 0.5sw, :lil + 1.5km]);
        line_label(:left:e, hh[:lil + 1.5km] << 0.5mt, (0dt, 0.2dt), "HFH");
        track(hh[:lil + 1.5km, :fre - 0.5sw]);
    }

    with link = "point.dk.Frederiksværk", railway = :station {
        track(hh[:fre - 0.5sw, :fre + 0.5sw]);
        marker(:right :de.bf, hh[:fre] >> 0.5mt);
        station(:right, hh[:fre] >> 0.5mt >> 1.5sh + (0dt, 1.2dt),
            "Frederiksværk", "HFH: 25,825"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:fre + 0.5sw, :han - 0.5sw]);
    }

    with link = "point.dk.Hanehoved", railway = :station {
        track(hh[:han - 0.5sw, :han + 0.5sw]);
        marker(:right :de.hp, hh[:han] >> 0.5mt);
        station(:right, hh[:han] >> 0.5mt >> 1.7sh + (0dt, 1.8dt),
            "Hanehoved", "HFH: 27,344"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:han + 0.5sw, :mel - 0.5sw]);
    }

    with link = "point.dk.Melby", railway = :station {
        track(hh[:mel - 0.5sw, :mel + 0.5sw]);
        marker(:right :de.bf, hh[:mel] >> 0.5mt);
        station(:top, hh[:mel] >> 0.5mt >> 1.3sh + (-0.5dt, 0dt),
            "Melby", "HFH: 30,149"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:mel + 0.5sw, :dys - 0.5sw]);
    }

    with link = "point.dk.Dyssekilde", railway = :station {
        track(hh[:dys - 0.5sw, :dys + 0.5sw]);
        marker(:left :de.bf, hh[:dys] << 0.5mt);
        station(:bottom, hh[:dys] << 0.5mt << 1.3sh + (0.5dt, 0dt),
            "Dyssekilde", "HFH: 32,008"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:dys + 0.5sw, :ost - 0.5sw]);
    }

    with link = "point.dk.Østerbjerg", railway = :station {
        track(hh[:ost - 0.5sw, :ost + 0.5sw]);
        marker(:left :de.bf, hh[:ost] << 0.5mt);
        station(:right, hh[:ost] << 0.5mt << 1.5sh + (0dt, 1.8dt),
            "Østerbjerg", "HFH: 33,048"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ost + 0.5sw, :ost + 1km]);
        line_label(:right:se, hh[:ost + 1km] >> 0.5mt, "HFH");
        track(hh[:ost + 1km, :ull - 0.5sw]);
    }

    with link = "point.dk.Ullerup", railway = :station {
        track(hh[:ull - 0.5sw, :ull + 0.5sw]);
        marker(:right :de.hp :removed, hh[:ull] >> 0.5mt);
        station(:top :removed,
            hh[:ull - 0.5sw] >> 0.5mt >> 1.1sh + (-3dt, 0dt),
            "Ullerup", "HFH: 36,1"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:ull + 0.5sw, :vib - 0.5sw]);
    }

    with link = "point.dk.Vibehus", railway = :station {
        track(hh[:vib - 0.5sw, :vib + 0.5sw]);
        marker(:left :de.hp, hh[:vib] << 0.5mt);
        station(:right:left_align, hh[:vib] << 0.5mt << 1.7sh + (0dt, 0.6dt),
            "Vibehus", "HFH: 37,204"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:vib + 0.5sw, :hun - 0.5sw]);
    }

    with link = "point.dk.Hundested", railway = :station {
        track(hh[:hun - 0.5sw, :hun + 0.5sw]);
        marker(:left :de.bf, hh[:hun] << 0.5mt);
        station(:left, hh[:hun] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Hundested", "HFH: 39,151"
        );
    }

    with link = "line.dk.HFH" {
        track(hh[:hun + 0.5sw, :huh - 0.5sw]);
    }

    with link = "point.dk.Hundested-Havn", railway = :station {
        track(hh[:huh - 0.5sw, :huh.f]);
        with layer = 1 marker(:left :de.bf, hh[:huh] << 0.5mt);
        station(:left, hh[:huh] >> 2mt,
            span(:bold, "Hundested Havn"), "HFH: 39,674"
        );
    }
}

