# DK RFH.  Ringsted - Frederikssund - Hillerød
#
let rh = path("d3.dk.rfh");

with detail = 4,
     railway = :first :pax :removed
{
    # point.dk.Ringsted  dk.KFA

    with link = "line.dk.RFH" {
        track(
                rh[:rin.yf - 0.1dl, :rin.yf] >> 2.5mo
            ..  rh[:rin.yf + 1km, :rin.yf + 1.01km] >> 2mo
            ..  rh[:rin.xf + 1md, :knu - 0.5sw]
        );
    }

    with link = "point.dk.Knudslund", railway = :station {
        track(rh[:knu - 0.5sw, :knu + 0.5sw]);
        marker(:left :de.hp, rh[:knu] << 0.5mt);
        station(:left, rh[:knu] << 0.5mt << 1.5sh + (0dt, 1.6dt),
            "Knudslund", "RFH: 5,6"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:knu + 0.5sw, :ort - 0.5sw]);
    }

    with link = "point.dk.Ortved", railway = :station {
        track(rh[:ort - 0.5sw, :ort + 0.5sw]);
        marker(:left :de.hst, rh[:ort] << 0.5mt);
        station(:left, rh[:ort] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Ortved", "RFH: 8,1"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:ort + 0.5sw, :ort + 1.5km]);
        line_label(:right:w, rh[:ort + 1.5km] >> 0.5mt, "RFH");
        track(rh[:ort + 1.5km, :jys - 0.5sw]);
    }

    with link = "point.dk.Jystrup", railway = :station {
        track(rh[:jys - 0.5sw, :jys + 0.5sw]);
        marker(:right :de.bf, rh[:jys] >> 0.5mt);
        station(:right, rh[:jys] >> 0.5mt >> 1.5sh + (0dt, 1dt),
            "Jystrup", "RFH: 12,1"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:jys + 0.5sw, :skj - 0.5sw]);
    }

    with link = "point.dk.Skjoldenæsholm", railway = :station {
        track(rh[:skj - 0.5sw, :skj + 0.5sw]);
        marker(:right :de.hst, rh[:skj] >> 0.5mt);
        station(:right, rh[:skj - 0.5sw] >> 0.5mt >> 1.3sh,
            "Skjoldenæsholm", "RFH: 13,8"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:skj + 0.5sw, :old - 0.5sw]);
    }

    with link = "point.dk.Oldgård", railway = :station {
        track(rh[:old - 0.5sw, :old + 0.5sw]);
        marker(:right :de.hp, rh[:old] >> 0.5mt);
        station(:right, rh[:old] >> 0.5mt >> 1.5sh + (0dt, 1.2dt),
            "Oldgård", "RFH: 17,0"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:old + 0.5sw, :old + 1.3km]);
        line_label(:left:e, rh[:old + 1.3km] << 0.5mt, (0dt, -0.2dt), "RFH");
        track(rh[:old + 1.3km, :tin - 0.5sw]);
    }

    with link = "point.dk.Tingerup", railway = :station {
        track(rh[:tin - 0.5sw, :tin + 0.5sw]);
        marker(:left :de.hp, rh[:tin] << 0.5mt);
        station(:left, rh[:tin] << 0.5mt << 1.4sh + (0dt, 1dt),
            "Tingerup", "RFH: 20,0"
        );
    }

    with link = "line.dk.RFH" {
        track(
                rh[:tin + 0.5sw, :hva.zr]
            ..  rh[:hva.xr - 150m, :hva.xr - 100m] << 1.5mo
            ..  rh[:hva.yr, :hva.yr + 0.1dl] << 0.5mo
        );
    }

    # point.dk.Hvalsø  dk.RKB

    with link = "line.dk.RFH" {
        track(
                rh[:hva.yf - 0.1dl, :hva.yf] << 0.5mo
            ..  rh[:hva.xf, :bje - 1.3km]
        );
        line_label(:right:sw, rh[:bje - 1.3km] >> 0.5mt, "RFH");
        track(rh[:bje - 1.3km, :bje - 0.5sw]);
    }

    with link = "point.dk.Bjergskov", railway = :station {
        track(rh[:bje - 0.5sw, :bje + 0.5sw]);
        marker(:left :de.hp, rh[:bje] << 0.5mt);
        station(:left, rh[:bje] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Bjergskov", "RFH: 27,0"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:bje + 0.5sw, :ksa - 0.5sw]);
    }

    with link = "point.dk.Kirke-Såby", railway = :station {
        track(rh[:ksa - 0.5sw, :ksa + 0.5sw]);
        marker(:left :de.bf, rh[:ksa] << 0.5mt);
        station(:left, rh[:ksa] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Kirke Såby", "RFH: 29,4"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:ksa + 0.5sw, :tor - 0.5sw]);
    }

    with link = "point.dk.Torkilstrup", railway = :station {
        track(rh[:tor - 0.5sw, :tor + 0.5sw]);
        marker(:right :de.hp, rh[:tor] >> 0.5mt);
        station(:right, rh[:tor + 0.3sw] >> 0.5mt >> 1.1sh,
            hbox(:left:top, "Torkilstrup"), "RFH: 32,1"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:tor + 0.5sw, :jen - 0.5sw]);
    }

    with link = "point.dk.Jenslev", railway = :station {
        track(rh[:jen - 0.5sw, :jen + 0.5sw]);
        marker(:right :de.hp, rh[:jen] >> 0.5mt);
        station(:right, rh[:jen] >> 0.5mt >> 1.5sh + (0dt, 1dt),
            "Jenslev", "RFH: 35,1"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:jen + 0.5sw, :khy - 0.5sw]);
    }

    with link = "point.dk.Kirke-Hyllinge", railway = :station {
        track(rh[:khy - 0.5sw, :khy + 0.5sw]);
        marker(:left :de.bf, rh[:khy] << 0.5mt);
        station(:left, rh[:khy] << 0.5mt << 1.4sh + (0dt, 1dt),
            "Kirke Hyllinge", "RFH: 37,6"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:khy + 0.5sw, :bil - 0.5sw]);
    }

    with link = "point.dk.Biltris", railway = :station {
        track(rh[:bil - 0.5sw, :bil + 0.5sw]);
        marker(:left :de.bf, rh[:bil] << 0.5mt);
        station(:left:right_align, rh[:bil] << 0.5mt << 1.7sh + (0dt, 1.4dt),
            "Biltris", "RFH: 40,4  "
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:bil + 0.5sw, :bil + 1.4km]);
        line_label(:right:nw, rh[:bil + 1.4km] << 0.5mt, "RFH");
        track(rh[:bil + 1.4km, :ski - 0.5sw]);
    }

    with link = "point.dk.Skibby", railway = :station {
        track(rh[:ski - 0.5sw, :ski + 0.5sw]);
        marker(:right :de.bf, rh[:ski] >> 0.5mt);
        station(:right:left_align, rh[:ski] >> 0.5mt >> 1.5sh + (0dt, 1.2dt),
            "Skibby", "RFH: 43,4"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:ski + 0.5sw, :bon - 0.5sw]);
    }

    with link = "point.dk.Bonderup-Sjælland", railway = :station {
        track(rh[:bon - 0.5sw, :bon + 0.5sw]);
        marker(:right :de.hp, rh[:bon] >> 0.5mt);
        station(:right, rh[:bon] >> 0.5mt >> 1.5sh + (0dt, 1dt),
            "Bonderup Sjælland", "RFH: 45,4"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:bon + 0.5sw, :kro - 0.5sw]);
    }

    with link = "point.dk.Krogstrup", railway = :station {
        track(rh[:kro - 0.5sw, :kro + 0.5sw]);
        marker(:left :de.bf, rh[:kro] << 0.5mt);
        station(:left, rh[:kro] << 0.5mt << 1.5sh + (0dt, 1.2dt),
            "Krogstrup", "RFH: 48,1"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:kro + 0.5sw, :lyn - 0.5sw]);
    }

    with link = "point.dk.Lyngerup", railway = :station {
        track(rh[:lyn - 0.5sw, :lyn + 0.5sw]);
        marker(:left :de.hp, rh[:lyn] << 0.5mt);
        station(:left, rh[:lyn] << 0.5mt << 1.5sh + (0dt, 1.4dt),
            "Lyngerup", "RFH: 50,2"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:lyn + 0.5sw, :fem - 0.5sw]);
    }

    with link = "point.dk.Femhøj", railway = :station {
        track(rh[:fem - 0.5sw, :fem + 0.5sw]);
        marker(:right :de.hst, rh[:fem] >> 0.5mt);
        station(:right, rh[:fem + 0.4sw] >> 0.5mt >> 1.1sh,
            hbox(:left:top, "Femhøj"), "RFH: 52,5"
        );
    }

    with link = "line.dk.RFH" {
        track(rh[:fem + 0.5sw, :fem + 2.5km]);
        line_label(:left:se, rh[:fem + 2.5km] << 0.5mt, "RFH");
        track(rh[:fem + 2.5km, :fre - 0.5sw]);
    }

    with link = "point.dk.Frederikssund", railway = :station {
        track(
                rh[:fre - 0.5sw, :fre + 0.5sw]
            ..  path("d3.dk.kfs")[:fre.yr, :fre.yr - 0.1dl] >> 0.5mo
        );
        with layer = -1 marker(:left :de.bf, rh[:fre] << 0.5mt);
    }
}

with detail = 4,
     railway = :first :project :removed
{
    with link = "line.dk.RFH" {
        track(
                path("d3.dk.kfs")[:fre.yr + 0.1dl, :fre.yr] << 0.5mo
            ..  rh[:fre.yr + 2mo, :fre.yr + 4.5km]
        );
        line_label(:right:n, rh[:fre.yr + 4.5km] >> 0.5mt,
            (0.5dt, 0dt), "RFH"
        );
        track(rh[:fre.yr + 4.5km, :sla - 0.5sw]);
    }

    # point.dk.Slangerup  dk.SMS

    with link = "line.dk.RFH" {
        track(rh[:sla.yh, :sla.yh + 4km]);
        line_label(:right:nw, rh[:sla.yh + 4km] >> 0.5mt, "RFH");
        track(rh[:sla.yh + 4km, :bro.ys]);
    }
}

