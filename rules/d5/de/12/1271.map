# DE 1271.  Hamburg Hbf - Hamburg-Neugraben
#
let hamneu = path("path.de.1271");
let wanham = path("path.de.2200");

with detail = 5 {
    
    with link = "line.de.1271" {
        with layer = -4 track(:first :double :rail,
                wanham[:har.f + 100m, :har.f] << 4dt
            ..  hamneu[:har - 1200m, :har - 200m]
        );
    }


    with link = "point.de.Hamburg-Harburg-S-Bahn" {
        # Gl. 1 (Str. 1271 L)
        with layer = -4 track(:first:station :rail,
                hamneu[:har - 200m, :har - 199m] << 0.5dt
            ..  hamneu[:har - 100m, :har + 100m] << 1.0dt
            ..  hamneu[:har + 199m, :har + 200m] << 0.5dt
        );

        # Gl. 2 (Str. 1271 R)
        with layer = -4 track(:first:station :rail,
                hamneu[:har - 200m, :har - 199m] >> 0.5dt
            ..  hamneu[:har - 100m, :har + 100m] >> 1.0dt
            ..  hamneu[:har + 199m, :har + 200m] >> 0.5dt
        );

        # Bahnsteig
        with layer = -4 platform(:open,
                hamneu[:har - 100m, :har + 100m] >> 0.6dt
            --  hamneu[:har + 100m, :har - 100m] >> 0.6dt
        );

        # Station
        with layer = -4 marker(:de.hp, hamneu[:har] >> 1.0dt);
        station(:left, hamneu[:har + 200m] << 0.5dt << 1.0sw,
            hbox(:center:base,
                span(:light, "H.-"), "Harburg ",
                span(:light, "(S-Bahn)")
            ),
            "1271: 12,33"
        );
    }


    with link = "line.de.1271" {
        with layer = -4 track(:first :double :rail,
                hamneu[:har + 200m, :rat - 450m]
        );
    }

}

