# DE 1120.  Lübeck Hbf - Hamburg Hbf
#
let lubham = path("path.de.1120");

with detail = 5 {
    with link = "point.de.Hamburg-Wandsbek-Wf" {
        let w104 = lubham[:waf - 205m] << 1.10dt
                -- lubham[:waf - 200m] << 1.20dt;
        let w222 = lubham[:waf + 95m] << 3.90dt
                -- lubham[:waf + 100m] << 4.00dt;
        let w223 = lubham[:waf + 155m] << 5.10dt
                -- lubham[:waf + 160m] << 5.20dt;
        let w225 = lubham[:waf + 215m] << 6.50dt
                -- lubham[:waf + 220m] << 6.65dt;
        let w232 = lubham[:waf + 670m] << 2.20dt
                -- lubham[:waf + 675m] << 2.10dt;
        let w242 = lubham[:waf + 595m] << 5.00dt
                -- lubham[:waf + 600m] << 4.90dt;
        let w243 = lubham[:waf + 599m, :waf + 600m] << 3.5dt;
        let w244 = lubham[:waf + 670m] << 3.20dt
                -- lubham[:waf + 675m] << 3.10dt;

        # Gl. 1
        track(:first:station :cat,
                lubham[:wan.a, :wan - 90m] >> 0.5dt
        );

        # Gl. 2
        track(:first:station :cat,
                lubham[:wan.a, :wan - 220m] << 0.5dt
            ..  lubham[:wan - 91m, :wan - 90m] << 1.5dt
        );

        # Gl. 3
        track(:first:station :cat,
                lubham[:waf - 271m, :waf - 270m] << 0.5dt
            ..  w104
            ..  lubham[:waf - 150m, :wan - 220m] << 1.5dt
            ..  lubham[:wan - 91m, :wan - 90m] << 2.5dt
        );

        # Gl. 4
        track(:station :cat,
                w104
            ..  lubham[:waf - 110m, :waf + 630m] << 2.5dt
            ..  w232
            ..  lubham[:waf + 730m, :waf + 731m] << 1.5dt
        );

        # Gl. 5
        track(:station,
                lubham[:waf - 180m, :waf + 600m] << 3.5dt
            ..  w232
        );

        # Gl. 6
        track(:station,
                lubham[:waf + 59m, :waf + 60m] << 3.5dt
            ..  w222
            ..  lubham[:waf + 150m, :waf + 520m] << 4.5dt
            ..  w242
        );

        # Gl. 8
        track(:station,
                lubham[:waf + 249m, :waf + 250m] << 4.5dt
            ..  lubham[:waf + 330m, :waf + 550m] << 5.5dt
            ..  w242
            ..  w244
            ..  lubham[:waf + 750m, :waf + 780m] << 2.5dt
        );

        # Gl. 9
        track(:station,
                w222
            ..  w223
            ..  lubham[:waf + 200m, :waf + 250m] << 5.5dt
            ..  lubham[:waf + 330m, :waf + 550m] << 6.5dt
            ..  lubham[:waf + 670m] << 4.20dt
            --  lubham[:waf + 675m] << 4.10dt
        );

        # Gl. 11
        track(:station,
                w223
            ..  w225
            ..  lubham[:waf + 280m, :waf + 360m] << 7.5dt
        );

        # Gl. 12
        track(:station,
                w225
            ..  lubham[:waf + 280m, :waf + 360m] << 8.5dt
        );

        # Gl. 14
        track(:station,
                lubham[:waf + 29m, :waf + 30m] << 3.5dt
            ..  lubham[:waf + 100m] << 4.8dt
            --  lubham[:waf + 220m] << 8.3dt
        );

        with layer = 10 track(:red, w225);

        # W101 - W102
        track(:station :cat,
                lubham[:waf - 511m, :waf - 510m] >> 0.5dt
            ..  lubham[:waf - 430m, :waf - 429m] << 0.5dt
        );

        # W113 - W114
        track(:station :cat,
                lubham[:waf + 669m, :waf + 670m] >> 0.5dt
            ..  lubham[:waf + 730m, :waf + 731m] << 0.5dt
        );

        # W115 - W234
        track(:station :cat,
                lubham[:waf + 749m, :waf + 750m] << 0.5dt
            ..  lubham[:waf + 800m, :waf + 801m] << 1.5dt
        );

        # W117 - W118
        track(:station :cat,
                lubham[:wan - 221m, :wan - 220m] << 0.5dt
            ..  lubham[:wan - 140m, :wan - 139m] >> 0.5dt
        );

        # W235 - W116
        track(:station :cat,
                lubham[:wan - 301m, :wan - 300m] << 1.5dt
            ..  lubham[:wan - 250m, :wan - 249m] << 0.5dt
        );

        # W243 - W244
        track(:station, w243 .. w244);

        marker(:de.bft :left, lubham[:waf] << 3.5dt);
        station(:right, lubham[:waf + 1sw] << 3.5dt << 2.0sw,
            "Hamburg-Wandsbek Wf",
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1120: "),
                    span(:open, "1242: ")
                ),
                vbox(:right:top,
                    span(:open, "??"),
                    span(:open, "??")
                )
            )
        );
    }


    with link = "point.de.Hamburg-Wandsbek" {
        # Gl. 1
        track(:first:station :cat,
                lubham[:wan - 90m, :arot] >> 0.5dt
        );

        # Gl. 2
        track(:first:station :cat,
                lubham[:wan - 90m, :wan + 100m] << 1.5dt
            ..  lubham[:wan + 440m, :arot] << 0.5dt
        );

        # Gl. 3
        track(:first:station :cat,
                lubham[:wan - 90m, :wan + 100m] << 2.5dt
            ..  lubham[:wan + 440m, :arot] << 1.5dt
        );

        # Bahnsteig 1/2
        platform(:open,
                lubham[:wan - 90m, :wan + 100m] >> 0.1dt
            --  lubham[:wan + 100m, :wan - 90m] >> 1.1dt
        );

        marker(:de.bf :right, lubham[:wan] >> 0.5dt);
        station(:top, lubham[:wan + 0.2sw] >> 0.5dt >> 1.6sh,
            span(:bold, "Hamburg-Wandsbek"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1120: "),
                    span(:open, "1242: ")
                ),
                vbox(:right:top,
                    span(:open, "58,20"),
                    span(:open, "58,20")
                )
            )
        );
    }


    with link = "line.de.1120" {
        with layer = 2 track(:first :double :cat, lubham[:arot, :has - 200m]);
        with layer = 1 casing(:first :double :cat,
                lubham[:has.x - 1sw, :has.x + 1sw]
        );
    }


    with link = "point.de.Hamburg-Hasselbrook" {
        track(:first:station :cat, lubham[:has - 200m, :has + 300m] >> 0.5dt);
        track(:first:station :cat,
                lubham[:has - 200m, :has - 150m] << 0.5dt
            ..  lubham[:has, :has + 200m] << 1.5dt
            ..  lubham[:has + 290m, :has + 300m] << 0.5dt
        );
        platform(:open,
                lubham[:has, :has + 200m] >> 0.1dt
            --  lubham[:has + 200m, :has] >> 1.1dt
        );
        marker(:de.hp :left, lubham[:has + 0.5sw] << 1.5dt);
        station(:bottom, lubham[:has + 0.3sw] << 1.5dt << 1.6sw,
            hbox(:center:base, span(:light, "H. "), "Hasselbrook "),
            "59,69"
        );
            
    }


    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:has + 300m, :btu - 180m]);
    }


    with link = "point.de.Hamburg-Berliner-Tor-Üst" {
        track(:first:station :double :cat, lubham[:btu - 180m, :btu + 180m]);

        # W901 - W902
        track(:station :cat,
                lubham[:btu - 80m] >> 0.5dt
            --  lubham[:btu - 10m] << 0.5dt
        );

        # W903 - W904
        track(:station :cat,
                lubham[:btu + 10m] << 0.5dt
            --  lubham[:btu + 80m] >> 0.5dt
        );

        marker(:de.uest :left, lubham[:btu] << 0.5dt);
        station(:right, lubham[:btu + 2sw] << 0.5dt << 1.4sw,
            "H. Berliner Tor (Üst)", "61,67"
        );
    }


    with link = "line.de.1120" {
        track(:first :double :cat, lubham[:btu + 180m, :ham.a]);
    }


    # point.de.Hamburg-Hbf: de.6100
}

