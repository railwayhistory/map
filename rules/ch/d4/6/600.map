# CH 600.  Immensee - Chiasso
#
let ic = path("d4.ch.600");

with detail = [4, 5] {


    with link = "point.ch.Bodio" {
        # Bin. 2
        track(:first:station :cat:ac15 :pax, ic[:bod.a, :bod.f] << 0.5dt);
            track(:station :cat:ac15 :pax,
                    ic[:bod + 550m] << 0.5dt
                --  ic[:bod + 630m] >> 0.5dt
            );

        # Bin. 3
        track(:first:station :cat:ac15 :pax, ic[:bod.a, :bod.f] >> 0.5dt);
            track(:station :cat:ac15,
                    ic[:bod - 460m] >> 0.5dt
                --  ic[:bod - 350m] >> 2.5dt
            );
            track(:station :cat:ac15 :pax,
                    ic[:bod - 415m] >> 0.5dt
                --  ic[:bod - 350m] << 0.5dt
            );
            track(:station :cat:ac15,
                    ic[:bod + 650m] >> 0.5dt
                --  ic[:bod + 730m] << 0.5dt
            );

        # Bin. 4
        track(:station :cat:ac15, ic[:bod.a, :bod + 180m] >> 1.5dt);
            track(:station :cat:ac15,
                    ic[:bod - 15m] >> 1.5dt
                --  ic[:bod + 120m] >> 3.5dt
            );

        # Bin. 5
        track(:station :cat:ac15,
                ic[:bod - 466m - 0.7dl, :bod - 465m - 0.7dl] >> 1.5dt
            --  ic[:bod - 400m - 0.7dl, :bod + 240m] >> 2.5dt
        );
            track(:station :cat:ac15,
                    ic[:bod + 50m] >> 2.5dt
                --  ic[:bod + 160m] >> 0.5dt
            );

        # Bin. 6
        track(:station :cat:ac15, ic[:bod - 100m, :bod + 240m] >> 3.5dt);

        # Bin. 15
        track(:station :cat:ac15,
                ic[:bod - 580m, :bod - 430m] >> 3.5dt
            --  ic[:bod - 370m, :bod - 369m] >> 2.5dt
        );

        # Bin. 56
        track(:station :cat:ac15, ic[:bod - 150m, :bod + 250m] >> 3.5dt);

        platform(:cat:ac15 :pax,
                ic[:bod - 65m, :bod + 80m] << 0.5dt
            --  ic[:bod + 80m, :bod - 65m] >> 1.2dt
        );

        marker(:left :de.bf :cat:ac15 :pax, ic[:bod] << 1.0dt);
        station(:right :cat:ac15 :pax, ic[:bod + 0.4sw] << 1.0dt << 1.2sw,
            "Bodio TI", "125,50"
        );
    }
}


with detail = [4, 5] {
    let rg = path("d4.ch.595");


    with link = "line.ch.600" {
        track(:first :double :cat:ac15 :pax,
                ic[:bod.f, :bod.f + 300m]
            ..  rg[:pol - 650m, :pol - 330m] << 3dt
        );
    }


    with link = "point.ch.Pollegio-Nord" {
        track(:first:station :double :cat:ac15 :pax,
                rg[:pol - 330m, :pol - 329m] << 3dt
            ..  rg[:pol - 80m, :pol + 350m] << 2dt
        );
            track(:station :cat:ac15,
                    rg[:pol + 20m] << 1.5dt
                --  rg[:pol + 165m] << 2.5dt
            );

        marker(:left :de.abzw :cat:ac15, rg[:pol] << 2.5dt);
        station(:right :cat:ac15, rg[:pol + 0.4sw] << 2.5dt << 1.3sh,
            "Pollegio Nord", "127,96"
        );
    }


    with link = "line.ch.600" {
        track(:first :double :cat:ac15 :pax,
                rg[:pol + 350m, :pol.yb] << 2dt
            ..  ic[:pol.yp + 1dt, :bia.a]
        );
    }


    with link = "point.ch.Biasca" {
        # Bin 1
        track(:first:station :cat:ac15 :pax, ic[:bia.a, :bia.f] >> 0.5dt);

        # Bin 2
        track(:first:station :cat:ac15 :pax, ic[:bia.a, :bia.f] << 0.5dt);
    }


    with link = "line.ch.600" {
        track(:first :double :cat:ac15 :pax, ic[:bia.f, :giu.ab]);
    }
}

