# RU KG 50.  Калининград Северный - Пионерский Курорт
#
let kalpio = path("path.ru.kg.50");
let tskdru = path("path.ru.kg.50.td");

with detail = [4, 5] {
    # point.ru.Калининград-Северный: ru.kg.21


    with link = "line.ru.kg.50" {
        let kalsow = path("path.ru.kg.21");

        track(:third :cat :tight,
                kalsow[:kse + 1sw, :apio] << 2dt
            ..  kalpio[:aa + 200m, :aa + 201m]
        );
        track(:third :cat, kalpio[:aa + 201m, :sel - 1sw]);
    }


    with link = "point.ru.kg.Сельма" {
        track(:third:station :cat, kalpio[:sel - 1sw, :sel + 1sw]);
        marker(:de.hp :right, kalpio[:sel]);
        station(:left, kalpio[:sel - 0.3sw] << 1.5dt,
            "Сельма", "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:sel + 1sw, :tsk - 1sw]);
        with layer = 1 line_badge(:open, kalpio[:sel + 1.5km], "КГ 50");
    }


    with link = "point.ru.kg.Чкаловск-Западный" {
        track(:third:station :cat, kalpio[:tsk - 1sw, :tsk + 1sw]);
        marker(:de.bf :left, kalpio[:tsk]);
        station(:bottom, kalpio[:tsk] << 1.2sw,
            vbox(:center:bottom,
                span(:former, "Tannenwalde"),
                span(:open, "Чкаловск-Западный")
            ),
            "6,9"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:tsk + 1sw, :dru - 1sw]);
    }

    with link = "line.ru.kg.50" {
        with layer = -1 track(:third:station :removed,
                tskdru[:tsk.x, :tsk.x + 2sw]
        );
        track(:third :removed, tskdru[:tsk.x + 2sw, :dim - 1sw]);
    }


    with link = "point.ru.kg.Димитрово" {
        track(:third:station :removed, tskdru[:dim - 1sw, :dim + 1sw]);
        marker(:de.hp :removed :right, tskdru[:dim]);
        station(:left :removed, tskdru[:dim - 1sw] << 0.5dt,
            vbox(:center:top,
                span(:former, "Goldschmiede"),
                span(:designation, "Димитрово")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :removed, tskdru[:dim + 1sw, :gal - 1sw]);
    }


    with link = "point.ru.kg.Gallhöfen" {
        track(:third:station :removed, tskdru[:gal - 1sw, :gal + 1sw]);
        marker(:de.hp :removed :left, tskdru[:gal]);
        station(:left :removed, tskdru[:gal - 1sw] << 2.0sw,
            "Gallhöfen", "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :removed, tskdru[:gal + 1sw, :dru.x - 2sw]);
        with layer = -1 track(:third:station :removed,
            tskdru[:dru.x - 2sw, :dru.x]
        );
    }


    with link = "point.ru.kg.Дружное-Западное" {
        track(:third:station :cat, kalpio[:dru - 1sw, :dru + 1sw]);
        marker(:de.bf :right, kalpio[:dru]);
        station(:right, kalpio[:dru - 0.5sw] >> 1.3sw,
            vbox(:center:bottom,
                span(:former, "Mednicken"),
                span(:open, "Дружное-Западное")
            ),
            "13,5"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:dru + 1sw, :paw - 1sw]);
        with layer = 1 line_badge(:open, kalpio[:dru + 1.0km], "КГ 50");
    }


    with link = "point.ru.kg.Павлинино" {
        track(:third:station :cat, kalpio[:paw - 1sw, :paw + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalpio[:paw]);
        station(:right :removed, kalpio[:paw - 0.5sw] >> 1.0dt,
            vbox(:left:bottom,
                span(:former, "Dommelkeim"),
                span(:designation, "Павлинино")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:paw + 1sw, :kol - 1sw]);
    }


    with link = "point.ru.kg.Колосовка-Западная" {
        track(:third:station :cat, kalpio[:kol - 1sw, :kol + 1sw]);
        marker(:de.bf :left, kalpio[:kol]);
        station(:left, kalpio[:kol - 0.5sw] << 2.0sw,
            vbox(:center:bottom,
                span(:former, "Willgaiten"),
                span(:open, "Колосовка-Западная")
            ),
            "17,7"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:kol + 1sw, :op20 - 1sw]);
    }


    with link = "point.ru.kg.50.20-км" {
        track(:third:station :cat, kalpio[:op20 - 1sw, :op20 + 1sw]);
        marker(:de.hp :left, kalpio[:op20]);
        label(kalpio[:op20 + 0.1sw] << 1.8sw,
            vbox(:right:middle,
                span(:medium :former, "Drugehnen-Galtgarben "),
                hbox(:right:top,
                    vbox(:center:top,
                        span(:medium :open, "20 км"),
                        span(:xsmall :open, "19,9")
                    )
                )
            )
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:op20 + 1sw, :per - 1.5sw]);
        with layer = 1 line_badge(:open, kalpio[:op20 + 1.5km], "КГ 50");
    }


    with link = "point.ru.kg.Переславское-Западное" {
        # KG 50
        track(:third:station :cat, kalpio[:per - 1.5sw, :apar + 1sw]);
        
        # KG 55
        track(:third:station,
                kalpio[:per - 81m, :per - 80m]
            --  kalpio[:per - 50m, :apar] << 1dt
        );

        marker(:de.bf :right, kalpio[:per]);
        station(:right, kalpio[:per - 0.55sw] >> 1.4sw,
            vbox(:center:bottom :bold,
                span(:former, "Marienhof"),
                span(:open, "Переславское-Западное")
            ),
            hbox(:center:top,
                vbox(:left:top,
                    span(:open, "КГ "),
                    span(:removed, "КГ ")
                ),
                vbox(:right:top,
                    span(:open, "50: "),
                    span(:removed, "55: ")
                ),
                vbox(:center:top,
                    span(:open, "23,0"),
                    span(:removed, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:apar + 1sw, :ter - 1sw]);
        with layer = 1 line_badge(:open, kalpio[:per + 1.5km], "КГ 50");
    }


    with link = "point.ru.kg.Терновка" {
        track(:third:station :cat, kalpio[:ter - 1sw, :ter + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalpio[:ter]);
        label(kalpio[:ter + 0.1sw] >> 1.6sw,
            vbox(:left:middle,
                span(:medium :former, "Perteltnicken"),
                hbox(:left:top,
                    vbox(:center:top,
                        span(:medium :designation :removed, "Терновка"),
                        span(:xsmall :removed, "??")
                    )
                )
            )
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:ter + 1sw, :gor - 1sw]);
    }


    with link = "point.ru.kg.Горьковское" {
        track(:third:station :cat, kalpio[:gor - 1sw, :gor + 1sw]);
        with layer = -1 marker(:de.bf :removed :left, kalpio[:gor]);
        label(kalpio[:gor + 0.2sw] << 1.6sw,
            vbox(:right:middle,
                span(:medium :former, "Watzum-Pobethen"),
                hbox(:right:top,
                    vbox(:center:top,
                        span(:medium :designation :removed, "Горьковское"),
                        span(:xsmall :removed, "??")
                    )
                )
            )
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:gor + 1sw, :rom - 1sw]);
    }


    with link = "point.ru.kg.Романово" {
        track(:third:station :cat, kalpio[:rom - 1sw, :rom + 1sw]);
        marker(:de.hp :right, kalpio[:rom]);
        station(:right, kalpio[:rom - 0.35sw] >> 1.5sw,
            "Романово", "27,3"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:rom + 1sw, :ros - 1sw]);
    }


    with link = "point.ru.kg.Рожково" {
        track(:third:station :cat, kalpio[:ros - 1sw, :ros + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalpio[:ros]);
        station(:left :removed, kalpio[:ros - 0.5sw] << 1.4sw,
            vbox(:center:bottom,
                span(:former, "Kalthof"),
                span(:designation, "Рожково")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat, kalpio[:ros + 1sw, :obu - 1sw]);
    }


    with link = "point.ru.kg.Обухово" {
        track(:third:station :cat, kalpio[:obu - 1sw, :obu + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalpio[:obu]);
        station(:left :removed, kalpio[:obu - 0.6sw] << 1.8sw,
            vbox(:center:bottom,
                span(:former, "Lixleiden"),
                span(:designation, "Обухово")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.50" {
        track(:third :cat,
                kalpio[:obu + 1sw, :pio.aaa]
            ..  kalpio[:pio.aa, :pio.aa + 1m] << 1dt
            ..  path("path.ru.kg.6.2")[:fkal - 1m, :fkal] << 1dt
        );
        with layer = 1 line_badge(:open, kalpio[:obu + 2.0km], "КГ 50");
    }
}

