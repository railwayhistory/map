with detail = 1 {
    with link = "line.fr.210" {
        let ar = path("d1.fr.2.210");

        track(:first, ar[:ama.yc, :cha]);
        track(:first :removed, ar[:cha, :sme.ya]);
    }

    with link = "line.fr.212" {
        let ha = path("d1.fr.212");

        track(:first :double :cat:ac25 :pax, ha[:hir.ya, :lia.yc]);
        track(:first :removed, ha[:lia.yc, :ama.yl]);
    }

    with link = "line.fr.213" {
        let mb = path("d1.fr.213");

        track(:first :removed, mb[:mar, :dun.ym]);
        track(:first :removed, mb[:dun, :bar.yd]);
    }

    with link = "line.fr.214" {
        track(:first :removed, path("d1.fr.214")[:car.ym, :mef]);
    }

    with link = "line.fr.215" {
        track(:first :removed, path("d1.fr.215")[:vri.yv, :vab]);
    }

    with link = "line.fr.216" {
        let fc = path("d1.fr.2.216");

        track(:first :double :cat:ac25 :v300 :pax, fc[:lie, :lie.ya]);
        slabel(:left :cat:ac25 :pax, fc[:lie] + (-12km, 1km),
            hbox(:right:top :bold, "Lille")
        );
    }

    with link = "line.fr.218" {
        track(:first :double :removed, path("d1.fr.218")[:bar.ya, :aud.yb]);
    }
}

