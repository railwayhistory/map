with detail = 1 {
    with link = "line.fr.640" {
        let bs = path("d1.fr.6.640");

        track(:first :double :cat:dc15 :pax, bs[:bor, :nar]);

        with link = "point.fr.Toulouse-Matabiau" {
            slabel(:right :cat:dc15 :pax :bold, bs[:tou] + (2.0dt, 1.5dt),
                "Toulouse"
            );
        }
    }

    with link = "line.fr.641" {
        track(:first :removed, path("d1.fr.641")[:lan.yg, :gab.yl]);
    }

    with link = "line.fr.642" {
        let mm = path("d1.fr.642");

        track(:first :removed, mm[:mar.ym, :bou.ym]);
        track(:first :removed, mm[:bou.yr, :roq]);
        track(:first, mm[:roq, :mon.ym]);
    }

    with link = "line.fr.643" {
        let pr = path("d1.fr.643");

        track(:first :closed, pr[:por.yr, :con]);
        track(:first :removed, pr[:con, :eau]);
        track(:first :closed, pr[:eau, :ris.yp]);
    }

    with link = "line.fr.644" {
        let nm = path("d1.fr.644");

        track(:first :closed, nm[:ner.ym, :mez]);
        track(:first :removed, nm[:mez, :mon.yn]);
    }

    with link = "line.fr.645" {
        track(:first :removed, path("d1.fr.645")[:con.yc, :cas.yc]);
    }

    with link = "line.fr.646" {
        track(:first :removed, path("d1.fr.646")[:eau.ya, :auc.ye]);
    }

    with link = "line.fr.647" {
        let bv = path("d1.fr.647");

        track(:first, bv[:bon, :auc.ya]);
        track(:first :removed, bv[:auc, :vic.yb]);
    }

    with link = "line.fr.648" {
        let ea = path("d1.fr.648");

        track(:first :pax, ea[:emp, :scy]);
        track(:first :double :pax, ea[:scy, :toe]);
        track(:first :pax, ea[:toe, :sma]);
        track(:first :double :pax, ea[:sma, :col]);
        track(:first :pax, ea[:col, :auc]);
    }

    with link = "line.fr.649" {
        track(:first, path("d1.fr.649")[:csa.yb, :bea]);
    }
}

