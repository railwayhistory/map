# RU KG 21.  Калининград-Пассажирский - Советск
#
let kalsow = path("path.ru.kg.21");
let kalbal = path("path.ru.kg.3");

with detail = [4, 5] {
    with link = "line.ru.kg.21" {
        let kalmam = path("path.ru.kg.1");

        track(:second :cat :tight,
                kalmam[:abal, :abal + 1m] >> 3.5dt
            ..  kalbal[:aa, :hol - 1sw] >> 1.5dt
        );
    }


    with link = "point.ru.kg.Königsberg-Holländerbaum" {
        track(:second:station :cat, kalbal[:hol - 1sw, :hol + 1sw] >> 1.5dt);
        with layer = -1 marker(:de.hp :removed :right, kalbal[:hol] >> 1.5dt);
        station(:right :removed, kalbal[:hol - 0.5sw] >> 1.5dt >> 1.4sw,
            "Königsberg-Holländerbaum",
            "КГ 21: ??"
        );
    }

    
    with link = "line.ru.kg.21" {
        track(:second :cat,
                kalbal[:hol + 1sw, :hol + 1.1sw] >> 1.5dt
            ..  kalsow[:fbal, :kse - 1sw]
        );
    }


    with link = "point.ru.Калининград-Северный" {
        track(:second:station :cat, kalsow[:kse - 1sw, :kse + 1sw]);
        track(:second:station :cat, kalsow[:kse - 0.5sw, :kse + 1sw] << 1.0dt);
        track(:second:station :cat, kalsow[:kse - 0.5sw, :kse + 1sw] << 2.0dt);

        marker(:de.hp :right, kalsow[:kse]);
        station(:right, kalsow[:kse - 0.3sw] >> 1.8sw,
            vbox(:center:bottom :bold,
                hbox(:center:base :gone,
                    span(:bold, "Königsberg "),
                    span(:regular, "(Pr) "),
                    span(:bold, "Nord")
                ),
                span(:open, "Калининград-Северный")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ "),
                    span(:open, "КГ "),
                    span(:open, "КГ ")
                ),
                vbox(:right:top,
                    span(:open, "6: "),
                    span(:open, "21: "),
                    span(:open, "50: ")
                ),
                vbox(:center:top,
                    span(:open, "??"),
                    span(:open, "4,0"),
                    span(:open, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.21" {
        track(:second :tight, kalsow[:kse + 1sw, :mar - 1sw]);
    }


    with link = "point.ru.Königsberg-Maraunenhof" {
        track(:second:station, kalsow[:mar - 1sw, :mar + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalsow[:mar]);
        station(:right :removed, kalsow[:mar - 1sw] >> 2.0sw,
            "Königsberg-Maraunenhof",
            "КГ 21: ??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second :tight, kalsow[:mar + 1sw, :kut - 1sw]);
    }


    with link = "point.ru.Кутузово-Новое" {
        track(:second:station, kalsow[:kut - 1sw, :kut + 1sw]);
        track(:first:station :cat, kalsow[:kut - 1sw, :kut + 1sw] << 1.0dt);

        marker(:de.bf :right, kalsow[:kut]);
        station(:right, kalsow[:kut - 0.3sw] >> 1.8sw,
            vbox(:left:bottom :bold,
                span(:gone, " Königsberg-Rothenstein"),
                span(:open, "Калининград-Северный")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ "),
                    span(:open, "КГ ")
                ),
                vbox(:right:top,
                    span(:open, "6: "),
                    span(:open, "21: ")
                ),
                vbox(:center:top,
                    span(:open, "0,0"),
                    span(:open, "9,4")
                )
            )
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:kut + 1sw, :khe - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:khe - 1.0km], "КГ 21");
    }


    with link = "point.ru.kg.Kleinheide" {
        track(:second:station, kalsow[:khe - 1sw, :khe + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalsow[:khe]);
        station(:right :removed, kalsow[:khe - 0.3sw] >> 1.8sw,
            "Kleinheide", "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:khe + 1sw, :guz - 1sw]);
    }


    with link = "point.ru.kg.Гурьевск-Центральный" {
        track(:second:station, kalsow[:guz - 1sw, :guz + 1sw]);
        marker(:de.hp :right, kalsow[:guz]);
        station(:right, kalsow[:guz - 0.3sw] >> 1.8sw,
            "Гурьевск-Центральный", "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:guz + 1sw, :gur - 1sw]);
    }


    with link = "point.ru.kg.Гурьевск-Новый" {
        track(:second:station, kalsow[:gur - 1sw, :gur + 1sw]);
        marker(:de.bf :right, kalsow[:gur]);
        station(:bottom, kalsow[:gur] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Trausitten"),
                span(:open, "Гурьевск-Новый")
            ),
            "17,9"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:gur + 1sw, :kon - 1sw]);
    }


    with link = "point.ru.kg.Константиновка" {
        track(:second:station, kalsow[:kon - 1sw, :kon + 1sw]);
        with layer = -1 marker(:de.bf :removed :right, kalsow[:kon]);
        station(:bottom :removed, kalsow[:kon] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Conradswalde"),
                span(:removed, "Константиновка")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:kon + 1sw, :ba1 - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:kon + 3.0km], "КГ 21");
    }


    with link = "point.ru.kg.Баевка-1" {
        track(:second:station, kalsow[:ba1 - 1sw, :ba1 + 1sw]);
        marker(:de.hp :right, kalsow[:ba1]);
        with layer = -1 marker(:de.bf :gone :right, kalsow[:ba1]);
        station(:bottom, kalsow[:ba1] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Kuggen"),
                span(:open, "Баевка 1")
            ),
            "26,5"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:ba1 + 1sw, :ba2 - 1sw]);
    }


    with link = "point.ru.kg.Баевка-2" {
        track(:second:station, kalsow[:ba2 - 1sw, :ba2 + 1sw]);
        marker(:de.hp :left, kalsow[:ba2]);
        station(:top, kalsow[:ba2] << 1.4sw,
            "Баевка 2", "27,5"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:ba2 + 1sw, :dob - 1sw]);
    }


    with link = "point.ru.kg.Добрино" {
        track(:second:station, kalsow[:dob - 1sw, :dob + 1sw]);
        marker(:de.hp :right, kalsow[:dob]);
        with layer = -1 marker(:de.bf :gone :right, kalsow[:dob]);
        station(:bottom, kalsow[:dob] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Nautzken"),
                span(:open, "Добрино")
            ),
            "33,9"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:dob + 1sw, :sla - 1sw]);
    }


    with link = "point.ru.kg.Славянское" {
        track(:second:station, kalsow[:sla - 1sw, :sla + 1sw]);
        marker(:de.hp :right, kalsow[:sla]);
        with layer = -1 marker(:de.bf :gone :right, kalsow[:sla]);
        station(:bottom, kalsow[:sla] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Pronitten"),
                span(:open, "Славянское")
            ),
            "39,0"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:sla + 1sw, :kth - 1sw]);
    }


    with link = "point.ru.kg.Kuth" {
        track(:second:station, kalsow[:kth - 1sw, :kth + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalsow[:kth]);
        station(:bottom :removed, kalsow[:kth] >> 1.2sw,
            "Kuth", "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:kth + 1sw, :pol - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:kth + 2.0km], "КГ 21");
    }


    with link = "point.ru.kg.Полесск" {
        track(:second:station, kalsow[:pol - 1sw, :pol + 1sw]);
        marker(:de.bf :left, kalsow[:pol]);
        station(:top, kalsow[:pol] << 1.3sw,
            vbox(:center:bottom :bold,
                span(:gone, "Labiau"),
                span(:open, "Полесск")
            ),
            "КГ 21: 49,7"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:pol + 1sw, :lug - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:pol + 2.2km], "КГ 21");
    }


    with link = "point.ru.kg.Луговое" {
        track(:second:station, kalsow[:lug - 1sw, :lug + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalsow[:lug]);
        station(:top :removed, kalsow[:lug] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Stellienen"),
                span(:gone, "Deimetal"),
                span(:removed, "Луговое")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:lug + 1sw, :sol - 1sw]);
    }


    with link = "point.ru.kg.Шолохово" {
        track(:second:station, kalsow[:sol - 1sw, :sol + 1sw]);
        marker(:de.hp :left, kalsow[:sol]);
        with layer = -1 marker(:de.bf :gone :left, kalsow[:sol]);
        station(:top, kalsow[:sol] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Schelecken"),
                span(:gone, "Schlicken"),
                span(:open, "Шолохово")
            ),
            "56,5"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:sol + 1sw, :sar - 1sw]);
    }


    with link = "point.ru.kg.Саранское" {
        track(:second:station, kalsow[:sar - 1sw, :sar + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalsow[:sar]);
        station(:bottom :removed, kalsow[:sar] >> 1.4sw,
            vbox(:center:bottom,
                span(:gone, "Laukischken"),
                hbox(:center:base :gone,
                    span(:regular, "Mauern "),
                    span(:light, "(Ostpr)")
                ),
                span(:removed, "Саранское")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:sar + 1sw, :pet - 1sw]);
    }


    with link = "point.ru.kg.Петино" {
        track(:second:station, kalsow[:pet - 1sw, :pet + 1sw]);
        marker(:de.hp :right, kalsow[:pet]);
        with layer = -1 marker(:de.bf :gone :right, kalsow[:pet]);
        station(:bottom, kalsow[:pet] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Jorksdorf"),
                span(:open, "Петино")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:pet + 1sw, :bog - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:pet + 1.8km], "КГ 21");
    }


    with link = "point.ru.kg.Богатово" {
        track(:second:station, kalsow[:bog - 1sw, :bog + 1sw]);
        marker(:de.hp :right, kalsow[:bog]);
        with layer = -1 marker(:de.bf :gone :right, kalsow[:bog]);
        station(:bottom, kalsow[:bog] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Szargillen"),
                hbox(:center:base :gone,
                    span(:regular, "Eichenrode "),
                    span(:light, "(Ostpr)")
                ),
                span(:open, "Богатово")
            ),
            "65,7"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:bog + 1sw, :pod - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:pod - 1.5km], "КГ 21");
    }


    with link = "point.ru.kg.Подлипное" {
        track(:second:station, kalsow[:pod - 1sw, :pod + 1sw]);
        with layer = -1 marker(:de.bf :removed :left, kalsow[:pod]);
        station(:top :removed, kalsow[:pod] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Alt Sternberg"),
                span(:removed, "Подлипное")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:pod + 1sw, :sal.op - 1sw]);
    }


    with link = "point.ru.kg.Залесье-Новое" {
        track(:second:station, kalsow[:sal.op - 1sw, :sal + 1sw]);
        marker(:de.hp :left, kalsow[:sal.op]);
        with layer = -1 marker(:de.bf :removed :right, kalsow[:sal]);
        station(:top, kalsow[:sal.op] << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Mehlauken"),
                hbox(:center:base :gone,
                    span(:regular, "Liebenfelde "),
                    span(:light, "(Ostpr)")
                ),
                span(:open, "Залесье-Новое")
            ),
            "КГ 21: 76,7"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:sal + 1sw, :lus - 1sw]);
    }


    with link = "point.ru.kg.Лужское" {
        track(:second:station, kalsow[:lus - 1sw, :lus + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalsow[:lus]);
        station(:top :removed, kalsow[:lus] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Uszballen"),
                span(:gone, "Mühlenau"),
                span(:removed, "Лужское")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:lus + 1sw, :bol - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:lus + 1.5km], "КГ 21");
    }


    with link = "point.ru.kg.Большаково-Новое" {
        track(:second:station, kalsow[:bol - 1sw, :bol + 1sw]);
        marker(:de.bf :right, kalsow[:bol]);
        station(:left, kalsow[:bol - 0.3sw] << 1.5dt,
            vbox(:center:bottom :bold,
                span(:gone, "Skaisgirren"),
                span(:gone, "Kreuzingem"),
                span(:open, "Большаково-Новое")
            ),
            "КГ 21: 86,1"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:bol + 1sw, :wil - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:bol + 3.0km], "КГ 21");
    }


    with link = "point.ru.kg.Wilhelmsbruch" {
        track(:second:station, kalsow[:wil - 1sw, :wil + 1sw]);
        with layer = -1 marker(:de.bf :removed :right, kalsow[:wil]);
        station(:right :removed, kalsow[:wil - 0.35sw] >> 1.5sw,
            "Wilhelmsbruch", "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:wil + 1sw, :slw - 1sw]);
    }


    with link = "point.ru.kg.Славск-Новый" {
        track(:second:station, kalsow[:slw - 1sw, :slw + 1sw]);
        marker(:de.bf :right, kalsow[:slw]);
        station(:right, kalsow[:slw - 0.5sw] >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Heinrichswalde"),
                span(:open, "Славск-Новый")
            ),
            "104,8"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:slw + 1sw, :sts - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:slw + 2.0km], "КГ 21");
    }


    with link = "point.ru.kg.Щегловка-Новая" {
        track(:second:station, kalsow[:sts - 1sw, :sts + 1sw]);
        marker(:de.hp :left, kalsow[:sts]);
        with layer = -1 marker(:de.bf :gone :left, kalsow[:sts]);
        station(:top, kalsow[:sts] << 1.8sw,
            vbox(:center:bottom,
                span(:gone :bold, "Groß Brittanien"),
                hbox(:center:base :gone,
                    span(:bold, "Brittanien "),
                    span(:regular, "(Ostpr)")
                ),
                span(:open :bold, "Щегловка-Новая")
            ),
            "КГ 21: 109,1"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:sts + 1sw, :pse - 1sw]);
        with layer = 1 line_badge(:open, kalsow[:sts + 2.5km], "КГ 21");
    }


    with link = "point.ru.kg.Ржевское" {
        track(:second:station, kalsow[:pse - 1sw, :pse + 1sw]);
        marker(:de.hp :left, kalsow[:pse]);
        with layer = -1 marker(:de.bf :gone :left, kalsow[:pse]);
        station(:top, kalsow[:pse] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Linkuhnen"),
                span(:open, "Ржевское")
            ),
            "114,0"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:pse + 1sw, :okt - 1sw]);
    }


    with link = "point.ru.kg.Октябрьское" {
        track(:second:station, kalsow[:okt - 1sw, :okt + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalsow[:okt]);
        station(:top :removed, kalsow[:okt] << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Alt Weynothen"),
                span(:gone, "Weinoten"),
                span(:removed, "Октябрьское")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.21" {
        track(:second, kalsow[:okt + 1sw, :op119 - 1sw]);
    }


    with link = "point.ru.kg.21.119-км" {
        track(:second:station, kalsow[:op119 - 1sw, :op119 + 1sw]);
        marker(:de.hp :right, kalsow[:op119]);
        station(:top, kalsow[:op119] << 2.0dt,
            vbox(:center:bottom,
                span(:gone, "Tilsit Stadtheide"),
                span(:open, "119 км")
            ),
            "118,7"
        );
    }


    with link = "line.ru.kg.21" {
        let tjasow = path("path.ru.kg.7");
        track(:second, kalsow[:op119 + 1sw, :ff]);
        track(:second:station,
                kalsow[:ff, :ff + 1m]
            ..  tjasow[:fkal, :sow - 1sw] << 1.5dt
        );

        with layer = 1 line_badge(:open, kalsow[:op119 + 1.2km], "КГ 21");
    }
}

