# RU KG 2.  Калининград-Пассажирский - Чернышевское
#
let kalter = path("path.ru.kg.2");

with detail = [4, 5] {
    with link = "line.ru.kg.2" {
        track(:first, kalter[:kal + 1sw, :aiw - 1sw] << 0.5dt);
        track(:first :removed, kalter[:kal + 1sw, :wos] >> 0.5dt);
        track(:first, kalter[:wos, :aiw - 1sw] >> 0.5dt);
        with layer = 1 line_badge(:open, kalter[:aiw - 1.0km], "КГ 2");
    }


    with link = "point.ru.Айвазовский" {
        track(:first:station :double, kalter[:aiw - 1sw, :aiw + 1sw]);
        marker(:de.hp :right, kalter[:aiw] >> 0.5dt);
        station(:right, kalter[:aiw - 0.3sw] << 1.5dt,
            vbox(:left:bottom,
                span(:gone, "Seligenfeld"),
                span(:open, "Айвазовский")
            ),
            "1280,0"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:aiw + 1sw, :lug - 1sw]);
    }


    with link = "point.ru.Луговое-Новое" {
        track(:first:station :double, kalter[:lug - 1sw, :lug + 1sw]);
        marker(:de.bf :right, kalter[:lug] >> 0.5dt);
        station(:right, kalter[:lug - 0.3sw] << 1.5dt,
            vbox(:left:bottom,
                span(:gone, "Gutenfeld"),
                span(:open, "Луговое Новое")
            ),
            "1275,5"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:lug + 1sw, :op1271 - 1sw]);
    }


    with link = "point.ru.kg.2.1271-км" {
        track(:first:station :double, kalter[:op1271 - 1sw, :op1271 + 1sw]);
        marker(:de.hp :left, kalter[:op1271] << 0.5dt);
        station(:top, kalter[:op1271] << 0.5dt << 1.4sw,
            "1271 км", "1270,5"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1271 + 1sw, :kom - 1sw]);
        with layer = 1 line_badge(:open, kalter[:op1271 + 2.0km], "КГ 2");
    }


    with link = "point.ru.Комсомольск-Западный" {
        track(:first:station :double, kalter[:kom - 1sw, :kom + 1sw]);
        marker(:de.hp :left, kalter[:kom] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, kalter[:kom] << 0.5dt);
        station(:top, kalter[:kom] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Löwenhagen"),
                span(:open, "Комсомольск Западный")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ 2: "),
                    span(:removed, "КГ 22: ")
                ),
                vbox(:center:top,
                    span(:open, "1266,3"),
                    span(:removed, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:kom + 1sw, :ose - 1sw]);
        with layer = 1 line_badge(:open, kalter[:kom + 3.0km], "КГ 2");
    }


    with link = "point.ru.Озерки-Новые" {
        track(:first:station :double, kalter[:ose - 1sw, :ose + 1sw]);
        marker(:de.bf :left, kalter[:ose] << 0.5dt);
        station(:top, kalter[:ose] << 0.5dt << 1.4sw,
            vbox(:center:bottom,
                span(:gone, "Groß Lindenau"),
                span(:open, "Озерки Новые")
            ),
            "1257,0"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:ose + 1sw, :op1252 - 1sw]);
    }


    with link = "point.ru.Оп-1252-км" {
        track(:first:station :double, kalter[:op1252 - 1sw, :op1252 + 1sw]);
        marker(:de.hp :left, kalter[:op1252] << 0.5dt);
        station(:top, kalter[:op1252] << 0.5dt << 1.4sw,
            "1252 км", "??"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1252 + 1sw, :gwa - 1sw]);
        with layer = 1 line_badge(:open, kalter[:op1252 + 3.0km], "КГ 2");
    }


    with link = "point.ru.Гвардейск" {
        track(:first:station :double, kalter[:gwa - 1sw, :gwa + 1sw]);
        marker(:de.bf :left, kalter[:gwa] << 0.5dt);
        station(:top, kalter[:gwa] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Tapiau"),
                span(:open, "Гвардейск")
            ),
            "КГ 2: 1245,1"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:gwa + 1sw, :sna - 1sw]);
        with layer = 1 line_badge(:open, kalter[:gwa + 5.0km], "КГ 2");
    }


    with link = "point.ru.Знаменск" {
        track(:first:station :double, kalter[:sna - 1sw, :sna + 1sw]);
        marker(:de.bf :left, kalter[:sna] << 0.5dt);
        station(:top, kalter[:sna] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Wehlau"),
                span(:open, "Знаменск")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ 2: "),
                    span(:removed, "КГ 23: ")
                ),
                vbox(:center:top,
                    span(:open, "1235,3"),
                    span(:removed, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:sna + 1sw, :pus - 1sw]);
        with layer = 1 line_badge(:open, kalter[:sna + 5.5km], "КГ 2");
    }


    with link = "point.ru.Пушкарёво" {
        track(:first:station :double, kalter[:pus - 1sw, :pus + 1sw]);
        marker(:de.hp :left, kalter[:pus] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, kalter[:pus] << 0.5dt);
        station(:top, kalter[:pus] << 0.5dt << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Puschdorf"),
                span(:open, "Пушкарёво")
            ),
            "1224,5"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pus + 1sw, :mot - 1sw]);
    }


    with link = "point.ru.Моторное" {
        track(:first:station :double, kalter[:mot - 1sw, :mot + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, kalter[:mot] << 0.5dt);
        station(:top :removed, kalter[:mot] << 0.5dt << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Metschullen"),
                span(:gone, "Lehwald"),
                span(:removed, "Моторное")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:mot + 1sw, :mes - 1sw]);
    }


    with link = "point.ru.Междуречье" {
        track(:first:station :double, kalter[:mes - 1sw, :mes + 1sw]);
        marker(:de.bf :left, kalter[:mes] << 0.5dt);
        station(:top, kalter[:mes] << 0.5dt << 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Norkitten"),
                span(:open, "Междуречье")
            ),
            "1213,9"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:mes + 1sw, :pas - 1sw]);
    }


    with link = "point.ru.Пастухово-Новое" {
        track(:first:station :double, kalter[:pas - 1sw, :pas + 1sw]);
        marker(:de.bf :right, kalter[:pas] >> 0.5dt);
        station(:bottom, kalter[:pas] >> 0.5dt >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Waldhausen"),
                span(:open, "Пастухово-Новое")
            ),
            "1207,2"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pas + 1sw, :tja.r]);
        with layer = 1 line_badge(:open, kalter[:pas + 6.5km], "КГ 2");
    }


    with link = "point.ru.Черняховск" {
        # KG 2
        track(:first:station :double, kalter[:tja.r, :tja.f]);

        # KG 8
        track(:first:station, kalter[:tja.r, :asow - 50m] >> 1.5dt);
        track(:first:station :removed, kalter[:tja.r, :tja - 500m] >> 2.5dt);
        track(:first:station,
                kalter[:tja - 500m, :asow - 100m] >> 2.5dt
            --  kalter[:asow, :asow + 1m] >> 0.5dt
        );

        # KG 25
        with layer = -1 track(:second:station :removed,
                kalter[:tja.r, :asow - 150m] >> 3.5dt
            --  kalter[:asow - 100m, :asow - 99m] >> 2.5dt
        );

        marker(:de.bf :left, kalter[:tja] << 0.5dt);
        station(:top, kalter[:tja] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Insterburg"),
                span(:open, "Черняховск")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ "),
                    span(:open, "КГ "),
                    span(:open, "КГ "),
                    span(:removed, "КГ ")
                ),
                vbox(:right:top,
                    span(:open, "2: "),
                    span(:open, "7: "),
                    span(:open, "8: "),
                    span(:removed, "25: ")
                ),
                vbox(:right:top,
                    span(:open, "1195"),
                    span(:open, "0"),
                    span(:open, "0"),
                    span(:removed, "??")
                ),
                vbox(:left:top,
                    span(:open, ",6"),
                    span(:open, ",0"),
                    span(:open, ",0"),
                    span(:removed, "")
                )
            )
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:tja.f, :pen - 1sw]);
        with layer = 1 line_badge(:open, kalter[:tja + 4.0km], "КГ 2");
    }


    with link = "point.ru.Pendershof" {
        track(:first:station :double, kalter[:pen - 1sw, :pen + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, kalter[:pen] >> 0.5dt);
        station(:bottom :removed, kalter[:pen] >> 0.5dt >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Pendrinnen"),
                span(:removed, "Pendershof")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:pen + 1sw, :wes - 1sw]);
    }


    with link = "point.ru.Веселовка" {
        track(:first:station :double, kalter[:wes - 1sw, :wes + 1sw]);
        marker(:de.hp :right, kalter[:wes] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, kalter[:wes] >> 0.5dt);
        station(:bottom :removed, kalter[:wes] >> 0.5dt >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Judtschen"),
                span(:gone, "Kanthausen"),
                span(:removed, "Веселовка")
            ),
            "??"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:wes + 1sw, :gus - 1sw]);
        with layer = 1 line_badge(:open, kalter[:wes + 6.0km], "КГ 2");
    }


    with link = "point.ru.Гусев" {
        track(:first:station :double, kalter[:gus - 1sw, :gus + 1sw]);
        marker(:de.bf :left, kalter[:gus] << 0.5dt);
        station(:top, kalter[:gus] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Gumbinnen"),
                span(:open, "Гусев")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ 2: "),
                    span(:open, "КГ 26: "),
                    span(:removed, "КГ 27: ")
                ),
                vbox(:center:top,
                    span(:open, "1170,4"),
                    span(:open, "??"),
                    span(:removed, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:gus + 1sw, :op1163 - 1sw]);
        with layer = 1 line_badge(:open, kalter[:gus + 3.0km], "КГ 2");
    }


    with link = "point.ru.kg.2.1163-км" {
        track(:first:station :double, kalter[:op1163 - 1sw, :op1163 + 1sw]);
        marker(:de.hp :right, kalter[:op1163] >> 0.5dt);
        station(:top, kalter[:op1163] << 2.5dt,
            vbox(:center:bottom,
                span(:gone, "Groß Baitschen"),
                span(:open, "1163 км")
            ),
            "1162,6"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:op1163 + 1sw, :diw - 1sw]);
    }


    with link = "point.ru.Дивное-Новое" {
        track(:first:station :double, kalter[:diw - 1sw, :diw + 1sw]);
        marker(:de.hp :right, kalter[:diw] >> 0.5dt);
        station(:bottom, kalter[:diw] >> 0.5dt >> 1.2sw,
            vbox(:center:bottom,
                span(:gone, "Trakehnen"),
                span(:open, "Дивное-Новое")
            ),
            "1157,0"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:diw + 1sw, :nes - 1sw]);
        with layer = 1 line_badge(:open, kalter[:nes - 4.0km], "КГ 2");
    }


    with link = "point.ru.Нестеров" {
        track(:first:station :double, kalter[:nes - 1sw, :nes + 1sw]);
        marker(:de.bf :left, kalter[:nes] << 0.5dt);
        station(:top, kalter[:nes] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Stallupönen"),
                span(:gone, "Ebenrode"),
                span(:open, "Нестеров")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "КГ 2: "),
                    span(:removed, "КГ 28: "),
                    span(:closed, "КГ 29: ")
                ),
                vbox(:center:top,
                    span(:open, "1144,9"),
                    span(:removed, "??"),
                    span(:closed, "??")
                )
            )
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:nes + 1sw, :ter - 1sw]);
        with layer = 1 line_badge(:open, kalter[:nes + 5.0km], "КГ 2");
    }


    with link = "point.ru.Чернышевское" {
        track(:first:station :double, kalter[:ter - 1sw, :ter + 1sw]);
        marker(:de.bf :left, kalter[:ter] << 0.5dt);
        station(:top, kalter[:ter] << 0.5dt << 1.4sw,
            vbox(:center:bottom :bold,
                span(:gone, "Eydtkuhnen"),
                span(:gone, "Eydtkau"),
                span(:open, "Чернышевское")
            ),
            "КГ 2: ??"
        );
    }


    with link = "line.ru.kg.2" {
        track(:first :double, kalter[:ter + 1sw, :gr - 0.5sw]);
    }


    with link = "point.int.Kybartai-Чернышевское" {
        track(:first:station :double, kalter[:gr - 0.5sw, :gr + 0.5sw]);
        marker(:de.dirgr :right, kalter[:gr] >> 0.5dt);
        marker(:de.dirgr :left, kalter[:gr] << 0.5dt);
        label(kalter[:gr + 1.5dt] >> 3.5dt,
            hbox(:left:middle :xsmall,
                vbox(:right:top,
                    span(:open, " RU "),
                    hbar(0.2),
                    span(:open, " LT ")
                ),
                vbox(:right:top,
                    span(:open, "КГ 2: "),
                    hbar(0.2),
                    span(:open, "")
                ),
                vbox(:right:top,
                    span(:open, "1134,"),
                    hbar(0.2),
                    span(:open, "")
                ),
                vbox(:left:top,
                    span(:open, "8 "),
                    hbar(0.2),
                    span(:open, "")
                )
            )
        );
    }
}

