# DE 1151.  Wittenberge (ausschl.) - Jesteburg (ausschl.)
#
#           Jesteburg - Buchholz: de.1280
#
let lehcux = path("path.de.1720");
let witbuc = path("path.de.1151");

with detail = [4, 5] {
    with link = "line.de.1151" {
        track(:first :removed,
                path("path.de.6100")[:adom, :adom + 1m] << 1.5dt
            ..  witbuc[:aa, :cum - 1sw]
        );
        with layer = 1 line_badge(:removed, witbuc[:alud + 2.0km], "1151");
    }


    with link = "point.de.Cumlosen" {
        track(:first:station :removed, witbuc[:cum - 1sw, :cum + 1sw]);
        marker(:de.bf :removed :left, witbuc[:cum]);
        station(:left :removed, witbuc[:cum - 1sw] << 2.0sh,
            "Cumlosen", "134,14"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:cum + 1sw, :lan - 1sw]);
    }


    with link = "point.de.Lanz" {
        track(:first:station :removed, witbuc[:lan - 1sw, :lan + 1sw]);
        marker(:de.bf :removed :right, witbuc[:lan]);
        station(:top :removed, witbuc[:lan] >> 1.2sh,
            "Lanz", "140,34"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:lan + 1sw, :gan - 0.5sw]);
        with layer = 1 line_badge(:removed, witbuc[:lan + 2.4km], "1151");
    }


    with link = "point.de.Gandow" {
        track(:first:station :removed, witbuc[:gan - 0.5sw, :gan + 0.5sw]);
        marker(:de.bk :removed :left, witbuc[:gan]);
        station(:bottom :removed, witbuc[:gan] << 1.2sh,
            "Gandow", "145,15"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:gan + 0.5sw, :len - 1sw]);
    }


    with link = "point.de.Lenzen-Elbe" {
        track(:first:station :removed, witbuc[:len - 1sw, :len + 1sw]);
        marker(:de.bf :removed :left, witbuc[:len]);
        station(:left :removed, witbuc[:len - 0.5sw] << 2.0sh,
            hbox(:center:base,
                span(:regular, "Lenzen "),
                span(:light, "(Elbe)")
            ),
            "149,60"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:len + 1sw, :eld - 0.5sw]);
    }


    with link = "point.de.Eldenburg" {
        track(:first:station :removed, witbuc[:eld - 0.5sw, :eld + 0.5sw]);
        marker(:de.bk :removed :right, witbuc[:eld]);
        station(:top :removed, witbuc[:eld] >> 1.2sh,
            "Eldenburg", "153,93"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:len + 1sw, :eld - 0.5sw]);
    }


    with link = "point.de.Eldenburg" {
        track(:first:station :removed, witbuc[:eld - 0.5sw, :eld + 0.5sw]);
        marker(:de.bk :removed :right, witbuc[:eld]);
        station(:top :removed, witbuc[:eld] >> 1.2sh,
            "Eldenburg", "153,93"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:eld + 0.5sw, :pol - 1sw]);
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:pog + 0.5sw, :pol - 1sw]);
    }


    with link = "point.de.Polz" {
        track(:first:station :removed, witbuc[:pol - 1sw, :pol + 1sw]);
        marker(:de.bf :removed :left, witbuc[:pol]);
        station(:bottom :removed, witbuc[:pol] << 1.2sh,
            "Polz", "158,45"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:pol + 1sw, :dom - 1sw]);
        with layer = 1 line_badge(:removed, witbuc[:dom - 3.0km], "1151");
    }


    with link = "point.de.Dömitz" {
        with layer = -1 track(:first:station :removed,
                witbuc[:dom - 1sw, :dom + 1sw]
        );
        track(:second:station :closed, witbuc[:dom - 1sw, :dom - 0.5sw] >> 1dt);
        marker(:de.bf :closed :right, witbuc[:dom]);
        station(:top :closed, witbuc[:dom] >> 1.4sh,
            hbox(:center:base :bold,
                span(:gone, "Festung "),
                span(:closed, "Dömitz")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:removed, "1151: "),
                    span(:closed, "6441: ")
                ),
                vbox(:right:top,
                    span(:removed, "164,"),
                    span(:closed, "0,")
                ),
                vbox(:left:top,
                    span(:removed, "73"),
                    span(:closed, "00")
                )
            )
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:dom + 1sw, :qui - 0.5sw]);
        with layer = 1 line_badge(:removed, witbuc[:dom + 3.0km], "1151");
    }


    with link = "point.de.Quickborn-Dannenberg" {
        track(:first:station :removed, witbuc[:qui - 0.5sw, :qui + 0.5sw]);
        marker(:de.bk :removed :left, witbuc[:qui]);
        station(:bottom :removed, witbuc[:qui] << 1.2sh,
            "Quickborn", "170,39"
        );
    }


    with link = "line.de.1151" {
        track(:first :removed, witbuc[:qui + 0.5sw, :dan.a]);
        with layer = 1 line_badge(:removed, witbuc[:dan - 2.5km], "1151");
    }


    with link = "point.de.Dannenberg-Ost" {
        track(:second:station, witbuc[:dan.a, :aluc]);
        track(:second:station,
                witbuc[:dan.df - 21m, :dan.df - 20m]
            --  witbuc[:dan.df + 20m, :aluc - 0.5sw] << 1dt
        );

        marker(:de.bf :left, witbuc[:dan]);
        station(:right, witbuc[:dan + 2sw] << 2.2sh,
            span(:bold, "Dannenberg Ost"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1151: "),
                    span(:open, "6905: ")
                ),
                vbox(:right:top,
                    span(:open, "175,"),
                    span(:open, "36,")
                ),
                vbox(:left:top,
                    span(:open, "62"),
                    span(:open, "24")
                )
            )
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:aluc, :pis - 1sw]);
        with layer = 1 line_badge(:open, witbuc[:pis - 0.8km], "1151");
    }


    with link = "point.de.Pisselberg" {
        track(:second:station, witbuc[:pis - 1sw, :pis + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, witbuc[:pis]);
        station(:left :removed, witbuc[:pis - 0.5sw] << 2.0sh,
            "Pisselberg", "178,70"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:pis + 1sw, :hit - 1sw]);
    }


    with link = "point.de.Hitzacker" {
        track(:second:station, witbuc[:hit - 1sw, :hit + 1sw]);
        marker(:de.hp :right, witbuc[:hit]);
        marker(:de.bk :right, witbuc[:hit]);
        with layer = -1 marker(:de.bf :removed, witbuc[:hit]);
        station(:right, witbuc[:hit - 0.5sw] >> 1.2sh,
            "Hitzacker", "182,51"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:hit + 1sw, :sar - 0.5sw]);
    }


    with link = "point.de.Sarchern" {
        track(:second:station, witbuc[:sar - 0.5sw, :sar + 0.5sw]);
        with layer = -1 marker(:de.bk :removed, witbuc[:sar]);
        station(:top, witbuc[:sar] >> 1.2sh,
            "Sarchern", "185,17"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:sar + 0.5sw, :har - 1sw]);
    }


    with link = "point.de.Harlingen" {
        track(:second:station, witbuc[:har - 1sw, :har + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, witbuc[:har]);
        station(:bottom :removed, witbuc[:har] << 1.2sh,
            "Harlingen", "186,41 ← 186,30"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:har + 1sw, :lei - 1sw]);
        with layer = 1 line_badge(:open, witbuc[:har + 2.5km], "1151");
    }


    with link = "point.de.Leitstade" {
        track(:second:station, witbuc[:lei - 1sw, :lei + 1sw]);
        marker(:de.hp :right, witbuc[:lei]);
        with layer = -1 marker(:de.bf :removed :right, witbuc[:lei]);
        station(:top, witbuc[:lei - 0.1sw] >> 1.6sh,
            "Leitstade", "192,05"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:lei + 1sw, :goh - 1sw]);
    }


    with link = "point.de.Göhrde" {
        track(:second:station, witbuc[:goh - 1sw, :goh + 1sw]);
        marker(:de.hp :left, witbuc[:goh]);
        with layer = -1 marker(:de.bf :removed :left, witbuc[:goh]);
        station(:bottom, witbuc[:goh] << 1.4sh,
            "Göhrde", "196,25"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:goh + 1sw, :old - 1sw]);
    }


    with link = "point.de.Oldendorf" {
        track(:second:station, witbuc[:old - 1sw, :old + 1sw]);
        with layer = -1 marker(:de.hp :removed :right, witbuc[:old]);
        station(:top :removed, witbuc[:old] >> 1.4sh,
            "Oldendorf", "199,15 ← 199,05"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:old + 1sw, :suc - 0.5sw]);
    }


    with link = "point.de.Süschendorf" {
        track(:second:station, witbuc[:suc - 0.5sw, :suc + 0.5sw]);
        with layer = -1 marker(:de.bk :removed :left, witbuc[:suc]);
        station(:bottom :removed, witbuc[:suc] << 1.2sh,
            "Süschendorf", "201,02"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:suc + 0.5sw, :nee - 1sw]);
    }


    with link = "point.de.Neetzendorf" {
        track(:second:station, witbuc[:nee - 1sw, :nee + 1sw]);
        marker(:de.hp :left, witbuc[:nee]);
        station(:bottom, witbuc[:nee] << 1.3sh,
            "Neetzendorf", "202,45"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:nee + 1sw, :dah - 1sw]);
        with layer = 1 line_badge(:open, witbuc[:nee + 1.8km], "1151");
    }


    with link = "point.de.Dahlenburg" {
        track(:second:station, witbuc[:dah - 1sw, :dah + 1sw]);
        marker(:de.bf :right, witbuc[:dah]);
        station(:left, witbuc[:dah - 1sw] << 1.5dt << 4pt,
            span(:bold, "Dahlenburg"),
            "1151: 205,96"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:dah + 1sw, :dum - 1sw]);
    }


    with link = "point.de.Dumstorf" {
        track(:second:station, witbuc[:dum - 1sw, :dum + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, witbuc[:dum]);
        station(:left :removed, witbuc[:dum - 0.3sw] << 2.0sh,
            "Dumstorf", "208,10"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:dum + 1sw, :bav - 1sw]);
        with layer = 1 line_badge(:open, witbuc[:dum + 1.8km], "1151");
    }


    with link = "point.de.Bavendorf" {
        track(:second:station, witbuc[:bav - 1sw, :bav + 1sw]);
        marker(:de.bf :left, witbuc[:bav]);
        station(:bottom, witbuc[:bav] << 1.2sh,
            "Bavendorf", "211,79"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:bav + 1sw, :roh - 1sw]);
    }


    with link = "point.de.Rohstorf" {
        track(:second:station, witbuc[:roh - 1sw, :roh + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, witbuc[:roh]);
        station(:bottom :removed, witbuc[:roh] << 1.2sh,
            "Rohstorf", "214,56"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:roh + 1sw, :vas - 1sw]);
    }


    with link = "point.de.Vastorf" {
        track(:second:station, witbuc[:vas - 1sw, :vas + 1sw]);
        marker(:de.hp :left, witbuc[:vas]);
        with layer = -1 marker(:de.bf :removed :left, witbuc[:vas]);
        station(:bottom, witbuc[:vas] << 1.2sh,
            "Vastorf", "216,91"
        );
    }


    with link = "line.de.1151" {
        track(:second, witbuc[:vas + 1sw, :wen - 1sw]);
    }


    with link = "point.de.Wendisch-Evern" {
        track(:second:station, witbuc[:wen - 1sw, :wen + 1sw]);
        marker(:de.bf :right, witbuc[:wen]);
        station(:top, witbuc[:wen] >> 1.2sh,
            "Wendisch Evern", "223,68"
        );
    }

    
    with link = "line.de.1151" {
        with layer = 2 track(:second,
                witbuc[:wen + 1sw, :lun.x]
            ..  lehcux[:lun.a + 480m, :lun.a + 481m] << 7.5dt
        );
        with layer = 1 casing(:second,
                witbuc[:lun.x - 300m, :lun.x]
            ..  lehcux[:lun.a + 480m, :lun.a + 481m] << 7.5dt
        );
    }
    
    
    with link = "point.de.Lüneburg-Westseite" {
        # Gl. 301 (Str. 1151)
        track(:second :station,
                lehcux[:lun.a + 480m, :lun.a + 481m] << 7.5dt
            ..  lehcux[:fdan, :lun + 300m] << 6.5dt
            ..  lehcux[:fluw - 0.1dl, :fluw] << 1.5dt
        );

        # Gl. 302
        track(:station,
                lehcux[:lun - 250m + 0.9dl, :lun - 250m + 1dl] << 6.5dt
            --  lehcux[:lun - 250m + 2dl, :lun + 300m - 1dl] << 7.5dt
            --  lehcux[:lun + 300m, :lun + 301m] << 6.5dt
        );

        # Gl. 307 (Str. 9111)
        track(:station,
                lehcux[:lun.a + 480m, :lun.a + 481m] << 9.5dt
            --  lehcux[:lun.a + 480m + 1dl, :lun.a + 481m + 1dl] << 8.5dt
            ..  lehcux[:fdan, :lun - 250m - 1dl] << 7.5dt
            --  lehcux[:lun - 250m, :lun - 249m] << 6.5dt
        );

        # Gl. 308
        track(:station,
                lehcux[:fdan - 0.1dl, :fdan] << 7.5dt
            --  lehcux[:fdan + 1dl, :lun - 250m - 3dl] << 8.5dt
            --  lehcux[:lun - 250m - 2dl, :lun - 250m - 1.9dl] << 7.5dt
        );

        with layer = -2 marker(:de.bftp :right, lehcux[:lun] << 6.5dt);
        station(:left, lehcux[:lun] << 9dt,
            "Lüneburg Westseite", "1151: 228,973"
        );
    }
                


    with detail = 10, link = "point.de.Lüneburg-Westseite" {
        track(:second:station,
                lehcux[:fdan, :fdan + 100m] << 4.5dt
            ..  lehcux[:lun - 100m, :abuc] << 4dt
            ..  lehcux[:fluw - 50m, :fluw] << 1.5dt
        );

    }


    with link = "point.de.Sternkamp" {
        track(:second:station :removed, witbuc[:ste - 1sw, :ste + 1sw]);
        marker(:de.hp :removed :left, witbuc[:ste]);
        station(:bottom :removed, witbuc[:ste] << 1.2sh,
            "Sternkamp", "231,47"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:ste + 1sw, :och - 1sw]);
        with layer = 1 line_badge(:removed, witbuc[:ste + 0.7km], "1151");
    }


    with link = "point.de.Ochtmissen" {
        track(:second:station :removed, witbuc[:och - 1sw, :och + 1sw]);
        marker(:de.hp :removed :left, witbuc[:och]);
        station(:bottom :removed, witbuc[:och] << 1.4sh,
            "Ochtmissen", "233,16"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:och + 1sw, :vog - 1sw]);
    }


    with link = "point.de.Vögelsen" {
        track(:second:station :removed, witbuc[:vog - 1sw, :vog + 1sw]);
        marker(:de.hp :removed :left, witbuc[:vog]);
        station(:bottom :removed, witbuc[:vog] << 1.4sh,
            "Vögelsen", "235,16"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:vog + 1sw, :mec - 1sw]);
    }


    with link = "point.de.Mechtersen" {
        track(:second:station :removed, witbuc[:mec - 1sw, :mec + 1sw]);
        marker(:de.bf :removed :left, witbuc[:mec]);
        station(:bottom :removed, witbuc[:mec] << 1.2sh,
            "Mechtersen", "237,50"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:mec + 1sw, :bah - 1sw]);
        with layer = 1 line_badge(:removed, witbuc[:mec + 4.2km], "1151");
    }


    with link = "point.de.Bahlburg" {
        track(:second:station :removed, witbuc[:bah - 1sw, :bah + 1sw]);
        marker(:de.hp :removed :left, witbuc[:bah]);
        station(:bottom :removed, witbuc[:bah] << 1.2sh,
            "Bahlburg", "246,02"
        );
    }


    with link = "line.de.1151" {
        with layer = 2 track(:second :removed, witbuc[:bah + 1sw, :wul - 1sw]);
	with layer = 1 casing(:second, witbuc[:wul.x - 100m, :wul.x + 100m]);
    }


    with link = "point.de.Wulfsen-Lüneburg" {
        track(:second:station :removed, witbuc[:wul - 1sw, :wul + 1sw]);
        with layer = -1 track(:station :removed,
                witbuc[:wul - 1m, :wul] >> 1dt
            --  witbuc[:wul + 40m, :wul + 41m]
        );

        marker(:de.bf :removed :left, witbuc[:wul]);
        station(:left :removed, witbuc[:wul] << 2.3sh,
            hbox(:center:base,
                span(:bold, "Wulfsen "),
                span(:regular, "(b Lüneburg)")
            ),
            "1151: 249,46"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:wul + 1sw, :tan - 1sw]);
    }


    with link = "point.de.Tangendorf" {
        track(:second:station :removed, witbuc[:tan - 1sw, :tan + 1sw]);
        marker(:de.hp :removed :left, witbuc[:tan]);
        with layer = -1 marker(:de.bf :gone :left, witbuc[:tan]);
        station(:bottom :removed, witbuc[:tan] << 1.2sh,
            "Tangendorf", "252,56"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:tan + 1sw, :bra - 1sw]);
    }


    with link = "point.de.Brackel-Lüneburg" {
        track(:second:station :removed, witbuc[:bra - 1sw, :bra + 1sw]);
        marker(:de.hst :removed :left, witbuc[:bra]);
        with layer = -1 marker(:de.bf :gone :left, witbuc[:bra]);
        station(:bottom :removed, witbuc[:bra] << 1.2sh,
            hbox(:center:base,
                span(:regular, "Brackel "),
                span(:light, "(b Lüneburg)")
            ),
            "255,27"
        );
    }


    with link = "line.de.1151" {
        track(:second :removed, witbuc[:bra + 1sw, :mar - 1sw]);
        with layer = 1 line_badge(:removed, witbuc[:bra + 2.0km], "1151");
    }


    with link = "point.de.Marxen" {
        track(:second:station :removed, witbuc[:mar - 1sw, :mar + 1sw]);
        marker(:de.bf :removed :left, witbuc[:mar]);
        station(:bottom :removed, witbuc[:mar] << 1.2sh,
            "Marxen", "259,26"
        );
    }


    with link = "line.de.1151" {
        with layer = -1 track(:second :removed,
                witbuc[:mar + 1sw, :fmas - 500m]
            ..  path("path.de.1280")[:alub + 1m, :alub] << 0.5dt
        );
    }
}

