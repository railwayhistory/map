# DE 1113.  Schwartau Waldhalle - Lübeck-Travemünde Strand
#
let waltra = path("path.de.1113");

with detail = [4, 5] {
    with link = "line.de.1113" {
        track(:first :double :cat, waltra[:aa, :wab - 1sw]);
    }


    with link = "point.de.Schwartau-Waldhalle" {
        with layer = 2 track(:first:station :double :cat,
            waltra[:wab - 1sw, :wab + 1sw]
        );

        with layer = 1.5 marker(:de.bbf :closed :left, waltra[:wab] << 0.5dt);
        with layer = 1.4 marker(:de.bf :gone :left, waltra[:wab] << 0.5dt);
        with layer = 1.3 marker(:statcase :left, waltra[:wab] << 0.5dt);
        with detail = 4 {
            station(:left :closed,
                path("path.de.1100")[:swr.sf - 120m] << 1.5dt,
                "Schwartau-Waldhalle", "5,61"
            );
        }
        with detail = 5 {
            station(:right :closed,
                waltra[:wab + 170m] << 4dt,
                "Schwartau-Waldhalle", "5,61"
            );
            track(:guide :closed,
                    waltra[:wab + 0.7sw] << 0.5dt << 0.8sh
                --  waltra[:wab + 170m - 0.5dt] << 5.0dt
            );
        }

    }


    with link = "line.de.1113" {
        track(:first :double :cat, waltra[:wab + 1sw, :dan - 1sw]);
        with layer = 1 line_badge(:open, waltra[:wab + 1.2km], "1113");
    }
}

with detail = 4 {
    with link = "point.de.Lübeck-Dänischburg" {
        track(:first:station :double, waltra[:dan - 1sw, :daa + 1sw]);
        track(:second:station,
                waltra[:daa - 0.5sw - 2.1dl, :daa - 0.5sw - 2dl] << 0.5dt
            --  waltra[:daa - 0.5sw, :daa + 1sw] >> 1.5dt
        );
        marker(:de.bf :open :left, waltra[:dan] << 0.5dt);
        station(:top, waltra[:dan] << 0.5dt << 1.2sh,
            span(:bold, "L.-Dänischburg"),
            "1113: 8,20 • 1115: −0,07"
        );
        marker(:de.abzw :open :right, waltra[:daa] >> 1.5dt);
        marker(:de.bftk :open :right, waltra[:daa] >> 1.5dt);
    }
}

with detail = 5 {
    with link = "point.de.Lübeck-Dänischburg" {
        track(:first:station :double, waltra[:dan - 1sw, :dan + 40m]);

        marker(:de.bf :open :left, waltra[:dan] << 0.5dt);
        station(:top, waltra[:dan] << 0.5dt << 1.4sh,
            span(:bold, "Lübeck-Dänischburg"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1113: "),
                    span(:open, "1115: ")
                ),
                vbox(:right:top,
                    span(:open, "8,"),
                    span(:open, "−0,")
                ),
                vbox(:left:top,
                    span(:open, "20"),
                    span(:open, "07")
                )
            )
        );
    }

    with link = "point.de.Lübeck-IKEA-Abzw" {
        track(:first:station :double, waltra[:dan + 40m, :daa + 1sw]);
        track(:second:station,
                waltra[:daa - 0.5sw - 2.1dl, :daa - 0.5sw - 2dl] << 0.5dt
            --  waltra[:daa - 0.5sw, :daa + 1sw] >> 1.5dt
        );

        marker(:de.abzw :open :right, waltra[:daa] >> 1.5dt);
        marker(:de.bftk :open :right, waltra[:daa] >> 1.5dt);
        station(:bottom, waltra[:daa] >> 0.5dt >> 1.4sh,
            vbox(:center:top,
                span(:regular, "L.-D."),
                span(:regular, "IKEA Abzw")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1113: "),
                    span(:open, "1115: ")
                ),
                vbox(:right:top,
                    span(:open, "??"),
                    span(:open, "??")
                )
            )
        );
    }
}

with detail = [4, 5] {
    with link = "line.de.1113" {
        track(:first :double :cat, waltra[:daa + 1sw, :kuc - 1sw]);
        with layer = 1 line_badge(:open, waltra[:dan + 1.7km], "1113");
    }


    with link = "point.de.Lübeck-Kücknitz" {
        track(:first:station :double :cat, waltra[:kuc - 1sw, :kuc + 1sw]);
        with layer = -1 marker(:de.bf :closed :left, waltra[:kuc] << 0.5dt);
        station(:top :closed, waltra[:kuc] << 0.5dt << 1.4sh,
            vbox(:center:bottom,
                span(:gone, "Waldhusen"),
                span(:closed :bold, "Lübeck-Kücknitz")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:closed, "1113: "),
                    span(:closed, "1117: ")
                ),
                vbox(:center:top,
                    span(:closed, "11,84"),
                    span(:closed, "??")
                )
            )
        );
    }


    with link = "line.de.1113" {
        track(:first :double :cat, waltra[:kuc + 1sw, :kua - 0.5sw]);
    }


    with link = "point.de.Lübeck-Kücknitz-Abzw" {
        track(:first:station :double :cat,
                waltra[:kua - 0.5sw, :kua + 0.5sw]
        );
        marker(:de.abzw :open :right, waltra[:kua] >> 0.5dt);
        station(:right, waltra[:kua - 1.5sw] >> 0.5dt >> 2.0sh,
            span(:bold, "Lübeck-Kücknitz"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:closed, "1113: "),
                    span(:closed, "1117: ")
                ),
                vbox(:center:top,
                    span(:closed, "12,55"),
                    span(:closed, "??")
                )
            )
        );
    }


    with link = "line.de.1113" {
        track(:first :cat,
                waltra[:kua + 0.5sw, :aska] >> 0.5dt
            ..  waltra[:kur - 1.1sw, :kur - 1sw]
        );
    }


    with link = "point.de.Lübeck-Kücknitz-Roter-Hahn" {
        track(:first:station :cat, waltra[:kur - 1sw, :kur + 1sw]);
        marker(:de.hp :open :right, waltra[:kur]);
        with layer = -1 label(waltra[:kur - 1sw] >> 0.7sh,
            hbox(:left:top,
                vbox(:center:top,
                    span(:medium, "L.-Kücknitz"),
                    span(:medium, "Roter Hahn"),
                    span(:xsmall, "13,90")
                )
            )
        );
    }


    with link = "line.de.1113" {
        track(:first :cat, waltra[:kur + 1sw, :pop - 1sw]);
        with layer = -1 casing(:first:cat,
            waltra[:kua.x - 200m, :kua.x + 200m]
        );
        with layer = 1 line_badge(:open, waltra[:kur + 0.8km], "1113");
    }


    with link = "point.de.Lübeck-Pöppendorf" {
        track(:first:station :cat, waltra[:pop - 1sw, :pop + 1sw]);
        with layer = -1 marker(:de.bf :removed :left, waltra[:pop]);
        station(:left :removed, waltra[:pop - 0.4sw] << 1.4sh,
            "Lübeck-Pöppendorf", "15,70"
        );
    }


    with link = "line.de.1113" {
        track(:first :cat, waltra[:pop + 1sw, :ska - 1sw]);
    }


    with link = "point.de.Lübeck-Travemünde-Skandinavienkai" {
        track(:first:station :cat, waltra[:ska - 1sw, :ska + 1sw]);
        marker(:de.hp :open :left, waltra[:ska]);
        station(:left :open, waltra[:ska - 0.6sw] << 1.6sh,
            "Lübeck-Travemünde Skandinavienkai",
            hbox(:center:base,
                span(:open, "17,90 "),
                span(:closed, "← 17,85")
            )
        );
    }


    with link = "line.de.1113" {
        track(:first :cat, waltra[:ska + 1sw, :trh.a]);
        with layer = 1 line_badge(:open, waltra[:ska + 0.7km], "1113");
    }


    with link = "point.de.Lübeck-Travemünde-Hafen" {
        track(:first:station :cat, waltra[:trh.a, :trh + 1sw]);
        with layer = -1 track(:second:station :removed,
                waltra[:trh.a + 59m, :trh.a + 60m]
            --  waltra[:trh.a + 120m, :trh + 1sw] << 1dt
        );

        marker(:de.hp :open :right, waltra[:trh]);
        with layer = -1 marker(:de.bf :gone :right, waltra[:trh]);
        label(waltra[:trh - 1sw] >> 1.2sh,
            hbox(:left:top,
                vbox(:center:top,
                    vbox(:left:top :medium:bold,
                        span(:removed, "Travemünde Stadt"),
                        span(:open, "Lübeck-Travemünde Hafen")
                    ),
                    hbox(:center:top :xsmall,
                        vbox(:right:top,
                            span(:open, "1113: "),
                            span(:removed, "1114: ")
                        ),
                        vbox(:right:top,
                            span(:open, "19,"),
                            span(:removed, "0,")
                        ),
                        vbox(:left:top,
                            span(:open, "64"),
                            span(:removed, "00")
                        )
                    )
                )
            )
        );
    }


    with link = "line.de.1113" {
        track(:first :cat, waltra[:trh + 1sw, :trs - 1sw]);
    }


    with link = "point.de.Lübeck-Travemünde-Hafen" {
        track(:first:station :cat, waltra[:trs - 1sw, :trs]);

        marker(:de.hp :open :top, waltra[:trs]);
        with layer = -1 marker(:de.bf :gone :top, waltra[:trs]);
        track(:station, waltra[:trs] << 0.5sw -- waltra[:trs] >> 0.5sw);
        station(:right :open, waltra[:trs] + (1.2sw, -0.6sw),
            span(:bold, "Lübeck-Travemünde Strand"),
            "1113: 20,62"
        );
    }
}

