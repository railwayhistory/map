# DE 1210.  Elmshorn (ausschl.) - Niebüll (einschl.)
#
let niesud = path("path.de.1201");
let niewes = path("path.de.1200");
let elmnie = path("path.de.1210");
let elmnie.hei = path("path.de.1210.hei");
let elmnie.wed = path("path.de.1210.wed");

with detail = [4, 5] {
    with link = "point.de.Elmshorn-West" {
        track(:first:station :double :cat, elmnie[:elw - 1sw, :elm.f]);
        marker(:de.bft :right, elmnie[:elw] >> 0.5dt);
        station(:left, elmnie[:elw - 0.4sw] << 0.5dt << 7pt,
            "Elmshorn West",
            hbox(:center:base,
                span(:open, "?? "),
                span(:removed, "(1,04)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:elm.f, :amo - 0.5sw]);
    }


    with link = "point.de.Altenmoor" {
        track(:first:station :double :cat, elmnie[:amo - 0.5sw, :amo + 0.5sw]);
        with layer = -1 {
            marker(:ref :removed :right, elmnie[:amo] >> 0.5dt);
            marker(:refdt :removed :right, elmnie[:amo] << 0.5dt);
            marker(:ref :removed :left, elmnie[:amo] << 0.5dt);
        }
        station(:left :removed, elmnie[:amo - 0.4sw] << 0.5dt << 8pt,
            "Altenmoor", ""
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:amo + 0.5sw, :sie - 1sw]);
        with layer = 1 line_badge(:open, elmnie[:amo + 1.0km], "1210");
    }


    with link = "point.de.Siethwende" {
        track(:first:station :double :cat, elmnie[:sie - 1sw, :sie + 1sw]);
        with layer = -1 marker(:de.bf :removed :right, elmnie[:sie] >> 0.5dt);
        station(:top :removed, elmnie[:sie] >> 0.5dt >> 1.4sh,
            "Siethwende",
            hbox(:center:base,
                span(:open, "37,71 "),
                span(:removed, "(6,94)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:sie + 1sw, :her - 1sw]);
    }


    with link = "point.de.Herzhorn" {
        track(:first:station :double :cat, elmnie[:her - 1sw, :her + 1sw]);
        marker(:de.hp :left, elmnie[:her] << 0.5dt);
        with layer = -1 marker(:de.bf :gone :left, elmnie[:her] << 0.5dt);
        station(:bottom :removed, elmnie[:her] << 0.5dt << 1.2sh,
            "Herzhorn",
            hbox(:center:base,
                span(:open, "43,49 "),
                span(:removed, "(12,68)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:her + 1sw, :glu.a]);
        with layer = 1 line_badge(:open, elmnie[:her + 2.4km], "1210");
    }


    with link = "point.de.Glückstadt" {
        # Gl. 1/2 (Strecke 1210)
        track(:first:station :double :cat, elmnie[:glu.a, :glu.f]);
            track(:station,
                    elmnie[:glu.a + 100m] >> 0.5dt
                --  elmnie[:glu.a + 160m] << 0.5dt
            );
            track(:station,
                    elmnie[:glu.f - 180m] << 0.5dt
                --  elmnie[:glu.f - 120m] >> 0.5dt
            );

        # Gl. 3?
        track(:station :removed, elmnie[:glu.aa, :glu.gn] << 1.5dt);
            with layer = -1 track(:station :removed,
                    elmnie[:glu.gs - 40m] << 0.5dt
                --  elmnie[:glu.gs] << 1.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:glu.gn - 60m] << 1.5dt
                --  elmnie[:glu.gn - 20m] << 0.5dt
            );

        # Gl. 4?
        track(:station :removed,
                elmnie[:glu.gs - 51m, :glu.gs - 50m] << 1.5dt
            --  elmnie[:glu.gs - 10m, :glu + 60m] << 2.5dt
            --  elmnie[:glu + 100m, :glu + 101m] << 1.5dt
        );

        # Hafenbahn
        track(:station :removed,
                elmnie[:ghw] << 1.5dt
            --  elmnie[:ghw - 80m] << 3.5dt
            ..  path("path.de.1213")[:aa + 299m, :aa + 300m]
        );

        # AW
        track(:station :removed,
                elmnie[:glu.f - 101m, :glu.f - 100m] >> 0.5dt
            --  elmnie[:glu.f - 60m, :glu.ff] >> 1.5dt
        );
        marker(:de.aw :removed :right, elmnie[:glu.f + 0.5sw] >> 1.5dt);

        marker(:de.bf :right, elmnie[:glu] >> 0.5dt);
        station(:right, elmnie[:glu - 0.4sw] >> 0.5dt >> 1.4sh,
            "Glückstadt",
            hbox(:center:base,
                span(:open, "47,40 "),
                span(:removed, "(16,65)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:glu.f, :ade - 1sw]);
    }


    with link = "point.de.Altendeich" {
        track(:first:station :double :cat, elmnie[:ade - 1sw, :ade + 1sw]);
        with layer = -1 marker(:de.hp :gone :left, elmnie[:ade] << 0.5dt);
        station(:left :gone, elmnie[:ade - 0.4sw] << 0.5dt << 1.2sh,
            "Altendeich", ""
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:ade + 1sw, :kre.a]);
    }


    with link = "point.de.Krempe" {
        track(:first:station :double :cat, elmnie[:kre.a, :kre.f]);
        
        with layer = -1 {
            track(:station :removed,
                    elmnie[:kre - 200m] << 0.5dt
                 -- elmnie[:kre - 140m] >> 0.5dt
            );
            track(:station :removed,
                    elmnie[:kre.f - 160m] >> 0.5dt
                 -- elmnie[:kre.f - 100m] << 0.5dt
            );
            track(:station :removed,
                    elmnie[:kre.a + 99m, :kre.a + 100m] << 0.5dt
                --  elmnie[:kre.a + 160m, :kre - 100m] << 1.5dt
            );
        }

        marker(:de.hp :left, elmnie[:kre] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:kre] << 0.5dt);
        station(:left :right_align, elmnie[:kre - 0.4sw] << 0.5dt << 1.4sh,
            "Krempe",
            hbox(:center:base,
                span(:open, "54,23 "),
                span(:removed, "(23,46)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:kre.f, :hwe - 1sw]);
    }


    with link = "point.de.Hohenweg" {
        track(:first:station :double :cat, elmnie[:hwe - 1sw, :hwe + 1sw]);
        with layer = -1 marker(:de.hp :gone :right, elmnie[:hwe] >> 0.5dt);
        station(:right :gone, elmnie[:hwe - 0.4sw] >> 0.5dt >> 1.4sh,
            "Hohenweg", ""
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:hwe + 1sw, :krh.bf - 1sw]);
    }


    with link = "point.de.Kremperheide" {
        track(:first:station :double :cat, elmnie[:krh.bf - 1sw, :krh + 1sw]);
        marker(:de.hp :left, elmnie[:krh] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:krh.bf] << 0.5dt);
        station(:left :right_align, elmnie[:krh - 0.4sw] << 0.5dt << 1.4sh,
            "Kremperheide",
            hbox(:center:base,
                span(:open, "59,58 "),
                span(:removed, "← 59,45 (28,66)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:krh + 1sw, :als.a]);
        with layer = 1 line_badge(:open, elmnie[:krh + 1.0km], "1210");
    }


    with link = "point.de.Itzehoe-Alsen" {
        track(:first:station :double :cat, elmnie[:als.a, :ala]);

        track(:private:station, elmnie[:als.a, :als + 60m] >> 1.5dt);
        track(:station,
                elmnie[:als + 20m] >> 1.5dt
            --  elmnie[:als + 60m] >> 0.5dt
        );
        
        with layer = -1 {
            track(:station :removed,
                    elmnie[:als.a + 99m, :als.a + 100m] >> 1.5dt
                --  elmnie[:als.a + 140m, :als - 80m] >> 2.5dt
                --  elmnie[:als - 40m, :als - 39m] >> 1.5dt
            );
            marker(:de.bbf :removed :right,
                elmnie[:als - 80m - 0.5sw] >> 2.5dt
            );
        }
        station(:right :left_align :removed,
            elmnie[:als - 80m - 0.7sw] >> 2.5dt >> 1.8sh,
            span(:bold, "Alsen"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:removed, "1210: "),
                    span(:removed, "1218: ")
                ),
                vbox(:center:top,
                    span(:removed, "63,14"),
                    span(:removed, "??")
                ),
                vbox(:center:top,
                    span(:removed, " (32,37)"),
                    span(:removed, "")
                )
            )
        );
    }

    with link = "point.de.Alsen-Abzw" {
        track(:first:station :double :cat, elmnie[:ala, :als.f]);
        track(:station,
            elmnie[:aita - 90m] >> 0.5dt --  elmnie[:aita - 10m] << 0.5dt
        );
        track(:station,
            elmnie[:aita + 10m] << 0.5dt --  elmnie[:aita + 90m] >> 0.5dt
        );

        marker(:de.abzw :left, elmnie[:ala] << 0.5dt);
        station(:left, elmnie[:ala - 0.6sw] << 0.5dt << 1.2sw,
            span(:bold, "Alsen Abzw"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:open, "1210: "),
                    span(:open, "1218: ")
                ),
                vbox(:center:top,
                    span(:open, "63,23"),
                    span(:open, "??")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double :cat, elmnie[:als.f, :itz.a]);
    }


    with link = "point.de.Itzehoe" {
        # Gl. 2 (Strecke 1221)
        with layer = -1 track(:station :removed,
                elmnie[:itz.a, :itz.is + 120m] >> 1.5dt
        );
        track(:second:station,
                elmnie[:itz.is + 79m, :itz.is + 80m] >> 0.5dt
            --  elmnie[:itz.is + 120m, :itz.if] >> 1.5dt
            --  elmnie[:itz.if + 40m, :itz.if + 41m] >> 0.5dt
        );
        with layer = -1 track(:second:station :removed,
                elmnie[:itz.if, :itz.f] >> 1.5dt
        );

        # Gl. 3/4 (Strecke 1210)
        track(:first:station :double :cat, elmnie[:itz.a, :itz.f]);
            track(:station,
                    elmnie[:itz.a + 180m] >> 0.5dt
                --  elmnie[:itz.a + 240m] << 0.5dt
            );
            track(:station,
                    elmnie[:itz.f - 230m] << 0.5dt
                --  elmnie[:itz.f - 170m] >> 0.5dt
            );

        # Gl. 5.
        track(:station, elmnie[:itz.a, :itz.f] << 1.5dt);
            track(:station,
                    elmnie[:itz.is] << 0.5dt
                --  elmnie[:itz.is + 40m] << 1.5dt
            );
            track(:station,
                    elmnie[:itz.if + 40m] << 1.5dt
                --  elmnie[:itz.if + 80m] << 0.5dt
            );

        # Güterbf.
        track(:station,
                elmnie[:itz.is - 41m, :itz.is - 40m] << 1.5dt
            --  elmnie[:itz.is + 80m, :itz.if - 180m] << 4.5dt
            --  elmnie[:itz.if - 100m, :itz.if - 99m] << 2.5dt
        );
        track(:station,
                elmnie[:itz.is, :itz.if + 40m] << 2.5dt
            --  elmnie[:itz.if + 80m, :itz.if + 81m] << 1.5dt
        );
        track(:station, elmnie[:itz.is + 40m, :itz.if - 140m] << 3.5dt);

        marker(:de.bf :right, elmnie[:itz] >> 1.5dt);
        station(:right :left_align, elmnie[:itz - 0.4sw] >> 1.5dt >> 1.3sw,
            span(:bold, "Itzehoe"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:open, " 1210: "),
                    span(:removed, "1221: ")
                ),
                vbox(:right:top,
                    span(:open, "64,"),
                    span(:removed, "73,")
                ),
                vbox(:left:top,
                    span(:open, "92 "),
                    span(:removed, "58")
                ),
                vbox(:center:top,
                    span(:removed, "(34,17)"),
                    span(:removed, "")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:itz.f, :hes - 1sw]);
        with layer = 1 line_badge(:open, elmnie[:hes - 1.1km], "1210");
    }


    with link = "point.de.Heiligenstedten" {
        track(:first:station :double , elmnie[:hes - 1sw, :hes + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, elmnie[:hes] << 0.5dt);
        with layer = -2 marker(:de.bf :gone :left, elmnie[:hes] << 0.5dt);
        station(:left :removed, elmnie[:hes - 2sw] << 0.5dt << 1.5sh,
            "Heiligenstedten",
            "(37,45)"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hes + 1sw, :bek - 1sw]);
    }


    with link = "point.de.Bekdorf" {
        track(:first:station :double, elmnie[:bek - 1sw, :bek + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, elmnie[:bek] << 0.5dt);
        station(:bottom :removed, elmnie[:bek] << 0.5dt << 1.2sh,
            "Bekdorf",
            "(37,6+2840)"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:bek + 1sw, :wil.a]);
        with layer = 1 line_badge(:open, elmnie[:bek + 0.8km], "1210");
    }


    with link = "point.de.Wilster" {
        let wilbru = path("path.de.1214");

        # Gl. 1/2 (Strecke 1210)
        track(:first:station :double, elmnie[:wil.a, :wil.f]);
            track(:station,
                    elmnie[:wil.a + 100m] >> 0.5dt
                --  elmnie[:wil.a + 160m] << 0.5dt
            );
            track(:station,
                    elmnie[:abru + 40m] << 0.5dt
                --  elmnie[:abru + 100m] >> 0.5dt
            );

        # Gl. 3
        with layer = -1 track(:station :removed,
                elmnie[:wil.a + 239m, :wil.a + 240m] >> 0.5dt
            --  elmnie[:wil.a + 300m, :abru - 60m] >> 1.5dt
            --  elmnie[:abru, :abru + 1m] >> 0.5dt
        );

        # Gl. 4 - Gl. 1s
        track(:station,
                elmnie[:wil.a + 179m, :wil.a + 180m] << 0.5dt
            --  elmnie[:wil.a + 240m, :abru - 100m] << 1.5dt
            --  elmnie[:abru - 40m, :abru - 39m] << 0.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:abru - 100m, :abru] << 1.5dt
            ..  wilbru[:a, :wil.ww - 80m] << 1.5dt
            --  wilbru[:wil.ww - 40m, :wil.ww - 39m] << 2.5dt
        );

        # Gl. 6
        with layer = -1 track(:station :removed,
                elmnie[:wil.a + 279m, :wil.a + 280m] << 1.5dt
            --  elmnie[:wil.a + 320m, :abru - 40m] << 2.5dt
            --  elmnie[:abru, :abru + 1m] << 1.5dt
        );

        # Gl. 2s
        track(:second:station,
                elmnie[:abru - 1m, :abru] << 0.5dt
            --  wilbru[:a + 40m, :a + 80m] << 1.5dt
            --  wilbru[:a + 120m, :wil.ww + 40m] << 2.5dt
        );

        # Gl. 3s?
        with layer = -1 track(:station :removed,
                wilbru[:a, :a + 1m] << 1.5dt
            --  wilbru[:a + 80m, :wil.ww - 60m] << 3.5dt
            --  wilbru[:wil.ww - 20m, :wil.ww - 19m] << 2.5dt
        );

        # Marker.
        area(:open,
                elmnie[:wil - 0.5sw, :wil + 0.5sw] << 0.5dt
            --  wilbru[:wil + 0.5sw, :wil - 0.5sw] >> 1.5dt
        );
        station(:right :left_align, wilbru[:wil + 0.5sw] << 3.5dt << 7pt,
            span(:bold, "Wilster"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:open, " 1210: "),
                    span(:open, "1214: ")
                ),
                vbox(:right:top,
                    span(:open, "74,"),
                    span(:open, "0,")
                ),
                vbox(:left:top,
                    span(:open, "26 "),
                    span(:open, "03")
                ),
                vbox(:center:top,
                    span(:removed, "(37,75)"),
                    span(:removed, "")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:wil.f, :vaa - 1sw]);
        with layer = 1 line_badge(:open, elmnie[:moo - 2.0km], "1210");
    }


    with link = "point.de.Moorhusen" {
        with layer = -1 marker(:de.bk :removed :right, elmnie[:moo] >> 0.5dt);
        station(:right :removed, elmnie[:moo - 0.4sw] >> 0.5dt >> 1.2sw,
            "Moorhusen", "(42,05)"
        );
    }


    with link = "point.de.Vaale" {
        track(:first:station :double, elmnie[:vaa - 1sw, :vaa + 1sw]);
        with layer = -1 marker(:de.anst :removed :right, elmnie[:vaa] >> 0.5dt);
        with layer = -2 marker(:de.bf :gone :right, elmnie[:vaa] >> 0.5dt);
        station(:right :left_align :removed,
            elmnie[:vaa - 0.3sw] >> 0.5dt >> 1.4sh,
            "Vaale", " 83,16 (46,66)"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:vaa + 1sw, :hdo - 170m]);
    }


    with link = "point.de.Hochdonn" {
        track(:first:station :double, elmnie[:hdo - 170m, :hdo + 170m]);
        track(:station,
                elmnie[:hdo - 70m] << 0.5dt
            --  elmnie[:hdo - 10m] >> 0.5dt
        );
        track(:station,
                elmnie[:hdo + 10m] >> 0.5dt
            --  elmnie[:hdo + 70m] << 0.5dt
        );

        marker(:de.uest :right, elmnie[:hdo] >> 0.5dt);
        station(:top, elmnie[:hdo] >> 0.5dt >> 1.2sh,
            "Hochdonn", "86,44"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hdo + 170m, :bhda]);
    }


    with link = "struct.de.Hochbrücke-Hochdonn" {
        track(:first :double, elmnie[:bhda, :bhdf]);

        track(:guide,
                elmnie[:bhda - 0.6dt, :bhda - 0.5dt] >> 2.5dt
            --  elmnie[:bhda, :bhdf] >> 1.5dt
            --  elmnie[:bhdf + 0.5dt, :bhdf + 0.6dt] >> 2.5dt
        );
        track(:guide,
                elmnie[:bhda - 0.6dt, :bhda - 0.5dt] << 2.5dt
            --  elmnie[:bhda, :bhdf] << 1.5dt
            --  elmnie[:bhdf + 0.5dt, :bhdf + 0.6dt] << 2.5dt
        );

        slabel(:top, elmnie[:bhda + 1.2km] >> 3.5dt,
            vbox(:center:bottom,
                span(:italic, "Hochbrücke"),
                span(:italic, "Hochdonn")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:bhdf, :hdn - 0.5sw]);
    }


    with link = "point.de.Hochdonn-Nord" {
        track(:first:station :double, elmnie[:hdn - 0.5sw, :hdn + 0.5sw]);
        with layer = -1 marker(:de.uest :removed :right, elmnie[:hdn] >> 0.5dt);
        station(:left :removed, elmnie[:hdn - 1sw] >> 0.5dt >> 1.0sh,
            "Hochdonn Nord", "??"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hdn + 0.5sw, :bur.a]);
    }


    with link = "point.de.Burg-Dithm" {
        track(:first:station :double, elmnie[:bur.a, :bur + 160m]);
            with layer = -1 track(:station :removed,
                    elmnie[:bur.a + 100m] >> 0.5dt
                --  elmnie[:bur.a + 160m] << 0.5dt
            );

        marker(:de.hp :left, elmnie[:bur] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:bur] << 0.5dt);
        station(:right, elmnie[:bur + 0.8sw] << 0.5dt << 1.2sh << 6pt,
            hbox(:center:base,
                span(:regular, "Burg "),
                span(:light, "(Dithm)")
            ),
            hbox(:center:base,
                span(:open, "91,42 "),
                span(:removed, "(54,93)")
            )
        );
    }


    with link = "point.de.Burg-Dithm-Awanst" {
        track(:first:station :double, elmnie[:bur + 160m, :bur.f]);

        with layer = -1 {
            track(:station :removed,
                    elmnie[:bur + 160m, :bur + 161m] << 0.5dt
                --  elmnie[:bur + 240m, :bur.f - 260m] << 2.5dt
                --  elmnie[:bur.f - 180m, :bur.f - 179m] << 0.5dt
            );
            track(:station :removed,
                    elmnie[:bur + 200m, :bur.f - 220m] << 1.5dt
            );

            track(:station :removed,
                    elmnie[:bur.f - 160m] << 0.5dt
                --  elmnie[:bur.f - 100m] >> 0.5dt
            );
        }

        with layer = -2 marker(:de.awanst :closed :left, elmnie[:bua] << 2.5dt);
        station(:left :closed, elmnie[:bua - 0.8sw] << 2.5dt << 1.4sh,
            vbox(:center:top,
                hbox(:center:base,
                    span(:regular, "Burg "),
                    span(:light, "(Dithm)")
                ),
                span(:regular, "Awanst ")
            ),
            "??"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:bur.f, :hop - 0.5sw]);
    }


    with link = "point.de.Hopen" {
        track(:first:station :double, elmnie[:hop - 0.5sw, :hop + 0.5sw]);
        with layer = -1 marker(:de.bk :removed :left, elmnie[:hop] << 0.5dt);
        station(:bottom :removed, elmnie[:hop] << 0.5dt << 1.2sh,
            "Hopen", "(60,95)"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hop + 0.5sw, :smi.a]);
        with layer = 1 line_badge(:open, elmnie[:hop + 1.5km], "1210");
    }


    with link = "point.de.St-Michaelisdonn" {
        let smimar = path("path.de.1216");

        # Gl. 1/2
        with layer = -1 track(:station :removed,
                smimar[:a - 99m, :a - 100m] << 2.5dt
            ..  elmnie[:fmar, :smi.f - 200m] << 3.5dt
            --  elmnie[:smi.f - 120m, :smi.f - 119m] << 1.5dt
        );

        # Gl. 3 (Strecke 1216)
        with layer = -1 track(:second:station :closed,
                smimar[:a, :a - 100m] << 2.5dt
            ..  elmnie[:fmar, :smi.f - 280m] << 2.5dt
            --  elmnie[:smi.f - 240m, :smi.f - 239m] << 1.5dt
        );
            with layer = -2 track(:station :removed,
                    elmnie[:fmar - 40m] << 1.5dt
                --  elmnie[:fmar] << 2.5dt
            );

        # Gl. 5 (Strecke 1215)
        track(:second:station,
                path("path.de.1215")[:aa + 50m, :aa + 49m] >> 0.5dt
            ..  elmnie[:fbru - 200m, :smi.f - 220m] << 1.5dt
            --  elmnie[:smi.f - 180m, :smi.f - 179m] << 0.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:smi.f - 220m, :smi.f] << 1.5dt
        );
            track(:station,
                    elmnie[:fbru] << 0.5dt
                --  elmnie[:fbru + 40m] << 1.5dt
            );

        # Gl. 6/7 (Strecke 1210)
        with layer = -1 track(:first :gone, 
                path("path.de.1215")[:aa + 50m, :aa + 49m] << 0.5dt
                ..  elmnie[:fbru, :fbru + 1m] << 0.5dt
        );
        with layer = -1 track(:first :gone, 
                path("path.de.1215")[:aa + 50m, :aa + 49m] >> 0.5dt
                ..  elmnie[:fbru, :fbru + 1m] >> 0.5dt
        );
        track(:first:station :double, elmnie[:smi.a, :smi.f]);
            track(:station,
                    elmnie[:smi.a + 100m] >> 0.5dt
                --  elmnie[:smi.a + 160m] << 0.5dt
            );
            track(:station,
                    elmnie[:smi.f - 160m] << 0.5dt
                --  elmnie[:smi.f - 100m] >> 0.5dt
            );

        marker(:de.bf :left, elmnie[:smi] << 3.5dt);
        station(:left :right_align, elmnie[:smi - 0.3sw] << 3.5dt << 1.6sw,
            span(:bold, "St Michaelisdonn"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:open, "1210: "),
                    span(:open, "1215: "),
                    span(:closed, "1216: ")
                ),
                vbox(:right:top,
                    span(:open, "101,"),
                    span(:open, "0,"),
                    span(:closed, "0,")
                ),
                vbox(:left:top,
                    span(:open, "12 "),
                    span(:open, "03 "),
                    span(:closed, "03 ")
                ),
                vbox(:right:top,
                    span(:removed, "← "),
                    span(:removed, "← "),
                    span(:removed, "← ")
                ),
                vbox(:right:top,
                    span(:removed, "101,"),
                    span(:removed, "0,"),
                    span(:removed, "0,")
                ),
                vbox(:left:top,
                    span(:removed, "15 (64,66)"),
                    span(:removed, "00"),
                    span(:removed, "00")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:smi.f, :win - 1sw]);
        with layer = 1 line_badge(:open, elmnie[:win - 2.8km], "1210");
    }


    with link = "point.de.Windbergen" {
        track(:first:station :double, elmnie[:win - 1sw, :win + 1sw]);
        with layer = -1 marker(:de.hst :removed :right, elmnie[:win] >> 0.5dt);
        with layer = -1 marker(:de.bf :gone :right, elmnie[:win] >> 0.5dt);
        station(:right :removed, elmnie[:win - 0.4sw] >> 0.5dt >> 1.2sw,
            "Windbergen", "(70,66)"
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:win + 1sw, :mel.a]);
    }


    with link = "point.de.Meldorf-Üst" {
        track(:first:station :double, elmnie[:mel.a, :meu + 100m]);
            track(:station,
                    elmnie[:meu - 80m] << 0.5dt
                --  elmnie[:meu - 20m] >> 0.5dt
            );
            track(:station,
                    elmnie[:meu + 20m] >> 0.5dt
                --  elmnie[:meu + 80m] << 0.5dt
            );
        with layer = -1 track(:station :removed,
            elmnie[:meu - 80m, :meu + 100m] >> 1.5dt
        );

        marker(:statdt :right, elmnie[:meu] >> 0.5dt);
        marker(:de.uest :right, elmnie[:meu] >> 1.5dt);
        station(:right, elmnie[:meu - 0.4sw] >> 1.5dt >> 1.4sw,
            "Meldorf", "111,69"
        );
    }

    with link = "point.de.Meldorf-Hp" {
        # << 2.5dt
        with layer = -1 track(:station :removed,
                elmnie[:meu + 139m, :meu + 140m] << 0.5dt
            --  elmnie[:meu + 220m, :mel - 0.6sw - 140m] << 2.5dt
            --  elmnie[:mel - 0.6sw - 100m, :mel - 0.6sw - 99m] << 1.5dt
        );

        # << 1.5dt
        track(:station :removed, elmnie[:meu + 180m, :mel - 0.6sw] << 1.5dt);

        # << 0.5dt, >> 0.5dt (Hauptgleise)
        track(:first:station :double, elmnie[:meu + 100m, :mel.f]);
            with layer = -1 track(:station :removed,
                    elmnie[:mel.f - 160m] >> 0.5dt
                --  elmnie[:mel.f - 100m] << 0.5dt
            );

        # >> 1.5dt
        track(:station :removed, elmnie[:meu + 100m, :mel.mf] >> 1.5dt);
            with layer = -1 track(:station :removed,
                    elmnie[:meu + 100m] >> 0.5dt
                --  elmnie[:meu + 140m] >> 1.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:mel.mf - 80m] >> 1.5dt
                --  elmnie[:mel.mf - 40m] >> 0.5dt
            );

        marker(:de.hp :left, elmnie[:mel] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:mel] << 0.5dt);
        station(:left, elmnie[:mel - 0.5sw] << 0.5dt << 1.2sw,
            vbox(:center:bottom,
                span(:removed, "Meldorf"),
                span(:open, "Meldorf Hp")
            ),
            hbox(:center:base,
                span(:open, "112,44 "),
                span(:removed, "(75,97)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:mel.f, :hem.a]);
    }


    with link = "point.de.Hemmingstedt" {
        let elmnie.hem = path("path.de.1210.hem");

        # << 0.5dt, >> 0.5dt (Hauptgleise)
        track(:first:station :double, elmnie[:hem.a, :hem.f]);
            track(:station,
                    elmnie[:hem.a + 100m] >> 0.5dt
                --  elmnie[:hem.a + 160m] << 0.5dt
            );
            track(:station,
                    elmnie[:hem.f - 160m] << 0.5dt
                --  elmnie[:hem.f - 100m] >> 0.5dt
            );

        # << 1.5dt
        track(:station,
                elmnie[:hem.a + 60m, :hem.f - 250m] << 1.5dt
            --  elmnie[:hem.f - 190m, :hem.f - 189m] << 0.5dt
        );
            track(:station,
                    elmnie[:hem.a + 190m] << 0.5dt
                --  elmnie[:hem.a + 250m] << 1.5dt
            );

        # << 2.5dt
        track(:station,
                elmnie[:hem.a + 279m, :hem.a + 280m] << 1.5dt
            --  elmnie[:hem.a + 340m, :hem.ff] << 2.5dt
        );
            track(:station,
                    elmnie[:hem.f - 290m] << 1.5dt
                --  elmnie[:hem.f - 250m] << 2.5dt
            );

        # << 3.5dt
        track(:station, elmnie[:hem.u + 40m, :hem.ff] << 3.5dt);

        # << 4.5dt
        track(:station,
                elmnie[:hem.u - 1m, :hem.u] << 2.5dt
            --  elmnie[:hem.u + 80m, :hem.ff] << 4.5dt
        );

        # Anschlussbahn Raffinerie
        track(:station,
                elmnie.hem[:a + 250m, :raf.f]
            ..  elmnie[:hem.u - 1m, :hem.u] << 2.5dt
        );
        track(:station, elmnie.hem[:a + 250m, :raf.f - 40m] << 1dt);
        track(:station,
                elmnie.hem[:a, :a + 250m] << 4dt
            ..  elmnie.hem[:a + 350m, :raf.f - 80m] << 2dt
        );
        track(:station,
                elmnie.hem[:a, :a + 250m + 1dl] << 5dt
            ..  elmnie.hem[:a + 350m + 1dl, :raf.f - 120m] << 3dt
            --  elmnie.hem[:raf.f, :raf.f + 1m]
        );

        marker(:de.bbf :right, elmnie[:hem] >> 0.5dt);
        with layer= -1 marker(:de.bf :removed :right, elmnie[:hem] >> 0.5dt);
        station(:right, elmnie[:hem - 0.4sw] >> 0.5dt >> 1.4sw,
            "Hemmingstedt",
            hbox(:center:base,
                span(:open, "119,61 "),
                span(:removed, "(83,13)")
            )
        );

        slabel(:left, elmnie.hem[:a] << 0.5dt,
            span(:italic, "Raffinerie Heide")
        );
    }


    with link = "line.de.1210" {
        track(:first :double,
                elmnie[:hem.f, :hei.aa - 400m]
            ..  elmnie.hei[:hei.a - 1m, :hei.a] << 3dt
        );
        with layer = 1 line_badge(:open, elmnie[:hem + 2.6km], "1210");
    }


    with link = "point.de.Heide-Holst" {
        # Gl. 1 (Richtungsgleis Strecke 1210)
        track(:first:station,
                elmnie.hei[:hei.a, :hei + 0.5sw] << 2.5dt
            --  elmnie.hei[:hei.f - 200m, :hei.f] >> 0.5dt
        );
        # Gl. 2 (Gegenrichtungsgleis Strecke 1210)
        track(:first:station,
                elmnie.hei[:hei.a, :hei + 0.5sw + 1dl] << 3.5dt
            --  elmnie.hei[:hei.f - 200m + 1dl, :hei.f] << 0.5dt
        );
            track(:station,
                    elmnie.hei[:hei.a + 100m] << 3.5dt
                --  elmnie.hei[:hei.a + 160m] << 2.5dt
            );
            track(:station,
                    elmnie.hei[:hei.f - 160m] >> 0.5dt
                --  elmnie.hei[:hei.f - 100m] << 0.5dt
            );

        # Gl. 3
        with layer = -1 track(:station :removed,
                elmnie.hei[:hei.a, :hei + 0.5sw - 60m + 1dl] << 4.5dt
        );
            with layer = -1 track(:station :removed,
                    elmnie.hei[:hei.hs - 140m] << 3.5dt
                --  elmnie.hei[:hei.hs - 100m] << 4.5dt
            );

        # Gl. 4
        with layer = -1 track(:station :removed,
                elmnie.hei[:hei.hs - 1m, :hei.hs] << 4.5dt
            --  elmnie.hei[:hei.hs + 40m, :hei + 0.5sw - 120m + 1dl] << 5.5dt
            --  elmnie.hei[:hei + 0.5sw + 1dl, :hei + 0.51sw + 1dl] << 3.5dt
        );

        # Gl. 33
        with layer = -1 track(:station :removed,
            elmnie.hei[:hei.a, :hei.hs - 20m] << 1.5dt
        );

        # Gl. 34
        with layer = -1 track(:station :removed,
                elmnie.hei[:hei.a, :hei.hs - 40m] << 0.5dt
            --  elmnie.hei[:hei.hs + 80m, :hei.hs + 81m] >> 1.5dt
        );

        # Gl. 40
        with layer = -1 track(:station :removed,
                elmnie.hei[:hei.a, :hei.hs + 20m] >> 0.5dt
        );

        # Gl. 51
        track(:station, elmnie.hei[:hei.hs - 20m, :hei - 160m] << 1.5dt);

        # Gl. 101
        track(:station,
                elmnie.hei[:hei.hs + 199m, :hei.hs + 200m] >> 0.5dt
            --  elmnie.hei[:hei.hs + 240m, :hei - 0.5sw - 40m] << 0.5dt
            --  elmnie.hei[:hei - 0.5sw, :hei - 0.49sw] >> 0.5dt
        );

        # Gl. 102
        track(:station,
                elmnie.hei[:hei.hs - 81m, :hei.hs - 80m] << 2.5dt
            --  elmnie.hei[:hei.hs + 100m, :hei.hs + 120m] >> 0.5dt
        );
        track(:second:station,
                elmnie.hei[:hei.hs + 120m, :hei.f - 260m] >> 0.5dt
            --  elmnie.hei[:hei.f - 200m, :hei.f] >> 1.5dt
        );
            track(:station, elmnie.hei[:hei.f - 260m, :hei.f - 200m] >> 0.5dt);

        # Gl. 103 (Strecke 1042)
        track(:second:station,
                elmnie.hei[:hei.hs - 100m, :hei.hs + 120m] >> 1.5dt
            --  elmnie.hei[:hei.hs + 180m, :hei.hs + 181m] >> 0.5dt
        );
        with layer = -1 track(:second:station :closed,
                elmnie.hei[:hei.hs + 120m, :hei + 0.5sw - 40m] >> 1.5dt
            --  elmnie.hei[:hei + 0.5sw, :hei + 0.51sw] >> 0.5dt
        );

        # Gl. 121
        track(:station :removed, elmnie.hei[:hei.hs - 50m, :hei] >> 2.5dt);
            with layer = -1 track(:station :removed,
                    elmnie.hei[:hei.hs + 140m] >> 1.5dt
                --  elmnie.hei[:hei.hs + 180m] >> 2.5dt
            );

        marker(:de.bf :left, elmnie.hei[:hei] >> 0.5dt);
        station(:left, elmnie.hei[:hei - 0.4sw] << 7.5dt,
            hbox(:center:base,
                span(:bold, "Heide "),
                span(:regular, "(Holst)")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1042: "),
                    span(:open, "1206: "),
                    span(:open, "1210: ")
                ),
                vbox(:right:top,
                    span(:open, "62,"),
                    span(:open, "0,"),
                    span(:open, "124,")
                ),
                vbox(:left:top,
                    span(:open, "60"),
                    span(:open, "00"),
                    span(:open, "48 ")
                ),
                vbox(:left:top,
                    span(:removed, ""),
                    span(:removed, ""),
                    span(:removed, "(88,03)")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hei.f, :wed - 1sw]);
        with layer = -1 casing(:first :double,
            elmnie[:weh.x - 200m, :weh.x + 200m]
        );
        with layer = 1 line_badge(:open,
            elmnie[:weh.x - 1200m] << 0.3dt,
            "1210"
        );
    }
    

    with link = "point.de.Weddingstedt" {
        track(:first:station :double, elmnie[:wed - 1sw, :wed + 1sw]);
        with layer = -1 track(:second:station :removed,
                elmnie[:wed - 1sw] << 0.2dt << 1sh
            --  elmnie[:wed + 0.5sw] << 0.2dt << 1sh
        );
        with layer = -1 marker(:de.hp :removed :left, elmnie[:wed] << 0.5dt);
        with layer = -2 marker(:de.bf :gone :left, elmnie[:wed] << 0.5dt);
        station(:right :left_align :removed, elmnie[:wed - 0.4sw] >> 1.5dt,
            "Weddingstedt",
            hbox(:left:top,
                vbox(:right:top,
                    span(:removed, " 1204: "),
                    span(:removed, "1210: ")
                ),
                vbox(:right:top,
                    span(:open, "4,"),
                    span(:open, "129,")
                ),
                vbox(:left:top,
                    span(:open, "78"),
                    span(:open, "24 (92,81)")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:wed + 1sw, :wit - 1sw]);
    with layer = 1 line_badge(:open, elmnie[:wit - 1.0km], "1210");
    }


    with link = "point.de.Wittenwurth" {
        track(:first:station :double, elmnie[:wit - 1sw, :wit + 1sw]);
        with layer = -1 marker(:de.hp :removed :left, elmnie[:wit] << 0.5dt);
        with layer = -2 marker(:de.bf :gone :left, elmnie[:wit] << 0.5dt);
        station(:right :removed, elmnie[:wit - 0.4sw] >> 1.5dt,
            "Wittenwurth",
            hbox(:center:base,
                span(:open, "133,83 "),
                span(:removed, "(97,38)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:wit + 1sw, :lun.a]);
    }


    with link = "point.de.Lunden-Süd" {
        track(:first:station :double, elmnie[:lun.a, :lus + 100m]);
        
        with layer = -1 {
            track(:station :removed,
                    elmnie[:lun.a + 100m] << 0.5dt
                --  elmnie[:lun.a + 160m] >> 0.5dt
            );
            track(:station :removed,
                    elmnie[:lun.a + 199m, :lun.a + 200m] >> 0.5dt
                --  elmnie[:lun.a + 260m, :lus + 100m] >> 1.5dt
            );

            track(:station :removed,
                    elmnie[:lun.a + 200m, :lus + 100m] << 1.5dt
            );
                track(:station :removed,
                        elmnie[:lun.a + 240m] << 0.5dt
                    --  elmnie[:lun.a + 300m] << 1.5dt
                );
            track(:station :removed,
                    elmnie[:lun.a + 339m, :lun.a + 340m] << 1.5dt
                --  elmnie[:lun.a + 380m, :lus + 100m] << 2.5dt
            );

            marker(:de.bk :closed :right, elmnie[:lus] >> 1.5dt);
            station(:right :closed, elmnie[:lus - 0.4sw] >> 1.5dt >> 1.2sh,
                "Lunen Süd", "??"
            );
        }
    }

    with link = "point.de.Lunden" {
        track(:first:station :double, elmnie[:lus + 100m, :lun + 0.5sw]);
        track(:station :removed, elmnie[:lus + 100m, :lun + 0.5sw] >> 1.5dt);

        marker(:de.hp :left, elmnie[:lun] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:lun] << 0.5dt);
        station(:left :right_align, elmnie[:lun - 0.4sw] << 0.5dt << 1.4sh,
            "Lunen", 
            hbox(:center:base,
                span(:open, "140,76 "),
                span(:removed, "(104,31)")
            )
        );
    }

    with link = "point.de.Lunden-Nord" {
        track(:first:station :double, elmnie[:lun + 0.5sw, :lun.f]);

        with layer = -1 {
            track(:station :removed,
                    elmnie[:lun + 0.5sw, :lun.f - 260m] >> 1.5dt
                --  elmnie[:lun.f - 200m, :lun.f - 199m] >> 0.5dt
            );
            track(:station :removed,
                    elmnie[:lun.f - 160m] >> 0.5dt
                --  elmnie[:lun.f - 100m] << 0.5dt
            );

            marker(:de.bk :closed, elmnie[:ldn] >> 1.5dt);
            station(:right :closed, elmnie[:ldn - 0.4sw] >> 1.5dt >> 1.2sh,
                "Lunen Nord", "??"
            );
        }
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:lun.f, :eid - 160m]);
        with layer = 1 line_badge(:open, elmnie[:lun + 2.4km], "1210");
    }


    with link = "point.de.St-Annen-Eiderbrücke" {
        track(:first:station,
                elmnie[:eid - 160m, :eid - 60m] << 0.5dt
            --  elmnie[:eid, :eid + 1m] >> 0.5dt
        );
        with layer = -1 track(:first:station :removed,
                elmnie[:eid - 60m, :beif + 90m] << 0.5dt
        );
        track(:first:station,
                elmnie[:beif + 29m, :beif + 30m] >> 0.5dt
            --  elmnie[:beif + 90m, :beif + 190m] << 0.5dt
        );

        track(:first:station, elmnie[:eid - 160m, :beif + 190m] >> 0.5dt);

        marker(:de.uest :right, elmnie[:eid] >> 0.5dt);
        station(:left, elmnie[:eid - 0.4sw] << 2.0dt,
            hbox(:center:base,
                span(:light, "Sankt Annen "),
                span(:regular, "Eiderbrücke")
            ),
            hbox(:center:base,
                span(:open, "145,18 "),
                span(:removed, "(109,00)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:beif + 190m, :fri.a]);
    }


    with link = "point.de.Friedrichstadt" {
        track(:first:station :double, elmnie[:fri.a, :fri.f]);
        
        with layer = -1 {
            track(:station :removed,
                    elmnie[:fri.a + 100m] >> 0.5dt
                --  elmnie[:fri.a + 160m] << 0.5dt
            );
            track(:station :removed,
                    elmnie[:fri.f - 160m] << 0.5dt
                --  elmnie[:fri.f - 100m] >> 0.5dt
            );

            track(:station :removed,
                    elmnie[:fri.ff + 39m, :fri.ff + 40m] << 0.5dt
                --  elmnie[:fri.ff + 100m, :fri.f - 200m] << 1.5dt
            );
                track(:station :removed,
                        elmnie[:fri.f - 260m] << 1.5dt
                    --  elmnie[:fri.f - 200m] << 0.5dt
                );

            track(:station :removed,
                    elmnie[:fri + 0.6sw, :fri.fn - 200m] >> 1.5dt
                --  elmnie[:fri.fn - 160m, :fri.fn - 159m] >> 0.5dt
            );
        }

        marker(:de.hp :right, elmnie[:fri] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, elmnie[:fri] >> 0.5dt);
        station(:left, elmnie[:fri - 0.4sw] << 3.5dt,
            span(:bold, "Friedrichstadt"),
            hbox(:center:base,
                span(:open, "1210: 147,11 "),
                span(:removed, "(110,69)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:fri.f, :hor - 160m]);
        with layer = 1 line_badge(:open, elmnie[:fri + 3.3km], "1210");
    }


    with link = "point.de.Hörn" {
        track(:first:station :double, elmnie[:hor - 160m, :hor + 100m]);
        track(:second:station,
                elmnie[:hor - 60m] << 1.5dt
            --  elmnie[:hor] << 0.5dt
        );
        marker(:de.abzw :right, elmnie[:hor] >> 0.5dt);
        station(:right :left_align, elmnie[:hor - 0.3sw] >> 0.5dt >> 1.6sh,
            span(:bold, "Hörn"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:open, "1204: "),
                    span(:open, "1210: ")
                ),
                vbox(:right:top,
                    span(:open, "4,"),
                    span(:open, "153,")
                ),
                vbox(:left:top,
                    span(:open, "63 "),
                    span(:open, "63 ")
                ),
                vbox(:right:top,
                    span(:removed, "(175,"),
                    span(:removed, "(117,")
                ),
                vbox(:left:top,
                    span(:removed, "0)"),
                    span(:removed, "19)")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hor + 100m, :hus.a]);
        with layer = 1 line_badge(:open, elmnie[:hor + 2.0km], "1210");
    }


    with link = "point.de.Husum" {
        let budhus = path("path.de.1012");
        let hushus = path("path.de.1210.hus");
        let jubhus = path("path.de.1011");

        # Gleis 1alt (Strecke 12035)
        with layer = -1 track(:second:station :removed,
                jubhus[:hus.a, :hus.a + 1m] >> 3.5dt
            ..  hushus[:fjub, :hus.hn - 240m] >> 3.5dt
            --  hushus[:hus.hn - 180m, :hus.hn - 179m] >> 2.5dt
        );

        # Gleis 1 [2 alt] (Strecke 1011)
        track(:second:station,
                jubhus[:hus.a, :hus.a + 1m] >> 2.5dt
            ..  hushus[:fjub, :hus.hn - 180m] >> 2.5dt
            --  hushus[:hus.hn - 60m, :hus.hn - 59m] >> 0.5dt
        );

        # Gleis 3 (Strecke 1012)
        track(:second:station,
                budhus[:hus.a, :hus.a + 1m]
            ..  hushus[:hus.hs - 100m, :hus.hn - 120m] >> 1.5dt
        );

        # Gleis 4 (Richtungsgleis Strecke 1210)
        track(:first:station,
                elmnie[:hus.a, :hus.a + 1m] >> 0.5dt
            ..  hushus[:fren, :hus.hn - 60m] >> 0.5dt
            --  hushus[:hus.hn, :hus.hn + 1m] << 0.5dt
        );
        with layer = -1 track(:first:station :removed,
                hushus[:hus.hn - 60m, :hus.f] >> 0.5dt
        );
        track(:station,
                hushus[:hus.f - 161m, :hus.f - 160m] << 0.5dt
            --  hushus[:hus.f - 100m, :hus.f] >> 0.5dt
        );

        # Gleis 5 (Gegenrichtungsgleis Strecke 1210)
        track(:first:station,
                elmnie[:hus.a, :hus.a + 1m] << 0.5dt
            ..  hushus[:fren, :hus.f] << 0.5dt
        );

        # Gleis 7 (Strecke 12041)
        with layer = -1 track(:station :removed,
                elmnie[:hus.a, :hus.a + 1m] << 1.5dt
            ..  hushus[:fren, :hus.hn - 120m] << 1.5dt
            --  hushus[:hus.hn - 60m, :hus.hn - 59m] << 0.5dt
        );
        with layer = -2 track(:first:station :gone,
                hushus[:hus.hn - 120m, :hus.hn] << 1.5dt
        );
            with layer = -1 track(:station :removed,
                    hushus[:fren] << 0.5dt
                --  hushus[:fren + 60m] << 1.5dt
            );

        # Gleis NOB2
        track(:station,
                hushus[:hus.hs - 300m, :fren - 40m] >> 2.5dt
            --  hushus[:fren, :fren + 1m] >> 1.5dt
        );

        marker(:de.bf :right, hushus[:hus.hn - 240m - 0.5sw] >> 3.5dt);
        station(:top,
            hushus[:hus.hn - 240m - 0.5sw] >> 3.5dt >> 1.2sh + (1sw, 0sw),
            span(:bold, "Husum"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:open, "1011: "),
                    span(:removed, "1012: "),
                    span(:open, "1210: "),
                    span(:removed, "12035: "),
                    span(:gone, "12041: ")
                ),
                vbox(:right:top,
                    span(:open, "26"),
                    span(:removed, "49"),
                    span(:open, "158"),
                    span(:removed, "0"),
                    span(:gone, "")
                ),
                vbox(:left:top,
                    span(:open, ",29 "),
                    span(:removed, ",09"),
                    span(:open, ",26"),
                    span(:removed, ",00"),
                    span(:gone, "??")
                ),
                vbox(:right:top,
                    span(:removed, "(170,"),
                    span(:removed, ""),
                    span(:removed, "(121,"),
                    span(:removed, ""),
                    span(:gone, "")
                ),
                vbox(:left:top,
                    span(:removed, "14)"),
                    span(:removed, ""),
                    span(:removed, "84)"),
                    span(:removed, ""),
                    span(:gone, "")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first, elmnie[:hus.f, :hun.a] << 0.5dt);
        track(:first :removed, elmnie[:hus.f, :hun.a] >> 0.5dt);
    }


    with link = "point.de.Husum-Nord" {
        # << 1.5dt
        with layer = -1 track(:station :removed, elmnie[:fhub, :fhua] << 1.5dt);
        track(:station, elmnie[:fhub, :hun + 100m] << 1.5dt);
        with layer = -1 track(:station :removed,
                elmnie[:hun + 100m, :hun.huf - 100m] << 1.5dt
        );
            track(:station,
                    elmnie[:hun - 40m] << 0.5dt
                --  elmnie[:hun] << 1.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:hun.huf - 160m] << 1.5dt
                --  elmnie[:hun.huf - 120m] << 0.5dt
            );

        # << 0.5dt
        track(:first:station, elmnie[:hun.a, :hun.f] << 0.5dt);
            with layer = -1 track(:station :removed,
                    elmnie[:hun.hun - 120m] << 0.5dt
                --  elmnie[:hun.hun - 80m] >> 0.5dt
            );
        
        # >> 0.5dt
        with layer = -1 track(:first:station :removed,
                elmnie[:hun.a, :hun.a + 160m] >> 0.5dt
        );
        track(:first:station,
                elmnie[:hun.a + 99m, :hun.a + 100m] << 0.5dt
            --  elmnie[:hun.a + 160m, :hun.f] >> 0.5dt
        );
            with layer = -1 track(:station :removed,
                    elmnie[:hun.hun - 60m] >> 0.5dt
                --  elmnie[:hun.hun] >> 1.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:hun.hun - 30m] >> 0.5dt
                --  elmnie[:hun.hun + 30m] << 0.5dt
            );

        # >> 1.5dt
        with layer = -1 track(:station :removed, elmnie[:fhub, :hun] >> 1.5dt);
        track(:station,
                elmnie[:hun - 61m, :hun - 60m] >> 0.5dt
            --  elmnie[:hun, :hun.hun - 180m] >> 1.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun - 180m, :hun.f + 300m] >> 1.5dt
        );
            with layer = -1 track(:station :removed,
                    elmnie[:hun.hun - 160m] >> 1.5dt
                --  elmnie[:hun.hun - 100m] >> 0.5dt
            );

        # >> 2.5dt (Huf)
        track(:station,
                elmnie[:hun.huf - 141m, :hun.huf - 140m] >> 1.5dt
            --  elmnie[:hun.huf - 100m, :hun.hun - 260m] >> 2.5dt
            --  elmnie[:hun.hun - 220m, :hun.hun - 219m] >> 1.5dt
        );

        # >> 2.5dt (Hun)
        track(:station,
                elmnie[:hun.hun - 241m, :hun.hun - 240m] >> 3.5dt
            --  elmnie[:hun.hun - 200m, :hun.hun - 100m] >> 2.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun - 100m, :hun.hun + 40m] >> 2.5dt
        );

        # >> 2.5dt (nördlich Hun)
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun + 180m, :hun.f + 300m] >> 2.5dt
        );

        # >> 3.5dt
        track(:station, elmnie[:hun.huf + 400m, :hun.hun - 100m] >> 3.5dt);
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun - 100m, :hun.hun + 40m] >> 3.5dt
        );

        # >> 3.5dt (nördlich Hun)
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun + 139m, :hun.hun + 140m] >> 1.5dt
            --  elmnie[:hun.hun + 220m, :hun.f + 300m] >> 3.5dt
        );

        # >> 4.5dt
        track(:station,
                elmnie[:hun.huf + 359m, :hun.huf + 360m] >> 2.5dt
            --  elmnie[:hun.huf + 440m, :hun.hun - 100m] >> 4.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:hun.hun - 100m, :hun.hun] >> 4.5dt
            --  elmnie[:hun.hun + 80m, :hun.hun + 81m] >> 1.5dt
        );
        
        with layer = -1 marker(:de.bf :removed :right, elmnie[:hun] >> 1.5dt);
        station(:left :removed, elmnie[:hun - 0.3sw] << 3.5dt,
            "Husum Nord", "(122,90)"
        );
    }

    with link = "point.de.Husum-Hu" {
        with layer = -1 marker(:de.bk :removed :left,
            elmnie[:hun.hun] << 0.5dt
        );
        station(:left :right_align :removed,
            elmnie[:hun.hun - 0.4sw] << 0.5dt << 1.0sh,
            "„Hu“", "(124,10) "
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:hun.f, :hat.a]);
        with layer = 1 line_badge(:open, elmnie[:hun + 2.5km], "1210");
    }


    with link = "point.de.Hattstedt" {
        # << 1.5dt
        with layer = -1 track(:station :removed,
                elmnie[:hat.a + 99m, :hat.a + 100m] << 0.5dt
            --  elmnie[:hat.a + 140m, :hat - 0.6sw] << 1.5dt
        );

        # << 0.5dt
        track(:first:station,
                elmnie[:hat.a, :hat.uest - 60m] << 0.5dt
            --  elmnie[:hat.uest, :hat.uest + 1m] >> 0.5dt
        );
        with layer = -1 track(:first:station :removed,
                elmnie[:hat.uest - 60m, :hat.f] << 0.5dt
        );

        # >> 0.5dt
        track(:first:station, elmnie[:hat.a, :hat.f] >> 0.5dt);

        with layer = -1 marker(:de.bf :removed :left, elmnie[:hat] << 0.5dt);
        station(:bottom :removed, elmnie[:hat] << 0.5dt << 1.2sh - (1sw, 0sw),
            "Hattstedt", "165,76 (129,32)"
        );

        marker(:de.uest :right, elmnie[:hat.uest] >> 0.5dt);
        station(:right, elmnie[:hat.uest - 0.4sw] >> 1.4sw,
            "Hattstedt", "166,46"
        );
    }


    with link = "line.de.1210" {
        track(:first :removed, elmnie[:hat.f, :str.a] << 0.5dt);
        track(:first, elmnie[:hat.f, :str.a] >> 0.5dt);
    }


    with link = "point.de.Struckum" {
        # << 1.5dt
        track(:station :removed, elmnie[:str.a + 200m, :str - 0.5sw] << 1.5dt);
            with layer = -2 track(:station :removed,
                    elmnie[:str.a + 220m] << 0.5dt
                --  elmnie[:str.a + 260m] << 1.5dt
            );

        # << 0.5dt
        with layer = -2 track(:first:station :removed,
                elmnie[:str.a, :str.a + 160m] << 0.5dt
        );
        with layer = -1 track(:first:station :closed,
                elmnie[:str.a + 99m, :str.a + 100m] >> 0.5dt
            --  elmnie[:str.a + 160m, :str.f - 160m] << 0.5dt
            --  elmnie[:str.f - 100m, :str.f - 99m] >> 0.5dt
        );
        with layer = -2 track(:first:station :removed,
                elmnie[:str.f - 160m, :str.f] << 0.5dt
        );

        # >> 0.5dt
        track(:first:station, elmnie[:str.a, :str.f] >> 0.5dt);

        with layer = -1 marker(:de.bf :closed :left, elmnie[:str] << 0.5dt);
        station(:left :right_align :closed,
            elmnie[:str - 0.5sw] << 0.5dt << 1.6sw,
            vbox(:center:bottom,
                span(:gone, "Wallsbüll"),
                span(:closed, "Struckum")
            ),
            hbox(:right:base,
                span(:closed, "172,65 "),
                span(:removed, "(136,21)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :removed, elmnie[:str.f, :bre.a] << 0.5dt);
        track(:first, elmnie[:str.f, :bre.a] >> 0.5dt);
        with layer = 1 line_badge(:open, elmnie[:bre - 1.8km], "1210");
    }


    with link = "point.de.Bredstedt" {
        # Gleis 1 (Gegenrichtungsgleis Strecke 1210)
        with layer = -1 track(:first:station :removed,
                elmnie[:bre.a, :bre.a + 160m] << 0.5dt
        );
        track(:first:station,
                elmnie[:bre.a + 99m, :bre.a + 100m] >> 0.5dt
            --  elmnie[:bre.a + 160m, :bre.f] << 0.5dt
        );
            track(:station,
                    elmnie[:bre.f - 220m] << 0.5dt
                --  elmnie[:bre.f - 170m] >> 0.5dt
            );

        # Gleis 2 (Richtungsgleis Strecke 1210)
        track(:first:station, elmnie[:bre.a, :bre.f] >> 0.5dt);
            with layer = -1 track(:station :removed,
                    elmnie[:bre.a + 160m] >> 0.5dt
                --  elmnie[:bre.a + 210m] >> 1.5dt
            );
            track(:station,
                    elmnie[:bre.f - 150m] >> 0.5dt
                --  elmnie[:bre.f - 100m] << 0.5dt
            );

        # Gleis 3 (Strecke 12036)
        with layer = -1 track(:second:station :removed,
                path("path.de.12036")[:ahus + 100m, :ahus + 99m] >> 1.5dt
            ..  elmnie[:flow, :bre.bst] >> 1.5dt
            --  elmnie[:bre.bst + 50m, :bre.bst + 51m] >> 0.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:bre.bst, :bre.f] >> 1.5dt
        );

        # Gleis 5
        track(:station :removed,
                elmnie[:bre.bs + 40m, :bre.bst + 40m] >> 2.5dt
            --  elmnie[:bre.bst + 80m, :bre.bst + 81m] >> 1.5dt
        );

        # Gleis 6
        track(:station :removed,
                elmnie[:bre.bs - 1m, :bre.bs] >> 1.5dt
            --  elmnie[:bre.bs + 80m, :bre.bst - 40m] >> 3.5dt
            --  elmnie[:bre.bst, :bre.bst + 1m] >> 2.5dt
        );

        # << 1.5dt
        with layer = -1 track(:station :removed,
                elmnie[:bre.bs + 120m, :bre - 0.6sw] << 1.5dt
        );

        # << 2.5dt
        with layer = -1 track(:station :removed,
                elmnie[:bre.bs + 79m, :bre.bs + 80m] << 0.5dt
            --  elmnie[:bre.bs + 160m, :bre - 0.6sw] << 2.5dt
        );

        marker(:de.bf :left, elmnie[:bre] << 0.5dt);
        station(:right:left_align, elmnie[:bre - 0.3sw] >> 5.5dt,
            span(:bold, "Bredstedt"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:removed, "  12036: "),
                    span(:open, "1210: ")
                ),
                vbox(:right:top,
                    span(:removed, "0,"),
                    span(:open, "176,")
                ),
                vbox(:left:top,
                    span(:removed, "00"),
                    span(:open, "78 ")
                ),
                vbox(:left:top,
                    span(:removed, ""),
                    span(:removed, "(140,31)")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:bre.f, :lan - 1sw]);
        with layer = 1 line_badge(:open, elmnie[:lan - 3.3km], "1210");
    }


    with link = "point.de.Langenhorn-Schlesw" {
        track(:first:station :double, elmnie[:lan - 1sw, :lan + 1sw]);
        marker(:de.hp :left, elmnie[:lan] << 0.5dt);
        marker(:de.bk :left, elmnie[:lan] << 0.5dt);
        with layer = -1 marker(:de.bf :removed :left, elmnie[:lan] << 0.5dt);
        station(:left, elmnie[:lan - 0.4sw] << 0.5dt << 1.4sw,
            hbox(:center:base,
                span(:regular, "Langenhorn "),
                span(:light, "(Schlesw)")
            ),
            hbox(:center:base,
                span(:open, "184,29 "),
                span(:removed, "(147,89)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:lan + 1sw, :ste.a]);
    }


    with link = "point.de.Stedesand" {
        track(:first:station :double, elmnie[:ste.a, :ste.f]);
            track(:station,
                    elmnie[:ste.a + 100m] << 0.5dt
                --  elmnie[:ste.a + 160m] >> 0.5dt
            );
        
        # Anschlussgleis
        let steste = path("path.de.1210.ste");

        with layer = -1 track(:station :closed,
                elmnie[:ste + 0.49sw, :ste + 0.5sw] >> 0.5dt
            --  elmnie[:ste + 0.5sw + 40m, :ste.agl] >> 1.5dt
            ..  steste[:a, :a + 100m] >> 1.5dt
            ..  steste[:aa, :r - 100m]
        );
        track(:station :removed, steste[:r - 100m, :f]);
        track(:station :removed,
                steste[:r, :f - 140m] >> 1dt
            --  steste[:f - 100m, :f - 99m]
        );
            track(:station :removed,
                    steste[:r + 20m]
                --  steste[:r + 60m] >> 1dt
            );
            track(:station :removed,
                    steste[:s - 40m] >> 1dt
                --  steste[:s]
            );
        with detail = 5 {
            slabel(:right :removed, steste[:s - 100m] << 1dt,
                span(:italic, "Marinemunitionsdepot Enge-Sande")
            );
        }
    
        marker(:de.bf :right, elmnie[:ste] >> 0.5dt);
        station(:left, elmnie[:ste - 0.3sw] << 2.5dt,
            "Stedesand",
            hbox(:center:base,
                span(:open, "190,28 "),
                span(:removed, "(153,84)")
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:ste.f, :lin.a]);
        with layer = 1 line_badge(:open, elmnie[:ste + 1.9km], "1210");
    }


    with link = "point.de.Lindholm" {
        # Gleis 1 (Strecke 1001)
        track(:second:station,
                path("path.de.1001")[:lin.aa, :lin.aa + 1m]
            ..  elmnie[:ffle - 60m, :ffle - 40m] >> 1.5dt
            --  elmnie[:ffle, :ffle + 1m] >> 0.5dt
        );
        with layer = -1 track(:station :removed,
                elmnie[:ffle, :lin - 160m] >> 1.5dt
        );

        # Gleise 2 und 3 (Strecke 1210)
        track(:first:station :double, elmnie[:lin.a, :lin.f]);
            with layer = -1 track(:station :removed,
                    elmnie[:lin.a + 100m] >> 0.5dt
                --  elmnie[:lin.a + 160m] << 0.5dt
            );
            track(:station,
                    elmnie[:ffle + 20m] >> 0.5dt
                --  elmnie[:ffle + 60m] << 0.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:lin.f - 240m] >> 0.5dt
                --  elmnie[:lin.f - 180m] << 0.5dt
            );
            with layer = -1 track(:station :removed,
                    elmnie[:lin.f - 160m] << 0.5dt
                --  elmnie[:lin.f - 100m] >> 0.5dt
            );

        # Gleis 4
        with layer = -1 track(:station :removed,
                elmnie[:lin.ls - 31m, :lin.ls - 30m] << 0.5dt
            --  elmnie[:lin.ls + 30m, :lin.ln - 30m] << 1.5dt
        );
            with layer = -1 track(:station :removed,
                    elmnie[:lin.ln - 90m] << 1.5dt
                --  elmnie[:lin.ln - 30m] << 0.5dt
            );

        # Gleis 6
        track(:station,
                elmnie[:ffle - 40m, :ffle] >> 1.5dt
            --  elmnie[:ffle + 40m, :lin - 200m] >> 2.5dt
            --  elmnie[:lin - 160m, :lin - 0.5sw - 40m] >> 1.5dt
            --  elmnie[:lin - 0.5sw, :lin - 0.49sw] >> 0.5dt
        );

        marker(:de.bbf :right, elmnie[:lin] >> 0.5dt);
        with layer = -1 marker(:de.bf :removed :right, elmnie[:lin] >> 0.5dt);
        station(:top :left_align, elmnie[:lin + 1.5sw] >> 0.5dt >> 0.8sh,
            span(:bold, "Lindholm"),
            hbox(:left:top,
                vbox(:right:top,
                    span(:closed, " 1001: "),
                    span(:open, "1210: ")
                ),
                vbox(:right:top,
                    span(:closed, "36,"),
                    span(:open, "194,")
                ),
                vbox(:left:top,
                    span(:closed, "06"),
                    span(:open, "15 ")
                ),
                vbox(:left:top,
                    span(:closed, ""),
                    span(:removed, "(157,62)")
                )
            )
        );
    }


    with link = "line.de.1210" {
        track(:first :double, elmnie[:lin.f, :nie.a]);
        with layer = 1 line_badge(:open, elmnie[:lin + 2.0km], "1210");
    }


    with link = "point.de.Niebüll" {
        # Gl. 1.
        track(:station :open,
                elmnie[:nie.ns - 3.0dl, :nie] << 1.5dt
            --  elmnie[:nie, :nie.nf + 1.0dl] << 1.5dt
            --  elmnie[:nie.nf + 2.0dl, :nie.nf + 2.1dl] << 0.5dt
        );

        # Gl. 2. Richtung Westerland
        track(:first :station :open, elmnie[:nie.a, :nie.f] << 0.5dt);

        # Gl. 3.
        track(:first :station :open,
                elmnie[:nie.a, :nie.nf + 2.0dl] >> 0.5dt
            --  elmnie[:nie.nf + 3.0dl, :nie.nf + 3.1dl] << 0.5dt
        );

        # Gl. 4.
        track(:first :station :open,
                elmnie[:nie.ns - 1.1dl, :nie.ns - 1.0dl] >> 0.5dt
            --  elmnie[:nie.ns        , :nie.nf + 7.0dl] >> 1.5dt
            ..  niesud[:nie.f + 3dl, :nie.ff        ] << 0.5dt
        );

        # Gl. 5.
        track(:station :open,
                elmnie[:nie.a,          :nie.r  + 4.0dl] >> 1.5dt
            ..  elmnie[:nie.ns - 2.0dl, :nie.nf + 1.0dl] >> 2.5dt
        );

        # Gl. 6
        track(:station :open,
                elmnie[:nie.r  + 1.9dl, :nie.r  + 2.0dl] >> 1.5dt
            --  elmnie[:nie.r  + 3.0dl, :nie.r  + 4.0dl] >> 2.5dt
            ..  elmnie[:nie.ns + 2.0dl, :nie.nf        ] >> 3.5dt
        );

        # Gl. 7
        track(:station :open,
                elmnie[:nie.r  - 0.1dl, :nie.r         ] >> 1.5dt
            --  elmnie[:nie.r  + 4.0dl, :nie.r  + 4.1dl] >> 4.5dt
            ..  elmnie[:nie.ns + 2.0dl, :nie.nf - 2.0dl] >> 5.5dt
            --  elmnie[:nie.nf + 2.0dl, :nie.nf + 2.1dl] >> 1.5dt
        );

        # Gl. 11 - 18
        track(:station :open,
                elmnie[:nie.ns - 0.1dl, :nie.ns] << 2.5dt
            --  elmnie[:nie.ns + 2.0dl, :nie - 0.6sw] << 4.5dt
        );
        track(:station :open, elmnie[:nie.ns + 1.0dl, :nie - 0.6sw] << 3.5dt);

        # Gl. (21 -) 10.
        track(:station :removed, elmnie[:nie.a, :nie.r] << 1.5dt);
        track(:station :open,
                elmnie[:nie.r, :nie.r + 1.0dl] << 1.5dt
            ..  elmnie[:nie.ns - 3.0dl, :nie - 0.6sw] << 2.5dt
        );

        # Gl. 22
        track(:station :open,
                elmnie[:nie.nf + 5.9dl, :nie.nf + 6.0dl] >> 1.5dt
            --  elmnie[:nie.nf + 7.0dl, :nie.nf + 7.1dl] >> 2.5dt
            ..  niesud[:nie.f  + 3.0dl, :nie.ff] >> 0.5dt
        );

        # Gl. 23
        track(:station :open,
                elmnie[:nie.nf + 3.9dl, :nie.nf + 4.0dl] >> 1.5dt
            --  elmnie[:nie.nf + 6.0dl, :nie.nf + 7.0dl] >> 3.5dt
            ..  niesud[:nie.f + 3dl, :nie.f + 3.1dl] >> 1.5dt
        );

        # Gleisverbindungen Südkopf
        # W2 - W3
        track(:station :open,
                elmnie[:nie.r  + 0.9dl, :nie.r  + 1.0dl] >> 1.5dt
            --  elmnie[:nie.r  + 2.0dl, :nie.f  + 2.1dl] >> 0.5dt
        );
        # W5 - W6
        track(:station :open,
                elmnie[:nie.ns - 6.1dl, :nie.ns - 6.0dl] >> 0.5dt
            --  elmnie[:nie.ns - 5.0dl, :nie.ns - 4.9dl] << 0.5dt
        );
        # W7 - W13 - W9
        track(:station :open,
                elmnie[:nie.ns - 4.1dl, :nie.ns - 4.0dl] << 0.5dt
            --  elmnie[:nie.ns - 2.0dl, :nie.ns - 1.9dl] << 2.5dt
        );
        # W8 - W11
        track(:station :open,
                elmnie[:nie.ns - 3.1dl, :nie.ns - 3.0dl] << 0.5dt
            --  elmnie[:nie.ns - 2.0dl, :nie.ns - 1.9dl] >> 0.5dt
        );

        # Gleisverbindungen Nordkopf
        # W53 - W71 - W61
        track(:station :open,
                elmnie[:nie.nf + 2.9dl, :nie.nf + 3.0dl] >> 1.5dt
            --  elmnie[:nie.nf + 4.0dl, :nie.nf + 5.0dl] >> 0.5dt
            --  elmnie[:nie.nf + 6.0dl, :nie.nf + 6.1dl] << 0.5dt
        );
        # W56 - W55
        track(:station :open,
                elmnie[:nie.nf + 3.9dl, :nie.nf + 4.0dl] << 0.5dt
            --  elmnie[:nie.nf + 5.0dl, :nie.nf + 5.1dl] << 1.5dt
        );

        # Bw Autozug
        track(:station :open,
                elmnie[:nie.nf + 5.0dl, :nie.nf + 5.1dl] >> 0.5dt
            ..  niesud[:nie.f + 5.0dl - 0.5sw, :nie.f + 5.1dl - 0.3sw] << 2dt
        );
        marker(:de.bw :open :left, niesud[:nie.f + 5dl] << 1dt);

        marker(:de.bf :open :left, elmnie[:nie] << 1.5dt);
        with layer = -1 station(:right :left_align :open,
            elmnie[:nie - 0.4sw] >> 6.5dt,
            span(:medium :bold, "Niebüll"),
            hbox(:left :top,
                span(:xsmall, "  "),
                vbox(:right :top,
                    span(:xsmall, "1200: "),
                    span(:xsmall, "1201: "),
                    span(:xsmall, "1210: ")
                ),
                vbox(:right :top,
                    span(:xsmall, "198,"),
                    span(:xsmall, "162,"),
                    span(:xsmall, "198,")
                ),
                vbox(:left :top,
                    span(:xsmall, "45"),
                    span(:xsmall, "00"),
                    span(:xsmall, "45,")
                ),
                vbox(:left :top,
                    span(:xsmall :closed, " (0,00)"),
                    span(:xsmall, ""),
                    span(:xsmall :closed, " (162,02")
                )
            )
        );

        # Kleinbahnhof
        track(:third :station :open,
                elmnie[:nie - 1sw, :nie] << 5.5dt
        );
        track(:station :open,
                elmnie[:nie, :nie.nf] << 5.5dt
            --  elmnie[:nie.nf + 4.0dl, :nie.f] << 1.5dt
        );
        marker(:de.bf :open :left, elmnie[:nie] << 5.5dt);
        station(:left :open, elmnie[:nie - 0.6sw] << 5.5dt << 1.3sh,
            vbox(:center :bottom,
                span(:medium :bold :gone, "Niebüll Kleinb"),
                span(:medium :bold :gone, "Niebüll NVAG"),
                span(:medium :bold, "Niebüll neg")
            ),
            "9100: ??"
        );
    }
}

