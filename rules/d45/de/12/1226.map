# DE 1226.  Hamburg-Blankenese - Wedel (Holst)
#
let blawed = path("path.de.1226");

with detail = [4, 5] {
    # point.de.Hamburg-Blankenese: de.1224


    with link = "line.de.1226" {
        with detail = 4 {
            track(:first :rail,
                    path("path.de.1224")[:fwed - 0.1dl, :fwed - 0.2dl] << 1.5dt
                ..  blawed[:aa, :ise - 1sw]
            );
        }
        with detail = 5 {
            track(:first :rail,
                    path("path.de.1224")[:fwed - 50m, :fwed - 51m] << 1.5dt
                ..  blawed[:aa, :ise - 1sw]
            );
        }
    }


    with link = "point.de.Hamburg-Iserbrook" {
        track(:first:station :rail, blawed[:ise - 1sw, :ise + 1sw]);
        marker(:de.hp :right, blawed[:ise]);
        station(:top, blawed[:ise] >> 1.6sw,
            hbox(:center:base, span(:light, "H.-"), "Iserbrook"),
            "11,26"
        );
    }


    with link = "line.de.1226" {
        track(:first :rail, blawed[:ise + 1sw, :sul.a]);
    }


    with link = "point.de.Hamburg-Sülldorf" {
        track(:first:station :rail, blawed[:sul.a, :sul.f]);
        track(:station :rail,
                blawed[:sul.a + 99m, :sul.a + 100m]
            --  blawed[:sul.a + 100m + 1dl, :sul.f - 100m - 1dl] >> 1dt
            --  blawed[:sul.f - 100m, :sul.f - 99m]
        );
        marker(:de.bf :left, blawed[:sul]);
        station(:bottom, blawed[:sul] << 1.2sw,
            hbox(:center:base, span(:light, "H.-"), "Sülldorf"),
            "12,62"
        );
    }


    with link = "line.de.1226" {
        track(:first :rail, blawed[:sul.f, :riu - 1sw]);
        with layer = 1 line_badge(:open, blawed[:sul + 1.0km], "1226");
    }


    with link = "point.de.Hamburg-Rissen-Üst" {
        track(:first:station :rail, blawed[:riu - 1sw, :riu + 1sw]);
        track(:first:station :rail,
                blawed[:riu - 1m, :riu]
            --  blawed[:riu + 1dl, :riu + 1sw] >> 1dt
        );
        marker(:de.uest :left, blawed[:riu]);
        station(:top, blawed[:riu] >> 2.5dt,
            "H.-Rissen Üst", "14,92"
        );
    }


    with link = "point.de.Hamburg-Rissen-Üst" {
        track(:first:station :double :rail,
                blawed[:riu + 1sw, :ris + 1sw] >> 0.5dt
        );
        marker(:de.hp :left, blawed[:ris]);
        with layer = -1 marker(:de.bf :gone :left, blawed[:ris]);
        label(blawed[:ris - 1sw] << 1.0sw,
            vbox(:right:top,
                span(:medium :former, "Rissen"),
                hbox(:right:top,
                    vbox(:center:top,
                        hbox(:right:base :medium,
                            span(:light, "H.-"), "Rissen Hp"
                        ),
                        span(:xsmall, "15,30")
                    )
                )
            )
        );
    }


    with link = "line.de.1226" {
        track(:first :double :rail,
                blawed[:ris + 1sw, :ris.ff - 1dt] >> 0.5dt
            ..  blawed[:ris.fff + 1dt, :rio - 1sw] << 0.5dt
        );
    }


    with link = "point.de.Hamburg-Rissen-Ölweiche" {
        track(:first:station :double :rail,
                blawed[:rio - 1sw, :rou - 1sw] << 0.5dt
        );
        marker(:de.gbf :left, blawed[:rio] << 1dt);
        station(:bottom, blawed[:rio] << 1dt << 1.2sw,
            "H.-Rissen Ölweiche", "17,15"
        );
    }


    with link = "point.de.Hamburg-Rissen-Ölweiche-Üst" {
        track(:first:station :rail, blawed[:rou - 1sw, :rou + 1sw]);
        track(:first:station :rail,
                blawed[:rou - 1sw, :rou - 1dl] << 1dt
            --  blawed[:rou, :rou + 0.1dl]
        );
        marker(:de.uest :right, blawed[:rou]);
        station(:top, blawed[:rou] >> 1.2sw,
            "H.-Rissen Ölweiche (Üst)", "17,56"
        );
    }


    with link = "line.de.1226" {
        track(:first :rail, blawed[:rou + 1sw, :wed.a]);
    }


    with link = "point.de.Wedel-Holst" {
        # Gl. 1
        track(:first:station :rail, blawed[:wed.a, :wed]);
            track(:station :rail,
                    blawed[:wed - 250m - 4dl]
                --  blawed[:wed - 250m - 3dl] << 1dt
            );

        # Gl. 15 - Gl. 2
        track(:station :rail, blawed[:wed.a, :wed] << 1dt);

        # Gl. 18 - Gl. 20
        track(:station :rail, blawed[:wed.a, :wed] << 2dt);
            track(:station :rail,
                    blawed[:wed - 250m - 2dl] << 2dt
                --  blawed[:wed - 250m]
            );

        marker(:de.bf :right, blawed[:wed - 0.5sw]);
        station(:left, blawed[:wed] >> 1.2sw,
            hbox(:right:base, span(:bold, "Wedel "), "(Holst)"),
            "1226: 18,96"
        );
    }
}

