with detail = 1 {
    with link = "line.se.NAS" {
        track(:first :g891 :pax :removed, path("d1.se.kas")[:kum.ya, :ark]);
    }

    with link = "line.se.KBH" {
        track(:first :cat:ac15 :pax, path("d1.se.kbh")[:kol.yb, :bra.yk]);
    }

    with link = "line.se.KBK" {
        track(:first :g891 :pax :removed, path("d1.se.kbk")[:kal.yk, :kin]);
    }

    with link = "line.se.KEL" {
        let ke = path("d1.se.kel");

        track(:first :pax :suspended, ke[:kli.ye, :lju]);
        track(:first :pax :removed, ke[:lju, :esl.yl]);
    }

    with link = "line.se.KFK" {
        track(:first :pax :removed, path("d1.se.kfk")[:kil.yk, :fry]);
    }

    with link = "line.se.KFS" {
        track(:first :cat:ac15 :nopax, path("d1.se.kfs")[:kil.ys, :sov.yk]);
    }

    with link = "line.se.KGH" {
        track(:first :pax :removed, path("d1.se.kgh")[:kor.yg, :gry]);
    }

    with link = "line.se.KGK" {
        track(:first :pax :removed, path("d1.se.kgk")[:kar.yk, :kla.yk]);
    }

    with link = "line.se.KHB" {
        let kb = path("d1.se.khb");

        track(:first :cat:ac15 :seasonal, kb[:kri, :nyk.yd]);
        with railway = :first :pax :removed {
            track(kb[:her.yp, :nyh.yf]);
            track(kb[:nyh.yf, :per.yf]);
            track(kb[:per, :per.yg]);
            track(kb[:per.yg, :nev.yh]);
            track(kb[:nev.yh, :van.ys]);
        }
        track(:first :nopax, kb[:van.ys, :van.yb]);
        with railway = :first :pax :removed {
            track(kb[:van.yb, :bri.ym]);
            track(kb[:bri.ym, :vik]);
        }
        track(:first :nopax, kb[:vik, :mos.ya]);
        track(:first :nopax, kb[:mos.ya, :mor]);
        track(:first :cat:ac15 :pax, kb[:mor, :mor.yr]);
        with railway = :first :tourist {
            track(kb[:mor.yr, :ors.yb]);
            track(kb[:ors.yb, :sve.yh]);
            track(kb[:sve.yh, :bru.ym]);
        }
    }

    with link = "line.se.KHM" {
        let km = path("d1.se.khm");

        with railway = :first :double :cat:ac15 :pax {
            track(km[:kat.yn, :nas.yh]);
            track(km[:nas.yh, :mal]);

            with link = "point.se.Malmö-central" {
                slabel(:left :bold, km[:mal] + (0.8dt, -1dt), "Malmö");
            }
        }
    }

    with link = "line.se.KHT" {
        track(:first :pax :removed, path("d1.se.kht")[:kla, :tyg.yk]);
    }

    with link = "line.se.KMT" {
        let kt = path("d1.se.kmt");

        with railway = :first :g891 :pax :removed {
            track(kt[:kas.yb, :lju.yp]);
            track(kt[:lju.yp, :tor.yg]);
        }
    }

    with link = "line.se.KMV" {
        let kb = path("d1.se.kmb");

        with railway = :first :pax {
            track(kb[:kas.yb, :san.yf]);
            track(kb[:san.yf, :san.ym]);
            track(kb[:san.ym, :rud.yb]);
            track(kb[:rud.yb, :rud.yo]);
            track(kb[:rud.yo, :ber.yk]);
        }
    }

    with link = "line.se.KMV" {
        track(:first :g600 :pax :removed, path("d1.se.kmv")[:kol, :vir]);
    }

    with link = "line.se.KPS" {
        track(:first :nopax, path("d1.se.kps")[:kvi.yp, :pau]);
    }

    with link = "line.se.KRH" {
        track(:first :g891 :nopax :removed, path("d1.se.krh")[:kna.yr, :ram]);
    }

    with link = "line.se.KRB" {
        track(:first :g891 :pax :removed, path("d1.se.krb")[:klo.yb, :bor]);
    }

    with link = "line.se.KRO" {
        track(:first :pax :removed, path("d1.se.kro")[:kar.yo, :ove]);
    }

    with link = "line.se.KSG" {
        let kg = path("d1.se.ksg");

        with railway = :first :cat:ac15 :pax {
            track(kg[:kri.yk, :krg.ya]);
            track(kg[:krg.ya, :sol.ya]);
            track(kg[:sol.ya, :sol.yh]);
            track(kg[:sol.yh, :san.yo]);
            track(kg[:san.yo, :kar.yv]);
            track(kg[:kar.yv, :bre.yv]);
            track(kg[:bre.yv, :ron.yh]);
            track(kg[:ron.yh, :gul.yk]);
        }
    }

    with link = "line.se.KSK" {
        let kk = path("d1.se.ksk");

        with railway = :first :pax :removed {
            track(kk[:kri.ys, :lan.ya]);
            track(kk[:lan.ya, :eve.ya]);
            track(kk[:eve.ya, :eve.yt]);
            track(kk[:eve.yt, :bro]);
        }
        track(:first :museum, kk[:bro, :sto.yt]);
        with railway = :first :nopax {
            track(kk[:sto.yt, :gar.yb]);
        }
        track(:first :pax :removed, kk[:gar.yk, :kop.yg]);
    }   

    with link = "line.se.KTB" {
        track(:first :pax, path("d1.se.ktb")[:kil.yc, :tor]);
    }

    with link = "line.se.KUR" {
        let kk = path("d1.se.kur");

        track(:first :g1093 :pax :removed, kk[:kop.yr, :rid]);
        track(:first :g1093 :nopax :removed, kk[:rid, :kal]);
    }

    with link = "line.se.KVA" {
        track(:first :cat:ac15 :nopax, path("d1.se.kva")[:koi, :ait]);
    }

    with link = "line.se.KVB" {
        track(:first :pax :removed, path("d1.se.kvb")[:kul.yb, :bis]);
    }

    with link = "line.se.KVL" {
        let kv = path("d1.se.kvl");

        with railway = :first :g1067 :pax :removed {
            track(kv[:kar.yv, :nor.yk]);
            track(kv[:nor.yk, :vis.yk]);
        }
    }

    with link = "line.se.KYK" {
        track(:first :pax :removed, path("d1.se.kyk")[:akr.yk, :kar]);
    }

    with link = "line.se.KYX" {
        track(:side :nopax, path("d1.se.kyx")[:kum.yy, :nar]);
    }
}

