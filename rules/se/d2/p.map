# SE PBG.  Persberg - Persbergs gruva
with detail = 2 {
    let pg = path("d2.se.pbg");

    with railway = :second :nopax :removed {
        with link = "line.se.PBG" {
            track(pg[:per.yg, :per.yg + 1km]);
            with zoom = :high line_label(:left:sw, pg[:per.yg + 1km], "PBG");
            track(pg[:per.yg + 1km, :peg]);
        }

        with link = "point.se.Persbergs-gruva" {
            statdot(pg[:peg]);
            slabel(:right, pg[:peg] + (1.5dt, 1dt), "P:s gruva");
        }
    }
}


# SE PBO.  Pålsboda - Örebro södra
with detail = 2 {
    let po = path("d2.se.pbo");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.PBO" {
            track(po[:pal, :pal + 16km]);
            line_label(:right:w, po[:pal + 16km], (0dt, -0.15dt), "PBO");
            track(po[:pal + 16km, :ors.yp]);
        }
    }
}


# SE PEX.  Peuravaara - Peuravaara 432
with detail = 2 {
    with link = "line.se.PEX" {
        track(:first :cat:ac15 :pax, path("d2.se.pex")[:peu.yk, :kim.yn]);
    }
}


# SE PHM.  Piteå - Haraholmen
with detail = 2 {
    let ph = path("d2.se.phm");

    with railway = :second :cat:ac15 :nopax {
        with link = "line.se.PHM" {
            track(ph[:pit.yh, :pit.yh + 4.5km]);
            line_label(:left:sw, ph[:pit.yh + 4.5km], "PHM");
            track(ph[:pit.yh + 4.5km, :har]);
        }

        with link = "point.se.Haraholmen" {
            statdot(ph[:har]);
            slabel(:bottom, ph[:har] + (0.5dt, 0.8dt), "Haraholmen");
        }
    }
}


# SE PHT.  Pershyttan växel - Pershyttan övre
with detail = 2 {
    let pp = path("d2.se.pht");

    with railway = :side :nopax {
        with link = "point.se.Pershyttan-övre" {
            statdot(pp[:per]);
            with zoom = :high slabel(:bottom, pp[:per] + (0dt, 0.8dt),
                "Pershyttan"
            );
        }

        with link = "line.se.PHT" {
            track(pp[:per, :pev.yp]);
        }
    }
}


# SE PKI.  Peuravaara - Kiruna malmbangård
with detail = 2 {
    let pk = path("d2.se.pki");

    with railway = :second :cat:ac15 :nopax {
        with link = "line.se.PKI" {
            track(pk[:peu.ys, :peu.ys + 2.6km]);
            line_label(:right:n, pk[:peu.ys + 2.6km], "PKI");
            track(pk[:peu.ys + 2.6km, :kim.ys]);
        }
    }
}


# SE PNK.  Pålsboda - Norrköpings östra
with detail = 2 {
    let pn = path("d2.se.pnk");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.PNK" {
            track(pn[:pal, :fin.yy]);
            line_label(:left:w, pn[:pal + 8km], (0dt, -0.1dt), "PNK");
            line_label(:right:n, pn[:fin.yy - 12km], (-0.2dt, 0dt), "PNK");
        }
    }

    with railway = :first :nopax {
        with link = "point.se.Finspång" {
            track(pn[:fin.yy, :fin]);
            statdot(pn[:fin]);
            slabel(:ne, pn[:fin] + (-1dt, 0.3dt), "Finspång");
        }

        with link = "line.se.PNK" {
            track(pn[:fin, :fin + 6km]);
            line_label(:right:e, pn[:fin + 6km], (0dt, 0.15dt), "PNK");
            track(pn[:fin + 6km, :ska]);
        }
    }

    with railway = :first :cat:ac15 :nopax {
        with link = "point.se.Skärblacka" {
            statdot(pn[:ska]);
            slabel(:ne, pn[:ska] + (0dt, 0.5dt), "Skärblacka");
        }

        with link = "line.se.PNK" {
            track(pn[:ska, :kim.yf]);
        }
    }

    with railway = :first :g891 :pax :removed {
        with link = "line.se.PNK" {
            track(pn[:kim.yn, :kim.yn + 7km]);
            line_label(:right:nw, pn[:kim.yn + 7km], "PNK");
            track(pn[:kim.yn + 7km, :noo.yk]);
        }

        with link = "point.se.Norrköpings-östra" {
            track(pn[:noo.yk, :noo]);
            statdot(pn[:noo]);
            with zoom = :high slabel(:left, pn[:noo] + (-1dt, 1.5dt), "ö.");
        }
    }
}

