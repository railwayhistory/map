# SE HAF.  Hillared - Axelfors
with detail = 2 {
    let ha = path("d2.se.haf");

    with railway = :first :pax :removed {
        with link = "line.se.HAF" {
            track(ha[:hil.ya, :axe - 9.8km]);
            line_label(:right:e, ha[:axe - 9.8km], "HAF");
            track(ha[:axe - 9.8km, :axe]);
        }

        with link = "point.se.Axelfors" {
            statdot(ha[:axe]);
            slabel(:left, ha[:axe] + (-1.7dt, 0.5dt), "Axelfors");
        }
    }
}


# SE HAJ.  Hällnäs - Arvidsjaur
with detail = 2 {
    let ha = path("d2.se.haj");

    with railway = :first :nopax {
        with link = "line.se.HAJ" {
            track(ha[:hal.yl, :hal.yl + 12.4km]);
            line_label(:left:ne, ha[:hal.yl + 12.4km], "HAJ");
            track(ha[:hal.yl + 12.4km, :lyc]);
            line_label(:right:s, ha[:lyc - 10.5km], (0.8dt, 0dt), "HAJ");
        }

        with link = "point.se.Lycksele" {
            statdot(ha[:lyc]);
            slabel(:left, ha[:lyc] + (-1.5dt, 1dt), "Lycksele");
        }

        with link = "line.se.HAJ" {
            track(ha[:lyc, :lyc + 34km]);
            line_label(:right:sw, ha[:lyc + 34km], "HAJ");
            track(ha[:lyc + 34km, :sto.yo - 6km]);
            line_label(:left:n, ha[:sto.yo - 6km], (-0.1dt, 0dt), "HAJ");
            track(ha[:sto.yo - 6km, :sto.yo]);
            track(ha[:sto.yo, :sto.yn]);
        }
    }

    with railway = :first :tourist {
        with link = "point.se.Storuman" {
            track(:station, ha[:sto.yn, :sto]);
            statdot(ha[:sto]);
            slabel(:left, ha[:sto] + (-1.5dt, 0dt), "Storuman");
        }

        with link = "line.se.HAJ" {
            track(ha[:sto, :sto + 7km]);
            line_label(:left:se, ha[:sto + 7km], "HAJ");
            track(ha[:sto + 7km, :sto + 76.5km]);
            line_label(:left:se, ha[:sto + 76.5km], "HAJ");
            track(ha[:sto + 76.5km, :arv.ys - 7.4km]);
            line_label(:left:s, ha[:arv.ys - 7.4km], "HAJ");
            track(ha[:arv.ys - 7.4km, :arv.ys]);
        }
    }
}


# SE HBF.  Hallsberg - Frövi
with detail = 2 {
    let hf = path("d2.se.hbf");

    with railway = :first :double :cat:ac15 :pax {
        with link = "line.se.HBF" {
            track(hf[:hal.yf, :hal.yf + 3.7km]);
            line_label(:left:e, hf[:hal.yf + 3.7km], "HBF");
            track(hf[:hal.yf + 3.7km, :kum.yy]);
        }

        with link = "point.se.Kumla" {
            track(:station, hf[:kum.yy, :kum]);
            statdot(hf[:kum]);
            slabel(:left, hf[:kum] + (-1.5dt, 0.8dt), "Kumla");
        }

        with link = "line.se.HBF" {
            track(hf[:kum, :kum + 8km]);
            line_label(:right:w, hf[:kum + 8km], "HBF");
            track(hf[:kum + 8km, :ors.yo]);
            track(hf[:ors.yo, :ors.yv]);
            track(hf[:ors.yv, :ore]);
        }

        with link = "point.se.Örebro-central" {
            statdot(hf[:ore]);
            slabel(:left, hf[:ore] + (-1.5dt, 0.3dt), "Örebro c.");
        }

        with link = "line.se.HBF" {
            track(hf[:ore, :ore + 4.3km]);
            line_label(:left:e, hf[:ore + 4.3km], "HBF");
            track(hf[:ore + 4.3km, :hov]);
        }

        with link = "point.se.Hovsta" {
            statdot(:nopax, hf[:hov]);
            slabel(:left :nopax, hf[:hov] + (-1.5dt, 0.8dt), "Hovsta");
        }

        with link = "line.se.HBF" {
            track(hf[:hov, :hov.yj]);
            track(hf[:hov.yj, :erv]);
        }

        with link = "point.se.Ervalla" {
            track(:station, hf[:erv, :erv.yn]);
            statdot(hf[:erv]);
            slabel(:right, hf[:erv] + (1.5dt, 1dt), "Ervalla")
        }

        with link = "line.se.HBF" {
            track(hf[:erv.yn, :erv.yn + 4km]);
            line_label(:left:se, hf[:erv.yn + 4km], "HBF");
            track(hf[:erv.yn + 4km, :fro]);
        }

        with link = "point.se.Frövi" {
            track(:station, hf[:fro, :fro.yg]);
            statdot(hf[:fro]);
            slabel(:bottom, hf[:fro] + (-0.5dt, 1.3dt), "Frövi");
        }
    }
}


# SE HBH.  Högbränna - Hörnsjö
with detail = 2 {
    let hh = path("d2.se.hbh");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.HBH" {
            track(hh[:hog.y, :hor.y - 1.25km]);
            line_label(:left:se, hh[:hor.y - 1.25km], "HBH");
            track(hh[:hor.y - 1.25km, :hor.y]);
        }
    }
}


# SE HBM.  Hallsberg - Mjölby
with detail = 2 {
    let hm = path("d2.se.hbm");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.HBM" {
            track(hm[:hal.yf, :sky]);
            line_label(:left:w, hm[:hal.yf + 2.2km], (0dt, 0.3dt), "HBM");
        }

        with link = "point.se.Skymossen" {
            statdot(:nopax, hm[:sky]);
            slabel(:right :nopax :light, hm[:sky] + (1.5dt, 1dt),
                "Skymossen"
            );
        }

        with link = "line.se.HBM" {
            track(hm[:sky, :ste - 2km]);
            line_label(:left:w, hm[:ste - 2km], "HBM");
            track(hm[:ste - 2km, :ste]);
        }
    }

    with railway = :first :double :cat:ac15 :pax {
        with link = "line.se.HBM" {
            track(hm[:ste, :ler]);
        }

        with link = "point.se.Lerbäck" {
            statdot(:removed, hm[:ler]);
            slabel(:right :removed, hm[:ler] + (1.5dt, 0.8dt), "Lerbäck");
        }

        with link = "line.se.HBM" {
            track(hm[:ler, :mot - 20.5km]);
            line_label(:right:e, hm[:mot - 20.5km], "HBM");
            track(hm[:mot - 20.5km, :mot]);
        }

        with link = "point.se.Motala-central" {
            statdot(hm[:mot]);
            slabel(:left, hm[:mot] + (-1.5dt, 0.8dt), "Motala c.");
        }

        with link = "line.se.HBM" {
            track(hm[:mot, :fag.yo - 4km]);
            line_label(:left:w, hm[:fag.yo - 4km], "HBM");
            track(hm[:fag.yo - 4km, :fag.yo]);
        }

        with link = "point.se.Fågelsta" {
            track(hm[:fag.yo, :fag.yl]);
            statdot(:museum, hm[:fag]);
            slabel(:left :museum,
                hm[:fag.yo] + (-0.2km, -0.4km) + (-1.3dt, 0dt),
                "Fågelsta"
            );
        }

        with link = "line.se.HBM" {
            track(hm[:fag.yl, :ska.yb]);
        }

        with link = "point.se.Skänninge" {
            track(hm[:ska.yb, :ska.yv]);
            statdot(hm[:ska]);
            slabel(:right, hm[:ska] + (1.5dt, 1.0dt), "Skänninge");
        }

        with link = "line.se.HBM" {
            track(hm[:ska.yv, :ska.yv + 5km]);
            line_label(:left:sw, hm[:ska.yv + 5km], "HBM");
            track(hm[:ska.yv + 5km, :mjo.yh]);
        }
    }
}


# SE HFG.  Hällefors - Gravendal
with detail = 2 {
    let hg = path("d2.se.hfg");

    with railway = :first :g802 :pax :removed {
        with link = "line.se.HFG" {
            track(hg[:hal.yg, :hal.yg + 4.4km]);
            line_label(:left:e, hg[:hal.yg + 4.4km], "HFG");
            track(hg[:hal.yg + 4.4km, :gra.yh - 6.5km]);
            line_label(:left:e, hg[:gra.yh - 6.5km], "HFG");
            track(hg[:gra.yh - 6.5km, :gra.yh]);
        }
    }
}


# SE HHA.  Hässleholm - Åhus hamn
with detail = 2 {
    let ha = path("d2.se.hha");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.HHA" {
            track(ha[:has.ya, :has.ya + 12.7km]);
            line_label(:left:s, ha[:has.ya + 12.7km], (0.7dt, 0dt), "HHA");
            track(ha[:has.ya + 12.7km, :kar.yh]);
        }

        with link = "point.se.Karpalund" {
            track(ha[:kar.yh, :kar]);
            statdot(:removed, ha[:kar]);
            slabel(:ne :removed, ha[:kar] + (-0.7km, 0.1km) + (-1dt, 0.8dt),
                "Karpalund"
            );
        }

        with link = "line.se.HHA" {
            track(ha[:kar, :kri.yn]);
            track(ha[:kri.yn, :kri.yk]);
        }

        with link = "point.se.Kristianstads-central" {
            track(ha[:kri.yk, :kri.ys]);
            statdot(ha[:kri]);
            slabel(:right, ha[:kri] + (1.5dt, 0.8dt),
                hbox(:left:base, span(:bold, "Kristianstad"), " c.")
            );
        }
    }

    with railway = :first :nopax {
        with link = "line.se.HHA" {
            track(ha[:kri.ys, :kri.ys + 10km]);
            line_label(:left:w, ha[:kri.ys + 10km], "HHA");
            track(ha[:kri.ys + 10km, :ahu]);
        }

        with link = "point.se.Åhus" {
            statdot(ha[:ahu]);
            slabel(:right, ha[:ahu] + (1.5dt, 1dt), "Åhus");
        }
    }
}


# SE HKB.  Hallanda - Kättilsbyn
with detail = 2 {
    let hk = path("d2.se.hkb");

    with railway = :first :pax :removed {
        with link = "line.se.HKB" {
            track(hk[:hal.yk, :hal.yk + 1.6km]);
            line_label(:right:w, hk[:hal.yk + 1.6km], "HKB");
            track(hk[:hal.yk + 1.6km, :kat]);
        }

        with link = "point.se.Kättilsbyn" {
            statdot(hk[:kat]);
            slabel(:top, hk[:kat] + (0.5dt, -0.8dt), "Kättilsbyn");
        }
    }
}


# SE HMB.  Harmånger - Bergsjö
with detail = 2 {
    let hb = path("d2.se.hmb");

    with railway = :second :g891 :pax :removed {
        with link = "line.se.HMB" {
            track(hb[:har.yv, :har.yv + 2.2km]);
            line_label(:right:s, hb[:har.yv + 2.2km] + (-0.3dt, 0dt), "HMB");
            track(hb[:har.yv + 2.2km, :vat.yh]);
            track(hb[:vat.yh, :vat]);
        }

        with link = "point.se.Vattrångsby" {
            statdot(hb[:vat]);
            slabel(:ne, hb[:vat] + (-1dt, 0dt), "Vattrångsby");
        }

        with link = "line.se.HMB" {
            track(hb[:vat, :vat + 7.5km]);
            line_label(:right:sw, hb[:vat + 7.5km], "HMB");
            track(hb[:vat + 7.5km, :ber]);
        }

        with link = "point.se.Bergsjö" {
            statdot(hb[:ber]);
            slabel(:top, hb[:ber] + (0dt, -0.9dt), "Bergsjö");
        }
    }
}


# SE HNS.  Hamrångefjärden - Norrsundet
with detail = 2 {
    let hn = path("d2.se.hns");

    with railway = :second :nopax {
        with link = "line.se.HNS" {
            track(hn[:ham.yn, :aby.yh]);
            track(hn[:aby.yh, :aby.yh + 3km]);
            line_label(:left:se, hn[:aby.yh + 3km], "HNS");
            track(hn[:aby.yh + 3km, :nor]);
        }

        with link = "point.se.Norrsundet" {
            statdot(hn[:nor]);
            slabel(:right, hn[:nor] + (1.5dt, 1.3dt), "Norrsundet");
        }
    }
}


# SE HNV.  Hörken - Neva
with detail = 2 {
    let hl = path("d2.se.hnv.1");
    let ln = path("d2.se.hnv.2");

    with railway = :first :g802 :pax :removed {
        with link = "line.se.HNV" {
            track(hl[:hor.yn, :hor.yn + 9.5km]);
            line_label(:right:s, hl[:hor.yn + 9.5km], "HNV");
            track(hl[:hor.yn + 9.5km, :lov.yn]);
        }

        with link = "point.se.Lövsjöväxeln" {
            track(hl[:lov.yn, :lov]);
            statdot(hl[:lov]);
            slabel(:top, hl[:lov] + (0dt, -0.8dt), "Lövsjöväxeln");
        }

        with link = "line.se.HNV" {
            track(ln[:lov.yn, :lov.yn + 6km]);
            line_label(:left:nw, ln[:lov.yn + 6km], "HNV");
            track(ln[:lov.yn + 6km, :gra.yh]);
        }

        with link = "point.se.Gravendal" {
            track(ln[:gra.yh, :gra]);
            statdot(ln[:gra]);
            slabel(:left, ln[:gra] + (-1.5dt, 1dt), "Gravendal");
        }

        with link = "line.se.HNV" {
            track(ln[:gra, :gra + 5km]);
            line_label(:right:sw, ln[:gra + 5km], "HNV");
            track(ln[:gra, :nev.yh - 6.7km]);
            line_label(:right:s, ln[:nev.yh - 6.7km], (0.5dt, 0dt), "HNV");
            track(ln[:nev.yh - 6.7km, :nev.yh]);
        }
    }
}


# SE HRS.  Hallsbergs rangerbangård - Skymossen
with detail = 2 {
    let hs = path("d2.se.hrs");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.HRS" {
            track(hs[:har.ys, :har.ys + 2.5km]);
            line_label(:right:n, hs[:har.ys + 2.5km], (-0.5dt, 0dt), "HRS");
            track(hs[:har.ys + 2.5km, :sky]);
        }
    }
}


# SE HRT.  Hestra - Reftele
with detail = 2 {
    let hr = path("d2.se.hrt");

    with railway = :first :pax :removed {
        with link = "line.se.HRT" {
            track(hr[:hes.yr, :hes.yr + 6km]);
            line_label(:right:e, hr[:hes.yr + 6km], (0dt, -0.15dt), "HRT");
            track(hr[:hes.yr + 6km, :ref.yh - 8km]);
            line_label(:left:w, hr[:ref.yh - 8km], (0dt, 0.15dt), "HRT");
            track(hr[:ref.yh - 8km, :ref.yh]);
        }
    }
}


# SE HSM.  Härnösand - Mörtsal växel
with detail = 2 {
    let hm = path("d2.se.hsm");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.HSM" {
            track(hm[:has.ym, :has.ym + 2km]);
            track(:casing, hm[:has.ym + 2km, :has.ym + 4km]);
            track(hm[:has.ym + 4km, :mor - 7km]);
            line_label(:right:w, hm[:mor - 7km], "HSM");
            track(hm[:mor - 7km, :mor]);
        }

        with link = "point.se.Mörtsal" {
            statdot(:nopax, hm[:mor]);
            slabel(:right, hm[:mor] + (1.5dt, 0.8dt), "Mörtsal");
        }

        with link = "line.se.HSM" {
            track(hm[:mor, :mor.ya]);
        }
    }
}


# SE HUR.  Husums norra - Rågön
with detail = 2 {
    let hr = path("d2.se.hur");

    with railway = :second :cat:ac15 :nopax {
        with link = "line.se.HUR" {
            track(hr[:hun.yr, :hun.yr + 1.5km]);
            line_label(:left:w, hr[:hun.yr + 1.5km], "HUR");
            track(hr[:hun.yr + 1.5km, :rag]);
        }

        with link = "point.se.Rågön" {
            statdot(hr[:rag]);
            slabel(:bottom, hr[:rag] + (0dt, 0.9dt), "Rågön");
        }
    }
}


# SE HVB.  Hudiksvall - Vattrångsby
with detail = 2 {
    let hb = path("d2.se.hvb");

    with railway = :second :g891 :pax :removed {
        with link = "line.se.HVB" {
            track(hb[:hud.yb, :hud.yb + 3km]);
            line_label(:right:w, hb[:hud.yb + 3km], "HVB");
            track(hb[:hud.yb + 3km, :hud.xn]);

            track(hb[:hud.zn, :vat.yh - 4.75km]);
            line_label(:left:e, hb[:vat.yh - 4.75km], "HVB");
            track(hb[:vat.yh - 4.75km, :vat.yh]);
        }
    }
}


# SE HVV.  Hå - Vallvik
with detail = 2 {
    let hv = path("d2.se.hvv");

    with railway = :second :g891 :nopax :removed {
        with link = "point.se.Hå" {
            statdot(hv[:haa]);
            slabel(:left, hv[:haa] + (-1.3dt, 0.8dt), "Hå");
        }

        with link = "line.se.HVV" {
            track(hv[:haa, :haa + 3.7km]);
            line_label(:right:ne, hv[:haa + 3.7km], "HVV");
            track(hv[:haa + 3.7km, :val.xs]);
        }
    }

    with railway = :side :nopax {
        with link = "line.se.HVV" {
            track(hv[:val.xs, :vas]);
        }

        with link = "point.se.Vallvik-sulfitfabrik" {
            statdot(hv[:vas]);
            slabel(:right, hv[:vas] + (1.5dt, 1dt), "V. sulfitfabrik");
        }
    }
}

