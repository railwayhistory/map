# SE GAH.  Göteborg Central - Ängelholm
with detail = 2 {
    let ga = path("d2.se.gah");

    with railway = :first :double :cat:ac15 :pax {
        with link = "line.se.GAH" {
            track(ga[:got.ym, :gub.yo]);
            track(ga[:gub.yo, :alm]);
        }

        with link = "point.se.Almedal" {
            track(ga[:alm, :alm.yb]);
            statdot(:nopax, ga[:alm]);
            slabel(:right :nopax, ga[:alm] + (1.5dt, 0.5dt), "Almedal");
        }

        with link = "line.se.GAH" {
            track(ga[:alm.yb, :alm.yb + 12km]);
            line_label(:left:w, ga[:alm.yb + 12km], (0dt, -0.2dt), "GAH");
            with link = "line.se.GBM" line_label(
                :right:e :removed, ga[:alm.yb + 12km], (0dt, 0.2dt), "GBM"
            );
            track(ga[:alm.yb + 12km, :lin.ys]);
            track(ga[:lin.ys, :led.yn]);
            track(ga[:led.yn, :fja.yn]);
            track(ga[:fja.yn, :fja.yl]);
            track(ga[:fja.yl, :lek.yn]);
            track(ga[:lek.yn, :asa.yn]);
            track(ga[:asa.yn, :fri.ya]);
            track(ga[:fri.ya, :var.yb - 8km]);
            line_label(:right:e, ga[:var.yb - 8km], "GAH");
            with link = "line.se.GBM" line_label(
                :left:w :removed, ga[:var.yb - 8km], "GBM"
            );
            track(ga[:var.yb - 8km, :var.yb]);
        }

        with link = "line.se.Varberg" {
            track(:station, ga[:var.yb, :var]);
            statdot(ga[:var]);
            slabel(:left, ga[:var] + (-1.7dt, 0.8dt), "Varberg");
        }

        with link = "line.se.GAH" {
            track(ga[:var, :var.yo]);
            track(ga[:var.yo, :him.yv]);
            track(ga[:him.yv, :him.yv + 8km]);
            line_label(:right:e, ga[:him.yv + 8km], (0dt, 0.2dt), "GAH");
            track(ga[:him.yv + 8km, :tor.yn]);
        }

        with link = "point.se.Torebo" {
            track(ga[:tor.yn, :tor.ys]);
            statdot(:nopax, ga[:tor]);
            slabel(:left :nopax, ga[:tor] + (-1.5dt, 0.8dt), "Torebo");
        }

        with link = "line.se.GAH" {
            track(ga[:tor.ys, :fal]);
        }

        with link = "point.se.Falkenberg" {
            statdot(ga[:fal]);
            slabel(:right, ga[:fal] + (3dt, -0.8dt), "Falkenberg");
        }

        with link = "line.se.GAH" {
            track(ga[:fal, :fal + 5km]);
            line_label(:left:w, ga[:fal + 5km], (0dt, -0.4dt), "GAH");
            track(ga[:fal + 5km, :heb.yn]);
            track(ga[:heb.yn, :heb.ys]);
            track(ga[:heb.ys, :bra.yn]);
            track(ga[:bra.yn, :bra.ys]);
            track(ga[:bra.ys, :fur - 7km]);
            line_label(:right:ne, ga[:fur - 7km], "GAH");
            track(ga[:fur - 7km, :fur]);
            track(ga[:fur, :hal.yn]);
        }

        with link = "point.se.Halmstads-central" {
            track(ga[:hal.yn, :hal]);
            statdot(ga[:hal]);
            slabel(:ne, ga[:hal] + (-1dt, 0.8dt), "Halmstad c.");
        }

        with link = "line.se.GAH" {
            track(ga[:hal, :hal + 6.5km]);
            line_label(:left:sw, ga[:hal + 6.5km], "GAH");
            with link = "line.se.GBM" line_label(
                :right:ne :removed, ga[:hal + 6.5km], "GBM"
            );
            track(ga[:hal + 6.5km, :eld]);
        }

        with link = "point.se.Eldsberga" {
            track(ga[:eld, :eld.ya]);
            statdot(:nopax, ga[:eld]);
            slabel(:right :nopax, ga[:eld] + (1.5dt, 0.3dt), "Eldsberga");
        }

        with link = "line.se.GAH" {
            track(ga[:eld.ya, :eld.ya + 9km]);
            line_label(:right:e, ga[:eld.ya + 9km], "GAH");
            track(ga[:eld.ya + 9km, :ban.yh]);
            track(ga[:ban.yh, :ban.ya]);
            track(ga[:ban.ya, :via.yn]);
            track(ga[:via.yn, :via.yn + 3km]);
            line_label(:left:w, ga[:via.yn + 3km], (0dt, -0.2dt), "GAH");
            with link = "line.se.GBM" line_label(
                :right:e :removed, ga[:via.yn + 3km], (0dt, 0.2dt), "GBM"
            );
            track(ga[:via.yn + 3km, :ang.yk]);
        }

        with link = "point.se.Ängelholm" {
            track(ga[:ang.yk, :ang.yh]);
            statdot(ga[:ang]);
            slabel(:left, ga[:ang] + (-1.6dt, 1dt), "Ängelholm");
        }
    }
}


# SE GBM.  Göteborg Central - Arlöv (- Malmö)
with detail = 2 {
    let ga = path("d2.se.gbm");

    with railway = :first :pax :removed {
        with link = "line.se.GBM" {
            track(ga[:lin.ys, :led.yn]);
            track(ga[:fja.yn, :fja.yl]);
        }

        with link = "point.se.Fjärås" {
            track(ga[:fja.yl, :fja]);
            statdot(ga[:fja]);
            slabel(:right, ga[:fja] + (1.5dt, 0.3dt), "Fjärås");
        }

        with link = "line.se.GBM" {
            track(ga[:fja, :lek.yn]);
            track(ga[:asa.yn, :fri.ya]);
            track(ga[:var.yg, :var.yo]);
            track(ga[:him.yv, :tor.yn]);
            line_label(:left:w, ga[:him.yv + 8.7km], (0dt, -0.3dt), "GBM");
        }
    }

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.GBM" {
            track(ga[:tor.ys, :fal.yl]);
        }

        with link = "point.se.Falkenbergs-godsstation" {
            track(ga[:fal.yl, :fal]);
            statdot(ga[:fal]);
            slabel(:ne, ga[:fal] + (0.5dt, 0.8dt), "F. godsstation");
        }
    }

    with railway = :first :pax :removed {
        with link = "line.se.GBM" {
            track(ga[:fal, :fal + 3.6km]);
            line_label(:right:n, ga[:fal + 3.6km], (-0.5dt, 0dt), "GBM");
            track(ga[:fal + 3.6km, :heb.yn]);
            track(ga[:heb.ys, :bra.yn]);
            track(ga[:bra.ys, :hal.yn]);
            line_label(:right:e, ga[:bra.ys + 7.5km], "GBM");
        }
    }

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.GBM" {
            track(ga[:eld.ya, :eld.ya + 4km]);
            line_label(:left:sw, ga[:eld.ya + 4km], "GBM");
            track(ga[:eld.ya + 4km, :vei]);
        }

        with link = "point.se.Veinge" {
            track(ga[:vei, :vei.yh]);
            statdot(:pax :removed, ga[:vei]);
            slabel(:right :pax :removed, ga[:vei] + (1.3dt, 0dt), "Veinge");
        }
    }

    with railway = :first :pax :removed {
        with link = "line.se.GBM" {
            track(ga[:vei.yh, :vei.yh + 6km]);
            line_label(:left:nw, ga[:vei.yh + 6km], "GBM");
            track(ga[:vei.yh + 6km, :ban.yh]);
            track(ga[:ban.ya, :via.yn]);
        }
    }

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.GBM" {
            track(ga[:ang.yh, :ang.yh + 6.5km]);
            line_label(:left:sw, ga[:ang.yh + 6.5km], "GBM");
            track(ga[:ang.yh + 6.5km, :ast.yk]);
        }
    }

    with railway = :first :cat:ac15 :pax {
        with link = "point.se.Åstorp" {
            track(ga[:ast.yk, :ast.yr]);
            statdot(ga[:ast]);
            slabel(:left, ga[:ast] + (-1.3dt, -0.5dt), "Åstorp");
        }

        with link = "line.se.GBM" {
            track(ga[:ast.yr, :ast.yr + 4km]);
            line_label(:left:w, ga[:ast.yr + 4km], (0dt, -0.2dt), "GBM");
            track(ga[:ast.yr + 4km, :bil]);
        }

        with link = "point.se.Billesholm" {
            statdot(ga[:bil]);
            slabel(:right, ga[:bil] + (1.5dt, 0.8dt), "Billesholm");
        }

        with link = "line.se.GBM" {
            track(ga[:bil, :bil.yl]);
            track(ga[:bil.yl, :bil.yl + 11.5km]);
            line_label(:left:w, ga[:bil.yl + 11.5km], (0dt, -0.1dt), "GBM");
            track(ga[:bil.yl + 11.5km, :tec.yl]);
        }

        with link = "point.se.Teckomatorp" {
            track(ga[:tec.yl, :tec.ye]);
            statdot(ga[:tec]);
            slabel(:ne, ga[:tec] + (0.8dt, 0.8dt), "Teckomatorp");
        }

        with link = "line.se.GBM" {
            track(ga[:tec.ye, :tec.ye + 4km]);
            line_label(:left:w, ga[:tec.ye + 4km], "GBM");
            track(ga[:tec.ye + 4km, :kav.yn]);
        }

        with link = "point.se.Kävlinge" {
            track(:double, ga[:kav.yn, :kav.yt]);
            statdot(ga[:kav]);
            slabel(:right, ga[:kav] + (1.3dt, -1.3dt), "Kävlinge");
        }

        with link = "line.se.GBM" {
            track(ga[:kav.yt, :arl - 5.5km]);
            line_label(:right:e, ga[:arl - 5.5km], (0dt, -0.2dt), "GBM");
            track(ga[:arl - 5.5km, :arl]);
        }
    }
}


# SE GFH.  Göteborg Västgöta - Forshem
with detail = 2 {
    let gf = path("d2.se.gfh");

    with railway = :first :g891 :removed {
        with link = "line.se.GFH" {
            track(gf[:ols.yv, :ols.yv + 10km]);
            line_label(:left:s, gf[:ols.yv + 10km], "GFH");
            track(gf[:ols.yv + 10km, :bro]);
        }
    }

    with railway = :first :g891 :museum {
        with link = "point.se.Brobacka" {
            statdot(gf[:bro]);
            slabel(:left, gf[:bro] + (-1.5dt, 0.5dt), "Brobacka");
        }

        with link = "line.se.GFH" {
            track(gf[:bro, :bro + 6.35km]);
            line_label(:right:w, gf[:bro + 6.35km], "GFH");
            track(gf[:bro + 6.35km, :gra]);
        }

        with link = "point.se.Gräfsnäs" {
            statdot(gf[:gra]);
            slabel(:left, gf[:gra] + (-1.5dt, 0.8dt), "Gräfsnäs");
        }
    }

    with railway = :first :g891 :removed {
        with link = "line.se.GFH" {
            track(gf[:gra, :nos.yt - 5km]);
            line_label(:right:nw, gf[:nos.yt - 5km], "GFH");
            track(gf[:nos.yt - 5km, :nos.yt]);
        }

        with link = "point.se.Nossebro" {
            track(gf[:nos.yt, :nos]);
            statdot(gf[:nos]);
            slabel(:nw, gf[:nos] + (1.3dt, 0dt), "Nossebro");
        }

        with link = "line.se.GFH" {
            track(gf[:nos, :tum]);
        }

        with link = "point.se.Tumleberg" {
            track(gf[:tum, :tum.yh]);
            statdot(gf[:tum]);
            slabel(:left, gf[:tum] + (-1.5dt, -0.8dt), "Tumleberg");
        }

        with link = "line.se.GFH" {
            track(gf[:tum.yh, :tum.yh + 4km]);
            line_label(:right:nw, gf[:tum.yh + 4km], "GFH");
            track(gf[:tum.yh + 4km, :var.yg]);
        }

        # point.se.Vara  se.UVV

        with link = "line.se.GFH" {
            track(gf[:var.ys, :var.ys + 5km]);
            line_label(:right:n, gf[:var.ys + 5km], "GFH");
            track(gf[:var.ys + 5km, :ska.yl - 6km]);
            line_label(:right:nw, gf[:ska.yl - 6km], "GFH");
            track(gf[:ska.yl - 6km, :ska.yl]);
        }
    }

    with railway = :first :g891 :museum {
        with link = "point.se.Skara" {
            track(gf[:ska.yl, :ska.ys]);
            statdot(gf[:ska]);
            slabel(:bottom, gf[:ska] + (0dt, 1dt), "Skara");
        }

        with link = "line.se.GFH" {
            track(gf[:ska.ys, :ska.ys + 6.5km]);
            line_label(:right:w, gf[:ska.ys + 6.5km], "GFH");
            track(gf[:ska.ys + 6.5km, :luk]);
        }

        with link = "point.se.Lundsbrunn-kurort" {
            statdot(gf[:luk]);
            slabel(:right, gf[:luk] + (1.5dt, 0dt),
                vbox(:left:middle, " Lundsbrunn", "kurort")
            );
        }
    }

    with railway = :first :g891 :removed {
        with link = "line.se.GFH" {
            track(gf[:luk, :gos - 5.5km]);
            line_label(:right:sw, gf[:gos - 5.5km], "GFH");
            track(gf[:gos - 5.5km, :for.yg]);
        }
    }
}


# SE GFR.  Gimo - Faringe
with detail = 2 {
    let gf = path("d2.se.gfr");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.GFR" {
            track(gf[:gim.yf, :gim.yf + 15km]);
            line_label(:right:e, gf[:gim.yf + 15km], "GFR");
            track(gf[:gim.yf + 15km, :far.yg]);
        }
    }
}


# SE GGB.  Gävle central - Gävle godsbangård - Strömsbro
with detail = 2 {
    let gs = path("d2.se.ggb");

    with railway = :first :double :cat:ac15 :nopax {
        with link = "line.se.GGB" {
            track(gs[:gav.yg, :gag.ym]);
            track(gs[:gag.ym, :gag]);
        }

        with link = "point.se.Gävle-godsbangård" {
            statdot(gs[:gag]);
            slabel(:left, gs[:gag] + (-0.2km, -0.3dt) + (-1.5dt, 0dt),
                "G. godsbangård"
            );
        }

        with link = "line.se.GGB" {
            track(gs[:gag, :str.yg]);
        }
    }
}


# SE GHT.  Gårdsjö - Håkantorp
with detail = 2 {
    let gh = path("d2.se.ght");

    with railway = :first :pax {
        with link = "line.se.GHT" {
            track(gh[:gar.yh, :gar.yh + 7km]);
            line_label(:right:s, gh[:gar.yh + 7km], "GHT");
            track(gh[:gar.yh + 7km, :tor.yg]);
        }

        with link = "point.se.Torved" {
            track(gh[:tor.yg, :tor]);
            statdot(gh[:tor]);
            slabel(:left, gh[:tor] + (-1.7dt, 0.6dt), "Torved");
        }

        with link = "line.se.GHT" {
            track(gh[:tor, :tor + 12km]);
            line_label(:right:se, gh[:tor + 12km], "GHT");
            track(gh[:tor + 12km, :mar]);
        }

        with link = "point.se.Mariestad" {
            track(gh[:mar, :mar.ym]);
            statdot(gh[:mar]);
            slabel(:left, gh[:mar] + (-1.5dt, 0.5dt), "Mariestad");
        }

        with link = "line.se.GHT" {
            track(gh[:mar.ym, :for - 5.2km]);
            line_label(:right:s, gh[:for - 5.2km], "GHT");
            track(gh[:for - 5.2km, :for]);
        }

        with link = "point.se.Forshem" {
            track(gh[:for, :for.yg]);
            statdot(gh[:for]);
            slabel(:nw, gh[:for] + (1.3dt, 0.3dt), "Forshem");
        }

        with link = "line.se.GHT" {
            track(gh[:for.yg, :kal.yk]);
        }

        with link = "point.se.Källby" {
            track(gh[:kal.yk, :kal]);
            statdot(gh[:kal]);
            slabel(:right, gh[:kal] + (1.5dt, 2dt), "Källby");
        }

        with link = "line.se.GHT" {
            track(gh[:kal, :kal + 2.5km]);
            line_label(:left:n, gh[:kal + 2.5km], (0.5dt, 0dt), "GHT");
            track(gh[:kal + 2.5km, :lid.ys]);
        }

        with link = "point.se.Lidköping" {
            track(gh[:lid.ys, :lid.yt]);
            statdot(gh[:lid]);
            slabel(:right, gh[:lid] + (1.3dt, -0.5dt), "Lidköping");
        }

        with link = "line.se.GHT" {
            track(gh[:lid.yt, :hak.yl - 9km]);
            line_label(:right:se, gh[:hak.yl - 9km], "GHT");
            track(gh[:hak.yl - 9km, :hak.yl]);
        }
    }
}


# SE GJK.  Gånghester - Jönköpings central
with detail = 2 {
    let gj = path("d2.se.gjk");

    with railway = :first :pax :removed {
        with link = "line.se.GJK" {
            track(gj[:gan.yj, :gan.yj + 8km]);
            line_label(:right:w, gj[:gan.yj + 8km], "GJK");
            track(gj[:gan.yj + 8km, :ulr.yg - 4km]);
            line_label(:right:e, gj[:ulr.yg - 4km], (0dt, 0.2dt), "GJK");
            track(gj[:ulr.yg - 4km, :ulr.yg]);
        }

        # point.se.Ulricehamn

        with link = "line.se.GJK" {
            track(gj[:ulr.yj, :ulr.yj + 9.3km]);
            line_label(:right:n, gj[:ulr.yj + 9.3km], (0.1dt, 0dt), "GJK");
            track(gj[:ulr.yj + 9.3km, :jon.yu - 14km]);
            line_label(:right:ne, gj[:jon.yu - 14km], "GJK");
            track(gj[:jon.yu - 14km, :jon.yu]);
        }
    }
}


# SE GKJ.  Guttsta - Kohlswa Jernverk
with detail = 2 {
    let gk = path("d2.se.gkj");

    with railway = :first :g1093 :nopax :removed {
        with link = "line.se.GKJ" {
            track(gk[:gut, :gut + 1.2km]);
            with zoom = :high line_label(:left:ne, gk[:gut + 1.2km], "GKJ");
            track(gk[:gut + 1.2km, :koh]);
        }

        with link = "point.se.Kohlswa-Jernverk" {
            statdot(gk[:koh]);
            slabel(:left, gk[:koh] + (-1.5dt, 0.8dt), "Kohlswa Jernverk");
        }
    }
}


# SE GKS.  Göteborg Kville - Göteborg Skandiahamnen
with detail = 2 {
    let gs = path("d2.se.gks");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.GKS" {
            track(gs[:kvi.yh, :kvi.yh + 2km]);
            line_label(:right:se, gs[:kvi.yh + 2km], "GKS");
            track(gs[:kvi.yh + 2km, :lin]);
            track(:double, gs[:lin, :ska.yv]);
            track(:double, gs[:ska.yv, :ska]);
        }

        with link = "point.se.Göteborg-Skandiahamnen" {
            statdot(gs[:ska]);
            slabel(:left, gs[:ska] + (-1.6dt, 0.8dt), "G. Skandiahamnen");
        }
    }
}


# SE GKV.  Gammelstad - Karlsvik
with detail = 2 {
    let gk = path("d2.se.gkv");

    with railway = :first :museum {
        with link = "line.se.GKV" {
            track(gk[:gam.yk, :gam.yk + 2.5km]);
            line_label(:right:e, gk[:gam.yk + 2.5km], "GKV");
            track(gk[:gam.yk + 2.5km, :kar]);
        }

        with link = "point.se.Karlsvik" {
            statdot(gk[:kar]);
            slabel(:bottom, gk[:kar] + (0dt, 0.9dt), "Karlsvik");
        }
    }
}


# SE GLH.  Gävle central - Gävle-Långharn
with detail = 2 {
    let gl = path("d2.se.glh");

    with railway = :first :nopax {
        with link = "line.se.GLH" {
            track(gl[:gav.yf, :gav.yf + 3.2km]);
            line_label(:right:nw, gl[:gav.yf + 3.2km], "GLH");
            track(gl[:gav.yf + 3.2km, :fli]);
        }

        with link = "point.se.Fliskär" {
            statdot(gl[:fli]);
            slabel(:right, gl[:fli] + (0.4km, 0dt) + (0.8dt, 0.8dt),
                "Fliskär"
            );
        }
    }

    with railway = :side :nopax {
        with link = "line.se.GLH" {
            track(gl[:fli, :lan]);
        }
    }

}


# SE GMO. Gävle central - Mora central
with detail = 2 {
    let gm = path("d2.se.gmo");

    with railway = :first :double :cat:ac15 :pax {
        with link = "line.se.GMO" {
            track(gm[:gav.ym, :gav.yv]);
            track(gm[:gav.yv, :hag]);
        }

        with link = "point.se.Hagaström" {
            statdot(:nopax, gm[:hag]);
        }
    }

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.GMO" {
            track(gm[:hag, :stv.yg - 9.5km]);
            line_label(:right:s, gm[:stv.yg - 9.5km], (-0.2dt, 0dt), "GMO");
            track(gm[:stv.yg - 9.5km, :stv.yg]);
        }

        # point.se.Storvik   se.SHB

        with link = "line.se.GMO" {
            track(gm[:stv.yf, :stv.yf + 9.5km]);
            line_label(:right:s, gm[:stv.yf + 9.5km], "GMO");
            track(gm[:stv.yf + 9.5km, :fal.yb - 10.4km]);
            line_label(:left:n, gm[:fal.yb - 10.4km], "GMO");
            track(gm[:fal.yb - 10.4km, :fal.yb]);
        }

        with link = "point.se.Falun-central" {
            track(:station, gm[:fal.yb, :fal]);
        }
    }

    with railway = :first :nopax {
        with link = "line.se.GMO" {
            track(gm[:fal, :fal + 6km]);
            line_label(:right:sw, gm[:fal + 6km], "GMO");
            track(gm[:fal + 6km, :gry]);
        }

        with link = "point.se.Grycksbo" {
            statdot(gm[:gry]);
            slabel(:right, gm[:gry] + (0.5dt, -1dt), "Grycksbo");
        }
    }

    with railway = :first :pax :removed {
        with link = "line.se.GMO" {
            track(gm[:gry, :rat.ya]);
            line_label(:right:sw, gm[:rat.ya - 9.3km], "GMO");
        }
    }

    with railway = :first :cat:ac15 :pax {
        with link = "point.se.Rättvik" {
            track(gm[:rat.ya, :rat]);
            statdot(gm[:rat]);
            slabel(:right, gm[:rat] + (1.3dt, 0.5dt), "Rättvik");
        }

        with link = "line.se.GMO" {
            track(gm[:rat, :rat + 5.6km]);
            line_label(:right:s, gm[:rat + 5.6km], "GMO");
            track(gm[:rat + 5.6km, :mon - 5km]);
            line_label(:left:ne, gm[:mon - 5km], "GMO");
            track(gm[:mon - 5km, :mon]);
        }

        with link = "point.se.Mora-Noret" {
            statdot(:removed, gm[:mon]);
            slabel(:right :removed, gm[:mon] + (1.5dt, 0dt), "Mora Noret");
        }

        with link = "line.se.GMO" {
            track(gm[:mon, :mor.yr]);
        }
    }
}


# SE GSA.  Säröbanans Göteborg - Särö Västerskog
with detail = 2 {
    let gs = path("d2.se.gsa");

    with railway = :first :pax :removed {
        with link = "point.se.Säröbanans-Göteborg" {
            statdot(gs[:got]);
        }

        with link = "line.se.GSA" {
            track(gs[:got, :got + 9.5km]);
            line_label(:right:e, gs[:got + 9.5km], "GSA");
            track(gs[:got + 9.5km, :sav]);
        }

        with link = "point.se.Särö-Västerskog" {
            statdot(gs[:sav]);
            slabel(:left, gs[:sav] + (-1.5dt, 0.8dt), "Särö Västerskog");
        }
    }
}


# SE GOD.  Göringen - Dalfors
with detail = 2 {
    let gd = path("d2.se.god");

    with railway = :first :pax :removed {
        with link = "line.se.GOD" {
            track(gd[:gor.yd, :dal]);
            line_label(:left:w, gd[:gor.yd + 1.65km] + (0dt, -0.2dt), "GOD");
        }

        with link = "point.se.Dalfors" {
            statdot(gd[:dal]);
            slabel(:right, gd[:dal] + (1.5dt, 0.8dt), "Dalfors");
        }
    }
}


# SE GSS.  Göteborg - Strömstad
with detail = 2 {
    let gs = path("d2.se.gss");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.GSS" {
            track(:double, gs[:ols.ys, :kvi]);
        }

        with link = "point.se.Göteborg-Kville" {
            track(gs[:kvi, :kvi.yh]);
            statdot(:nopax, gs[:kvi]);
        }

        with link = "line.se.GSS" {
            track(gs[:kvi.yh, :kvi.yh + 9.5km]);
            line_label(:left:ne, gs[:kvi.yh + 9.5km], "GSS");
            track(gs[:kvi.yh + 9.5km, :ste - 1km]);
            line_label(:left:e, gs[:ste - 1km], "GSS");
            track(gs[:ste - 1km, :udd.yo - 6km]);
            line_label(:right:w, gs[:udd.yo - 6km], "GSS");
            track(gs[:udd.yo - 6km, :udd.yo]);
        }

        with link = "point.se.Uddevalla-central" {
            track(gs[:udd.yo, :udd]);
            statdot(gs[:udd]);
            slabel(:ne, gs[:udd] + (-0.5km, 0.2km) + (-1dt, 0.5dt),
                "Uddevalla c."
            );
        }

        with link = "line.se.GSS" {
            track(gs[:udd, :udd + 11km]);
            line_label(:left:ne, gs[:udd + 11km], "GSS");
            track(gs[:udd + 11km, :mun.yh]);
        }

        with link = "point.se.Munkedal" {
            track(gs[:mun.yh, :mun]);
            statdot(gs[:mun]);
            slabel(:left, gs[:mun] + (-0.2km, 0dt) + (-1.3dt, 1dt),
                "Munkedal"
            );
        }

        with link = "line.se.GSS" {
            track(gs[:mun, :sme]);
        }

        with link = "point.se.Smedberg" {
            track(gs[:sme, :sme.yl]);
            statdot(:removed, gs[:sme]);
            slabel(:right :removed, gs[:sme] + (1.3dt, -0.3dt), "Smedberg");
        }

        with link = "line.se.GSS" {
            track(gs[:sme.yl, :sme.yl + 8.5km]);
            line_label(:right:w, gs[:sme.yl + 8.5km], (0dt, -0.25dt), "GSS");
            track(gs[:sme.yl + 8.5km, :str - 19km]);
            line_label(:left:e, gs[:str - 19km], "GSS");
            track(gs[:str - 19km, :str]);
        }

        with link = "point.se.Strömstad" {
            statdot(gs[:str]);
            slabel(:left, gs[:str] + (-1.5dt, 0.5dt), "Strömstad");
        }
    }
}


# SE GSV.  Göteborg Skandiahamnen - Göteborg Volvo
with detail = 2 {
    let gv = path("d2.se.gsv");

    with railway = :side :nopax {
        with link = "line.se.GSV" {
            track(gv[:ska.yv, :vol]);
        }

        with link = "point.se.Göteborg-Volvo" {
            statdot(gv[:vol]);
            slabel(:left, gv[:vol] + (-1.5dt, 0.5dt), "G. Volvo");
        }
    }
}


# SE GTB.  Gyttorp - Bredsjö
with detail = 2 {
    let gb = path("d2.se.gtb");

    with railway = :first :pax :removed {
        with link = "line.se.GTB" {
            track(gb[:gyt.yb, :str]);
        }

        with link = "point.se.Striberg" {
            track(:station, gb[:str, :str.yv]);
            statdot(gb[:str]);
            slabel(:right, gb[:str] + (1.3dt, 0dt), "Striberg");
        }

        with link = "line.se.GTB" {
            track(gb[:str.yv, :str.yv + 9km]);
            line_label(:right:sw, gb[:str.yv + 9km], "GTB");
            track(gb[:str.yv + 9km, :bre.yg - 7.3km]);
            line_label(:left:ne, gb[:bre.yg - 7.3km], "GTB");
            track(gb[:bre.yg - 7.3km, :bre.yg]);
        }
    }
}


# SE GTV.  Gällivare - Tingvallskulle
with detail = 2 {
    let gt = path("d2.se.gtv");

    with railway = :first :nopax :removed {
        with link = "line.se.GTV" {
            track(gt[:gal.ym, :gal.ym + 4km]);
            line_label(:left:se, gt[:gal.ym + 4km], "GTV");
            track(gt[:gal.ym + 4km, :tin]);
        }

        with link = "point.se.Tingvallskulle" {
            statdot(gt[:tin]);
            slabel(:left, gt[:tin] + (-1.5dt, 0.8dt), "Tingvallskulle");
        }
    }
}


# SE GVF.  Gällivare - Vitåfors
with detail = 2 {
    let gv = path("d2.se.gvf");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.GVF" {
            track(gv[:gal.ym, :gal.yo]);
            track(gv[:gal.yo, :gal.yo + 3.9km]);
            line_label(:right:nw, gv[:gal.yo + 3.9km], "GVF");
            track(gv[:gal.yo + 3.9km, :vit]);
        }

        with link = "point.se.Vitåfors" {
            statdot(gv[:vit]);
            slabel(:right, gv[:vit] + (-2dt, -1.3dt), "Vitåfors");
        }
    }
}


# SE GVO.  Gävle central - Ockelbo
with detail = 2 {
    let go = path("d2.se.gvo");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.GVO" {
            track(
                    go[:str - 0.1dl, :str] << 0.5md << 0.5mt
                ..  go[:str.xn + 0.5dt, :str + 16km]
            );
            line_label(:right:sw, go[:str + 16km], "GVO");
            track(go[:str + 16km, :ock.yg]);
        }
    }
}


# SE GVX.  Gällivare 511 - Gällivare 503
with detail = 2 {
    with link = "line.se.GVX" {
        track(:first :cat:ac15 :nopax, path("d2.se.gvx")[:gal.yo, :gal.yv]);
    }
}

