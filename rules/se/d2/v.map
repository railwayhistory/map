# SE VBD.  Växjö - Bredåkra
with detail = 2 {
    let vb = path("d2.se.vbd");

    with railway = :first :g1067 :pax :removed {
        with link = "line.se.VBD" {
            track(vb[:vax.yb, :vax.yb + 6.5km]);
            line_label(:right:e, vb[:vax.yb + 6.5km], "VBD");
            track(vb[:vax.yb + 6.5km, :kva - 6.3km]);
            line_label(:left:sw, vb[:kva - 6.3km], "VBD");
            track(vb[:kva - 6.3km, :kva]);
        }

        with link = "point.se.Kvarnamåla" {
            track(vb[:kva, :kva.yn]);
            statdot(vb[:kva]);
            slabel(:right, vb[:kva] + (1.5dt, 0.5dt), "Kvarnamåla");
        }

        with link = "line.se.VBD" {
            track(vb[:kva.yn, :kva.yn + 12.7km]);
            line_label(:left:sw, vb[:kva.yn + 12.7km], "VBD");
            track(vb[:kva.yn + 12.7km, :bre.yv - 8km]);
            line_label(:left:w, vb[:bre.yv - 8km], (0dt, -0.15dt), "VBD");
            track(vb[:bre.yv - 8km, :bre.yv]);
        }
    }
}


# SE VBK.  Varberg - Kinnared
with detail = 2 {
    let va = path("d2.se.vbk.1");
    let ak = path("d2.se.vbk.2");

    with railway = :first :pax :removed {
        with link = "line.se.VBK" {
            track(va[:var.yu, :var.yu + 14.5km]);
            line_label(:left:s, va[:var.yu + 14.5km], "VBK");
            track(va[:var.yu + 14.5km, :ull.yf]);
        }

        with link = "point.se.Ullared" {
            track(:station, va[:ull.yf, :ull]);
            statdot(va[:ull]);
            slabel(:left, va[:ull] + (-1.5dt, 0dt), "Ullared");
        }

        with link = "line.se.VBK" {
            track(va[:ull, :atr.ys]);
            line_label(:right:n, va[:ull + 9km], (-0.5dt, 0dt), "VBK");
        }

        with link = "point.se.Ätran" {
            track(va[:atr.ys, :atr]);
            statdot(va[:atr]);
            slabel(:top, va[:atr] + (0dt, -0.8dt), "Ätran");
        }

        with link = "line.se.VBK" {
            track(ak[:atr.ys, :atr.ys + 8km]);
            line_label(:left:sw, ak[:atr.ys + 8km], "VBK");
            track(ak[:atr.ys + 8km, :kin.yv]);
        }
    }
}


# SE VBS.  Vansbro - Särna
with detail = 2 {
    let vs = path("d2.se.vbs");

    with railway = :first :nopax {
        with link = "line.se.VBS" {
            track(vs[:van.ys, :van.ys + 8.2km]);
            line_label(:left:n, vs[:van.ys + 8.2km], "VBS");
            track(vs[:van.ys + 8.2km, :mal.yb - 6km]);
            line_label(:left:e, vs[:mal.yb - 6km], (0dt, 0.2dt), "VBS");
            track(vs[:mal.yb - 6km, :mal.yb]);
        }

        with link = "point.se.Malung" {
            track(vs[:mal.yb, :mal]);
            statdot(vs[:mal]);
            slabel(:left, vs[:mal] + (-1.8dt, 1.5dt), "Malung");
        }

        with link = "line.se.VBS" {
            track(vs[:mal, :mal + 5km]);
            line_label(:right:s, vs[:mal + 5km], (0.5dt, 0dt), "VBS");
            track(vs[:mal + 5km, :maf]);
        }

        with link = "point.se.Malungsfors" {
            statdot(vs[:maf]);
            slabel(:left, vs[:maf] + (-1.8dt, 1.5dt), "Malungsfors");
        }
    }

    with railway = :first :pax :removed {
        with link = "line.se.VBS" {
            track(vs[:maf, :maf + 12km]);
            line_label(:right:w, vs[:maf + 12km], "VBS");
            track(vs[:maf + 12km, :sal + 7km]);
            line_label(:right:w, vs[:sal + 7km], "VBS");
            track(vs[:sal + 7km, :sar - 10.5km]);
            line_label(:left:e, vs[:sar - 10.5km], "VBS");
            track(vs[:sar - 10.5km, :sar]);
        }

        with link = "point.se.Särna" {
            statdot(vs[:sar]);
            slabel(:left, vs[:sar] + (-1.5dt, 0.8dt), "Särna");
        }
    }
}


# SE VBV.  Visby - Burgsvik
with detail = 2 {
    let vb = path("d2.se.vbv");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.VBV" {
            track(vb[:vis, :vis + 9.5km]);
            line_label(:left:sw, vb[:vis + 9.5km], "VBV");
            track(vb[:vis + 9.5km, :rom.ys]);
        }

        with link = "point.se.Romakloster" {
            track(vb[:rom.ys, :rom.yh]);
            statdot(vb[:rom]);
            slabel(:left, vb[:rom] + (-1.5dt, 0.5dt), "Romakloster");
        }

        with link = "line.se.VBV" {
            track(vb[:rom.yh, :rom.yh + 8km]);
            line_label(:left:w, vb[:rom.yh + 8km], "VBV");
            track(vb[:rom.yh + 8km, :hem.yr - 9km]);
            line_label(:right:e, vb[:hem.yr - 9km], (0dt, -0.15dt), "VBV");
            track(vb[:hem.yr - 9km, :hem.yr]);
        }

        with link = "point.se.Hemse" {
            track(vb[:hem.yr, :hem]);
            statdot(vb[:hem]);
            slabel(:left, vb[:hem] + (-0.5dt, -0.8dt), "Hemse");
        }

        with link = "line.se.VBV" {
            track(vb[:hem, :hem + 10km]);
            line_label(:right:e, vb[:hem + 10km], "VBV");
            track(vb[:hem + 10km, :bur]);
        }

        with link = "point.se.Burgsviks" {
            statdot(vb[:bur]);
            slabel(:bottom, vb[:bur] + (0dt, 0.8dt), "Burgsviks");
        }
    }
}


# SE VBY.  Vimmerby - Ydrefors
with detail = 2 {
    let vy = path("d2.se.vby");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.VBY" {
            track(vy[:vim.yy, :vim.yy + 14.5km]);
            line_label(:right:sw, vy[:vim.yy + 14.5km], "VBY");
            track(vy[:vim.yy + 14.5km, :ydr]);
        }

        with link = "point.se.Ydrefors" {
            statdot(vy[:ydr]);
            slabel(:top, vy[:ydr] + (-0.2dt, -0.8dt), "Ydrefors");
        }
    }
}


# SE VFB.  Vellinge - Falsterbo
with detail = 2 {
    let vf = path("d2.se.vfb");

    with railway = :first :pax :removed {
        with link = "line.se.VFB" {
            track(vf[:vel.yf, :vel.yf + 6.3km]);
            line_label(:right:se, vf[:vel.yf + 6.3km], "VFB");
            track(vf[:vel.yf + 6.3km, :fal]);
        }

        with link = "point.se.Falsterbo" {
            statdot(vf[:fal]);
            slabel(:bottom, vf[:fal] + (0dt, 0.8dt), "Falsterbo");
        }
    }
}


# SE VHH.  Veinge - Hässleholm
with detail = 2 {
    let vh = path("d2.se.vhh");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.VHH" {
            track(vh[:vei.yh, :vei.yh + 7.8km]);
            line_label(:right:n, vh[:vei.yh + 7.8km], "VHH");
            track(vh[:vei.yh + 7.8km, :mar.yv - 6.8km]);
            line_label(:left:s, vh[:mar.yv - 6.8km], "VHH");
            track(vh[:mar.yv - 6.8km, :mar.yv]);
        }
    }

    with railway = :first :cat:ac15 :pax {
        with link = "point.se.Markaryd" {
            track(vh[:mar.yv, :mar.yk]);
            statdot(vh[:mar]);
            slabel(:right, vh[:mar] + (1.5dt, 1.3dt), "Markaryd");
        }

        with link = "line.se.VHH" {
            track(vh[:mar.yk, :mar.yk + 6km]);
            line_label(:left:sw, vh[:mar.yk + 6km], "VHH");
            track(vh[:mar.yk + 6km, :has.yv - 7km]);
            line_label(:left:w, vh[:has.yv - 7km], (0dt, -0.2dt), "VHH");
            track(vh[:has.yv - 7km, :has.yv]);
        }
    }
}


# SE VHS.  Vännäs - Holmsund
with detail = 2 {
    let vh = path("d2.se.vhs");

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.VHS" {
            track(vh[:van.yu, :van.yv]);
        }
    }

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.VHS" {
            track(vh[:van.yv, :van.yv + 6km]);
            line_label(:left:sw, vh[:van.yv + 6km], "VHS");
            track(vh[:van.yv + 6km, :ume]);
        }

        with link = "point.se.Umeå-central" {
            statdot(vh[:ume]);
            slabel(:right, vh[:ume] + (1.3dt, -0.5dt),
                hbox(:left:base, span(:bold :medium, "Umeå"), " c.")
            );
        }

        with link = "line.se.VHS" {
            track(vh[:ume, :ume + 3.3km]);
            line_label(:right:e, vh[:ume + 3.3km], "VHS");
            track(vh[:ume + 3.3km, :gim]);
        }

        with link = "point.se.Gimonäs" {
            statdot(:nopax, vh[:gim]);
            slabel(:right :nopax, vh[:gim] + (1.5dt, 0.5dt), "Gimonäs");
        }

        with link = "line.se.VHS" {
            track(vh[:gim, :gim.yo]);
        }
    }

    with railway = :first :cat:ac15 :nopax {
        with link = "line.se.VHS" {
            track(vh[:gim.yo, :gim.yo + 4.8km]);
            line_label(:left:sw, vh[:gim.yo + 4.8km], "VHS");
            track(vh[:gim.yo + 4.8km, :hol]);
        }

        with link = "point.se.Holmsund" {
            statdot(vh[:hol]);
            slabel(:left, vh[:hol] + (-1.5dt, 1dt), "Holmsund");
        }
    }
}


# SE VHV.  Visby - Hallvards
with detail = 2 {
    let vh = path("d2.se.vhv");

    with railway = :first :g891 :pax :removed{
        with link = "line.se.VHV" {
            track(vh[:vis, :hal - 2km]);
            line_label(:right:se, vh[:hal - 2km], "VHV");
            track(vh[:hal - 2km, :hal]);
        }

        with link = "point.se.Hallvards" {
            statdot(vh[:hal]);
            slabel(:bottom, vh[:hal] + (0dt, 0.8dt), "Hallvards");
        }
    }
}


# SE VJS.  Vintjärn - Svartbäcken
with detail = 2 {
    let vs = path("d2.se.vjs");

    with railway = :first :g891 :nopax :removed {
        with link = "line.se.VJS" {
            track(vs[:vin.yh, :vin.yh + 12km]);
            line_label(:left:sw, vs[:vin.yh + 12km], "VJS");
            track(vs[:vin.yh + 12km, :sva]);
        }

        with link = "point.se.Svartbäcken" {
            statdot(vs[:sva]);
            slabel(:bottom, vs[:sva] + (0dt, 0.8dt), "Svartbäcken");
        }
    }
}


# SE VKB.  Värnamo - Kärreberga
with detail = 2 {
    let vk = path("d2.se.vkb");

    with railway = :first :pax :removed {
        with link = "line.se.VKB" {
            track(vk[:var.yk, :var.yk + 7.7km]);
            line_label(:left:w, vk[:var.yk + 7.7km], "VKB");
            track(vk[:var.yk + 7.7km, :lju.yv - 7km]);
            line_label(:right:e, vk[:lju.yv - 7km], "VKB");
            track(vk[:lju.yv - 7km, :lju.yv]);
        }

        with link = "point.se.Ljungby" {
            track(vk[:lju.yv, :lju.yh]);
            statdot(vk[:lju]);
            slabel(:nw, vk[:lju] + (-1dt, 1dt), "Ljungby");
        }

        with link = "line.se.VKB" {
            track(vk[:lju.yh, :lju.yh + 6.5km]);
            line_label(:left:w, vk[:lju.yh + 6.5km], "VKB");
            track(vk[:lju.yh + 6.5km, :tra - 7km]);
            line_label(:right:se, vk[:tra - 7km], "VKB");
            track(vk[:tra - 7km, :tra]);
        }
    }

    with railway = :first :museum {
        with link = "point.se.Traryd" {
            statdot(vk[:tra]);
            slabel(:left, vk[:tra] + (-1.5dt, 0dt), "Traryd");
        }

        with link = "line.se.VKB" {
            track(vk[:tra, :str]);
        }

        with link = "point.se.Strömsnäsbruk" {
            statdot(vk[:str]);
            slabel(:right, vk[:str] + (1.7dt, 1.3dt), "Strömsnäsbruk");
        }
    }

    with railway = :first :nopax {
        with link = "line.se.VKB" {
            track(vk[:str, :str + 6.7km]);
            line_label(:left:nw, vk[:str + 6.7km], "VKB");
            track(vk[:str + 6.7km, :mar.yv]);
        }
    }

    # point.se.Markaryd

    with railway = :first :pax :removed {
        with link = "line.se.VKB" {
            track(vk[:mar.yk, :mar.yk + 8km]);
            line_label(:left:nw, vk[:mar.yk + 8km], "VKB");
            track(vk[:mar.yk + 8km, :ost.yk - 8.3km]);
            line_label(:left:w, vk[:ost.yk - 8.3km], "VKB");
            track(vk[:ost.yk - 8.3km, :ost.yk]);
        }

        with link = "point.se.Östra-Ljungby" {
            track(vk[:ost.yk, :ost.ya]);
            statdot(vk[:ost]);
            slabel(:nw, vk[:ost] + (0.7km, 0dt) + (1.5dt, -0.5dt),
                "Östra Ljungby"
            );
        }

        with link = "line.se.VKB" {
            track(vk[:ost.ya, :ost.ya + 4km]);
            line_label(:right:se, vk[:ost.ya + 4km], "VKB");
            track(vk[:ost.ya + 4km, :kar.yv]);
        }
    }
}


# SE VLB.  Visby - Lärbro
with detail = 2 {
    let vl = path("d2.se.vlb");

    with railway = :first :g891 :pax :removed {
        with link = "point.se.Visby" {
            statdot(vl[:vis]);
            slabel(:left, vl[:vis] + (-1.8dt, 0.3dt), "Visby");
        }

        with link = "line.se.VLB" {
            track(vl[:vis, :vis + 7km]);
            line_label(:left:se, vl[:vis + 7km], "VLB");
            track(vl[:vis + 7km, :lar - 7km]);
            line_label(:left:se, vl[:lar - 7km], "VLB");
            track(vl[:lar - 7km, :lar]);
        }

        with link = "point.se.Lärbro" {
            statdot(vl[:lar]);
            slabel(:right, vl[:lar] + (1.5dt, 0.8dt), "Lärbro");
        }
    }
}


# SE VLN.  Voxna - Lobonäs
with detail = 2 {
    let vl = path("d2.se.vln");

    with railway = :first :g802 :pax :removed {
        with link = "line.se.VLN" {
            track(vl[:vox.yl, :vox.yl + 12.5km]);
            line_label(:left:e, vl[:vox.yl + 12.5km], "VLN");
            track(vl[:vox.yl + 12.5km, :lob]);
        }

        with link = "point.se.Lobonäs" {
            statdot(vl[:lob]);
            slabel(:top, vl[:lob] + (0dt, -0.8dt), "Lobonäs");
        }
    }
}


# SE VMT.  Vikmanshyttan - Turbo
with detail = 2 {
    let vt = path("d2.se.vmt");

    with railway = :first :nopax :removed {
        with link = "line.se.VMT" {
            track(vt[:vik.yt, :vik.yt + 3km]);
            line_label(:right:e, vt[:vik.yt + 3km], "VMT");
            track(vt[:vik.yt + 3km, :tur]);
        }

        with link = "point.se.Turbo" {
            statdot(vt[:tur]);
            slabel(:bottom, vt[:tur] + (0dt, 0.8dt), "Turbo");
        }
    }
}


# SE VNX.  Vännäs norra - Vännäs 409
with detail = 2 {
    with link = "line.se.VNX" {
        track(:first :cat:ac15 :pax, path("d2.se.vnx")[:vnn.yu, :van.yv]);
    }
}


# SE VOV.  Västeraspby - Örnsköldsvik
with detail = 2 {
    let vo = path("d2.se.vov");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.VOV" {
            track(vo[:vas.yo, :vas.yo + 7.5km]);
            line_label(:right:w, vo[:vas.yo + 7.5km], "VOV");
            track(vo[:vas.yo + 7.5km, :orn - 4.5km]);
            line_label(:right:n, vo[:orn - 4.5km], "VOV");
            track(vo[:orn - 4.5km, :orn]);
        }

        with link = "point.se.Örnsköldsviks-central" {
            track(:station, vo[:orn, :orn.yg]);
            statdot(vo[:orn]);
            slabel(:right, vo[:orn] + (1.5dt, 0.8dt), "Örnsköldsvik c.");
        }
    }
}


# SE VRO.  Värtan - Ropsten
with detail = 2 {
    with link = "line.se.VRO" {
        track(:first :nopax :removed, path("d2.se.vro")[:var, :rop.yv]);
    }
}


# SE VRV.  Vattjom - Runsvik
with detail = 2 {
    let vr = path("d2.se.vrv");

    with railway = :first :pax :removed {
        with link = "line.se.VRV" {
            track(vr[:vat.ym, :mat - 0.8km]);
            line_label(:right:ne, vr[:mat - 0.8km], "VRV");
            track(vr[:mat - 0.8km, :mat]);
        }

        with link = "point.se.Matfors" {
            statdot(vr[:mat]);
            slabel(:right, vr[:mat] + (1.3dt, 0.2dt), "Matfors");
        }
    }

    with railway = :first :nopax :removed {
        with link = "line.se.VRV" {
            track(vr[:mat, :run]);
        }

        with link = "point.se.Runsvik" {
            statdot(vr[:run]);
            slabel(:right, vr[:run] + (1.5dt, 0.9dt), "Runsvik");
        }
    }
}


# SE VSB.  Väderstad - Bränninge
with detail = 2 {
    let vb = path("d2.se.vsb");

    with railway = :first :g891 :pax :removed {
        with link = "line.se.VSB" {
            track(vb[:vad.yb, :vad.yb + 7km]);
            line_label(:left:se, vb[:vad.yb + 7km], "VSB");
            track(vb[:vad.yb + 7km, :ska.yv]);
        }

        # point.se.Skänninge  se.HBM

        with link = "line.se.VSB" {
            track(vb[:ska.yb, :ska.yb + 13km]);
            line_label(:left:s, vb[:ska.yb + 13km], (-0.3dt, 0dt), "VSB");
            track(vb[:ska.yb + 13km, :bra.yv]);
        }
    }
}


# SE VSH.  Vallvik - Söderhamns västra
with detail = 2 {
    let vs = path("d2.se.vsh");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.VSH" {
            track(vs[:val.ys, :val.yl]);
            track(vs[:val.yl, :val.yl + 7.5km]);
            line_label(:left:e, vs[:val.yl + 7.5km], "VSH");
            track(vs[:val.yl + 7.5km, :sov]);
        }

        with link = "point.se.Söderhamns-västra" {
            track(:station, vs[:sov, :sov.yk]);
            statdot(vs[:sov]);
            slabel(:left, vs[:sov] + (-0.7km, -0.3km) + (-1.3dt, -1.3dt),
                "Söderhamn v."
            );
        }
    }
}


# SE VTA.  Vartofta - Åsarp
with detail = 2 {
    let va = path("d2.se.vta");

    with railway = :first :pax :removed {
        with link = "line.se.VTA" {
            track(va[:var.ya, :asa.yv]);
            line_label(:left:w, va[:var.ya + 4km], (0dt, 0.1dt), "VTA");
        }
    }
}


# SE VTH.  Vartofta - Tidaholm
with detail = 2 {
    let vt = path("d2.se.vth");

    with railway = :first :pax :removed {
        with link = "line.se.VTH" {
            track(vt[:var.yt, :var.yt + 11km]);
            line_label(:left:se, vt[:var.yt + 11km], "VTH");
            track(vt[:var.yt + 11km, :tid.ys]);
        }

        with link = "point.se.Tidaholm" {
            track(vt[:tid.ys, :tid]);
            statdot(vt[:tid]);
            slabel(:right, vt[:tid] + (1.5dt, 0.8dt), "Tidaholm");
        }
    }
}

# SE VVX.  Vallvik 6 - Ljusne bruk
with detail = 2 {
    with link = "line.se.VVX" {
        track(:first :nopax, path("d2.se.vvx")[:val.yl, :ljb.yv]);
    }
}

