# SE JAB.  Järna - Åby södra
with detail = 2 {
    let ja = path("d2.se.jab");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.JAB" {
            track(ja[:jar.ya, :jar.ya + 13.4km]);
            line_label(:left:w, ja[:jar.ya + 13.4km], "JAB");
            track(ja[:jar.ya + 13.4km, :nyk - 10.7km]);
            line_label(:left:nw, ja[:nyk - 10.7km], "JAB");
            track(ja[:nyk - 10.7km, :nyk]);
        }

        with link = "point.se.Nyköpings-central" {
            statdot(ja[:nyk]);
            slabel(:top, ja[:nyk] + (0dt, -0.8dt),
                vbox(:center:bottom, "Nyköping", "central")
            );
        }

        with link = "line.se.JAB" {
            with layer = -1 track(ja[:nyk, :nyk.yf + 2.5km]);
            track(ja[:nyk.yf + 2.5km, :nyk.yf + 6km]);
            line_label(:left:n, ja[:nyk.yf + 6km], "JAB");
            track(ja[:nyk.yf + 6km, :sta]);
        }

        with link = "point.se.Stavsjö" {
            track(:station, ja[:sta, :sta.ys]);
            statdot(:removed, ja[:sta]);
            slabel(:nw :removed, ja[:sta] + (1dt, 0.3dt), "Stavsjö");
        }

        with link = "line.se.JAB" {
            track(ja[:sta.ys, :sta.ys + 9.5km]);
            line_label(:right:s, ja[:sta.ys + 9.5km], "JAB");
            track(ja[:sta.ys + 9.5km, :aby]);
        }
    }
}

