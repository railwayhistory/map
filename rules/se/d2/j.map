# SE JAB.  Järna - Åby södra
with detail = 2 {
    let ja = path("d2.se.jab");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.JAB" {
            track(ja[:jar.ya, :jar.ya + 13.4km]);
            line_label(:left:w, ja[:jar.ya + 13.4km], "JAB");
            track(ja[:jar.ya + 13.4km, :nyk - 10.7km]);
            line_label(:left:nw, ja[:nyk - 10.7km], "JAB");
            track(ja[:nyk - 10.7km, :nyk]);
        }

        with link = "point.se.Nyköpings-central" {
            statdot(ja[:nyk]);
            slabel(:top, ja[:nyk] + (-1dt, -1.5dt), "Nyköping c.");
        }

        with link = "line.se.JAB" {
            with layer = -1 track(ja[:nyk, :nyk.yf + 2.5km]);
            track(ja[:nyk.yf + 2.5km, :nyk.yf + 6km]);
            line_label(:left:n, ja[:nyk.yf + 6km], "JAB");
            track(ja[:nyk.yf + 6km, :sta]);
        }

        with link = "point.se.Stavsjö" {
            track(:station, ja[:sta, :sta.ys]);
            statdot(:removed, ja[:sta]);
            slabel(:nw :removed, ja[:sta] + (1dt, 0.3dt), "Stavsjö");
        }

        with link = "line.se.JAB" {
            track(ja[:sta.ys, :sta.ys + 9.5km]);
            line_label(:right:s, ja[:sta.ys + 9.5km], "JAB");
            track(ja[:sta.ys + 9.5km, :aby]);
        }
    }
}


# SE JBH.  Jädersbruk - Hovsta
with detail = 2 {
    let jh = path("d2.se.jbh");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.JBH" {
            track(jh[:jad.y, :okn]);
            track(:double, jh[:okn, :alv]);
            track(jh[:alv, :alv + 5km]);
            line_label(:left:n, jh[:alv + 5km], (0.2dt, 0dt), "JBH");
            track(jh[:alv + 5km, :hov.yj]);
        }
    }
}


# SE JGV.  Jörn - Gällivare
with detail = 2 {
    let jg = path("d2.se.jgv");

    with railway = :first :pax :closed {
        with link = "line.se.JGV" {
            track(jg[:jor.ya, :jor.ya + 8km]);
            line_label(:left:ne, jg[:jor.ya + 8km], "JGV");
            track(jg[:jor.ya + 8km, :arv - 9km]);
            line_label(:right:sw, jg[:arv - 9km], "JGV");
            track(jg[:arv - 9km, :arv]);
        }
    }

    with railway = :first :tourist {
        with link = "point.se.Arvidsjaur" {
            track(:station, jg[:arv, :arv.ys]);
            statdot(jg[:arv]);
            slabel(:right, jg[:arv] + (1.5dt, -0.2dt), "Arvidsjaur");
        }

        with link = "line.se.JGV" {
            track(jg[:arv, :arv + 8km]);
            line_label(:left:s, jg[:arv + 8km], "JGV");
            track(jg[:arv + 8km, :var + 3.65km]);
            line_label(:left:s, jg[:var + 3.65km], "JGV");
            track(jg[:var + 3.65km, :pol - 13.3km]);
            line_label(:left:se, jg[:pol - 13.3km], "JGV");
            track(jg[:pol - 13.3km, :pol]);
        }

        with link = "point.se.Geografiska-polcirkeln" {
            statdot(jg[:pol]);
            slabel(:right, jg[:pol] + (1.7dt, 1.5dt),
                vbox(:left:topbase, "Geografiska", "polcirkeln")
            );
        }

        with link = "line.se.JGV" {
            track(jg[:pol, :por - 14.75km]);
            line_label(:left:e, jg[:por - 14.75km], "JGV");
            track(jg[:por - 14.75km, :por]);
            track(jg[:por, :gal.yp - 9km]);
            line_label(:right:n, jg[:gal.yp - 9km], "JGV");
            track(jg[:gal.yp - 9km, :gal.yp]);
        }
    }
}


# SE JKV.  Jönköping Ö - Vireda
with detail = 2  {
    let jv = path("d2.se.jkv");

    with railway = :first :g600 :pax :removed {
        with link = "line.se.JKV" {
            track(jv[:jon.yv, :ros]);
        }

        with link = "point.se.Rosendala" {
            track(jv[:ros, :ros.yh]);
            statdot(jv[:ros]);
            slabel(:left, jv[:ros] + (-0.4dt, -1dt), "Rosendala");
        }

        with link = "line.se.JKV" {
            track(jv[:ros.yh, :ros.yh + 14km]);
            line_label(:left:se, jv[:ros.yh + 14km], "JKV");
            track(jv[:ros.yh + 14km, :vir]);
        }

        with link = "point.se.Vireda" {
            statdot(jv[:vir]);
            slabel(:bottom, jv[:vir] + (0.3dt, 0.8dt), "Vireda");
        }
    }
}


# SE JLV.  Johannisberg - Ljungaverk
with detail = 2 {
    with link = "line.se.JLV" {
        track(:second :pax :removed, path("d2.se.jlv")[:joh.yl, :lju.yj]);
    }
}


# SE JMB.  Jularbo - Månsbo
with detail = 2 {
    let jm = path("d2.se.jmb");

    with railway = :first :pax :removed {
        with link = "line.se.JMB" {
            track(jm[:jul.ym, :jul.ym + 1.5km]);
            with zoom = :high line_label(:right:s, jm[:jul.ym + 1.5km], "JMB");
            track(jm[:jul.ym + 1.5km, :man]);
        }

        with link = "point.se.Månsbo" {
            statdot(jm[:man]);
            slabel(:top, jm[:man] + (0dt, -0.2km) + (0.8dt, -0.5dt), "Månsbo");
        }
    }
}


# SE JSH.  Jämtlands Sikås - Hammerdal
with detail = 2 {
    let jh = path("d2.se.jsh");

    with railway = :second :pax :removed {
        with link = "line.se.JSH" {
            track(jh[:jam.yh, :jam.yh + 4km]);
            line_label(:left:sw, jh[:jam.yh + 4km], "JSH");
            track(jh[:jam.yh + 4km, :ham]);
        }

        with link = "point.se.Hammerdal" {
            statdot(jh[:ham]);
            slabel(:right, jh[:ham] + (-1.3dt, -1.5dt), "Hammerdal");
        }
    }

    with railway = :second :nopax :removed {
        with link = "line.se.JSH" {
            track(jh[:ham, :hah]);
        }
    }
}


# SE JVJ.  Jenny - Växjö
with detail = 2 {
    let jv = path("d2.se.jvj");

    with railway = :first :g891 :museum {
        with link = "line.se.JVJ" {
            track(jv[:jen.yh, :jen.yh + 11km]);
            line_label(:right:s, jv[:jen.yh + 11km], "JVJ");
            track(jv[:jen.yh + 11km, :bla.yy - 7km]);
            line_label(:left:w, jv[:bla.yy - 7km], (0dt, 0.25dt), "JVJ");
            track(jv[:bla.yy - 7km, :bla.yy]);
        }

        with link = "point.se.Blägda" {
            track(jv[:bla.yy, :bla]);
            statdot(jv[:bla]);
            slabel(:nw, jv[:bla] + (1.5dt, -0.3dt), "Blägda");
        }

        with link = "line.se.JVJ" {
            track(jv[:bla, :spa]);
        }

        with link = "point.se.Spångenäs" {
            track(jv[:spa, :spa.yv]);
            statdot(jv[:spa]);
            slabel(:nw, jv[:spa] + (0.8dt, 0.8dt), "Spångenäs");
        }

        with link = "line.se.JVJ" {
            track(jv[:spa.yv, :spa.yv + 12km]);
            line_label(:left:nw, jv[:spa.yv + 12km], "JVJ");
            track(jv[:spa.yv + 12km, :hul.yj]);
        }
    }

    # point.se.Hultsfred-smalspår -- point.se.Hultsfred  se.LHF

    with railway = :first :g891 :closed {
        with link = "line.se.JVJ" {
            track(jv[:hul.ya, :hul.ya + 6.5km]);
            line_label(:right:e, jv[:hul.ya + 6.5km], "JVJ");
            track(jv[:hul.ya + 6.5km, :gar.ym]);
        }

        with link = "point.se.Gårdveda" {
            track(jv[:gar.ym, :gar.ys]);
            statdot(jv[:gar]);
            slabel(:bottom, jv[:gar] + (2dt, 1.3dt), "Gårdveda");
        }

        with link = "line.se.JVJ" {
            track(jv[:gar.ys, :gar.ys + 8.45km]);
            line_label(:left:nw, jv[:gar.ys + 8.45km], "JVJ");
            track(jv[:gar.ys + 8.45km, :ase.yh - 7.5km]);
            line_label(:right:s, jv[:ase.yh - 7.5km], (-0.1dt, 0dt), "JVJ");
            track(jv[:ase.yh - 7.5km, :ase.yh]);
        }
    }

    # point.se.Åseda  se.NNB

    with railway = :first :g891 :removed {
        with link = "line.se.JVJ" {
            track(jv[:ase.yv, :ase.yv + 5.3km]);
            line_label(:left:nw, jv[:ase.yv + 5.3km], "JVJ");
            track(jv[:ase.yv + 5.3km, :sev - 6km]);
            line_label(:right:e, jv[:sev - 6km], "JVJ");
            track(jv[:sev - 6km, :sev]);
        }

        with link = "point.se.Sevedstorp" {
            track(jv[:sev, :sev.yo]);
            statdot(jv[:sev]);
            slabel(:left, jv[:sev] + (-1dt, -1dt), "Sevedstorp");
        }

        with link = "line.se.JVJ" {
            track(jv[:sev.yo, :sev.yo + 13.5km]);
            line_label(:right:e, jv[:sev.yo + 13.5km], "JVJ");
            track(jv[:sev.yo + 13.5km, :vax.ya]);
        }
    }
}


# SE JVR.  Jönköpings central - Vaggeryd
with detail = 2 {
    let jv = path("d2.se.jvr");

    with railway = :first :cat:ac15 :pax {
        with link = "line.se.JVR" {
            track(jv[:jon.ys, :jon.yu]);
            track(jv[:jon.yu, :jog]);
        }

        with link = "point.se.Jönköpings-godsbangård" {
            statdot(:nopax, jv[:jog]);
            slabel(:nw, jv[:jog] + (0.5dt, 0.8dt), "J. g.");
        }
    }

    with railway = :first :pax {
        with link = "line.se.JVR" {
            track(jv[:jog, :vag.yj + 7.2km]);
            line_label(:left:w, jv[:jog + 7.2km], "JVR");
            track(jv[:jog + 7.2km, :vag.yj]);
            line_label(:right:e, jv[:vag.yj - 7km], (0dt, 0.2dt), "JVR");
        }
    }
}

