# DE 1100.  Lübeck Hbf - Puttgarden
#
let lp = path("d3.de.1100");

with detail = 3 {
    with link = "point.de.Lübeck-Hbf" {
        # DE 1120 - DE 1100
        track(:first :double:station :cat:ac15 :pax,
                lp[:lub - 1sw, :lub + 0.5sw + 4dl]
        );

        # DE 1121
        track(:first :station :removed, 
                lp[:lub - 1sw, :lub + 0.5sw + 2dl] >> 1.5dt
        );

        # DE 1122
        track(:first :station :cat:ac15 :pax, 
                lp[:lub - 1sw, :lub + 0.5sw + 1dl] >> 2.5dt
            --  lp[:lub + 0.5sw + 3dl, :lub + 0.5sw + 3.01dl] >> 0.5dt
        );
        track(:first :station :removed, 
                lp[:lub - 1sw, :lub + 0.5sw] >> 3.5dt
            --  lp[:lub + 0.5sw + 1dl, :lub + 0.5sw + 1.01dl] >> 2.5dt
        );

        marker(:right :de.bf :cat:ac15 :pax, lp[:lub] >> 3.5dt);
    }

    with link = "line.de.1100" {
        track(:first :double :cat:ac15 :pax,
                lp[:lub + 0.5sw + 4dl, :wal - 1sw]
        );
        line_label(:left:e :cat:ac15 :pax, lp[:wal - 2.3km] << 0.5dt, "1100");
    }

    with link = "point.de.Schwartau-Waldhalle-Wr" {
        # DE 1100 - 1113
        track(:first :double:station :cat:ac15 :pax,
                path("d3.de.1113")[:wal - 1sw, :wal + 2sw]
        );

        # DE 1100
        track(:first :double:station :pax,
                lp[:wal, :wal + 2sw]
        );

        marker(:left :de.abzw :cat:ac15 :pax, lp[:wal] << 0.5dt);
        slabel(:left :cat:ac15 :pax :light, lp[:wal - 0.4sw] << 0.5dt << 1.4sh,
            "S.-Waldhalle (Wr)"
        );
    }

    with link = "line.de.1100" {
        track(:first :double :pax, lp[:wal + 2sw, :swr - 1sw]);
    }

    with link = "point.de.Bad-Schwartau" {
        track(:first :double:station :pax,
                lp[:swr - 1sw, :swr + 0.5sw]
        );
        marker(:left :de.hp :pax, lp[:swr] << 0.5dt);
        marker(:left :de.exbf :pax, lp[:swr] << 0.5dt);
        slabel(:left :pax :bold, lp[:swr - 0.7sw] << 0.5dt << 1.8sh,
            "Bad Schwartau"
        );
    }

    with link = "point.de.Bad-Schwartau-Abzw" {
        track(:first :double:station :pax,
                lp[:swr + 0.5sw, :swa + 0.5sw]
        );
        marker(:left :de.abzw :pax, lp[:swa] << 0.5dt);
    }

    with link = "line.de.1100" {
        track(:first :pax,
                lp[:swa + 0.5sw, :swr.yye] >> 0.5dt
            ..  lp[:rat - 1.1sw, :rat - 1sw]
        );
        line_label(:right:nw :pax, lp[:swr.yye] >> 0.5dt, "1100");
    }

    with link = "point.de.Ratekau" {
        track(:first :station :pax, lp[:rat - 1sw, :rat + 1sw]);
        marker(:left :de.bf :pax, lp[:rat]);
        slabel(:right :pax, lp[:rat - 0.2sw] >> 2.0dt, "Ratekau");
    }

    with link = "line.de.1100" {
        track(:first :pax, lp[:rat + 1sw, :tim - 1sw]);
    }

    with link = "point.de.Timmendorferstrand" {
        track(:first :station :pax, lp[:tim - 1sw, :tim + 1sw]);
        marker(:right:de.bf :pax, lp[:tim]);
        slabel(:right :pax, lp[:tim] >> 1.5sh + (0dt, 0.8sw),
            vbox(:left:bottom, "Timmendorfer-", "strand")
        );
    }

    with link = "line.de.1100" {
        track(:first :pax, lp[:tim + 1sw, :sar - 1sw]);
        line_label(:left:ne :pax, lp[:tim + 1.5km], "1100");
    }

    with link = "point.de.Scharbeutz" {
        track(:first :station :pax, lp[:sar - 1sw, :sar + 1sw]);
        marker(:right:de.bf :pax, lp[:sar]);
        slabel(:right :pax, lp[:sar - 0.5sw] >> 1.3sh, "Scharbeutz");
    }

    with link = "line.de.1100" {
        track(:first :pax, lp[:sar + 1sw, :haf - 1sw]);
    }

    with link = "point.de.Haffkrug" {
        track(:first :station :pax, lp[:haf - 1sw, :haf + 1sw]);
        marker(:right:de.bf :pax, lp[:haf]);
        slabel(:right :pax, lp[:haf - 0.5sw] >> 1.9sh, "Haffkrug");
    }

    with link = "line.de.1100" {
        track(:first :pax, lp[:haf + 1sw, :sie - 1sw]);
    }

    with link = "point.de.Sierksdorf" {
        track(:first :station :pax, lp[:sie - 1sw, :sie + 1sw]);
        marker(:right:de.hp :pax, lp[:sie]);
        marker(:right:de.exbf :pax, lp[:sie]);
        slabel(:right :pax, lp[:sie] >> 1.8sh + (-0.5sw, 0dt),
            hbox(:left:top, "Sierksdorf")
        );
    }

    with link = "line.de.1100" {
        track(:first :pax, lp[:sie + 1sw, :neg.ns - 1sw]);
        line_label(:right:w :pax, lp[:sie + 1.7km], "1100");
    }

    # point.de.Neustadt-Holst-Gbf  de.1023

    with link = "line.de.1100" {
        track(:first, lp[:neg.nn + 1sw, :ssl.yg]);
    }

    with link = "point.de.Südschleuse" {
        track(:first :station, lp[:ssl.yg, :ssl + 0.5sw]);
        marker(:left :de.abzw :removed, lp[:ssl]);
        slabel(:left :removed, lp[:ssl - 0.5sw] << 1.4sh, "Südschleuse");
    }

    with link = "line.de.1100" {
        track(:first, lp[:ssl + 0.5sw, :has - 0.5sw]);
        line_label(:left:e, lp[:ssl + 1.5km], "1100");
    }

    with link = "point.de.Hasselburg" {
        track(:first :station, lp[:has - 0.5sw, :has + 0.5sw]);
        marker(:right :de.bbf, lp[:has]);
        marker(:right :de.exbf, lp[:has]);
        slabel(:right, lp[:has - 0.5sw] >> 2.3sh, "Hasselburg");
    }

    with link = "line.de.1100" {
        track(:first, lp[:has + 0.5sw, :gsl - 0.5sw]);
    }

    with link = "point.de.Groß-Schlamin" {
        track(:first :station, lp[:gsl - 0.5sw, :gsl + 0.5sw]);
        marker(:left :de.bbf, lp[:gsl]);
        marker(:left :de.exbf, lp[:gsl]);
        slabel(:left, lp[:gsl - 0.7sw] << 1.7sh, "Groß Schlamin");
    }

    with link = "line.de.1100" {
        track(:first, lp[:gsl + 0.5sw, :bes - 1sw]);
    }

    with link = "point.de.Beschendorf" {
        track(:first :station, lp[:bes - 1sw, :bes + 1sw]);
        marker(:right :de.bbf, lp[:bes]);
        marker(:right :de.exbf, lp[:bes]);
        slabel(:right, lp[:bes - 0.5sw] >> 2.0sh, "Beschendorf");
    }

    with link = "line.de.1100" {
        track(:first, lp[:bes + 1sw, :len - 0.5sw]);
    }

    with link = "point.de.Lensahn" {
        track(:first :station, lp[:len - 0.5sw, :len + 0.5sw]);
        marker(:left :de.bf, lp[:len]);
        slabel(:left, lp[:len - 0.6sw] << 1.5sh, "Lensahn");
    }

    with link = "line.de.1100" {
        track(:first, lp[:len + 0.5sw, :gru - 0.5sw]);
    }

    with link = "point.de.Grüner-Hirsch" {
        track(:first :station, lp[:gru - 0.5sw, :gru + 0.5sw]);
        marker(:left :de.bbf, lp[:gru]);
        marker(:left :de.exbf, lp[:gru]);
        slabel(:left, lp[:gru - 0.6sw] << 2.0sh, "Grüner Hirsch");
    }

    with link = "line.de.1100" {
        track(:first, lp[:gru + 0.5sw, :old - 0.5sw]);
        line_label(:left:e, lp[:gru + 3km], "1100");
    }

    with link = "point.de.Oldenburg-Holst" {
        track(:first :station, lp[:old - 0.5sw, :old + 0.5sw]);
        marker(:left :de.bf, lp[:old]);
        slabel(:left, lp[:old - 0.4sw] << 1.8sh,
            hbox(:right:base, "Oldenburg ", span(:light, "(Holst)"))
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:old + 0.5sw, :ols - 0.5sw]);
    }

    with link = "point.de.Oldenburg-Holst-Stadt" {
        track(:first :station, lp[:ols - 0.5sw, :ols + 0.5sw]);
        marker(:left :de.hp :removed, lp[:ols]);
        slabel(:left :removed, lp[:ols] << 1.5sh + (2sh, 0dt),
            hbox(:right:base, "Oldenburg ", span(:light, "(Holst)"), " Stadt")
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:ols + 0.5sw, :goh - 0.5sw]);
    }

    with link = "point.de.Göhl" {
        track(:first :station, lp[:goh - 0.5sw, :goh + 0.5sw]);
        marker(:right :de.bbf, lp[:goh]);
        marker(:right :de.exbf, lp[:goh]);
        slabel(:bottom, lp[:goh] >> 1.7sh, "Göhl");
    }

    with link = "line.de.1100" {
        track(:first, lp[:goh + 0.5sw, :her - 0.5sw]);
    }

    with link = "point.de.Heringsdorf-Holst" {
        track(:first :station, lp[:her - 0.5sw, :her + 0.5sw]);
        marker(:right :de.bf :removed, lp[:her]);
        slabel(:right :removed, lp[:her] >> 1.4sh + (-1.5sw, 0dt),
            hbox(:left:top, hbox(:left:base,
                "Heringsdorf ", span(:light, "(Holst)")
            ))
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:her + 0.5sw, :nki - 0.5sw]);
    }

    with link = "point.de.Neukirchen-Holst" {
        track(:first :station, lp[:nki - 0.5sw, :nki + 0.5sw]);
        marker(:left :de.bbf, lp[:nki]);
        marker(:left :de.exbf, lp[:nki]);
        slabel(:left, lp[:nki] << 2.2sh + (2.0sw, 0dt),
            hbox(:right:base, "Neukirchen ", span(:light, "(Holst)"))
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:nki + 0.5sw, :lus - 0.5sw]);
        line_label(:right:w, lp[:nki + 1.6km], "1100");
    }

    with link = "point.de.Lütjenbrode-Süd" {
        track(:first :station, lp[:lus - 0.5sw, :lus.yh + 0.5sw]);
        marker(:left :de.abzw :removed, lp[:lus]);
        slabel(:left :removed, lp[:lus - 0.7sw] << 1.5sh,
            "L. Süd"
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:lus.yh + 0.5sw, :luo - 0.5sw]);
    }

    with link = "point.de.Lütjenbrode-Ost" {
        track(:first :station, lp[:luo - 0.5sw, :luo + 0.5sw]);
        marker(:left :de.abzw :removed, lp[:luo]);
        slabel(:top :removed, lp[:luo] << 1.2sh,
            "L. Ost"
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:luo + 0.5sw, :gbr - 0.5sw]);
    }

    with link = "point.de.Großenbrode" {
        track(:first :station, lp[:gbr - 0.5sw, :gbr + 0.5sw]);
        marker(:left :de.bf, lp[:gbr]);
        slabel(:left :bold, lp[:gbr - 0.4sw] << 1.3sh, "Großenbrode");
    }

    with link = "line.de.1100" {
        track(:first, lp[:gbr + 0.5sw, :bfea]);
    }

    with link = "struct.de.Fehmarnsundbrücke" {
        track(:first, lp[:bfea, :bfef]);
        slabel(:left :italic, lp[:bfea + 0.2km] << 1.5dt,
            "Fehmarnsundbrücke"
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:bfef, :str - 0.5sw]);
        line_label(:left:e, lp[:str - 1.5km], "1100");
    }

    with link = "point.de.Strukkamp" {
        track(:first :station, lp[:str - 0.5sw, :str + 0.5sw]);
        marker(:left :de.bbf, lp[:str]);
        slabel(:left, lp[:str - 0.5sw] << 1.4sh, "Strukkamp");
    }

    with link = "line.de.1100" {
        track(:first, lp[:str + 0.5sw, :buw - 0.5sw]);
    }

    with link = "point.de.Burg-Fehmarn-West" {
        track(:first :station, lp[:buw - 0.5sw, :buw + 0.5sw]);
        with layer = 2 marker(:right :de.bbf, lp[:buw]);
        with layer = 1 marker(:right :de.bf.casing, lp[:buw]);
        slabel(:left, lp[:buw] << 0.5dt,
            vbox(:right:bottom,
                hbox(:right:base, span(:bold, "Burg "), "(F.)"),
                span(:bold, "West")
            )
        );
    }

    with link = "line.de.1100" {
        track(:first, lp[:buw + 0.5sw, :put - 0.5sw]);
        line_label(:right:nw, lp[:put - 3km], "1100");
    }

    with link = "point.de.Puttgarden" {
        track(:first :station, lp[:put - 0.5sw, :put + 0.5sw]);
        marker(:left :de.bf, lp[:put]);
        slabel(:left :bold, lp[:put - 0.5sw] << 1.4sh, "Puttgarden");
    }
}

