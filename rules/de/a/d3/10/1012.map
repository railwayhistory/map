# DE 1012.  BÃ¼delsdorf - Husum
#
let bh = path("d3.de.1012");

with detail = 3 {
    with railway = :side :nopax {
        with link = "line.de.1012" {
            track(bh[:bud.xh, :gen]);
        }

        with link = "point.de.Rendsburg-Gewerbegebiet-Nord",
             railway = :station
        {
            marker(:right :de.anst, bh[:gen] >> 0.5lt);
        }
    }

    with railway = :second :pax :removed {
        with link = "line.de.1012" {
            track(bh[:gen, :foc - 0.5sw]);
        }

        with link = "point.de.Fockbek", railway = :station {
            track(bh[:foc - 0.5sw, :foc + 0.5sw]);
            marker(:left :de.bf, bh[:foc] << 0.5mt);
            slabel(:bottom, bh[:foc] << 0.5mt << 1.2sh, "Fockbek");
        }

        with link = "line.de.1012" {
            track(bh[:foc + 0.5sw, :foc + 1.7km]);
            line_badge(bh[:foc + 1.7km], "1012");
            track(bh[:foc + 1.7km, :gar - 0.5sw]);
        }

        with link = "point.de.Garlbek", railway = :station {
            track(bh[:gar - 0.5sw, :gar + 0.5sw]);
            marker(:right :de.hp, bh[:gar] >> 0.5mt);
            slabel(:top, bh[:gar] >> 0.5mt >> 1.1sh, "Garlbek");
        }

        with link = "line.de.1012" {
            track(bh[:gar + 0.5sw, :hoh - 0.5sw]);
        }

        with link = "point.de.Hohn", railway = :station {
            track(bh[:hoh - 0.5sw, :hoh + 0.5sw]);
            marker(:left :de.bf, bh[:hoh] << 0.5mt);
            slabel(:bottom, bh[:hoh] << 0.5mt << 1.2sh, "Hohn");
        }

        with link = "line.de.1012" {
            track(bh[:hoh + 0.5sw, :chr - 0.5sw]);
        }

        with link = "point.de.Christiansholm", railway = :station {
            track(bh[:chr - 0.5sw, :chr + 0.5sw]);
            marker(:left :de.bf, bh[:chr] << 0.5mt);
            slabel(:top, bh[:chr] >> 1mt + (0.5sw, 0dt), "Christiansholm");
        }

        with link = "line.de.1012" {
            track(bh[:chr + 0.5sw, :erf - 0.5sw]);
        }

        with link = "point.de.Erfde", railway = :station {
            track(bh[:erf - 0.5sw, :erf + 0.5sw]);
            marker(:left :de.bf, bh[:erf] << 0.5mt);
            slabel(:bottom, bh[:erf] << 0.5mt << 1.2sh, "Erfde");
        }

        with link = "line.de.1012" {
            track(bh[:erf + 0.5sw, :erf + 4km]);
            line_badge(bh[:erf + 4km], "1012");
            track(bh[:erf + 4km, :nor.x + 2.5mt]);
        }

        with link = "point.de.Norderstapel", railway = :station {
            # DE 1012
            track(bh[:nor.x + 2.5mt, :nor.x + 2.5mt + 1sw]);

            # DE NSK
            track(bh[:nor.x + 2.5mt, :nor.x + 2.5mt + 1sw] >> 1mt >> 1insh);

            marker(:right :de.inbf, bh[:nor.x + 1mt + 1.5mt + 0.5sw] >> 0.5mt);
            slabel(:left :bold, bh[:nor.x + 1sw] << 2.5mt, "Norderstapel");
        }

        with link = "line.de.1012" {
            track(bh[:nor.x + 2.5mt + 1sw, :nor + 2.5km]);
            line_badge(bh[:nor + 2.5km], "1012");
            track(bh[:nor + 2.5km, :swa - 0.5sw]);
        }

        with link = "point.de.Schwabstedt", railway = :station {
            track(bh[:swa - 0.5sw, :swa + 0.5sw]);
            marker(:left :de.hst, bh[:swa] << 0.5mt);
            marker(:left :de.exbf, bh[:swa] << 0.5mt);
            slabel(:right, bh[:swa - 0.5sw] >> 1mt, "Schwabstedt");
        }

        with link = "line.de.1012" {
            track(bh[:swa + 0.5sw, :ran - 0.5sw]);
        }

        with link = "point.de.Rantrum", railway = :station {
            track(bh[:ran - 0.5sw, :ran + 0.5sw]);
            marker(:left :de.bf, bh[:ran] << 0.5mt);
            slabel(:right, bh[:ran - 0.6sw] >> 1.3mt, "Rantrum");
        }

        with link = "line.de.1012" {
            track(bh[:ran + 0.5sw, :ran + 1.6km]);
            line_label(:right:sw, bh[:ran + 1.6km] >> 0.5mt, "1012");
            track(bh[:ran + 1.6km, :mil - 0.5sw]);
        }

        with link = "point.de.Mildstedt", railway = :station {
            track(bh[:mil - 0.5sw, :mil + 0.5sw]);
            marker(:left :de.hst, bh[:mil] << 0.5mt);
            marker(:left :de.exbf, bh[:mil] << 0.5mt);
            slabel(:ne, bh[:mil] << 1.8sh + (1.8sw, 0dt), "Mildstedt");
        }

        with link = "line.de.1012" {
            track(bh[:mil + 0.5sw, :hus.xb]);
        }
    }
}

