# DE 1000. Flensburg Weiche - Flensburg Grenze
#
let fp = path("d3.de.1000");

with detail = 3 {
    # point.de.Flensburg-Weiche  de.1040

    with link = "line.de.1000" {
        track(:first :double:rightother :cat:ac15 :pax,
            fp[:fri.yf, :fri - 0.5sw]
        );
    }

    with link = "point.de.Flensburg-Friedensweg" {
        # DE 1000
        track(:first :double:station :cat:ac15 :pax,
                fp[:fri - 0.5sw, :fri + 0.5sw]
        );

        # DE 1005
        track(:first :station :cat:ac15 :pax,
                fp[:fri - 0.5sw, :fri] >> 1.5dt
            --  fp[:fri + 2dl, :fri + 2.1dl] << 0.5dt
        );

        marker(:right :de.abzw :cat:ac15, fp[:fri] >> 1.5dt);
        slabel(:right :cat:ac15 :light, fp[:fri + 1sw] >> 2.0dt,
            vbox(:left:bottom, "Friedens-", "weg")
        );
    }

    with link = "line.de.1000" {
        track(:first :double :cat:ac15 :pax, fp[:fri + 0.5sw, :har - 1sw]);
        line_label(:left:e :cat:ac15 :pax, fp[:fri + 1.3km] << 0.5dt, "1000");
    }

    with link = "point.de.Harrislee" {
        track(:first :double:station :cat:ac15 :pax,
                fp[:har - 1sw, :har + 1sw]
        );
        marker(:right :de.bf :removed, fp[:har] >> 0.5dt);
        slabel(:right :removed, fp[:har - 0.6sw] >> 0.5dt >> 1.5sh,
            "Harrislee"
        );
    }

    with link = "line.de.1000" {
        track(:first :double :cat:ac15 :pax, fp[:har + 1sw, :hag - 0.5sw]);
    }

    with link = "point.int.Harrislee-Padborg" {
        track(:first :double:station :cat:ac15 :pax,
                fp[:hag - 0.5sw, :hag + 0.5sw]
        );
        marker(:left :de.dirgr :cat:ac15 :pax, fp[:hag] << 0.5dt);
        marker(:right :de.dirgr :cat:ac15 :pax, fp[:hag] >> 0.5dt);
        slabel(:left :cat:ac15 :roman:italic :pax, fp[:hag] << 0.5dt << 1.2sh,
            hbox(:right:middle,
                vbox(:center:middle, " DK ", hrule(), " DE SH ")
            )
        );
    }
}

