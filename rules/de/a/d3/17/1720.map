# DE 1720.  Lehrte - Cuxhaven
#
let lc = path("d3.de.a.1720");
let ba = path("d3.de.1280");

with detail = 3, railway = :first :double :cat:ac15 :pax {
    with link = "line.de.1720" {
        track(lc[:beg, :beg + 2km]);
        line_label(:right:w, lc[:beg + 2km] >> 0.5md, "1720");
        track(lc[:beg + 2km, :bev - 0.5sw]);
    }

    with link = "point.de.Bad-Bevensen", railway = :station {
        track(lc[:bev - 0.5sw, :bev + 0.5sw]);
        marker(:right :de.bf, lc[:bev] >> 0.5md);
        slabel(:right, lc[:bev - 0.6sw] >> 0.5md >> 1.2sh, "Bad Bevensen");
    }

    with link = "line.de.1720" {
        track(lc[:bev + 0.5sw, :bru - 0.3sw]);
    }

    with link = "point.de.Bruchtorf", railway = :station {
        track(lc[:bru - 0.3sw, :bru + 0.3sw]);
        marker(:left :de.bk :removed, lc[:bru] << 0.5md);
        slabel(:ne :light :removed, lc[:bru + 1sw] << 0.5md << 1.2sh,
            "Bruchtorf"
        );
    }

    with link = "line.de.1720" {
        track(lc[:bru + 0.3sw, :bie - 0.5sw]);
    }

    with link = "point.de.Bienenbüttel", railway = :station {
        track(lc[:bie - 0.5sw, :bie + 0.5sw]);
        marker(:right :de.bf, lc[:bie] >> 0.5md);
        slabel(:right, lc[:bie - 0.5sw] >> 0.5md >> 1.2sh, "Bienenbüttel");
    }

    with link = "line.de.1720" {
        track(lc[:bie + 0.5sw, :hbo - 0.3sw]);
    }

    with link = "point.de.Hohenbostel", railway = :station {
        track(lc[:hbo - 0.3sw, :hbo + 0.3sw]);
        marker(:right :de.bk :removed, lc[:hbo] >> 0.5md);
        slabel(:right :light :removed, lc[:hbo - 0.5sw] >> 0.5md >> 1.2sh,
            "Hohenbostel"
        );
    }

    with link = "line.de.1720" {
        track(lc[:hbo + 0.3sw, :hbo + 1.8km]);
        line_label(:left:e, lc[:hbo + 1.8km] << 0.5md, "1720");
        track(lc[:hbo + 1.8km, :deu - 0.5sw]);
    }

    with link = "point.de.Deutsch-Evern", railway = :station {
        track(lc[:deu - 0.5sw, :deu + 0.5sw]);
        marker(:left :de.bf, lc[:deu] << 0.5md);
        slabel(:left, lc[:deu - 0.3sw] << 0.5md << 1.8sh, "Deutsch Evern");
    }

    with link = "line.de.1720" {
        with layer = -1 track(lc[:deu + 0.5sw, :lug - 650m]);
    }

    with link = "point.de.Lüneburg-Gbf", railway = :station {
        # DE 1720
        track(lc[:lug - 650m, :lug + 0.5sw]);

        # DE 1150
        track(:single,
                lc[:lug - 650m, :lug - 649m] >> 0.5md << 0.5mt
            --  lc[:lug - 649m + 1dl, :lug + 0.5sw] >> 0.5md >> 1ms >> 0.5mt
        );

        marker(:right :de.bft, lc[:lug] >> 0.5md >> 1ms >> 0.5mt);
        slabel(:right :light,
            lc[:lug - 0.4sw] >> 0.5md >> 1ms >> 0.5mt >> 1.4sh,
            "L. Gbf"
        );
    }

    with link = "point.de.Lüneburg", railway = :station {
        # DE 1151
        track(:single,
                lc[:lun - 0.5sw, :lun + 0.5sw] << 0.5md << 1sh << 0.5mt
            ..  lc[:lnk - 0.31sw, :lnk - 0.3sw] << 0.5md << 1ms << 0.5mt
        );

        # DE 1720
        track(lc[:lug + 0.5sw, :lnk - 0.3sw]);

        # DE 1150
        track(:single, lc[:lug + 0.5sw, :lun + 0.5sw] >> 0.5md >> 1ms >> 0.5mt);

        marker(:left :de.bf, lc[:lun] << 0.5md);
    }

    with link = "point.de.Lüneburg-Nordkopf", railway = :station {
        # DE 1151
        track(:single :removed,
                lc[:lnk - 0.1dl, :lnk] << 0.5md << 1ms << 0.5mt
            --  lc[:lnk + 1dl, :lnk + 1.1dl] << 0.5md << 2ms << 1.5mt
        );

        # DE 1153
        track(:single, lc[:lnk - 0.3sw, :lnk + 0.3sw] << 0.5md << 1ms << 0.5mt);

        # DE 1720
        track(lc[:lnk - 0.3sw, :lnk + 0.3sw]);

        marker(:right :de.bft :nopax, lc[:lnk] >> 0.5md);
        slabel(:right :light :nopax, lc[:lnk] + (0.6km, 0dt) + (1.5dt, 0dt),
            "L. Nordkopf"
        );
    }
}

