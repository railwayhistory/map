# DE 1252.  Hamburg Unterelbe - Hamburg Unterelbe Seehafen
#
let uu = path("d4.de.1252");

with detail = 5 {
    # point.de.Hamburg-Unterelbe: de.1720


    with link = "point.de.Hamburg-Unterelbe-Seehafen" {
        let w4   = uu[:uns.a + 14m, :uns.a + 15m] << 1dt;
        let w5   = uu[:uns.a + 45m] << 1.25dt
                -- uu[:uns.a + 50m] << 1.32dt;
        let w7   = uu[:uns.r - 25m] << 2.20dt
                -- uu[:uns.r - 20m] << 2.15dt;
        let w12  = uu[:uns.r - 25m] >> 0.80dt
                -- uu[:uns.r - 20m] >> 0.85dt;
        let w13  = uu[:uns.r + 15m] >> 1.55dt
                -- uu[:uns.r + 20m] >> 1.65dt;
        let w14  = uu[:uns.r + 55m] >> 2.45dt
                -- uu[:uns.r + 60m] >> 2.55dt;
        let w15  = uu[:uns.r + 95m] >> 3.35dt
                -- uu[:uns.r + 100m] >> 3.45dt;
        let w20  = uu[:uns.r + 160m, :uns.r + 161m] >> 5dt;
        let w21  = uu[:uns.r + 190m, :uns.r + 191m] >> 5dt;
        let w22  = uu[:uns.r + 199m, :uns.r + 200m] >> 5dt;
        let w23  = uu[:uns.r + 250m, :uns.r + 251m] >> 4dt;
        let w45  = uu[:uns - 110m, :uns - 109m] << 1dt;
        let w46  = uu[:uns - 80m, :uns - 79m] << 1dt;
        let w47  = uu[:uns - 50m, :uns - 49m] << 1dt;
        let w49  = uu[:uns - 60m] >> 2.60dt
                -- uu[:uns - 55m] >> 2.70dt;
        let w50  = uu[:uns - 30m, :uns - 29m] >> 3dt;
        let w55  = uu[:uns - 250m, :uns - 249m] >> 5dt;
        let w63  = uu[:uns + 4m, :uns + 5m] >> 3dt;
        let w65  = uu[:uns + 30m] >> 2.11dt
                -- uu[:uns + 35m] >> 2.00dt;
        let w66  = uu[:uns + 34m, :uns + 35m] << 1dt;
        let w68a = uu[:uns + 100m, :uns + 101m] << 1dt;
        let w68b = uu[:uns + 109m, :uns + 110m] << 1dt;
        let w69  = uu[:uns + 125m] << 1.10dt
                -- uu[:uns + 130m] << 1.20dt;
        let w70  = uu[:uns + 105m, :uns + 106m] >> 5dt;
        let w71  = uu[:uns + 180m] << 1.40dt
                -- uu[:uns + 185m] << 1.50dt;
        let w74  = uu[:uns + 109m, :uns + 110m] >> 3dt;
        let w75  = uu[:uns + 164m, :uns + 165m] >> 3dt;
        let w76  = uu[:uns + 150m] >> 2.50dt
                -- uu[:uns + 155m] >> 2.30dt;
        let w77  = uu[:uns + 190m] >> 1.35dt
                -- uu[:uns + 195m] >> 1.25dt;
        let w78  = uu[:uns + 185m] >> 1.00dt
                -- uu[:uns + 190m] >> 0.75dt;
        let w79  = uu[:uns + 139m, :uns + 140m] >> 3dt;
        let w80  = uu[:uns + 200m, :uns + 201m] >> 4dt;
        let w101 = uu[:uns + 355m, :uns + 356m] >> 5dt;
        let w107 = uu[:uns.s - 350m, :uns.s - 349m] << 3dt;
        let w108 = uu[:uns.s - 341m, :uns.s - 340m] << 3dt;
        let w109 = uu[:uns.s - 285m] << 1.60dt
                -- uu[:uns.s - 280m] << 1.40dt;
        let w110 = uu[:uns.s - 250m] << 0.40dt
                -- uu[:uns.s - 245m] << 0.30dt;
        let w111 = uu[:uns.s - 220m, :uns.s - 219m];
        let w112 = uu[:uns.s - 211m, :uns.s - 210m];
        let w113 = uu[:uns.s - 150m, :uns.s - 149m] >> 1dt;
        let w114 = uu[:uns.s - 141m, :uns.s - 140m] >> 1dt;
        let w116 = uu[:uns.s - 175m] << 0.80dt
                -- uu[:uns.s - 170m] << 0.65dt;
        let w117 = uu[:uns.s - 85m, :uns.s - 84m] >> 2dt;
        let w118 = uu[:uns.s - 140m, :uns.s - 139m] >> 3dt;
        let w119 = uu[:uns.s - 85m] >> 2.50dt
                -- uu[:uns.s - 80m] >> 2.30dt;
        let w122 = uu[:uns.s + 9m, :uns.s + 10m] >> 1dt;
        let w123 = uu[:uns.s + 75m, :uns.s + 76m];
        let w124 = uu[:uns.s - 65m, :uns.s - 64m];
        let w125 = uu[:uns.s - 30m, :uns.s - 29m];
        let w127 = uu[:uns.s - 120m] >> 3.80dt
                -- uu[:uns.s - 115m] >> 3.65dt;
        let w201 = uu[:uns.s + 145m] >> 3.95dt
                -- uu[:uns.s + 150m] >> 4.10dt;
        let w202 = uu[:uns.s + 179m, :uns.s + 180m] >> 4dt;
        let w203 = uu[:uns.s + 170m] >> 4.75dt
                -- uu[:uns.s + 175m] >> 4.90dt;
        let w204 = uu[:uns.s + 204m, :uns.s + 205m] >> 4dt;
        let w205 = uu[:uns.s + 210m] >> 5.63dt
                -- uu[:uns.s + 215m] >> 5.67dt;
        let w206 = uu[:uns.s + 215m] >> 3.60dt
                -- uu[:uns.s + 220m] >> 3.47dt;
        let w208 = uu[:uns.s + 520m, :uns.s + 521m];
        let w207 = uu[:uns.s + 480m] >> 0.65dt
                -- uu[:uns.s + 485m] >> 0.52dt;

        # Gl. 1
        track(:station,
                w15
            ..  uu[:uns.r + 160m, :uns.s - 200m] >> 5dt
            ..  w127
            ..  w119
            ..  uu[:uns.s - 5m, :uns.s] >> 1dt
        );

        # Gl. 2 (Str. 1252)
        track(:second:station :cat:ac15,
                uu[:uns.a, :uns.a + 15m]
            ..  w12
            ..  w13
            ..  w14
            ..  w15
            ..  uu[:uns.r + 150m, :uns] >> 4dt
        );
        let w203 = uu[:uns.s + 170m] >> 4.75dt
                -- uu[:uns.s + 175m] >> 4.90dt;
        let w208 = uu[:uns.s + 520m, :uns.s + 521m];

        # Gl. 1
        track(:station,
                w15
            ..  uu[:uns.r + 160m, :uns.s - 200m] >> 5dt
            ..  w127
            ..  w119
            ..  uu[:uns.s - 5m, :uns.s] >> 1dt
        );

        # Gl. 2 (Str. 1252)
        track(:second:station :cat:ac15,
                uu[:uns.a, :uns.a + 15m]
            ..  w12
            ..  w13
            ..  w14
            ..  w15
            ..  uu[:uns.r + 150m, :uns] >> 4dt
        );
        let w203 = uu[:uns.s + 170m] >> 4.75dt
                -- uu[:uns.s + 175m] >> 4.90dt;
        let w208 = uu[:uns.s + 520m, :uns.s + 521m];

        # Gl. 1
        track(:station,
                w15
            ..  uu[:uns.r + 160m, :uns.s - 200m] >> 5dt
            ..  w127
            ..  w119
            ..  uu[:uns.s - 5m, :uns.s] >> 1dt
        );

        # Gl. 2 (Str. 1252)
        track(:second:station :cat:ac15,
                uu[:uns.a, :uns.a + 15m]
            ..  w12
            ..  w13
            ..  w14
            ..  w15
            ..  uu[:uns.r + 150m, :uns] >> 4dt
        );
        track(:station,
                uu[:uns, :uns.s - 200m] >> 4dt
            ..  w118
        );

        # Gl. 3
        track(:station :cat:ac15,
                w14
            ..  uu[:uns.r + 120m, :uns] >> 3dt
        );

        # Gl. 4
        track(:station :cat:ac15,
                w13
            ..  uu[:uns.r + 80m, :uns - 110m] >> 2dt
            ..  w49
        );

        # Gl. 5
        track(:station :cat:ac15,
                w12
            ..  uu[:uns.r + 20m, :uns - 130m] >> 1dt
            ..  w49
            ..  w50
        );

        # Gl. 6
        track(:station :cat:ac15,
                uu[:uns.a, :uns.a + 15m] << 1dt
            ..  uu[:uns.r - 25m] << 0.20dt
            --  uu[:uns.r - 20m] << 0.15dt
            ..  uu[:uns.r, :uns - 180m]
            ..  w45
        );

        # Gl. 7
        track(:station :cat:ac15,
                w4
            ..  w5
            ..  uu[:uns.r - 25m] << 1.20dt
            --  uu[:uns.r - 20m] << 1.15dt
            ..  uu[:uns.r + 10m, :uns] << 1dt
        );

        # Gl. 17
        track(:station,
                uu[:uns, :uns.s - 135m] >> 3dt
            ..  w119
        );

        # Gl. 18
        track(:station,
                w75
            ..  uu[:uns + 240m, :uns.s] >> 2dt
        );

        # Gl. 19
        track(:station,
                w74
            ..  w76
            ..  w77
            ..  uu[:uns + 250m, :uns.s - 140m] >> 1dt
            ..  w117
        );
        with layer = -1 track(:station :removed,
                uu[:uns.s - 140m, :uns.s - 5m] >> 1dt
        );

        # Gl. 20
        track(:station,
                w77
            ..  uu[:uns + 260m, :uns.s - 210m]
            ..  w113
        );

        # Gl. 21
        track(:station,
                w78
            ..  uu[:uns + 270m, :uns.s - 330m] << 1dt
            ..  w110
        );

        # Gl. 22
        track(:station,
                w76
            ..  w78
            ..  uu[:uns + 280m, :uns.s - 340m] << 2dt
            ..  w109
        );

        # Gl. 24
        track(:station,
                uu[:uns, :uns + 130m] << 1dt
            ..  w71
            ..  uu[:uns + 300m, :uns.s - 340m] << 3dt
            ..  w109
            ..  w110
            ..  w111
        );
        with layer = -1 track(:station :removed,
                uu[:uns.s - 340m, :uns.s - 270m] << 3dt
            ..  w116
        );

        # Gl. 25
        track(:station,
                w68b
            ..  w69
            ..  uu[:uns + 280m, :uns.s - 270m] << 4dt
            ..  w116
            ..  uu[:uns.s - 130m, :uns.s]
        );

        # Gl. 26
        with layer = -1 track(:station :removed,
                w66
            ..  uu[:uns + 175m] << 3.50dt
            --  uu[:uns + 180m] << 3.65dt
            ..  uu[:uns + 280m, :uns.s - 250m] << 5dt
            ..  w124
        );

        # Gl. 27
        with layer = -1 track(:station :removed,
                w69
            ..  uu[:uns + 280m, :uns.s - 250m] << 6dt
            ..  w125
        );

        # Gl. 51
        track(:station,
                uu[:uns.s, :uns.s + 50m] >> 2dt
            ..  w201
            ..  w203
            ..  uu[:uns.s + 300m, :uns.s + 550m] >> 8dt
        );

        # Gl. 52
        track(:station,
                w205
            ..  uu[:uns.s + 285m, :uns.s + 550m] >> 7dt
        );

        # Gl. 53
        track(:station,
                w203
            ..  w205
            ..  uu[:uns.s + 280m, :uns.s + 550m] >> 6dt
        );

        # Gl. 54
        with layer = -1 track(:station :removed,
                w204
            ..  uu[:uns.s + 270m, :uns.s + 550m] >> 5dt
        );

        # Gl. 55
        with layer = -1 track(:station :removed,
                uu[:uns.s + 180m, :uns.s + 550m] >> 4dt
        );

        # Gl. 56
        track(:station,
                w206
            ..  uu[:uns.s + 290m, :uns.s + 550m] >> 3dt
        );

        # Gl. 57
        track(:station,
                w201
            ..  w202
            ..  w206
            ..  uu[:uns.s + 290m, :uns.s + 420m] >> 2dt
            ..  w207
            ..  w208
        );

        with layer = 10 track(:red, w207);

        # Gl. 58
        track(:station,
                uu[:uns.s, :uns.s + 440m] >> 1dt
            ..  w207
        );

        # Gl. 59
        track(:station, uu[:uns.s, :uns.s + 550m]);

        # W58 - W68A
        track(:station,
                uu[:uns - 100m] >> 5dt
            --  uu[:uns + 35m] >> 2dt
            ..  w68a
        );

        # W63 - W70
        track(:station, w63 .. w70);

        # W65 - W71
        with layer = -1 track(:station :removed, w65 .. w71);

        # W79 - W79
        track(:station, w79 .. w80);

        # W112 - W115
        with layer = -1 track(:station :removed,
                uu[:uns.s - 210m, :uns.s - 130m]
        );

        # W122 - W123
        track(:station, w122 .. w123);

        # Stellwerk Hm
        marker(:de.stw :left, uu[:uns] >> 2.5dt);

        # Bahnhof
        marker(:de.bft :cat:ac15 :left, uu[:uns] << 1dt);
        station(:top :cat:ac15, uu[:uns] >> 8dt,
            vbox(:center:bottom :bold, "Hamburg Unterelbe", "Seehafen"),
            hbox(:center:base, "1252: ", span(:removed, "2,30 → "), "1,43")
        );
    }
}


