# DE 1220.  Altona Palmaille - Kiel Altonaer Bf
#
let ak = path("d4.de.1220");

with detail = 5 {
    let ala = path("d4.de.1220.al");
    let alt = path("d4.de.1220.aa");
    let alg = path("d4.de.1220.ag");

    #--- Hamburg-Altona ------------------------------------------------------

    with link = "point.de.Hamburg-Altona" {
        let sa  = path("d4.de.a.6100");

        let w1   = alt[:alt + 209m, :alt + 210m] << 5.5dt;
        let w2   = alt[:alt + 274m, :alt + 275m] << 9dt;
        let w3   = alt[:alt + 290m, :alt + 291m] << 4dt;
        let w4   = alt[:alt + 309m, :alt + 310m] << 4dt;
        let w5   = alt[:alt + 300m, :alt + 301m] >> 1dt;
        let w6   = alt[:alt + 330m, :alt + 331m] << 8dt;
        let w7   = alt[:alt + 339m, :alt + 340m] << 8dt;
        let w8   = alt[:alt + 379m, :alt + 380m] << 4dt;
        let w9   = alt[:alt + 379m, :alt + 380m] << 2dt;
        let w10  = alt[:alt + 409m, :alt + 410m];
        let w11  = alt[:alt + 430m, :alt + 431m] << 1dt;
        let w12  = alt[:alt + 400m, :alt + 401m] << 6dt;
        let w13  = alt[:alt + 429m, :alt + 430m] << 6dt;
        let w14  = alt[:alt + 374m, :alt + 375m] << 8dt;
        let w15  = alt[:alt + 400m] << 9.40dt
                -- alt[:alt + 405m] << 9.55dt;
        let w16  = alt[:alt + 425m] << 10.35dt
                -- alt[:alt + 430m] << 10.60dt;
        let w17  = alt[:alt + 425m] << 12.35dt
                -- alt[:alt + 430m] << 12.60dt;
        let w18  = w17;
        let w19  = alt[:alt + 429m, :alt + 430m] << 5dt;
        let w20  = alt[:alt + 449m, :alt + 450m] << 4dt;
        let w21  = alt[:alt + 479m, :alt + 480m];
        let w22  = alt[:alt + 480m, :alt + 481m] << 1dt;
        let w23  = alt[:alt + 480m, :alt + 481m] << 2dt;
        let w24  = alt[:alt + 500m, :alt + 501m] << 5dt;
        let w25  = alt[:alt + 480m] << 6.0dt
                -- alt[:alt + 485m] << 6.35dt;
        let w26  = alt[:alt + 500m] << 8.90dt 
                -- alt[:alt + 505m] << 9.10dt;
        let w28  = alt[:alt + 545m] << 10.55dt
                -- alt[:alt + 550m] << 10.9dt;
        let w29  = alt[:alt + 565m] << 11.6dt
                -- alt[:alt + 570m] << 11.7dt;
        let w30  = alt[:alt + 585m] << 13.35dt
                -- alt[:alt + 590m] << 13.7dt;
        let w31  = alt[:alt + 480m] << 12.00dt
                -- alt[:alt + 485m] << 12.35dt;
        let w32  = alt[:alt + 485m] << 12.35dt
                -- alt[:alt + 490m] << 12.70dt;
        let w33  = alt[:alt + 485m] << 14.35dt
                -- alt[:alt + 490m] << 14.70dt;
        let w34  = alt[:alt + 485m] << 16.35dt
                -- alt[:alt + 490m] << 16.70dt;
        let w35  = alt[:alt + 615m] << 23.45dt
                -- alt[:alt + 620m] << 23.80dt;
        let w36  = alt[:alt + 615m] << 21.45dt
                -- alt[:alt + 620m] << 21.80dt;
        let w37  = alt[:alt + 635m] << 18.55dt
                -- alt[:alt + 640m] << 18.90dt;
        let w38  = alt[:alt + 585m] << 12.28dt
                -- alt[:alt + 590m] << 12.45dt;
        let w38a = alt[:alt + 615m] << 13.38dt
                -- alt[:alt + 620m] << 13.60dt;
        let w39  = alt[:alt + 635m] << 16.85dt
                -- alt[:alt + 640m] << 17.20dt;
        let w40  = alt[:alt + 675m] << 18.60dt
                -- alt[:alt + 680m] << 18.68dt;
        let w41  = alt[:alt + 655m] << 18.25dt
                -- alt[:alt + 660m] << 18.60dt;
        let w42  = alt[:alt + 675m] << 21.35dt
                -- alt[:alt + 680m] << 21.70dt;
        let w43  = alt[:alt + 655m] << 24.25dt
                -- alt[:alt + 660m] << 24.60dt;
        let w44  = alt[:alt + 675m] << 23.30dt
                -- alt[:alt + 680m] << 24.20dt;
        let w45  = alt[:alt + 685m] << 24.40dt
                -- alt[:alt + 690m] << 24.50dt;
        let w46  = alt[:alt + 750m, :alt + 751m] << 27.00dt;
        let w47  = alt[:alt + 695m] << 20.25dt
                -- alt[:alt + 700m] << 20.37dt;
        let w48  = alt[:alt + 715m] << 18.92dt
                -- alt[:alt + 720m] << 18.93dt;
        let w49  = alt[:alt + 754m, :alt + 755m] << 19dt;
        let w59  = alt[:alt + 530m, :alt + 531m] >> 1dt;
        let w60  = alt[:alt + 519m, :alt + 520m];
        let w61  = alt[:alt + 540m, :alt + 541m] << 1dt;
        let w62  = alt[:alt + 540m, :alt + 541m] << 2dt;
        let w63  = alt[:alt + 565m] << 2.50dt
                -- alt[:alt + 570m] << 2.60dt;
        let w64  = alt[:alt + 570m, :alt + 571m] << 2dt;
        let w65  = alt[:alt + 570m, :alt + 571m] << 1dt;
        let w66  = alt[:alt + 605m] << 4.0dt
                -- alt[:alt + 610m] << 4.3dt;
        let w67  = alt[:alt + 579m, :alt + 580m] << 6dt;
        let w68  = alt[:alt + 535m] << 6.0dt
                -- alt[:alt + 540m] << 6.2dt;
        let w69  = alt[:alt + 565m] << 7.15dt
                -- alt[:alt + 570m] << 7.3dt;
        let w70  = alt[:alt + 590m, :alt + 591m] << 11dt;
        let w71  = alt[:alt + 640m, :alt + 641m] << 10dt;
        let w72  = alt[:alt + 639m, :alt + 640m] << 6dt;
        let w74  = alt[:alt + 659m, :alt + 660m] << 10dt;
        let w75  = alt[:alt + 719m, :alt + 720m] << 10dt;
        let w76  = alt[:alt + 750m, :alt + 751m] << 8dt;
        let w82  = alt[:alt + 890m, :alt + 891m] << 10dt;
        let w86  = alt[:alt + 845m] << 7.40dt
                -- alt[:alt + 855m] << 7.10dt;
        let w87  = alt[:alt + 870m] << 3.50dt
                -- alt[:alt + 875m] << 3.40dt;
        let w88  = alt[:alt + 900m, :alt + 901m] << 3dt;
        let w89  = alt[:alt + 930m] << 4.0dt
                -- alt[:alt + 935m] << 3.85dt;
        let w90  = alt[:alt + 990m, :alt + 991m] << 3dt;
        let w91  = alt[:alt + 999m, :alt + 1000m] << 3dt;
        let w120 = ak[:alg.a - 110m, :alg.a - 109m] >> 0.50dt;
        let w127 = ak[:alg.a - 40m, :alg.a - 41m] << 0.50dt;
        let w799 = alt[:alt + 359m, :alt + 370m] << 12dt;

        # Gl. 5
        track(:first:station :cat:ac15 :pax,
                alt[:alt, :alt + 370m] << 11dt
            ..  w18
            ..  alt[:alt + 480m] << 16.00dt
            --  alt[:alt + 630m] << 26.50dt
            ..  alt[:alt + 750m, :alt + 755m] << 30dt
            ..  alt[:alt + 940m] << 22.00dt
            --  alt[:alt + 960m] << 20.00dt
            ..  alg[:alg.a + 29m, :alg.a + 30m] << 1.5dt
        );

        # Gl. 6
        with layer = 2 track(:first:station :cat:ac15 :pax,
                alt[:alt, :alt + 370m] << 9dt
            ..  w15
            ..  w16
            ..  alt[:alt + 480m] << 14.00dt
            --  alt[:alt + 650m] << 25.90dt
            ..  alt[:alt + 750m, :alt + 755m] << 29dt
            ..  alt[:alt + 920m] << 22.00dt
            --  alt[:alt + 940m] << 20.00dt
            ..  sa[:aeid + 1m, :aeid] << 0.5dt
        );
        with layer = 1 casing(:first:station :cat:ac15,
                alt[:alt + 920m] << 22.00dt
            --  alt[:alt + 940m] << 20.00dt
            ..  sa[:aeid + 1m, :aeid] << 0.5dt
        );

        # Gl. 7
        track(:first:station :cat:ac15,
                alt[:alt, :alt + 375m] << 8dt
            ..  alt[:alt + 480m] << 12.00dt
            --  alt[:alt + 680m] << 26.00dt
            ..  alt[:alt + 750m, :alt + 755m] << 28dt
            ..  alt[:alt + 900m] << 22.00dt
            --  alt[:alt + 920m] << 20.00dt
            ..  alg[:alg.a - 1m, :alg.a] << 0.5dt
        );

        # Gl. 8
        track(:station :cat:ac15 :pax,
                alt[:alt, :alt + 210m] << 5.5dt
            ..  alt[:alt + 290m, :alt + 430m] << 6dt
            ..  w26
            ..  alt[:alt + 590m, :alt + 710m] << 11dt
        );

        # Gl. 9
        track(:station :cat:ac15 :pax,
                alt[:alt, :alt + 210m] << 4.5dt
            ..  alt[:alt + 290m, :alt + 500m] << 4dt
            ..  alt[:alt + 580m, :alt + 780m] << 6dt
        );

        # Gl. 10
        track(:first:station :cat:ac15,
                alt[:alt, :alt + 850m] << 2dt
            ..  alt[:alt + 999m, :alt + 1000m] << 1dt
            ..  ak[:alg.a - 110m, :alg.a] << 0.5dt
        );

        # Gl. 11
        with layer = 2 track(:first:station :cat:ac15 :pax,
                alt[:alt, :alt + 850m] << 1dt
            ..  path("d4.de.6100.ar")[:aeid, :aeid - 1m] >> 1.0dt
        );
        with layer = 1 casing(:first:station :cat:ac15,
                alt[:alt + 849m, :alt + 850m] << 1dt
            ..  path("d4.de.6100.ar")[:aeid, :aeid - 1m] >> 1.0dt
        );

        # Gl. 12
        track(:first:station :cat:ac15 :pax,
                alt[:alt + 20m, :alt + 340m] >> 1dt
            ..  alt[:alt + 410m, :alt + 1000m]
            ..  ak[:alg.a - 110m, :alg.a] >> 0.5dt
        );

        # Gl. 111
        track(:second:station :removed,
                alt[:alt + 100m, :alt + 105m] >> 2dt
            ..  alt[:alt + 180m, :alt + 240m] >> 3dt
            ..  alt[:alt + 300m, :alt + 340m] >> 2dt
            ..  alt[:alt + 410m, :alt + 850m] >> 1dt
        );

        # Gl. 130
        track(:station :cat:ac15,
                alt[:alt + 180m, :alt + 240m] >> 2dt
            ..  w5
        );

        # Gl. 400
        track(:station :cat:ac15,
                alt[:alt + 400m, :alt + 500m] << 5dt
            ..  w67
        );

        # Gl. 445
        track(:station,
                w35
            ..  alt[:alt + 750m, :alt + 780m] << 27dt
        );

        # Gl. 446
        track(:station,
                w45
            ..  alt[:alt + 750m, :alt + 810m] << 26dt
        );

        # Gl. 447
        track(:station,
                w36
            ..  w45
            ..  alt[:alt + 750m, :alt + 830m] << 25dt
        );

        # Gl. 448
        track(:station,
                w30
            ..  w37
            ..  w42
            ..  alt[:alt + 750m, :alt + 845m] << 24dt
        );

        # Gl. 449
        track(:station,
                w42
            ..  alt[:alt + 750m, :alt + 860m] << 23dt
        );

        # Gl. 450
        track(:station,
                alt[:alt + 480m] << 6dt
            --  alt[:alt + 680m] << 20dt
            ..  alt[:alt + 750m, :alt + 870m] << 22dt
        );

        # Gl. 451
        track(:station,
                w41
            ..  w47
            ..  alt[:alt + 750m, :alt + 880m] << 21dt
        );

        # Gl. 452
        track(:station,
                w47
            ..  alt[:alt + 750m, :alt + 890m] << 20dt
        );

        # Gl. 453
        track(:station,
                w39
            ..  w40
            ..  w48
            ..  alt[:alt + 750m, :alt + 900m] << 19dt
        );


        # Gl. 454
        track(:station,
                w49
            ..  alt[:alt + 790m, :alt + 910m] << 18dt
        );

        # Gl. 455
        track(:station,
                w48
            ..  alt[:alt + 780m, :alt + 920m] << 17dt
        );

        # Gl. 456
        track(:station,
                w40
            ..  alt[:alt + 750m, :alt + 800m] << 16dt
            ..  alt[:alt + 850m, :alt + 930m] << 15dt
        );

        # Gl. 457
        track(:station,
                w38
            ..  w38a
            ..  alt[:alt + 660m, :alt + 700m] << 15dt
        );

        # Gl. 458
        with layer = -1 track(:station :removed,
                w38a
            ..  alt[:alt + 640m, :alt + 700m] << 14dt
        );

        # Gl. 459
        track(:station,
                w29
            ..  w38
            ..  alt[:alt + 620m, :alt + 660m] << 13dt
        );

        # Gl. 460
        track(:station,
                w28
            ..  w29
            ..  alt[:alt + 600m, :alt + 610m] << 12dt
        );

        # Gl. 472
        track(:station :cat:ac15,
                w75
            ..  alt[:alt + 780m, :alt + 840m] << 11dt
            ..  w82
        );

        # Gl. 473
        track(:station :cat:ac15,
                w19
            ..  w25
            ..  alt[:alt + 590m, :alt + 940m] << 10dt
        );

        # Gl. 474
        track(:station :cat:ac15,
                w69
            ..  alt[:alt + 660m, :alt + 800m] << 8dt
            ..  w86
            ..  w89
        );

        # Gl. 478
        track(:station :cat:ac15,
                w68
            ..  alt[:alt + 640m, :alt + 800m] << 7dt
            ..  w89
            ..  w90
        );

        # Gl. 480
        track(:station :cat:ac15,
                w66
            ..  alt[:alt + 640m, :alt + 820m] << 5dt
            ..  w87
        );

        # Gl. 481
        track(:station :cat:ac15,
                w10
            ..  alt[:alt + 480m] << 1dt
            --  alt[:alt + 540m] << 2dt
            ..  w63
            ..  alt[:alt + 640m, :alt + 820m] << 4dt
            ..  w87
            ..  w88
        );


        # Gl. 482
        track(:station :cat:ac15,
                w64
            ..  alt[:alt + 640m, :alt + 1000m] << 3dt
            ..  ak[:alg.a - 60m, :alg.a] << 1.5dt
        );

        # Gl. 487
        track(:station :cat:ac15,
                w86
            ..  alt[:alt + 900m, :alt + 950m] << 6dt
        );

        # W1 - W3
        track(:station :cat:ac15, w1 .. w3);

        # W2 - W6
        track(:station :cat:ac15, w2 .. w6);

        # W4 - W12
        track(:station :cat:ac15, w4 .. w12);

        # W7 - W15
        track(:station :cat:ac15, w7 .. w15);

        # W8 - W61
        track(:station :cat:ac15, w8 .. w61);

        # W9 - W21
        track(:station :cat:ac15, w9 .. w21);

        # W14 - W26
        track(:station :cat:ac15,
                alt[:alt + 370m, :alt + 430m] << 8dt
            ..  w26
        );

        # W13 - W31
        track(:station :cat:ac15, w13 .. w31);

        # W16 - W34
        track(:station :cat:ac15, w16 .. w34);

        # W18 - W33
        track(:station :cat:ac15, w18 .. w33);

        # W20 - W76
        track(:station :cat:ac15,
                w20
            ..  w68
            ..  w69
            ..  alt[:alt + 655m] << 9.85dt
            --  alt[:alt + 660m] << 10dt
        );

        # W21 - W59
        with layer = -1 track(:station :removed, w21 .. w59);

        # W32 - W35
        track(:station :cat:ac15, w32 .. w35);

        # W37 - W46
        track(:station, w37 .. w44 .. w46);

        # W60 - W65
        track(:station :cat:ac15, w60 .. w65);

        # W63 - W76
        track(:station :cat:ac15,
                w63
            ..  w66
            ..  w76
        );

        # W70 - W71
        track(:station, w70 .. w71);

        # W799 - W17
        track(:station, w799 .. w17);

        # Bahnsteig 5/6
        platform(:cat:ac15 :pax,
                alt[:alt - 10m, :alt + 370m] << 9.4dt
            ..  alt[:alt + 425m] << 10.85dt
            --  alt[:alt + 430m] << 11.10dt
            --  alt[:alt + 420m] << 11.65dt
            --  alt[:alt + 415m] << 11.45dt
            ..  alt[:alt + 370m, :alt - 10m] >> 10.6dt
        );

        # Bahnsteig 7/8
        platform(:cat:ac15 :pax,
                alt[:alt - 10m, :alt + 210m] << 5.9dt
            ..  alt[:alt + 290m, :alt + 430m] << 6.4dt
            --  alt[:alt + 430m, :alt - 10m] >> 7.6dt
        );

        # Bahnsteig 9/10
        platform(:cat:ac15 :pax,
                alt[:alt - 10m, :alt + 430m] << 2.4dt
            --  alt[:alt + 430m] << 2.9dt
            --  alt[:alt + 425m] << 3.05dt
            ..  alt[:alt + 380m, :alt + 290m] >> 3.6dt
            ..  alt[:alt + 210m, :alt - 10m] >> 4.1dt
        );

        # Bahnsteig 11/12
        platform(:cat:ac15 :pax,
                alt[:alt - 10m, :alt + 410m] << 0.6dt
            --  alt[:alt + 410m, :alt + 409m] >> 0.5dt
            ..  alt[:alt + 340m, :alt + 20m - 0.4dt] << 0.6dt
            --  alt[:alt + 20m - 0.4dt] >> 1.4dt
            --  alt[:alt - 10m] >> 1.4dt
        );

        # Querbahnsteig
        platform(:cat:ac15 :pax,
                alt[:alt - 5m] << 11.4dt
            --  alt[:alt - 5m] >> 1.4dt
            --  alt[:alt - 5m - 1dt] >> 1.4dt
            --  alt[:alt - 5m - 1dt] << 11.4dt
        );

        # Stellwerk Af
        marker(:de.stw :right, alt[:alt + 450m] >> 1dt);
        slabel(:right, alt[:alt + 450m - 1dt] >> 4dt, "Af");

        # ex Stellwerk Af
        with layer = -1 marker(:de.stw :removed :left, alt[:alt + 300m] << 4dt);

        # ex Stellwerk Al
        with layer = -1 marker(:de.stw :removed :left, alt[:alt + 890m] << 3dt);
        slabel(:right :removed, alt[:alt + 890m - 1dt] >> 2dt, "Al");

        # Bw
        with layer = -1 marker(:de.bw :removed :top, alt[:alt + 940m] << 10dt);

        # Bahnhof
        marker(:de.bf :cat:ac15 :pax :bottom, alt[:alt - 5m - 1dt] << 5dt);
        station(:right :cat:ac15 :pax, alt[:alt - 5m - 2dt] >> 2.5dt,
            span(:bold, "Hamburg-Altona"),
            hbox(:center:top,
                vbox(:right:top, "1220: ", "1231: ", "6100: "),
                vbox(:right:top, "0,", "0,", "293,"),
                vbox(:left:top, "71", "71", "16")
            )
        );
    }


    #--- Hamburg-Altona Gbf --------------------------------------------------

    with link = "point.de.Hamburg-Altona-Gbf" {
        # Gl. WS150?
        track(:station,
                alg[:alg - 170m, :alg + 60m] << 3.5dt
            ..  alg[:alg + 130m, :alg + 131m] << 2.5dt
        );

        # Gl. 317 (Strecke 1230)
        track(:first:station :cat:ac15,
                alg[:alg.a + 100m, :alt.f] << 2.5dt
        );

        # Gl. 357 (Richtungsgleis Strecke 1220)
        track(:first:station :cat:ac15 :pax,
                alg[:alg.a + 30m, :alt.f] << 1.5dt
        );

        # Gl. 356 (Gegenrichtungsgleis Strecke 1231)
        track(:first:station :cat:ac15,
                alg[:alg.a, :alg + 300m] << 0.5dt
            ..  alg[:alt.f - 1m, :alt.f] >> 2.5dt
        );

        # Gl. 325
        track(:station :cat:ac15,
                ak[:alg.a, :fhol] << 1.5dt
            ..  alg[:alg - 100m, :alg - 99m] << 0.5dt
        );

        # Gl. 316 (Richtungsgleis Strecke 1231)
        track(:first:station :cat:ac15,
                ak[:alg.a, :fhol] << 0.5dt
            ..  alg[:alg - 100m, :alg + 300m] >> 0.5dt
            ..  alg[:alt.f - 1m, :alt.f] >> 3.5dt
        );

        # Gl. 315 (Gegenrichtungsgleis Strecke 1220)
        track(:first:station :cat:ac15 :pax,
                ak[:alg.a, :fhol] >> 0.5dt
            ..  alg[:alg - 100m, :alg + 300m] >> 1.5dt
            ..  alg[:alt.f - 1m, :alt.f] >> 4.5dt
        );

        # Gl. 314
        track(:station :cat:ac15,
                ak[:alg.a, :alg.a + 1m] >> 0.5dt
            ..  ak[:fhol - 1m, :fhol] >> 1.5dt
            ..  alg[:alg - 100m, :alg + 300m] >> 2.5dt
            ..  alg[:alt.f - 1m, :alt.f] >> 5.5dt
        );

        # Gl. 313 - W162 - W163 - W166
        track(:station :cat:ac15,
                ak[:fhol - 1m, :fhol] >> 1.5dt
            ..  alg[:alg - 100m, :alg + 300m] >> 3.5dt
            ..  alg[:alg + 360m] >> 3.0dt
            --  alg[:alg + 365m] >> 3.05dt
            ..  alg[:alg + 440m] >> 3.15dt
            --  alg[:alg + 445m] >> 3.25dt
        );

        # Gl. 159
        track(:station :cat:ac15,
                alg[:alg + 119m, :alg + 120m] >> 3.5dt
            ..  alg[:alg + 170m, :alg + 370m] >> 4.5dt
        );

        # Gl. 309
        track(:station :cat:ac15,
                alg[:alg, :alg + 1m] >> 7.5dt
            ..  alg[:alg + 50m, :alg + 110m] >> 6.5dt
            ..  alg[:alg + 265m, :alg + 266m] >> 4.5dt
        );

        # Gl. 308
        track(:station :cat:ac15,
                alg[:alg - 150m] >> 9.5dt
            --  alg[:alg - 100m] >> 8.5dt
            ..  alg[:alg - 40m, :alg + 100m] >> 7.5dt
            ..  alg[:alg + 330m, :alg + 331m] >> 4.5dt
        );

        # Gl. 307 (Gegenrichtungsgleis Strecke 1232)
        track(:first:station :cat:ac15 :pax,
                alg[:alg - 150m, :alg + 100m] >> 8.5dt
            ..  alg[:alg + 330m, :alt.f] >> 5.5dt
        );

        # Gl. 306 (Richtungsgleis Strecke 1232)
        track(:first:station :cat:ac15 :pax,
                alg[:alg - 150m, :alg + 100m] >> 9.5dt
            ..  alg[:alg + 330m, :alt.f] >> 6.5dt
        );

        # W132 - W141
        track(:station :cat:ac15,
                alg[:alg - 220m] << 0.5dt
            --  alg[:alg - 170m] << 1.5dt
        );

        # W142 - W146
        track(:station :cat:ac15,
                alg[:alg - 80m] << 1.5dt
            --  alg[:alg - 30m] << 0.5dt
        );

        # W147 - W149
        track(:station :cat:ac15,
                alg[:alg] << 0.5dt
            --  alg[:alg + 80m] << 1.5dt
        );

        # W148 - W152
        track(:station :cat:ac15,
                alg[:alg + 60m] << 0.5dt
            --  alg[:alg + 120m] >> 0.5dt
        );

        # W151 - W154
        track(:station :cat:ac15,
                alg[:alg + 120m] << 1.5dt
            --  alg[:alg + 180m] << 2.5dt
        );

        # W153 - W155
        track(:station :cat:ac15,
                alg[:alg + 160m] >> 0.5dt
            --  alg[:alg + 220m] >> 1.5dt
        );

        # W159 - W160
        track(:station :cat:ac15,
                alg[:alg + 310m] >> 4.5dt
            --  alg[:alg + 350m] >> 5.5dt
        );

        # W161 - W164
        track(:station :cat:ac15,
                alg[:alg + 400m] >> 5.5dt
            --  alg[:alg + 460m] >> 6.5dt
        );
 

        marker(:de.bft :left, alg[:alg] << 3.5dt);
        station(:left, alg[:alg - 0.3sw] << 3.5dt << 1.4sw,
            "H.-Altona Gbf",
            hbox(:right:top,
                vbox(:right:top, "1220: ", "1230: ", "1231: ", "1232: "),
                vbox(:right:top, "??", "??", "??", "??")
            )
        );
    }


    #--- Streckengleise Altona Gbf - Langenfelde -----------------------------

    with link = "line.de.1230" {
        with layer = 2 track(:first,
                alg[:alt.f, :alt.f + 10m] << 2.5dt
            ..  ala[:ala.a - 1m, :ala.a] >> 3.5dt
        );
        with layer = 1 casing(:first,
                alg[:alt.f, :alt.f + 10m] << 2.5dt
            ..  ala[:ala.a - 1m, :ala.a] >> 3.5dt
        );
    }

    with link = "line.de.1220" {
        # Str. 1220 R
        with layer = 2 track(:first :cat:ac15 :pax :tight,
                alg[:alt.f, :alt.f + 1m] << 1.5dt
            ..  ala[:ala.a - 5m, :ala.a] >> 4.5dt
        );
        with layer = 1 casing(:first :cat:ac15 :pax :tight,
                alg[:alt.f, :alt.f + 1m] << 1.5dt
            ..  ala[:ala.a - 5m, :ala.a] >> 4.5dt
        );

        # Str. 1220 L
        track(:first :cat:ac15 :pax :right :tight :flip,
                alg[:alt.f, :alt.f + 10m] >> 4.5dt
            ..  ala[:ala.a - 10m, :ala.a] << 2.5dt
        );
    }

    with link = "line.de.1231" {
        track(:first :double :cat:ac15,
                alg[:alt.f, :alt.f + 1m] >> 3dt
            ..  ala[:ala.a - 20m, :ala.a] << 4dt
        );
    }

    with link = "line.de.1232" {
        track(:first :double :cat:ac15 :pax,
                alg[:alt.f, :alt.f + 20m] >> 6dt
            ..  ala[:ala.a - 1m, :ala.a] << 1dt
        );
    }


    #--- Hamburg-Langenfelde Bbf ---------------------------------------------

    with link = "point.de.Hamburg-Langenfelde-Bbf" {
        let w1   = ala[:ala.lr - 406m, :ala.lr - 405m] << 4.5dt;
        let w2   = ala[:ala.lr - 260m, :ala.lr - 259m] << 4dt;
        let w3   = ala[:ala.lr - 216m, :ala.lr - 215m] << 4dt;
        let w6   = ala[:ala - 735m] << 4.45dt
                -- ala[:ala - 730m] << 4.60dt;
        let w7   = ala[:ala.lr - 121m, :ala.lr - 120m] << 4dt;
        let w8   = ala[:ala - 680m] << 5.63dt
                -- ala[:ala - 675m] << 5.70dt;
        let w9   = ala[:ala - 705m] << 6.65dt
                -- ala[:ala - 700m] << 6.90dt;
        let w10  = ala[:ala - 675m] << 7.90dt
                -- ala[:ala - 670m] << 8.05dt;
        let w11  = ala[:ala - 650m] << 8.45dt
                -- ala[:ala - 645m] << 8.55dt;
        let w12  = ala[:ala - 635m] << 9.70dt
                -- ala[:ala - 630m] << 10.00dt;
        let w13  = ala[:ala - 645m] << 10.30dt
                -- ala[:ala - 640m] << 10.65dt;
        let w14  = ala[:ala - 620m] << 11.70dt
                -- ala[:ala - 615m] << 11.90dt;
        let w15  = ala[:ala - 595m] << 12.58dt
                -- ala[:ala - 590m] << 12.70dt;
        let w16  = ala[:ala - 575m] << 14.10dt
                -- ala[:ala - 570m] << 14.35dt;
        let w17  = ala[:ala - 565m] << 15.85dt
                -- ala[:ala - 560m] << 16.15dt;
        let w18  = ala[:ala - 535m] << 16.85dt
                -- ala[:ala - 530m] << 16.90dt;
        let w19  = ala[:ala - 481m, :ala - 480m] << 17dt;
        let w20  = ala[:ala - 510m] << 17.30dt
                -- ala[:ala - 505m] << 17.45dt;
        let w21  = ala[:ala - 510m] << 19.10dt
                -- ala[:ala - 505m] << 19.40dt;
        let w22  = ala[:ala - 480m] << 20.75dt
                -- ala[:ala - 475m] << 21.00dt;
        let w23  = ala[:ala - 435m] << 21.84dt
                -- ala[:ala - 430m] << 21.90dt;
        let w24  = ala[:ala - 435m] << 22.75dt
                -- ala[:ala - 430m] << 22.90dt;
        let w25  = ala[:ala - 590m] << 17.30dt
                -- ala[:ala - 585m] << 17.60dt;
        let w26  = ala[:ala - 515m] << 20.69dt
                -- ala[:ala - 510m] << 21.00dt;
        let w27a = ala[:ala - 430m] << 24.20dt
                -- ala[:ala - 425m] << 24.30dt;
        let w28  = ala[:ala - 575m] << 19.60dt
                -- ala[:ala - 570m] << 19.90dt;
        let w29  = ala[:ala - 515m] << 22.00dt
                -- ala[:ala - 510m] << 22.30dt;
        let w30  = ala[:ala - 465m] << 27.25dt
                -- ala[:ala - 460m] << 27.50dt;
        let w31a = ala[:ala - 400m] << 28.60dt
                -- ala[:ala - 395m] << 28.80dt;
        let w33a = ala[:ala - 400m] << 27.40dt
                -- ala[:ala - 395m] << 27.60dt;
        let w36  = ala[:ala - 540m] << 24.40dt
                -- ala[:ala - 535m] << 24.70dt;
        let w37  = w30;
        let w38  = ala[:ala - 420m] << 30.95dt
                -- ala[:ala - 415m] << 31.20dt;
        let w39  = ala[:ala - 345m] << 32.50dt
                -- ala[:ala - 340m] << 32.70dt;
        let w40  = ala[:ala - 340m] << 29.10dt
                -- ala[:ala - 335m] << 29.12dt;
        let w41  = ala[:ala - 280m] << 28.30dt
                -- ala[:ala - 275m] << 28.20dt;
        let w42  = ala[:ala - 315m] << 28.90dt
                -- ala[:ala - 310m] << 28.80dt;
        let w43  = ala[:ala - 280m] << 27.90dt
                -- ala[:ala - 275m] << 27.70dt;
        let w44  = ala[:ala - 220m, :ala - 219m] << 25dt;
        let w51  = ala[:ala - 365m] << 33.55dt
                -- ala[:ala - 360m] << 33.80dt;
        let w70  = ala[:ala - 305m] << 31.55dt
                -- ala[:ala - 300m] << 31.65dt;
        let w71  = ala[:ala - 275m] << 34.62dt
                -- ala[:ala - 270m] << 34.75dt;
        let w72  = ala[:ala - 205m] << 37.30dt
                -- ala[:ala - 200m] << 37.20dt;
        let w80  = ala[:ala - 245m] << 37.40dt
                -- ala[:ala - 240m] << 37.50dt;
        let w101 = ala[:ala - 235m] << 27.04dt
                -- ala[:ala - 230m] << 27.02dt;
        let w102 = ala[:ala - 205m] << 26.75dt
                -- ala[:ala - 200m] << 26.65dt;
        let w103 = ala[:ala - 221m, :ala - 220m] << 25dt;
        let w105 = ala[:ala - 175m] << 26.10dt
                -- ala[:ala - 170m] << 25.98dt;
        let w106 = ala[:ala - 145m] << 23.00dt
                -- ala[:ala - 140m] << 22.50dt;
        let w107 = ala[:ala - 140m] << 25.38dt
                -- ala[:ala - 135m] << 25.30dt;
        let w108 = w106;
        let w110 = ala[:ala - 105m] << 20.40dt
                -- ala[:ala - 100m] << 20.30dt;
        let w111 = ala[:ala - 150m] << 19.85dt
                -- ala[:ala - 145m] << 19.60dt;
        let w112 = ala[:ala - 140m] << 19.80dt
                -- ala[:ala - 135m] << 19.45dt;
        let w113 = ala[:ala - 145m] << 21.60dt
                -- ala[:ala - 140m] << 21.15dt;
        let w114 = ala[:ala - 120m] << 19.50dt
                -- ala[:ala - 115m] << 19.20dt;
        let w115 = ala[:ala - 100m] << 17.40dt
                -- ala[:ala -  95m] << 17.15dt;
        let w116 = ala[:ala -  75m] << 16.20dt
                -- ala[:ala -  70m] << 16.00dt;
        let w117 = ala[:ala - 130m] << 17.90dt
                -- ala[:ala - 125m] << 17.68dt;
        let w118 = ala[:ala - 110m] << 16.80dt
                -- ala[:ala - 105m] << 16.70dt;
        let w119 = ala[:ala -  85m] << 16.20dt
                -- ala[:ala -  80m] << 16.05dt;
        let w120 = ala[:ala - 70m, :ala - 69m] << 15dt;
        let w121 = ala[:ala - 70m, :ala - 69m] << 14dt;
        let w122 = ala[:ala - 130m] << 11.18dt
                -- ala[:ala - 125m] << 11.38dt;
        let w123 = ala[:ala - 110m] << 12.15dt
                -- ala[:ala - 105m] << 12.25dt;
        let w124 = ala[:ala -  85m] << 12.75dt
                -- ala[:ala -  80m] << 12.90dt;
        let w125 = ala[:ala - 145m] << 9.10dt
                -- ala[:ala - 140m] << 9.35dt;
        let w126 = ala[:ala - 135m] << 9.05dt
                -- ala[:ala - 130m] << 9.40dt;
        let w127 = ala[:ala - 100m] << 11.40dt
                -- ala[:ala -  95m] << 11.70dt;
        let w128 = ala[:ala - 75m] << 12.75dt
                -- ala[:ala - 70m] << 13.00dt;
        let w129 = ala[:ala - 50m] << 13.75dt
                -- ala[:ala - 45m] << 13.90dt;
        let w130 = ala[:ala - 50m] << 15.40dt
                -- ala[:ala - 45m] << 15.30dt;
        let w131 = ala[:ala - 20m, :ala - 19m] << 15dt;
        let w132 = ala[:ala - 20m] << 14.65dt
                -- ala[:ala - 15m] << 14.80dt;
        let w133 = ala[:ala + 5m, :ala + 6m] << 15dt;
        let w134 = ala[:ala + 14m, :ala + 15m] << 15dt;
        let w135 = ala[:ala + 100m] << 18.25dt
                -- ala[:ala + 105m] << 18.40dt;
        let w136 = ala[:ala + 125m, :ala + 126m] << 20dt;
        let w137 = ala[:ala + 140m] << 19.55dt
                -- ala[:ala + 145m] << 19.70dt;
        let w138 = ala[:ala + 170m, :ala + 171m] << 20dt;
        let w139 = ala[:ala + 195m, :ala + 196m] << 20dt;
        let w140 = ala[:ala - 221m, :ala - 220m] << 4dt;
        let w141 = ala[:ala - 196m, :ala - 195m] << 4dt;
        let w142 = ala[:ala - 180m] << 5.00dt
                -- ala[:ala - 175m] << 5.25dt;
        let w143 = ala[:ala - 170m] << 4.65dt
                -- ala[:ala - 165m] << 4.85dt;
        let w144 = ala[:ala - 155m] << 6.20dt
                -- ala[:ala - 150m] << 6.45dt;
        let w145 = ala[:ala - 151m, :ala - 150m] << 4dt;
        let w146 = ala[:ala - 125m] << 7.80dt
                -- ala[:ala - 120m] << 8.10dt;
        let w147 = ala[:ala - 125m] << 7.55dt
                -- ala[:ala - 120m] << 7.70dt;
        let w150 = ala[:ala +  40m] << 14.75dt
                -- ala[:ala +  45m] << 14.60dt;
        let w151 = ala[:ala +  65m] << 13.95dt
                -- ala[:ala +  70m] << 13.80dt;
        let w152 = ala[:ala +  90m] << 13.15dt
                -- ala[:ala +  95m] << 13.00dt;
        let w153 = ala[:ala + 140m] << 9.40dt
                -- ala[:ala + 145m] << 9.25dt;
        let w154 = ala[:ala + 165m] << 8.65dt
                -- ala[:ala + 170m] << 8.50dt;
        let w155 = ala[:ala + 165m] << 8.30dt
                -- ala[:ala + 170m] << 8.25dt;
        let w156 = ala[:ala + 190m] << 7.90dt
                -- ala[:ala + 195m] << 7.75dt;
        let w157 = ala[:ala + 210m] << 5.60dt
                -- ala[:ala + 215m] << 5.50dt;
        let w159 = ala[:ala + 250m] << 6.50dt
                -- ala[:ala + 255m] << 6.40dt;
        let w158 = ala[:ala + 255m, :ala + 256m] << 5dt;
        let w160 = ala[:ala + 315m] << 4.45dt
                -- ala[:ala + 320m] << 4.30dt;
        let w161 = ala[:ala + 350m, :ala + 351m] << 4dt;
        let w164 = ala[:ala + 135m] << 36.30dt
                -- ala[:ala + 140m] << 36.18dt;
        let w165 = ala[:ala + 200m] << 30.75dt
                -- ala[:ala + 205m] << 30.30dt;
        let w166 = ala[:ala + 190m] << 30.50dt
                -- ala[:ala + 195m] << 30.20dt;
        let w167 = ala[:ala + 240m] << 27.90dt
                -- ala[:ala + 245m] << 27.68dt;
        let w168 = ala[:ala + 260m] << 27.12dt
                -- ala[:ala + 265m] << 26.95dt;
        let w169 = ala[:ala + 280m] << 26.52dt
                -- ala[:ala + 285m] << 26.40dt;
        let w171 = ala[:ala + 190m] << 29.25dt
                -- ala[:ala + 195m] << 29.05dt;
        let w172 = ala[:ala + 225m] << 27.55dt
                -- ala[:ala + 230m] << 27.50dt;
        let w173 = ala[:ala + 255m] << 27.05dt
                -- ala[:ala + 260m] << 26.95dt;
        let w175 = ala[:ala + 310m] << 25.90dt
                -- ala[:ala + 315m] << 25.80dt;
        let w176 = ala[:ala + 365m] << 24.90dt
                -- ala[:ala + 370m] << 24.82dt;
        let w178 = ala[:ala + 395m] << 24.30dt
                -- ala[:ala + 400m] << 24.15dt;
        let w180 = ala[:ala + 435m] << 22.20dt
                -- ala[:ala + 440m] << 22.10dt;
        let w181 = ala[:ala + 465m, :ala + 470m] << 22dt;
        let w182 = ala[:ala + 369m, :ala + 370m] << 20dt;
        let w183 = ala[:ala + 440m, :ala + 441m] << 22dt;
        let w184 = w181;
        let w186 = ala[:ala + 519m, :ala + 520m] << 22dt;
        let w187 = ala[:ala + 570m, :ala + 571m] << 20dt;
        let w188 = ala[:ala + 535m, :ala + 540m] << 23dt;
        let w189 = w188;
        let w190 = ala[:ala + 565m] << 23.05dt
                -- ala[:ala + 570m] << 23.10dt;
        let w191 = ala[:ala + 580m] << 23.80dt
                -- ala[:ala + 585m] << 24.00dt;
        let w192 = ala[:ala + 660m, :ala + 661m] << 26.5dt;
        let w195 = ala[:ala +  40m] << 15.25dt
                -- ala[:ala +  45m] << 15.40dt;
        let w196 = ala[:ala +  65m] << 16.05dt
                -- ala[:ala +  70m] << 16.20dt;
        let w197 = ala[:ala +  85m, :ala + 90m] << 15.70dt;
        let w198 = ala[:ala +  85m, :ala + 90m] << 14.30dt;
        let w199 = ala[:ala + 110m] << 17.55dt
                -- ala[:ala + 115m] << 17.70dt;
        let w201 = ala[:ala + 69m, :ala + 70m] << 37.5dt;
        let w202 = ala[:ala + 124m, :ala + 125m] << 37.5dt;
        let w205 = ala[:ala + 164m, :ala + 165m] << 37.5dt;
        let w208 = ala[:ala + 214m, :ala + 215m] << 37.5dt;
        let w210 = ala[:ala + 265m] << 37.25dt
                -- ala[:ala + 270m] << 37.10dt;
        let w211 = ala[:ala + 239m, :ala + 240m] << 37.5dt;
        let w212 = ala[:ala + 275m] << 37.20dt
                -- ala[:ala + 280m] << 37.10dt;
        let w213 = ala[:ala + 279m, :ala + 280m] << 37.5dt;
        let w214 = ala[:ala + 305m] << 37.40dt
                -- ala[:ala + 310m] << 37.35dt;
        let w215 = ala[:ala + 244m, :ala + 245m] << 39dt;
        let w216 = ala[:ala + 340m, :ala + 341m] << 39dt;
        let w217 = ala[:ala + 345m] << 36.95dt
                -- ala[:ala + 350m] << 36.90dt;
        let w218 = ala[:ala + 280m] << 36.60dt
                -- ala[:ala + 285m] << 36.30dt;
        let w219 = ala[:ala + 305m] << 34.42dt
                -- ala[:ala + 310m] << 33.84dt;
        let w220 = ala[:ala + 325m] << 33.90dt
                -- ala[:ala + 330m] << 33.60dt;
        let w221 = ala[:ala + 345m] << 29.70dt
                -- ala[:ala + 350m] << 29.20dt;
        let w222 = ala[:ala + 395m] << 27.125dt
                -- ala[:ala + 400m] << 27.00dt;
        let w227 = ala[:ala + 450m, :ala + 451m] << 24dt;
        let w228 = ala[:ala + 349m, :ala + 350m] << 39dt;
        let w229 = ala[:ala + 375m] << 38.80dt
                -- ala[:ala + 380m] << 38.70dt;
        let w232 = ala[:ala + 560m] << 29.15dt
                -- ala[:ala + 565m] << 29.40dt;
        let w233 = ala[:ala + 575m] << 30.10dt
                -- ala[:ala + 580m] << 30.10dt;
        let w234 = ala[:ala + 575m] << 28.20dt
                -- ala[:ala + 580m] << 28.50dt;
        let w235 = ala[:ala + 600m] << 29.45dt
                -- ala[:ala + 605m] << 29.60dt;
        let w236 = ala[:ala + 600m] << 30.10dt
                -- ala[:ala + 605m] << 30.08dt;
        let w237 = ala[:ala + 630m] << 29.80dt
                -- ala[:ala + 635m] << 29.70dt;
        let w238 = ala[:ala + 529m, :ala + 530m] << 38dt;
        let w239 = ala[:ala + 550m] << 38.00dt
                -- ala[:ala + 555m] << 38.00dt;
        let w242 = ala[:ala + 469m, :ala + 470m] << 39dt;
        let w244 = ala[:ala + 529m, :ala + 530m] << 39dt;
        let w261 = ala[:ala + 639m, :ala + 640m] << 20dt;
        let w245 = ala[:ala + 575m] << 34.00dt
                -- ala[:ala + 580m] << 34.10dt;
        let w246 = ala[:ala + 560m] << 34.20dt
                -- ala[:ala + 565m] << 34.25dt;
        let w247 = ala[:ala + 580m] << 36.05dt
                -- ala[:ala + 585m] << 35.80dt;
        let w248 = ala[:ala + 600m] << 34.75dt
                -- ala[:ala + 605m] << 34.30dt;
        let w249 = ala[:ala + 600m] << 33.90dt
                -- ala[:ala + 605m] << 33.70dt;
        let w250 = ala[:ala + 630m] << 31.90dt
                -- ala[:ala + 635m] << 31.40dt;
        let w251 = ala[:ala + 675m] << 28.00dt
                -- ala[:ala + 680m] << 27.65dt;
        let w252 = ala[:ala + 720m, :ala + 721m] << 26.5dt;
        let w257 = ala[:ala + 965m + 3.0dt] << 22.80dt
               --  ala[:ala + 970m + 3.0dt] << 22.50dt;
        let w262 = ala[:ala + 684m, :ala + 685m] << 20.5dt;
        let w263 = ala[:ala + 665m] << 19.65dt
                -- ala[:ala + 670m] << 19.50dt;
        let w264 = ala[:ala + 705m] << 18.20dt
                -- ala[:ala + 710m] << 18.00dt;
        let w401 = ala[:ala + 619m, :ala + 620m] << 12.5dt;
        let w403 = ala[:ala + 639m, :ala + 640m] << 14.5dt;
        let w404 = ala[:ala + 715m] << 15.85dt
                -- ala[:ala + 720m] << 15.90dt;
        let w405 = ala[:ala + 690m] << 16.90dt
                -- ala[:ala + 695m] << 16.70dt;
        let w406 = ala[:ala + 715m] << 16.20dt
                -- ala[:ala + 720m] << 16.10dt;
        let w407 = ala[:ala + 745m, :ala + 746m] << 16.0dt;
        let w408 = ala[:ala + 754m, :ala + 755m] << 16.0dt;
        let w411 = ala[:ala + 810m, :ala + 811m] << 15.5dt;
        let w415 = ala[:ala + 855m] << 12.30dt
                -- ala[:ala + 860m] << 12.40dt;
        let w416 = ala[:ala + 895m] << 13.00dt
                -- ala[:ala + 900m] << 13.03dt;
        let w417 = ala[:ala + 925m] << 12.90dt
                -- ala[:ala + 930m] << 12.85dt;
        let w418 = ala[:ala + 985m] << 11.42dt
                -- ala[:ala + 990m] << 11.25dt;
        let w419 = ala[:ala + 1170m] << 5.22dt
                -- ala[:ala + 1175m] << 5.10dt;
        let w420 = ala[:ala + 855m] << 18.60dt
                -- ala[:ala + 860m] << 18.60dt;
        let w421 = ala[:ala + 940m] << 17.75dt
                -- ala[:ala + 945m] << 17.60dt;
        let w422 = ala[:ala + 965m] << 16.75dt
                -- ala[:ala + 970m] << 16.50dt;
        let w423 = ala[:ala + 1030m] << 13.80dt
                -- ala[:ala + 1035m] << 13.50dt;
        let w424 = ala[:ala + 1065m] << 11.90dt
                -- ala[:ala + 1070m] << 11.70dt;
        let w429 = ala[:ala + 1075m] << 13.45dt
                -- ala[:ala + 1080m] << 13.15dt;
        let w430 = ala[:ala + 1105m] << 12.00dt
                -- ala[:ala + 1110m] << 11.80dt;
        let w431 = ala[:ala + 1150m] << 9.70dt
                -- ala[:ala + 1155m] << 9.40dt;
        let w450 = ala[:ala + 1195m] << 7.87dt
                -- ala[:ala + 1200m] << 7.75dt;
        let w451 = ala[:ala + 1240m] << 7.20dt
                -- ala[:ala + 1245m] << 7.05dt;
        let w452 = ala[:ala + 1270m] << 6.60dt
                -- ala[:ala + 1275m] << 6.55dt;
        let w454 = ala[:ala.f - 706m, :ala.f - 705m] << 6.5dt;
        let w455 = ala[:ala.f - 626m, :ala.f - 625m] << 5.5dt;
        let w456 = ala[:ala.f - 625m] << 4.00dt
                -- ala[:ala.f - 620m] << 3.90dt;
        let w457 = ala[:ala.f - 550m, :ala.f - 549m] << 3.5dt;
        let w460 = ala[:ala.f - 135m] << 4.00dt
                -- ala[:ala.f - 130m] << 3.90dt;
        let w461 = ala[:ala.f -  85m, :ala.f -  84m] << 3.5dt;
        let w471 = ala[:ala.f - 715m, :ala.f - 714m] << 6.5dt;
        let w497 = ala[:ala.lr - 481m, :ala.lr - 480m] << 0.5dt;
        let w498 = ala[:ala.lr - 400m, :ala.lr - 399m] << 1.5dt;
        let w499 = ala[:ala.lr - 506m, :ala.lr - 505m] << 3.5dt;
        let w500 = ala[:ala.lr - 441m, :ala.lr - 440m] << 4.5dt;
        let w501 = ala[:ala.lr - 386m, :ala.lr - 385m] << 1.5dt;
        let w502 = ala[:ala.lr - 315m, :ala.lr - 314m] << 2.5dt;
        let w504 = ala[:ala.lr - 301m, :ala.lr - 300m] << 2.5dt;
        let w505 = ala[:ala.lr - 225m, :ala.lr - 224m] << 4dt;
        let w506 = ala[:ala.lr - 221m, :ala.lr - 220m] << 2.5dt;
        let w507 = ala[:ala.lr - 160m, :ala.lr - 159m] << 4dt;
        let w509 = ala[:ala.lr + 20m, :ala.lr + 21m] << 0.5dt;
        let w510 = ala[:ala.lr + 34m, :ala.lr + 35m] << 0.5dt;
        let w511 = ala[:ala.lr + 100m, :ala.lr + 101m] << 1.5dt;
        let w512 = ala[:ala.lr + 109m, :ala.lr + 110m] << 1.5dt;
        let w513 = ala[:ala.lr + 240m, :ala.lr + 241m] << 2.5dt;
        let w514 = ala[:ala.lr + 249m, :ala.lr + 250m] << 2.5dt;
        let w515 = ala[:ala.lr + 355m, :ala.lr + 356m] << 4dt;
        let w516 = ala[:ala + 364m, :ala + 365m] << 4dt;
        let w517 = ala[:laa - 150m, :laa - 149m] << 2.5dt;

        # Str. 1220 R
        track(:first:station :cat:ac15 :pax,
                ala[:ala.a, :ala.a + 100m] >> 4.5dt
            ..  ala[:ala.lr + 130m, :laa - 250m] >> 0.5dt
        );

        # Str. 1220 L
        track(:first:station :cat:ac15 :pax, ala[:ala.a, :laa - 250m] << 2.5dt);
        with layer = -1 casing(:first:station :cat:ac15,
                ala[:ala.a, :ala.a + 300m] << 2.5dt
        );

        # Str. 1230
        track(:first:station,
                ala[:ala.a, :ala.a + 100m] >> 3.5dt
            ..  ala[:ala.lr - 51m, :ala.lr - 50m] >> 0.5dt
            ..  w509
        );

        # Str. 1230 X
        track(:station, ala[:ala.lr - 50m, :ala.lr - 5m] >> 0.5dt);

        # Str. 1232 R
        track(:first:station :cat:ac15 :pax, ala[:ala.a, :laa - 250m] << 0.5dt);
        with layer = -1 casing(:first:station :cat:ac15,
                ala[:ala.a, :ala.a + 300m] << 0.5dt
        );

        # Str. 1232 L
        track(:first:station :cat:ac15 :pax, ala[:ala.a, :laa - 250m] << 1.5dt);
        with layer = -1 casing(:first:station :cat:ac15,
                ala[:ala.a, :ala.a + 300m] << 1.5dt
        );

        # Gl. 1
        track(:first:station :cat:ac15,
                ala[:ala.a, :ala.lr - 405m] << 3.5dt
            ..  ala[:ala.lr - 260m, :ala.lr + 355m] << 4dt
        );
        with layer = -1 casing(:first:station :cat:ac15,
                ala[:ala.a, :ala.lr - 405m] << 3.5dt
            ..  ala[:ala.lr - 260m, :ala.lr + 355m] << 4dt
        );

        # Gl. 2
        track(:station :cat:ac15,
                w7
            ..  ala[:ala - 640m, :ala - 210m] << 5dt
            ..  w126
        );

        # Gl. 3
        track(:station :cat:ac15,
                w6
             .. w8
             .. ala[:ala - 630m, :ala - 210m] << 6dt
             .. w126
             .. w127
        );

        # Gl. 4
        track(:station :cat:ac15,
                w8
            ..  ala[:ala - 620m, :ala - 200m] << 7dt
            ..  w125
        );

        # Gl. 5
        track(:station :cat:ac15,
                w506
            ..  w6
            ..  ala[:ala - 620m, :ala - 200m] << 8dt
            ..  w125
            ..  w127
            ..  w128
            ..  w129
        );
        with layer = -1 casing(:station :cat:ac15, w506 .. w6);

        # Gl. 6
        track(:station :cat:ac15,
                w9
            ..  w10
            ..  w11
            ..  ala[:ala - 600m, :ala - 190m] << 9dt
            ..  w122
        );

        # Gl. 7
        track(:station :cat:ac15,
                w11
            ..  ala[:ala - 590m, :ala - 190m] << 10dt
            ..  w122
            ..  w124
        );

        # Gl. 8
        track(:station :cat:ac15,
                w12
            ..  ala[:ala - 570m, :ala - 190m] << 11dt
            ..  w123
        );

        # Gl. 9
        track(:station :cat:ac15,
                w10
            ..  w12
            ..  ala[:ala - 570m, :ala - 170m] << 12dt
            ..  w123
            ..  w124
            ..  w129
            ..  w132
        );

        # Gl. 10
        track(:station :cat:ac15,
                w13
            ..  w14
            ..  w15
            ..  ala[:ala - 540m, :ala - 140m] << 13dt
            ..  w121
        );

        # Gl. 11
        track(:station :cat:ac15,
                w15
            ..  ala[:ala - 530m, :ala - 60m] << 14dt
            ..  w132
            ..  w133
        );

        # Gl. 12
        track(:station :cat:ac15,
                w16
            ..  ala[:ala - 520m, :ala + 15m] << 15dt
        );

        # Gl. 13
        track(:station :cat:ac15,
                w14
            ..  w16
            ..  ala[:ala - 520m, :ala - 130m] << 16dt
            ..  w120
        );

        # Gl. 14
        track(:station :cat:ac15,
                w17
            ..  w18
            ..  ala[:ala - 481m, :ala - 140m] << 17dt
            ..  w118
            ..  w119
            ..  w130
            ..  w131
        );

        # Gl. 15
        track(:station :cat:ac15,
                w19
            ..  ala[:ala - 410m, :ala - 170m] << 18dt
            ..  w118
        );

        # Gl. 16
        track(:station :cat:ac15,
                w18
            ..  w20
            ..  ala[:ala - 410m, :ala - 180m] << 19dt
            ..  w117
            ..  w119
        );

        # Gl. 17
        track(:station :cat:ac15,
                w20
            ..  ala[:ala - 420m, :ala - 190m] << 20dt
            ..  w117
        );

        # Gl. 18
        track(:station :cat:ac15,
                w23
            ..  ala[:ala - 400m, :ala - 220m] << 21dt
            ..  w111
            ..  w115
            ..  w116
            ..  w130
        );

        # Gl. 19
        track(:station :cat:ac15,
                w22
            ..  w23
            ..  ala[:ala - 400m, :ala - 220m] << 22dt
            ..  w111
        );

        # Gl. 20
        track(:station :cat:ac15,
                w24
            ..  ala[:ala - 400m, :ala - 220m] << 23dt
            ..  w112
            ..  w115
        );

        # Gl. 21
        track(:station :cat:ac15,
                w3
            ..  w9
            ..  w13
            ..  w17
            ..  w21
            ..  w22
            ..  w24
            ..  ala[:ala - 360m, :ala - 220m] << 24dt
            ..  w112
        );
        with layer = -1 casing(:station :cat:ac15, w3 .. w9);

        # Gl. 22
        track(:station :cat:ac15,
                w27a
            ..  ala[:ala - 340m, :ala - 210m] << 25dt
            ..  w106
        );

        # Gl. 30
        track(:station :cat:ac15,
                ala[:ala.lr + 355m, :ala + 365m] << 4dt
        );

        # Gl. 31
        track(:station :cat:ac15,
                w145
            ..  ala[:ala - 100m, :ala + 256m] << 5dt
            ..  w160
        );

        # Gl. 32
        track(:station :cat:ac15,
                w140
            ..  w143
            ..  ala[:ala - 100m, :ala + 150m] << 6dt
            ..  w157
        );

        # Gl. 33
        track(:station :cat:ac15,
                w143
            ..  ala[:ala - 100m, :ala + 150m] << 7dt
            ..  w157
            ..  w158
        );

        # Gl. 34
        track(:station :cat:ac15,
                w140
            ..  w142
            ..  w144
            ..  w147
            ..  ala[:ala - 50m, :ala + 80m] << 8dt
            ..  w155
            ..  w156
        );

        # Gl. 35
        track(:station :cat:ac15,
                w147
            ..  ala[:ala - 50m, :ala + 80m] << 9dt
            ..  w155
        );

        # Gl. 36
        track(:station :cat:ac15,
                w144
            ..  w146
            ..  ala[:ala - 50m, :ala + 80m] << 10dt
            ..  w153
        );

        # Gl. 37
        track(:station :cat:ac15,
                w146
            ..  ala[:ala - 50m, :ala + 80m] << 11dt
            ..  w153
            ..  w154
            ..  w156
            ..  w159
            ..  w160
            ..  w161
        );

        # Gl. 38
        track(:station,
                w159
            ..  ala[:ala + 310m, :ala + 425m] << 6dt
        );

        # Gl. 40
        track(:station :cat:ac15,
                w103
            ..  w113
            ..  w114
            ..  ala[:ala - 30m, :ala + 10m] << 16dt
            ..  w135
            ..  w137
            ..  w138
        );

        # Gl. 41
        track(:station :cat:ac15,
                w114
            ..  ala[:ala - 30m, :ala + 20m] << 17dt
            ..  w135
        );

        # Gl. 42
        track(:station :cat:ac15,
                w102
            ..  w106
            ..  ala[:ala - 50m, :ala + 30m] << 18dt
            ..  w137
        );

        # Gl. 43
        track(:station :cat:ac15,
                w110
            ..  ala[:ala - 50m, :ala + 60m] << 19dt
            ..  w136
        );

        # Gl. 44
        track(:station :cat:ac15,
                w108
            ..  w110
            ..  ala[:ala - 50m, :ala + 370m] << 20dt
        );

        # Gl. 46
        track(:station :cat:ac15,
                w105
            ..  ala[:ala - 50m, :ala + 465m] << 22dt
        );

        # Gl. 48
        track(:station :cat:ac15,
                w107
            ..  ala[:ala - 80m, :ala + 320m] << 24dt
            ..  w180
            ..  w181
        );

        # Gl. 49
        track(:station :cat:ac15,
                w101
            ..  w102
            ..  w105
            ..  w107
            ..  ala[:ala - 80m, :ala + 320m] << 25dt
            ..  w176
        );

        # Gl. 51
        track(:station :cat:ac15,
                w42
            ..  w43
            ..  w101
            ..  ala[:ala - 200m, :ala + 180m] << 27dt
            ..  ala[:ala + 280m, :ala + 290m] << 26dt
            ..  w175
        );

        # Gl. 52
        track(:station :cat:ac15,
                w40
            ..  w42
            ..  w41
            ..  ala[:ala - 200m, :ala + 160m] << 28dt
            ..  w172
            ..  w173
            ..  w169
            ..  w175
            ..  w176
            ..  w178
            ..  ala[:ala + 465m, :ala + 535m] << 23dt
        );

        # Gl. 53
        track(:station :cat:ac15,
                w41
            ..  ala[:ala - 200m, :ala + 130m] << 29dt
            ..  w172
        );

        # Gl. 54
        track(:station :cat:ac15,
                w30
            ..  w40
            ..  ala[:ala - 240m, :ala + 130m] << 30dt
            ..  w171
        );

        # Gl. 55
        track(:station :cat:ac15,
                w33a
            ..  ala[:ala - 240m, :ala + 120m] << 31dt
            ..  w171
            ..  w173
        );

        # Gl. 56
        track(:station :cat:ac15,
                w31a
            ..  w70
            ..  ala[:ala - 210m, :ala + 120m] << 32.5dt
            ..  w166
            ..  w167
            ..  w168
            ..  w169
        );
        # Gl. 57
        track(:station :cat:ac15,
                w70
            ..  ala[:ala - 210m, :ala + 120m] << 33.5dt
            ..  w166
        );

        # Gl. 58
        track(:station :cat:ac15,
                w71
            ..  ala[:ala - 190m, :ala + 120m] << 34.5dt
            ..  w165
        );

        # Gl. 59
        track(:station :cat:ac15,
                w30
            ..  w39
            ..  w71
            ..  ala[:ala - 190m, :ala + 120m] << 35.5dt
            ..  w165
            ..  w167
        );

        # Gl. 60
        track(:station :cat:ac15,
                w80
            ..  w72
            ..  ala[:ala - 160m, :ala + 120m] << 36.5dt
            ..  w164
            ..  w168
        );

        # Gl. 61
        track(:station :cat:ac15,
                w72
            ..  ala[:ala - 160m, :ala + 240m] << 37.5dt
        );

        # Gl. 96
        track(:station :cat:ac15,
                ala[:ala.lr - 406m, :ala.lr - 405m] << 5.5dt
            ..  ala[:ala - 730m] << 12.50dt
            --  ala[:ala - 720m] << 13.00dt
            ..  ala[:ala - 610m] << 20.0dt
            --  ala[:ala - 530m] << 25.0dt
            ..  w38
            ..  w51
            ..  w80
            ..  ala[:ala - 140m, :ala + 470m] << 39dt
        );

        # Gl. 97
        track(:first:station :cat:ac15,
                ala[:ala.a, :ala.lr - 405m] << 4.5dt
            ..  ala[:ala - 725m] << 11.50dt
            --  ala[:ala - 715m] << 12.00dt
            ..  ala[:ala - 605m] << 19.0dt
            --  ala[:ala - 525m] << 24.0dt
            ..  w37
        );

        # Gl. 98
        with layer = -2 track(:station :cat:ac15,
                ala[:ala.a, :ala.a + 1m] << 0.5dt
            ..  ala[:ala.a + 100m, :ala.a + 101m] >> 0.5dt
            ..  ala[:ala - 720m] << 10.50dt
            --  ala[:ala - 710m] << 11.00dt
            ..  ala[:ala - 600m] << 18.0dt
            --  ala[:ala - 520m] << 23.0dt
            ..  w31a
        );

        # Gl. 99
        with layer = -1 track(:station :removed,
                ala[:ala - 715m] << 9.50dt
            --  ala[:ala - 705m] << 10.00dt
            ..  ala[:ala - 595m] << 17.0dt
            --  ala[:ala - 515m] << 22.0dt
            ..  w33a
        );

        # Gl. 100
        with layer = -1 track(:station :removed,
                ala[:ala - 710m] << 8.50dt
            --  ala[:ala - 700m] << 9.00dt
            ..  ala[:ala - 590m] << 16.0dt
            --  ala[:ala - 510m] << 21.0dt
            ..  w27a
        );

        # Gl. 115
        track(:station,
                ala[:ala + 245m] << 39dt
            --  ala[:ala + 600m] << 46dt
        );

        # Gl. 116
        track(:station,
                ala[:ala + 205m - 0.8dt] << 39dt
            --  ala[:ala + 560m - 0.8dt] << 46dt
        );

        # Gl. 117
        track(:station,
                ala[:ala + 175m - 1.6dt] << 39dt
            --  ala[:ala + 520m - 1.6dt] << 46dt
        );

        # Gl. 200
        track(:station :cat:ac15,
                ala[:ala + 365m, :ala + 820m] << 4dt
            ..  w419
        );

        # Gl. 201
        track(:station :cat:ac15,
                w134
            ..  w150
            ..  w151
            ..  w152
            ..  ala[:ala + 160m, :ala + 460m] << 11.5dt
        );

        # Gl. 202
        track(:station :cat:ac15,
                w151
            ..  ala[:ala + 160m, :ala + 190m] << 12.5dt
        );

        # Gl. 203
        track(:station :cat:ac15,
                w198
            ..  ala[:ala + 160m, :ala + 170m] << 13.5dt
        );

        # Gl. 204
        track(:station :cat:ac15,
                w150
            ..  w198
            ..  ala[:ala + 160m, :ala + 190m] << 14.5dt
        );

        # Gl. 205
        track(:station :cat:ac15,
                w195
            ..  w197
            ..  ala[:ala + 160m, :ala + 170m] << 15.5dt
        );

        # Gl. 206
        track(:station :cat:ac15,
                w197
            ..  ala[:ala + 160m, :ala + 190m] << 16.5dt
        );

        # Gl. 206a
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 640m] << 16.5dt
            ..  w406
        );

        # Gl. 207
        track(:station :cat:ac15,
                w196
            ..  ala[:ala + 160m, :ala + 190m] << 17.5dt
        );

        # Gl. 207a
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 640m] << 17.5dt
            ..  w405
        );

        # Gl. 208
        track(:station :cat:ac15,
                w134
            ..  w195
            ..  w196
            ..  w199
            ..  ala[:ala + 160m, :ala + 190m] << 18.5dt
        );

        # Gl. 208a
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 640m] << 18.5dt
            ..  w405
            ..  w406
            ..  w407
        );

        # Gl. 209
        track(:station :cat:ac15,
                w264
            ..  ala[:ala + 760m, :ala + 780m] << 17.5dt
        );

        # Gl. 210
        track(:station :cat:ac15,
                w263
            ..  ala[:ala + 750m, :ala + 800m] << 18.5dt
        );

        # Gl. 211
        track(:station :cat:ac15,
                w262
            ..  ala[:ala + 740m, :ala + 800m] << 19.5dt
        );

        # Gl. 212
        track(:station :cat:ac15,
                ala[:ala + 370m, :ala + 640m] << 20dt
            ..  ala[:ala + 684m, :ala + 800m] << 20.5dt
        );

        # Gl. 213
        track(:station :cat:ac15,
                ala[:ala + 470m, :ala + 540m] << 22dt
            ..  ala[:ala + 685m, :ala + 800m] << 21.5dt
        );

        # Gl. 214
        track(:station :cat:ac15,
                w186
            ..  ala[:ala + 620m, :ala + 800m] << 22.5dt
        );

        # Gl. 215
        track(:station :cat:ac15,
                w189
            ..  w190
            ..  ala[:ala + 685m, :ala + 800m] << 23.5dt
        );

        with layer = 10, style = :red track(:station, w429);

        # Gl. 216
        track(:station :cat:ac15,
                w190
            ..  ala[:ala + 640m, :ala + 800m] << 24.5dt
        );

        # Gl. 217
        track(:station :cat:ac15,
                w189
            ..  w191
            ..  ala[:ala + 650m, :ala + 800m] << 25.5dt
        );

        # Gl. 218
        track(:station :cat:ac15,
                w178
            ..  ala[:ala + 440m, :ala + 540m] << 24dt
            ..  ala[:ala + 600m] << 25.55dt
            --  ala[:ala + 605m] << 25.80dt
            ..  ala[:ala + 660m, :ala + 800m] << 26.5dt
        );

        # Gl. 222
        track(:station,
                ala[:ala + 650m] << 34.00dt
            --  ala[:ala + 820m] << 27.88dt
        );

        # Gl. 223
        track(:station,
                ala[:ala + 650m] << 35.00dt
            --  ala[:ala + 820m] << 28.88dt
        );

        # Gl. 224
        track(:station,
                w238
            ..  ala[:ala + 650m] << 36.00dt
            --  ala[:ala + 820m] << 29.88dt
        );

        # Gl. 230
        track(:station,
                w244
            ..  ala[:ala + 580m, :ala + 820m] << 38dt
        );

        # Gl. 231
        track(:station,
                ala[:ala + 470m, :ala + 820m] << 39dt
        );

        # Gl. 252
        track(:station :cat:ac15,
                ala[:ala + 680m, :ala + 780m] << 10.5dt
        );

        # Gl. 253
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 790m] << 11.5dt
        );

        # Gl. 254
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 800m] << 12.5dt
        );

        # Gl. 255
        track(:station :cat:ac15,
                ala[:ala + 620m, :ala + 800m] << 13.5dt
        );

        # Gl. 256
        track(:station :cat:ac15,
                ala[:ala + 610m, :ala + 800m] << 14.5dt
        );

        # Gl. 257
        track(:station :cat:ac15,
                ala[:ala + 620m, :ala + 640m] << 15.5dt
            ..  w404
            ..  ala[:ala + 745m, :ala + 755m] << 16.0dt
            ..  ala[:ala + 810m, :ala + 820m] << 15.5dt
        );

        # Gl. 258
        track(:station :cat:ac15,
                w261
            ..  w263
            ..  w264
            ..  ala[:ala + 770m, :ala + 800m] << 16.5dt
        );

        # Gl. 401
        track(:station :cat:ac15,
                w454
            ..  ala[:ala.f - 550m, :ala.f] << 3.5dt
        );

        # Gl. 402
        track(:station :cat:ac15,
                w455
            ..  ala[:ala.f - 480m, :ala.f - 220m] << 4.5dt
            ..  w460
        );

        # Gl. 403
        track(:station :cat:ac15,
                ala[:ala.f - 705m, :ala.f - 625m] << 6.5dt
            ..  ala[:ala.f - 480m, :ala.f - 220m] << 5.5dt
            ..  w460
            ..  w461
        );

        # W1 - W2
        track(:station :cat:ac15, w1 .. w2);

        # W25 - W26
        track(:station :removed, w25 .. w26);

        # W28 - W29
        with layer = -4 track(:station :removed, w28 .. w29);

        # W36 - W37
        track(:station, w36 .. w37);

        # W38 - W39
        track(:station, w38 .. w39);

        # W43 - W44
        track(:station, w43 .. w44);

        # W113 - W116
        track(:station :cat:ac15, w113 .. w116);

        # W142 - W128
        track(:station :cat:ac15, w142 .. w128);

        # W152 - W154
        track(:station :cat:ac15, w152 .. w154);

        # W182 .. W183
        track(:station, w182 .. w183);

        # W191 - W192
        track(:station :cat:ac15, w191 .. w192);

        # W199 - W139
        track(:station :cat:ac15, w199 .. w139);

        # W201 - W164
        track(:station :cat:ac15, w201 .. w164);

        # W238 - W248
        with layer = -1 track(:station :removed, w238 .. w248);

        # W401 - W411
        with layer = -1 track(:station :cat:ac15 :removed, w401 .. w411);

        # W403 - W404
        with layer = -1 track(:station :cat:ac15 :removed, w403 .. w404);

        # W497 - W498
        track(:station :cat:ac15, w497 .. w498);

        # W499 - W500
        track(:station :cat:ac15, w499 .. w500);

        # W501 - W502
        track(:station :cat:ac15, w501 .. w502);
        with layer = -1 casing(:station :cat:ac15, w501 .. w502);

        # W504 - W505
        track(:station :cat:ac15, w504 .. w505);
        with layer = -1 casing(:station :cat:ac15, w504 .. w505);

        # W510 - W511
        track(:station :cat:ac15, w510 .. w511);

        # W512 - W513
        track(:station :cat:ac15, w512 .. w513);

        # W514 - W515
        track(:station :cat:ac15, w514 .. w515);

        # W516 - W517
        track(:station :cat:ac15, w516 .. w517);

        # ICE-Halle
        track(:guide,
                ala[:ala + 190m, :ala + 460m] << 12dt
            --  ala[:ala + 460m, :ala + 610m] << 11dt
            --  ala[:ala + 610m, :ala + 190m] >> 19dt
            --  ala[:ala + 190m, :ala + 191m] << 12dt
        );
        marker(:de.bw :right, ala[:ala + 400m] << 15.5dt << 0.5sw);

        # Stw. Lgf
        marker(:de.stw :right, ala[:ala + 10m] << 14dt);

        # Stw. Lr
        marker(:de.stw :left, ala[:ala + 480m] << 39dt);
    }


    #--- Hamburg-Langenfelde Abzw --------------------------------------------

    with link = "point.de.Hamburg-Langenfelde-Abzw" {
        let w518 = ala[:laa - 111m, :laa - 110m] << 2.5dt;
        let w519 = ala[:laa - 35m, :laa - 34m] << 1.5dt;
        let w520 = ala[:laa - 131m, :laa - 130m] >> 0.5dt;
        let w521 = ala[:laa - 5m, :laa - 4m] << 0.5dt;
        let w522 = ala[:laa - 21m, :laa - 20m] << 1.5dt;
        let w523 = ala[:laa + 45m, :laa + 46m] << 0.5dt;
        let w524 = ala[:laa + 59m, :laa + 60m] << 0.5dt;
        let w525 = ala[:laa + 170m, :laa + 171m] >> 0.5dt;

        # Str. 1220 R
        track(:first:station :cat:ac15 :pax,
                ala[:laa - 250m, :laa + 250m] >> 0.5dt
        );

        # Str. 1220 L
        track(:first:station :cat:ac15 :pax,
                ala[:laa - 250m, :laa + 250m] << 2.5dt
        );

        # Str. 1232 R
        track(:first:station :cat:ac15 :pax,
                ala[:laa - 250m, :laa + 250m] << 0.5dt
        );

        # Str. 1232 L
        track(:first:station :cat:ac15 :pax,
                ala[:laa - 250m, :laa + 250m] << 1.5dt
        );

        # W518 - W519
        track(:station :cat:ac15, w518 .. w519);

        # W520 - W521
        track(:station :cat:ac15, w520 .. w521);

        # W522 - W523
        track(:station :cat:ac15, w522 .. w523);

        # W524 - W525
        track(:station :cat:ac15, w524 .. w525);

        marker(:de.bft.abzw :cat:ac15, ala[:laa] >> 0.5dt);
    }


    #--- Streckengleise Langenfelde - Eidelstedt -----------------------------

    with link = "line.de.1220" {
        # Str. 1220 L
        track(:first :cat:ac15 :pax :tight :flip,
                ala[:laa + 250m, :laa + 251m] << 2.5dt
            ..  ak[:stx, :eid.a] << 2.5dt
        );

        # Str. 1232 L/R
        track(:first :double :cat:ac15 :pax,
                ala[:laa + 250m, :laa + 251m] << 1.0dt
            ..  ak[:stx, :eid.a] << 1.0dt
        );

        # Str. 1220 R
        track(:first :cat:ac15 :pax :tight,
                ala[:laa + 250m, :laa + 251m] >> 0.5dt
            ..  ak[:stx, :eid.a] >> 0.5dt
        );
    }


    #--- Hamburg-Eidelstedt-Ef -----------------------------------------------
    #
    # ak[:eif - 1370m, :eif + 400m]

    with link = "point.de.Hamburg-Eidelstedt-Ef" {
        # Gl. 31 (Streckengleis Strecke 1234)
        track(:first:station :cat:ac15,
                path("d4.de.1234")[:aa, :aa - 1m]
            ..  ak[:eif - 630m, :eif - 615m] << 5.5dt
            ..  ak[:eif - 560m] << 5.0dt
            --  ak[:eif - 400m] << 3.0dt
            ..  ak[:eif - 200m, :eif] << 1.5dt
        );

        # Gl. 53
        track(:station :cat:ac15,
                ak[:eif - 630m, :eif - 615m] << 7.5dt
            ..  ak[:eif - 560m] << 7.0dt
            --  ak[:eif - 400m] << 5.0dt
            ..  ak[:eif - 200m, :eif + 20m] << 3.5dt
            ..  ak[:eif + 220m, :eif + 400m] << 9.5dt
        );

        # Gl. 62 (Richtungsgleis Strecke 1232)
        with layer = 2 track(:first:station :cat:ac15 :pax,
                ak[:eif - 1370m, :eif] << 0.5dt
        );
        with layer = 1 casing(:first:station :cat:ac15,
                ak[:eif - 950m, :eif - 650m] << 0.5dt
        );
        track(:station :cat:ac15,
                ak[:eif, :eif + 400m] << 0.5dt
        );

        # Gl. 405 (Richtungsgleis Strecke 1220)
        with layer = 2 track(:first:station :cat:ac15 :pax,
                ak[:eif - 1370m, :eif + 400m] >> 0.5dt
        );
        with layer = 1 casing(:first :cat:ac15,
                ak[:eif - 950m, :eif - 650m] >> 0.5dt
        );

        # W1 - W2
        track(:station :cat:ac15,
                ak[:eif - 1320m] << 0.5dt
            --  ak[:eif - 1230m] << 1.5dt
        );

        marker(:de.stw :left, ak[:eid.egs] << 1.5dt);
        marker(:de.bft :left, ak[:eif] << 4.5dt);
    }
}


with detail = 5 {
    #--- Pinneberg -----------------------------------------------------------

    with link = "point.de.Pinneberg" {
        # Gl. 3 (W5 - W21 - W24)
        track(:station :cat:ac15 :pax,
                ak[:pin - 331m, :pin - 330m] >> 0.5dt
            ..  ak[:pin - 200m, :pin + 320m] >> 1.5dt
            ..  ak[:pin + 420m, :pin + 421m] >> 0.5dt
        );

        # Gl. 4 (Richtungsgleis Strecke 1220)
        track(:first:station :cat:ac15 :pax, ak[:pin.a, :pin.f] >> 0.5dt);

        # Gl. 5 (Gegenrichtungsgleis Strecke 1220)
        track(:first:station :cat:ac15 :pax,
                ak[:pin.a, :pin - 220m] << 0.5dt
            ..  ak[:pin - 100m, :pin + 170m] << 1.5dt
            ..  ak[:pin + 330m, :pin.f] << 0.5dt
        );

        # Gl. 6 (W7 - W34)
        track(:station :cat:ac15,
                ak[:pin - 221m, :pin - 220m] << 0.5dt
            ..  ak[:pin - 100m, :pin + 400m] << 2.5dt
            ..  ak[:pin + 480m, :pin + 530m] << 1.5dt
            ..  ak[:pin + 620m, :pin + 621m] << 0.5dt
        );

        # Gl. 31 (ab W21)
        track(:station,
                ak[:pin + 59m, :pin + 60m] >> 1.5dt
            ..  ak[:pin + 120m, :pin + 310m] >> 2.5dt
        );

        # W1 - W2
        track(:station :cat:ac15,
                ak[:pin - 550m] >> 0.5dt
            --  ak[:pin - 450m] << 0.5dt
        );

        # W3 - W4
        track(:station :cat:ac15,
                ak[:pin - 440m] << 0.5dt
            --  ak[:pin - 340m] >> 0.5dt
        );

        # W23 - W25
        track(:station :cat:ac15,
                ak[:pin + 320m] >> 0.5dt
            --  ak[:pin + 420m] << 0.5dt
        );

        # W31 - W32
        track(:station :cat:ac15,
                ak[:pin + 450m] >> 0.5dt
            --  ak[:pin + 550m] << 0.5dt
        );

        # W35 - W36
        track(:station :cat:ac15,
                ak[:pin + 630m] >> 0.5dt
            --  ak[:pin + 720m] << 0.5dt
        );

        # Bahnsteig Gl 3
        platform(:open :cat:ac15 :pax,
                ak[:pin - 200m, :pin + 20m] >> 1.9dt
            --  ak[:pin + 20m, :pin - 200m] << 2.5dt
        );

        # Bahnsteig Gl 4/5
        platform(:open :cat:ac15 :pax,
                ak[:pin - 100m, :pin + 170m] >> 0.1dt
            --  ak[:pin + 170m, :pin - 100m] >> 1.1dt
        );

        marker(:de.bf :cat:ac15 :pax :right, ak[:pin] >> 1.9dt);
        station(:left :cat:ac15 :pax, ak[:pin] << 5.5dt,
            span(:bold, "Pinneberg"),
            "1220: 15,95"
        );
    }
}

