# DE 1023.  Kiel Hbf (ausschl.) - Neustadt (Holst)
#
let kn = path("d4.de.1023");

with detail = 5 {
    with link = "point.de.Kiel-Hbf-Ss" {
        track(:first :station, kn[:kss.a, :wel - 0.5sw]);
        track(:station,
                kn[:agaa - 2.1dl, :agaa - 2dl]
            --  kn[:agaa - 1dl, :agaa + 1dl] << 1dt
        );
        
        # aus Meimersdorf
        track(:first :station,
                kn[:agaa - 2dl, :kss - 1dl] >> 1dt
            --  kn[:kss, :kss + .1dl]
        );
        track(:station,
                kn[:agaa - 1.1dl, :agaa - 1dl] >> 1dt
            --  kn[:agaa + 3dl, :agaa + 3.01dl] << 3dt
        );

        # Segeberger Kleinbahn
        with layer = -1 track(:third :removed :station,
                kn[:fkis, :agaa + 3dl] << 2dt
        );

        # Schönberger Kleinbahn
        track(:third :station, kn[:fkis, :agaa + 3dl] << 3dt);

        # Übergabegleise aus Kiel Süd
        with layer = -1 {
            track(:station :removed, kn[:fkis, :kss.f] << 1dt);
            track(:station :removed,
                    kn[:kss - .1dl, :kss]
                --  kn[:kss + 1dl, :kss + 1.1dl] << 1dt
            );
            track(:station :removed,
                    kn[:kss + 1.9dl, :kss + 2dl] << 1dt
                --  kn[:kss + 3dl, :kss.f - 4dl] << 2dt
                --  kn[:kss.f - 3dl, :kss.f - 2.9dl] << 1dt
            );
        }

        marker(:de.abzw :left, kn[:kss] << 3dt);
    }
}

