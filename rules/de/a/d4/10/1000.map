# DE 1000. Flensburg Weiche - Flensburg Grenze
#
let fh = path("d3.de.1000");

with detail = 4 {
    with railway = :first :cat:ac15 :pax  {
        with link = "line.de.1000" {
            track(:double,
                    fh[:flw - 0.1dl, :flw] << 4dt
                ..  fh[:fri.yf, :fri.yf + 0.1dl]
            );
            track(:double :ror, fh[:fri.yf, :fri - 300m]);
        }

        with link = "point.de.Flensburg-Friedensweg", railway = :station {
            # DE 1000
            track(fh[:fri - 300m, :fri + 100m] << 0.5mo);
            track(
                    fh[:fri - 300m, :fri - 299m] >> 0.5mo
                ..  fh[:fri - 170m, :fri - 169m] >> 1.5mo
            );

            # DE 1005
            track(
                    fh[:fri - 300m, :fri - 170m] >> 1.5mo
                ..  fh[:fri, :fri + 100m] >> 0.5mo
            );

            marker(:right :de.abzw, fh[:fri] >> 0.5mo >> 0.5mt);
            station(
                :left, fh[:fri + 0.8sw] << 1.5mo,
                hbox(:center :top, "F. ", span(:bold, "Friedensweg")),
                hbox(:right :top,
                    vbox(:left :top,
                        "1000: ",
                        "1005: "
                    ),
                    vbox(:sep :top,
                        hbox(:sep :base, "174,", anchor(), "57"),
                        hbox(:sep :base, "5,", anchor(), "49")
                    ),
                    vbox(:left :top,
                        span(:former, " (168,75)")
                    )
                )
            );
        }

        with link = "line.de.1000" {
            track(:double, fh[:fri + 100m, :fri + 1.7km]);
            line_label(:left:e,
                fh[:fri + 1.7km] << 0.5mo << 0.5mt, (0dt, 0.15dt),
                "1000"
            );
            track(:double, fh[:fri + 1.7km, :har - 0.5sw]);
        }

        with link = "point.de.Harrislee", railway = :station {
            track(:double, fh[:har - 0.5sw, :har + 0.5sw]);
            marker(:right :de.bf :removed, fh[:har] >> 0.5mo >> 0.5mt);
            station(:right :left_align :removed, fh[:har - .4sw] >> 1.6sw,
                "Harrislee",
                hbox(:center:base, "177,44 ", span(:former, "(171,87)"))
            );
        }

        with link = "line.de.1000" {
            track(:double, fh[:har + 0.5sw, :har + 1.2km]);
            line_label(:right:w,
                fh[:har + 1.2km] >> 0.5mo >> 0.5mt, (0dt, -0.2dt), 
                "1000"
            );
            track(:double, fh[:har + 1.2km, :hag]);
        }

        with link = "point.int.Harrislee-Padborg" {
            marker(:right :de.dirgr, fh[:hag] >> 0.5mo >> 0.5mt);
            marker(:left :de.dirgr, fh[:hag] << 0.5mo << 0.5mt);
            label(fh[:hag] >> 1.7sh,
                vbox(:left:middle :medium,
                    " Padborg gr√¶nse ", hrule(), " Flensburg Grenze"
                )
            );
            label(fh[:hag] << 1.7sh,
                hbox(:right:middle :xsmall,
                    vbox(:right:top, "DK ", hrule(), "DE "),
                    vbox(:right:top, "FPB: ", hrule(), "1000: "),
                    vbox(:sep:top,
                        hbox(:sep:base, "110,", anchor(), "6"),
                        hrule(),
                        hbox(:sep:base, "179,", anchor(), "784 ")
                    )
                )
            );
        }
    }
}

