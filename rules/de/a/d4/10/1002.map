# DE 1002.  Flensburg Weiche - Flensburg Hafen Ost
# DE 1003.  Flensburg Alter Bf - Flensburg Hafen West
#
let flwfho = path("d4.de.1002");
let flafhw = path("d4.de.1003");

with detail = 4 {
    # point.de.Flensburg-Weiche  de.1040


    with link = "line.de.1002" {
        with layer = -4 track(:second :removed :flip,
                flwfho[:flw.f, :wil - 1sw] << 1.5dt
        );
    }


    # point.de.Flensburg-Wilhelminental  de.1040


    with link = "line.de.1002" {
        track(:second :closed :flip,
               flwfho[:wil + 1sw, :afla] << 1.5dt
            .. flwfho[:afle.f, :fla.a]
        );

        guide(:linenum :closed,
                flwfho[:wil + 0.92km] << 0.7dt
            --  flwfho[:wil + 0.92km] << 3.0dt
        );
        label(:linenum :closed, flwfho[:wil + 0.92km] << 3.2dt + (1dt, 0dt),
            hbox(:right:bottom, "1002")
        );
    }


    with link = "point.de.Flensburg-Alter-Bf" {
        track(:second :closed :station, flwfho[:fla.a, :fla + .5sw]);
        marker(:de.bf :closed :left, flwfho[:fla] << 1dt);
        station(
            :left :closed, flwfho[:fla - 0.5sw] << 1.7sh << 1dt,
            "F. Alter Bf", "177,305"
        );
    }

    
    with link = "line.de.1002" {
        track(:station :closed :flip, flwfho[:fla + .5sw, :f]);

        guide(:linenum :closed,
                flwfho[:fla + 1.5km] >> 0.7dt
            --  flwfho[:fla + 1.5km] >> 3.0dt
        );
        label(:linenum :closed, flwfho[:fla + 1.5km] >> 3.0dt,
            hbox(:left:middle, " 1002")
        );
    }

    with link = "line.de.1003" {
        track(:station :closed,
               flwfho[:fla.a + .9dl, :fla.a + 1dl]
            -- flwfho[:fla.a + 2dl, :fla + .5sw] << 1dt
            .. flafhw[:aa, :f]
        );

        guide(:linenum :closed,
                flafhw[:fla.g + 0.85km] << 0.7dt
            --  flafhw[:fla.g + 0.85km] << 3.0dt
        );
        label(:linenum :closed, flafhw[:fla.g + 0.85km] << 3.0dt,
            hbox(:right:middle, "1003 ")
        );
    }
}

