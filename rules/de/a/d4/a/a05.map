# DE A05.  Husum - Flensburg Weiche
#
let hf = path("d4.de.a05");

let hus_wan = vbox(:center:top,
    span(:bold, "A05"),
    hrule(),
    span(:xsmall, " Husum – Fl.W. "),
    " ∗ 1926 DR ",
    hrule(),
    span(:xsmall, " Husum – Wanderup "),
    " † 1959 "
);

let wan_fle = vbox(:center:top,
    span(:bold, "A05"),
    hrule(),
    span(:xsmall, " Husum – Fl.W. "),
    " ∗ 1926 DR ",
    " ‡ 1959 ",
    hrule(),
    span(:xsmall, " Wanderup – Fl.W. "),
    " † 1970 "
);

with detail = [4, 5] {
    # point.de.Husum  de.1210

    with link = "line.de.A05" {
        track(:second :removed,
                hf[:hus.a, :hus.a + 1dt] << 3.5dt
            ..  hf[:hus.aa, :hus.yf] << 1dt
            ..  hf[:hus.yyf, :swe - 1sw]
        );
        line_label(:left:e :removed, hf[:swe - 1.2km], "A05");
    }

    with link = "point.de.Schwesing-Nord" {
        track(:second:station :removed, hf[:swe - 1sw, :swe + 1sw]);
        marker(:right :de.hp :removed, hf[:swe]);
        station(:right :removed, hf[:swe - 0.3sw] >> 1.7sh,
            "Schwesing Nord", "5,37"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:swe + 1sw, :imm - 1sw]);
    }

    with link = "point.de.Immenstedt-Schlesw" {
        track(:second:station :removed, hf[:imm - 1sw, :imm + 1sw]);
        marker(:right :de.hst :removed, hf[:imm]);
        marker(:right :de.exbf :removed, hf[:imm]);
        station(:right :removed, hf[:imm - 0.3sw] >> 1.9sh,
            hbox(:left:base, "Immenstedt ", span(:light, "(Schlesw)")),
            "10,06"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:imm + 1sw, :vio - 1sw]);
        line_box(:left:se :removed, hf[:imm + 1.8km], (0dt, 1sw), hus_wan);
    }

    with link = "point.de.Viöl" {
        track(:second:station :removed, hf[:vio - 1sw, :vio + 1sw]);
        marker(:right :de.hst :removed, hf[:vio]);
        marker(:right :de.exbf :removed, hf[:vio]);
        station(:right :removed, hf[:vio - 0.3sw] >> 1.9sh,
            "Viöl", "13,84"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:vio + 1sw, :has - 1sw]);
    }

    with link = "point.de.Haselund" {
        track(:second:station :removed, hf[:has - 1sw, :has + 1sw]);
        marker(:right :de.hst :removed, hf[:has]);
        marker(:right :de.exbf :removed, hf[:has]);
        station(:right :removed, hf[:has - 0.3sw] >> 1.7sh,
            "Haselund", "16,71"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:has + 1sw, :low.a]);
    }

    with link = "point.de.Löwenstedt" {
        track(:second:station :removed, hf[:low.a, :low.yb]);
        track(:second:station :removed,
                hf[:low - 201m, :low - 200m]
            ..  hf[:low - 130m, :low.yb] << 1dt
        );
        marker(:left :de.hst :removed, hf[:low] << 1dt);
        marker(:left :de.exbf :removed, hf[:low] << 1dt);
        station(:left :removed, hf[:low - 0.1sw] << 2.3sw,
            span(:bold, "Löwenstedt"),
            hbox(:center:top,
                vbox(:right:top, "A06: ", "A05: "),
                vbox(:right:top, "13,", "19,"),
                vbox(:left:top, "90", "93")
            )
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:low.yb, :jol - 1sw]);
    }

    with link = "point.de.Joldelund" {
        track(:second:station :removed, hf[:jol - 1sw, :jol + 1sw]);
        marker(:left :de.hst :removed, hf[:jol]);
        marker(:left :de.exbf :removed, hf[:jol]);
        station(:left :removed, hf[:jol - 0.4sw] << 1.7sh,
            "Joldelund", "24,79"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:jol + 1sw, :sil - 1sw]);
        line_box(:right:nw :removed, hf[:sil - 0.8km], (-1.0sw, 0dt), hus_wan);
    }

    with link = "point.de.Sillerup" {
        track(:second:station :removed, hf[:sil - 1sw, :sil + 1sw]);
        marker(:left :de.hst :removed, hf[:sil]);
        marker(:left :de.exbf :removed, hf[:sil]);
        station(:top :removed, hf[:sil] << 1.6sh,
            "Sillerup", "28,97"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:sil + 1sw, :gwi - 1sw]);
    }

    with link = "point.de.Großenwiehe" {
        track(:second:station :removed, hf[:gwi - 1sw, :gwi + 1sw]);
        marker(:left :de.hp :removed, hf[:gwi]);
        marker(:left :de.exbf :removed, hf[:gwi]);
        station(:top :removed, hf[:gwi] << 1.5sh,
            "Großenwiehe", "31,75"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:gwi + 1sw, :wan - 1sw]);
    }

    with link = "point.de.Wanderup" {
        track(:second:station :removed, hf[:wan - 1sw, :wan + 1sw]);
        marker(:right :de.hst :removed, hf[:wan]);
        marker(:right :de.exbf :removed, hf[:wan]);
        station(:right :removed, hf[:wan - 0.1sw] >> 2.3sh,
            "Wanderup", "37,03"
        );
    }

    with link = "line.de.A05" {
        track(:second :removed, hf[:wan + 1sw, :hau - 1sw]);
    }

    with link = "point.de.Haurup" {
        track(:second:station :removed, hf[:hau - 1sw, :hau + 1sw]);
        marker(:right :de.hp :removed, hf[:hau]);
        marker(:right :de.exbf :removed, hf[:hau]);
        station(:left :removed, hf[:hau - 0.4sw] << 1.5dt,
            "Haurup", "40,17"
        );
    }

    with link = "line.de.A05" {
        with layer = -4 track(:second :removed,
                hf[:hau + 1sw, :flw.aal]
            ..  path("d4.de.1040")[:fws + 10dl, :flw.wr2 - 7dl] << 12dt
        );
        line_box(:left:se :removed, hf[:hau + 1.3km], (0dt, 1sw), wan_fle);
    }
}

