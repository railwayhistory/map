# DE 6171.  Berlin-Wedding Abzw - Berlin Südkreuz Südende
#
let ws = path("d4.de.6171");

with detail = 5 {
    # point.de.Berlin-Wedding-Abzw: de.6170


    with link = "line.de.6171" {
        with layer = 1 track(:first :double :cat:ac15 :pax :casing,
                ws[:wea.y, :wea.y + 0.1dl] << 1dt
            ..  ws[:hbn.y, :hbn.y + 0.1dl]
        );
    }


    with link = "point.de.Berlin-Hbf-Lehrter-Bf" {
        # Gl. 1
        track(:first:station :cat:ac15 :pax,
                ws[:hbn.y, :hbf - 440m] >> 1.5dt
            ..  ws[:hbf - 170m, :hbf + 300m] >> 5.5dt
            ..  ws[:hbf + 425m] >> 2.95dt -- ws[:hbf + 430m] >> 2.8dt
            ..  ws[:hbf + 500m, :hbf.f] >> 1.5dt
        );
            # W103 - W104
            track(:station :cat:ac15 :pax,
                    ws[:hbn.y + 279m, :hbn.y + 280m] >> 1.5dt
                ..  ws[:hbn.y + 405m, :hbn.y + 406m] >> 0.5dt
            );
            # W144 - W145
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 519m, :hbf + 520m] >> 1.5dt
                ..  ws[:hbf + 600m, :hbf + 601m] >> 0.5dt
            );

        # Gl. 2
        track(:station :cat:ac15 :pax,
                ws[:hbf - 461m, :hbf - 340m] >> 1.5dt
            ..  ws[:hbf - 170m, :hbf + 300m] >> 3.5dt
            ..  ws[:hbf + 395m] >> 2.05dt -- ws[:hbf + 400m] >> 1.95dt
            ..  ws[:hbf + 500m, :hbf + 510m] >> 0.5dt
        );
            # W121 - W122
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 341m, :hbf - 340m] >> 1.5dt
                ..  ws[:hbf - 255m] >> 1.5dt -- ws[:hbf - 250m] >> 1.6dt
            );
            # W133 - W135
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 299m, :hbf + 300m] >> 3.5dt
                ..  ws[:hbf + 425m] >> 2.95dt -- ws[:hbf + 430m] >> 2.8dt
            );
            # W136 - W137
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 395m] >> 2.05dt -- ws[:hbf + 400m] >> 1.95dt
                ..  ws[:hbf + 500m, :hbf + 501m] >> 1.5dt
            );

        # Gl. 3
        track(:station :cat:ac15 :pax,
                ws[:hbf - 341m, :hbf - 340m + 0.5dl] >> 0.5dt
            ..  ws[:hbf - 255m] >> 1.5dt -- ws[:hbf - 250m] >> 1.6dt
            ..  ws[:hbf - 170m + 0.5dl, :hbf + 300m] >> 2.5dt
            ..  ws[:hbf + 395m] >> 2.05dt -- ws[:hbf + 400m] >> 1.95dt
        );
            # W123 - W124
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 255m] >> 1.5dt -- ws[:hbf - 250m] >> 1.6dt
                ..  ws[:hbf - 170m, :hbf - 169m] >> 3.5dt
            );

        # Gl. 4
        track(:first:station :cat:ac15 :pax, ws[:hbn.y, :hbf.f] >> 0.5dt);
            # W107 - W108
            track(:station :cat:ac15 :pax,
                    ws[:hbn.y + 474m, :hbn.y + 475m] >> 0.5dt
                ..  ws[:hbn.y + 555m, :hbn.y + 556m] << 0.5dt
            );
            # W109 - W110
            track(:station :cat:ac15 :pax,
                    ws[:hbn.y + 539m, :hbn.y + 540m] >> 0.5dt
                ..  ws[:hbn.y + 665m, :hbn.y + 666m] >> 1.5dt
            );
            # W147 - W148
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 599m, :hbf + 600m] >> 0.5dt
                ..  ws[:hbf + 680m, :hbf + 681m] << 0.5dt
            );
            # W150 - W151
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 679m, :hbf + 680m] >> 0.5dt
                ..  ws[:hbf + 760m, :hbf + 761m] >> 1.5dt
            );

        # Gl. 5
        track(:first:station :cat:ac15 :pax, ws[:hbn.y, :hbf.f] << 0.5dt);
            # W105 - W106
            track(:station :cat:ac15 :pax,
                    ws[:hbn.y + 384m, :hbn.y + 385m] << 0.5dt
                ..  ws[:hbn.y + 460m, :hbn.y + 461m] >> 0.5dt
            );
            # W111 - W112
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 580m] << 0.5dt
                --  ws[:hbf - 500m] << 1.5dt
            );
            # W115 - W116
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 351m, :hbf - 350m] << 0.5dt
                ..  ws[:hbf - 260m] << 1.95dt -- ws[:hbf - 250m] << 2.05dt
            );
            # W146 - W149
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 599m, :hbf + 600m] << 0.5dt
                ..  ws[:hbf + 680m, :hbf + 681m] >> 0.5dt
            );
            # W152 - W153
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 679m, :hbf + 680m] << 0.5dt
                ..  ws[:hbf + 760m, :hbf + 761m] << 1.5dt
            );

        # Gl. 6
        track(:station :cat:ac15 :pax,
                ws[:hbf - 440m, :hbf - 340m] << 1.5dt
            ..  ws[:hbf - 260m] << 1.95dt -- ws[:hbf - 250m] << 2.05dt
            ..  ws[:hbf - 170m, :hbf + 300m] << 2.5dt
            ..  ws[:hbf + 395m] << 2.05dt -- ws[:hbf + 400m] << 1.95dt
        );
            # W117 - W118
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 260m] << 1.95dt -- ws[:hbf - 250m] << 2.05dt
                ..  ws[:hbf - 170m, :hbf - 169m] << 3.5dt
            );

        # Gl. 7
        track(:station :cat:ac15 :pax,
                ws[:hbf - 371m, :hbf - 370m] << 1.5dt
            ..  ws[:hbf - 210m, :hbf + 300m] << 3.5dt
            ..  ws[:hbf + 395m] << 2.05dt -- ws[:hbf + 400m] << 1.95dt
            ..  ws[:hbf + 500m, :hbf + 510m] << 0.5dt
        );
            # W130 - W131
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 299m, :hbf + 300m] << 3.5dt
                ..  ws[:hbf + 425m] << 2.95dt -- ws[:hbf + 430m] << 2.8dt
            );
            # W139 - W140
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 395m] << 2.05dt -- ws[:hbf + 400m] << 1.95dt
                ..  ws[:hbf + 500m, :hbf + 501m] << 1.5dt
            );

        # Gl. 8
        track(:first:station :cat:ac15 :pax,
                ws[:hbn.y, :hbf - 440m] << 1.5dt
            ..  ws[:hbf - 170m, :hbf + 300m] << 5.5dt
            ..  ws[:hbf + 425m] << 2.95dt -- ws[:hbf + 430m] << 2.8dt
            ..  ws[:hbf + 500m, :hbf.f] << 1.5dt
        );
            # W101 - W102
            track(:station :cat:ac15 :pax,
                    ws[:hbn.y + 229m, :hbn.y + 230m] << 1.5dt
                ..  ws[:hbn.y + 355m, :hbn.y + 356m] << 0.5dt
            );
            # W142 - W143
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 519m, :hbf + 520m] << 1.5dt
                ..  ws[:hbf + 600m, :hbf + 601m] << 0.5dt
            );

        # Bahnsteig 1/2
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] >> 5.1dt
            --  ws[:hbf + 280m, :hbf - 150m] << 3.9dt
        );

        # Bahnsteig 3/4
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] >> 0.9dt
            --  ws[:hbf + 280m, :hbf - 150m] << 2.1dt
        );

        # Bahnsteig 5/6
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] << 0.9dt
            --  ws[:hbf + 280m, :hbf - 150m] >> 2.1dt
        );

        # Bahnsteig 7/8
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] << 5.1dt
            --  ws[:hbf + 280m, :hbf - 150m] >> 3.9dt
        );

        marker(:right :de.bf :cat:ac15 :pax, ws[:hbf - 1sw] >> 5.5dt);
        label(:cat:ac15 :pax, ws[:hbf - 0.5sw] >> 5.5dt >> 1.8sh,
            hbox(:right:bottom,
                vbox(:center:bottom,
                    hbox(:center:bottom :xsmall,
                        vbox(:right:bottom, "6107: ", "6171: ", "   6134: "),
                        vbox(:right:bottom, "1,", "2,", "2,"),
                        vbox(:left:bottom, "30", "20", "20")
                    ),
                    span(:medium :bold, "Berlin Hauptbahnhof-Lehrter Bf.")
                )
            )
        );


    }
}

