# DE 6171.  Berlin-Wedding Abzw - Berlin Südkreuz Südende
#
let ws = path("d4.de.6171");

with detail = 4 {
    # point.de.Berlin-Wedding-Abzw: de.6170


    with link = "line.de.6171" {
        with layer = 1 track(:first :double :cat:ac15 :pax :casing,
                ws[:wea.y, :wea.y + 0.1dl] << 1dt
            ..  ws[:hbn.y, :hbn.y + 0.1dl]
        );
    }


    with link = "point.de.Berlin-Hbf-Lehrter-Bf" {
        # Gl. 1
        track(:first:station :cat:ac15 :pax,
                ws[:hbn.y, :hbf - 460m] >> 1.5dt
            --  ws[:hbf - 300m, :hbf + 300m + 0.7dl] >> 3.5dt
            --  ws[:hbf + 460m + 0.7dl, :hbf.f] >> 1.5dt
        );
            # W103 - W104
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 880m] >> 1.5dt
                --  ws[:hbf - 760m] >> 0.5dt
            );

        # Gl. 2
        track(:station :cat:ac15 :pax,
                ws[:hbf - 380m, :hbf + 380m + 0.7dl] >> 2.5dt
        );
            # W133 - W134
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 300m] >> 2.5dt
                --  ws[:hbf + 360m] >> 1.5dt
            );

        # Gl. 3
        track(:station :cat:ac15 :pax,
                ws[:hbf - 341m, :hbf - 340m] >> 2.5dt
            --  ws[:hbf - 280m, :hbf + 460m + 0.7dl] >> 1.5dt
        );
            # W123 - W124
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 220m] >> 1.5dt
                --  ws[:hbf - 160m] >> 2.5dt
            );
            # W136 - W138
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 360m + 0.7dl] >> 1.5dt
                --  ws[:hbf + 420m + 0.7dl] >> 0.5dt
            );
            # W144 - W145
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 500m + 0.7dl] >> 1.5dt
                --  ws[:hbf + 560m + 0.7dl] >> 0.5dt
            );

        # Gl. 4
        track(:first:station :cat:ac15 :pax, ws[:hbn.y, :hbf.f] >> 0.5dt);
            # W107 - W108
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 680m] >> 0.5dt
                --  ws[:hbf - 600m] << 0.5dt
            );
            # W109 - W110
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 620m] >> 0.5dt
                --  ws[:hbf - 540m] >> 1.5dt
            );
            # W120 - W122
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 310m] >> 0.5dt
                --  ws[:hbf - 250m] >> 1.5dt
            );
            # W144 - W145
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 600m + 0.7dl] >> 0.5dt
                --  ws[:hbf + 680m + 0.7dl] << 0.5dt
            );
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 700m + 0.7dl] >> 0.5dt
                --  ws[:hbf + 780m + 0.7dl] >> 1.5dt
            );

        # Gl. 5
        track(:first:station :cat:ac15 :pax, ws[:hbn.y, :hbf.f] << 0.5dt);
            # W105 - W106
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 780m] << 0.5dt
                --  ws[:hbf - 700m] >> 0.5dt
            );
            # W111 - W112
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 580m] << 0.5dt
                --  ws[:hbf - 500m] << 1.5dt
            );
            # W117 - W118
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 310m] << 0.5dt
                --  ws[:hbf - 250m] << 1.5dt
            );
            # W144 - W145
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 600m + 0.7dl] << 0.5dt
                --  ws[:hbf + 680m + 0.7dl] >> 0.5dt
            );
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 700m + 0.7dl] << 0.5dt
                --  ws[:hbf + 780m + 0.7dl] << 1.5dt
            );

        # Gl. 6
        track(:station :cat:ac15 :pax,
                ws[:hbf - 341m, :hbf - 340m] << 2.5dt
            --  ws[:hbf - 280m, :hbf + 460m + 0.7dl] << 1.5dt
        );
            # W117 - W118
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 220m] << 1.5dt
                --  ws[:hbf - 160m] << 2.5dt
            );
            # W139 - W141
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 360m + 0.7dl] << 1.5dt
                --  ws[:hbf + 420m + 0.7dl] << 0.5dt
            );
            # W142 - W143
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 500m + 0.7dl] << 1.5dt
                --  ws[:hbf + 560m + 0.7dl] << 0.5dt
            );

        # Gl. 7
        track(:station :cat:ac15 :pax,
                ws[:hbf - 380m, :hbf + 380m + 0.7dl] << 2.5dt
        );
            # W133 - W134
            track(:station :cat:ac15 :pax,
                    ws[:hbf + 300m] << 2.5dt
                --  ws[:hbf + 360m] << 1.5dt
            );

        # Gl. 8
        track(:first:station :cat:ac15 :pax,
                ws[:hbn.y, :hbf - 460m] << 1.5dt
            --  ws[:hbf - 300m, :hbf + 300m + 0.7dl] << 3.5dt
            --  ws[:hbf + 460m + 0.7dl, :hbf.f] << 1.5dt
        );
            # W101 - W102
            track(:station :cat:ac15 :pax,
                    ws[:hbf - 930m] << 1.5dt
                --  ws[:hbf - 810m] << 0.5dt
            );

        # Bahnsteig 1/2
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] >> 3.5dt
            --  ws[:hbf + 280m, :hbf - 150m] << 2.5dt
        );

        # Bahnsteig 3/4
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] >> 0.5dt
            --  ws[:hbf + 280m, :hbf - 150m] << 1.5dt
        );

        # Bahnsteig 5/6
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] << 0.5dt
            --  ws[:hbf + 280m, :hbf - 150m] >> 1.5dt
        );

        # Bahnsteig 7/8
        platform(:cat:ac15 :pax,
                ws[:hbf - 150m, :hbf + 280m] << 3.5dt
            --  ws[:hbf + 280m, :hbf - 150m] >> 2.5dt
        );

        marker(:right :de.bf :cat:ac15 :pax, ws[:hbf - 1.5sw] >> 3.5dt);
    }
}

