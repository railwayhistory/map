# DE 6100.  Berlin-Spandau - Hamburg-Altona
#
let ba = path("d4.de.w.6100");
let ba.wis = path("d4.de.6100.wis");

with detail = [4, 5] {
    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:nau.f,  :bed - 1sw]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:lie + 2.0km], "6100");
    }


    with link = "point.de.Nauen-Lietzow" {
        with layer = -1 marker(:de.bk :removed :left, ba[:lie] << 0.5dt);
        station(:bottom :removed, ba[:lie] << 0.5dt << 1.4sh,
            "Lietzow", "38,12"
        );
    }


    with link = "point.de.Berger-Damm" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:bed - 1sw, :bed + 1sw]
        );
        with layer = -1 marker(:de.bf :removed :right, ba[:bed] >> 0.5dt);
        station(:top :removed, ba[:bed] >> 0.5dt >> 1.5sh,
            "Berger Damm", "42,21"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:bed + 1sw, :pau.a]);
    }


    with link = "point.de.Selbelang-Bk" {
        with layer = -1 marker(:de.bk :removed :right, ba[:sel] >> 0.5dt);
        station(:top :removed, ba[:sel] >> 0.5dt >> 1.2sh,
            "Selbelang", "45,38"
        );
    }


    with link = "point.de.Paulinenaue-Ost" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:pau.a, :pau.r] >> 0.5dt);

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:pau.a, :pau.r] << 0.5dt);

        # Gl. 4
        with layer = -1 track(:station :cat:ac15,
                ba[:pau.a + 349m, :pau.a + 350m] << 0.5dt
            --  ba[:pau.a + 350m + 1dl, :pau.r - 350m - 1dl] << 1.5dt
            --  ba[:pau.r - 350m, :pau.r - 349m] << 0.5dt
        );
            with layer = -2 track(:station,
                    ba[:pau.a + 350m - 0.5dl, :pau.a + 350m + 1dl] << 1.5dt
            );
            with layer = -2 track(:station,
                    ba[:pau.r - 350m - 1dl, :pau.r - 350m + 0.5dl] << 1.5dt
            );

        marker(:de.bft :cat:ac15 :left, ba[:pao] << 1.5dt);
        station(:left :cat:ac15, ba[:pao + 0.2sw] << 1.5dt << 1.8sh,
            "Paulinenaue Ost", "46,70"
        );
    }


    with link = "point.de.Paulinenaue" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:pau.r, :pau.f] >> 0.5dt);

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:pau.r, :pau.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:pau.r + 0.5dl] << 0.5dt
                --  ba[:pau.r + 2dl] >> 0.5dt
            );

        # Gl. 3
        track(:station :cat:ac15 :pax,
                ba[:pau.r + 2.9dl, :pau.r + 3dl] >> 0.5dt
            --  ba[:pau.r + 4dl, :pau - 220m - 1dl] >> 1.5dt
            --  ba[:pau - 200m, :pau.yn - 2dl] >> 2.5dt
            --  ba[:pau.yn, :pau.yn + 0.1dl] >> 0.5dt
        );
            with layer = -2 track(:station,
                    ba[:pau.r + 2.5dl, :pau.r + 4dl] >> 1.5dt
            );
            with layer = -2 track(:station,
                    ba[:pau.yn - 2dl, :pau.yn - 0.5dl] >> 2.5dt
            );

        marker(:de.bf :cat:ac15 :pax :left, ba[:pau] << 0.5dt);
        station(:left :cat:ac15 :pax, ba[:pau - 0.4sw] << 0.5dt << 2.0sh,
            span(:bold, "Paulinenaue"),
            hbox(:center:bottom,
                vbox(:right:top,
                    "6100: ",
                    span(:removed, "6948: ")
                ),
                vbox(:right:top,
                    "48,",
                    span(:removed, "0,")
                ),
                vbox(:left:top,
                    "99",
                    span(:removed, "00")
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:pau.f, :vie - 1sw]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:pau + 2.3km], "6100");
    }


    with link = "point.de.Brädikow-Bk" {
        with layer = -1 marker(:de.bk :removed :right, ba[:bra] >> 0.5dt);
        station(:right :removed, ba[:bra - 0.4sw] >> 0.5dt >> 1.2sh,
            "Brädikow", "53,09"
        );
    }


    with link = "point.de.Vietznitz" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:vie - 1sw, :vie + 1sw]
        );
        with layer = -1 marker(:de.hp :removed:left, ba[:vie] << 0.5dt);
        with layer = -1 marker(:de.bf :gone :left, ba[:vie] << 0.5dt);
        station(:left :removed, ba[:vie - 0.3sw] << 0.5dt << 2.0sh,
            "Vietznitz", "57,14"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:vie + 1sw, :fri.a]);
    }


    with link = "point.de.Friesack-Mark" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:fri.a, :fri.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:fri.f - 250m - 2dl] >> 0.5dt
                --  ba[:fri.f - 250m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:fri.a, :fri.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:fri.a + 250m] << 0.5dt
                --  ba[:fri.a + 250m + 2dl] >> 0.5dt
            );

        # Gl. 3
        track(:station :cat:ac15 :pax,
                ba[:fri.a + 250m + 2.9dl, :fri.a + 250m + 3dl] >> 0.5dt
            --  ba[:fri.a + 250m + 4dl, :fri.f - 250m - 4dl] >> 1.5dt
            --  ba[:fri.f - 250m - 3dl, :fri.f - 250m - 2.9dl] >> 0.5dt
        );
            with layer = -2 track(:station,
                    ba[:fri.a + 250m + 2.5dl, :fri.a + 250m + 4dl] >> 1.5dt
            );
            with layer = -2 track(:station,
                    ba[:fri.f - 250m - 4dl, :fri.f - 250m - 2.5dl] >> 1.5dt
            );

        marker(:de.bf :cat:ac15 :pax :left, ba[:fri] << 0.5dt);
        station(:left :cat:ac15 :pax, ba[:fri - 0.3sw] << 0.5dt << 2.0sh,
            hbox(:center:base,
                span(:regular, "Friesack "),
                span(:light, "(Mark)")
            ),
            "61,67"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:fri + 1sw, :seg - 120m]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:fri + 2.6km], "6100");
    }


    with link = "point.de.Segeletz" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:seg - 120m, :seg + 120m]
        );
        with layer = -1 {
            track(:station :removed,
                    ba[:seg - 80m] << 0.5dt
                --  ba[:seg - 20m] >> 0.5dt
            );
            track(:station :removed,
                    ba[:seg + 20m] >> 0.5dt
                --  ba[:seg + 80m] << 0.5dt
            );
            marker(:de.uest :removed :left, ba[:seg] << 0.5dt);
        }
        station(:left :closed, ba[:seg - 0.3sw] << 0.5dt << 1.8sh,
            "Segeletz", "67,38"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:seg + 120m, :nst.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:saf + 1.5km], "6100");
    }


    with link = "point.de.Schäferberg" {
        with layer = -1 marker(:de.bk :removed :right, ba[:saf] >> 0.5dt);
        station(:right :removed, ba[:saf - 0.5sw] >> 0.5dt >> 1.2sh,
            "Schäferberg", "70,68"
        );
    }


    with link = "point.de.Neustadt-Dosse-Gbf" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:nst.a, :nst.r] >> 0.5dt);

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:nst.a, :nst.r] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:nst.a + 670m] << 0.5dt
                --  ba[:nst.a + 670m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -1 track(:station :cat:ac15,
                ba[:nst.a + 670m + 2.9dl, :nst.a + 670m + 3dl] >> 0.5dt
            --  ba[:nst.a + 670m + 4dl, :nst.r - 2dl] >> 1.5dt
            --  ba[:nst.r - 1dl, :nst.r - 0.9dl] >> 0.5dt
        );
            with layer = -2 track(:station,
                    ba[:nst.a + 670m + 2.5dl, :nst.a + 670m + 4dl] >> 1.5dt
            );
            with layer = -2 track(:station,
                    ba[:nst.r - 2dl, :nst.r - 0.5dl] >> 1.5dt
            );

        # Gl. 4
        with layer = -1 track(:station :cat:ac15,
                ba[:nst.a + 670m + 2.9dl, :nst.a + 670m + 3dl] << 0.5dt
            --  ba[:nst.a + 670m + 4dl, :nst.r - 2dl] << 1.5dt
            --  ba[:nst.r - 1dl, :nst.r - 0.9dl] << 0.5dt
        );
            with layer = -2 track(:station,
                    ba[:nst.a + 670m + 2.5dl, :nst.a + 670m + 4dl] << 1.5dt
            );
            with layer = -2 track(:station,
                    ba[:nst.r - 2dl, :nst.r - 0.5dl] << 1.5dt
            );

        # Gl. Ufw5/Ufw5
        with layer = -2 track(:station,
                ba[:nst.r - 550m, :nst.r - 5dl] << 3.5dt
        );

        # Gl. Ufw1/Ufw2
        with layer = -2 track(:station,
                ba[:nst.r - 550m, :nst.r - 6dl] << 4.5dt
        );

        # Gl. Ufw3/Ufw4
        with layer = -2 track(:station,
                ba[:nst.r - 550m, :nst.r - 7dl] << 5.5dt
            --  ba[:nst.r - 3dl, :nst.r - 2.9dl] << 1.5dt
        );

        marker(:de.bft :cat:ac15 :left, ba[:nsg] << 1.5dt);
        station(:left :cat:ac15, ba[:nsg - 0.1sw] << 7dt << 3pt,
            hbox(:center:base,
                span(:regular, "N. "),
                span(:light, "(D.) "),
                span(:regular, "Gbf")
            ),
            "??"
        );
    }


    with link = "point.de.Neustadt-Dosse" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:nst.r, :nst.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:nst.yp - 1dl] >> 0.5dt
                --  ba[:nst.yp + 1dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:nst.r, :nst.f] << 0.5dt);

        # Gl. 7 (Str. 6938)
        track(:second:station :cat:ac15 :pax,
                ba[:nst.r - 0.1dl, :nst.r] >> 0.5dt
            --  ba[:nst.r + 1dl, :nst.yp - 3dl] >> 1.5dt
        );
        with layer = -2 track(:second:station :pax,
                ba[:nst.yp - 3dl, :nst.yp] >> 1.5dt
        );
            track(:station :cat:ac15 :pax,
                    ba[:nst.yp - 3dl] >> 1.5dt
                --  ba[:nst.yp - 2dl] >> 0.5dt
            );

        # .. - W87 - W84
        with layer = -2 track(:station,
                ba[:nst.r - 2dl, :nst - 1dl] >> 2.5dt
            --  ba[:nst, :nst + 0.1dl] >> 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:nst] << 0.5dt);
        station(:left :cat:ac15 :pax, ba[:nst - 0.2sw] << 0.5dt << 2.0sh,
            hbox(:center:base,
                span(:bold, "Neustadt "),
                span(:regular, "(Dosse) "),
                span(:bold :removed, "Reichsb")
            ),
            hbox(:center:top,
                vbox(:right:top,
                    "6100: ",
                    span(:closed, "6512: "),
                    "6938: ",
                    "6946: "
                ),
                vbox(:right:top,
                    "75,",
                    span(:closed, "125,"),
                    "0,",
                    "0,"
                ),
                vbox(:left:top,
                    "44",
                    span(:closed, "6"),
                    "00",
                    "0"
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:nst.f, :zer - 1sw]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:nst + 2.5km], "6100");
    }


    with link = "point.de.Plänitz" {
        with layer = -1 marker(:de.bk :removed :left, ba[:plz] << 0.5dt);
        station(:bottom :removed, ba[:plz] << 0.5dt << 1.4sh,
            "Plänitz", "79,25"
        );
    }


    with link = "point.de.Zernitz" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:zer - 1sw, :zer + 1sw]
        );
        with layer = -1 marker(:de.bf :removed :right, ba[:zer] >> 0.5dt);
        station(:top :removed, ba[:zer] >> 0.5dt >> 1.6sh,
            "Zernitz", "83,50"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:zer + 1sw, :stu - 1sw]);
    }


    with link = "point.de.Stüdenitz" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:stu - 1sw, :stu + 1sw]
        );
        with layer = -1 marker(:de.hp :removed :left, ba[:stu] << 0.5dt);
        with layer = -2 marker(:de.bf :gone :left, ba[:stu] << 0.5dt);
        station(:bottom :removed, ba[:stu] << 0.5dt << 1.4sh,
            "Stüdenitz", "88,83"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:stu + 1sw, :bre.a]);
    }


    with link = "point.de.Breddin" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:bre.a, :bre.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:bre.a + 420m] >> 0.5dt
                --  ba[:bre.a + 420m + 2dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:bre.a, :bre.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:bre.f - 380m - 2dl] << 0.5dt
                --  ba[:bre.f - 380m] >> 0.5dt
            );

        # Gl. 4
        with layer = -2 track(:station,
                ba[:bre.a + 420m + 2.5dl, :bre.a + 420m + 4dl] << 1.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                ba[:bre.a + 420m + 2.9dl, :bre.a + 420m + 3dl] << 0.5dt
            --  ba[:bre.a + 430m + 4dl, :bre - 130m - 1dl] << 1.5dt
            --  ba[:bre - 130m, :bre - 129m] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:bre - 130m - 1dl, :bre - 0.5sw] << 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:bre] << 0.5dt);
        station(:bottom :cat:ac15 :pax, ba[:bre] << 0.5dt << 1.2sh,
            span(:bold, "Breddin"),
            "6100: 92,12"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:bre.f, :glo.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:dak + 2.3km], "6100");
    }


    with link = "point.de.Damelak" {
        with layer = -1 marker(:de.bk :removed :right, ba[:dak] >> 0.5dt);
        station(:top :removed, ba[:dak] >> 0.5dt >> 1.2sh,
            "Damelak", "97,13"
        );
    }


    with link = "point.de.Glöwen" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:glo.a, :glo.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:glo.f - 250m - 2dl] >> 0.5dt
                --  ba[:glo.f - 250m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:glo.a, :glo.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:glo.a + 300m] << 0.5dt
                --  ba[:glo.a + 300m + 2dl] >> 0.5dt
            );

        # Gl. 3
        track(:station :cat:ac15 :pax,
                ba[:glo.a + 300m + 2.9dl, :glo.a + 300m + 3dl] >> 0.5dt
            --  ba[:glo.a + 300m + 4dl, :glo.f - 250m - 5dl] >> 1.5dt
            --  ba[:glo.f - 250m - 4dl, :glo.f - 250m - 3.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:glo.f - 250m - 5dl, :glo.f - 250m - 2dl] >> 1.5dt
        );

        # Gl. 4
        with layer = -2 track(:station,
                ba[:glo.a + 300m + 2.5dl, :glo.a + 300m + 4dl] << 1.5dt
        );
        track(:station :cat:ac15 :pax,
                ba[:glo.a + 300m + 2.9dl, :glo.a + 300m + 3dl] << 0.5dt
            --  ba[:glo.a + 300m + 4dl, :glo.f - 250m - 5dl] << 1.5dt
            --  ba[:glo.f - 250m - 4dl, :glo.f - 250m - 3.9dl] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:glo.f - 250m - 5dl, :glo.f - 250m - 3.5dl] << 1.5dt
        );

        # Gl. 5
        with layer = -2 track(:station,
                ba[:glo + 150m, :glo + 400m - 1dl] >> 2.5dt
            --  ba[:glo + 400m, :glo + 401m] >> 1.5dt
        );

        # Gl. 6
        with layer = -2 track(:station,
                ba[:glo, :glo + 300m - 3.7dl] >> 4.5dt
            --  ba[:glo + 300m - 2.7dl, :glo + 300m - 1dl] >> 3.5dt
        );

        # Gl. 7
        with layer = -2 track(:station,
                ba[:glo, :glo + 300m - 3dl] >> 5.5dt
            --  ba[:glo + 300m, :glo + 301m] >> 2.5dt
        );

        # Gl. 8
        with layer = -2 track(:station,
                ba[:glo.a - 100m, :glo.a + 300m + 4dl] >> 1.5dt
        );

        # Gl. 8a
        with layer = -2 track(:station,
                ba[:glo.a + 300m - 2dl, :glo.a + 300m + 1dl] >> 2.5dt
            --  ba[:glo.a + 300m + 2dl, :glo.a + 300m + 3.1dl] >> 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:glo] << 1.5dt);
        station(:bottom :cat:ac15 :pax, ba[:glo] << 1.5dt << 1.2sh,
            span(:bold, "Glöwen"),
            hbox(:center:top,
                vbox(:right:top,
                    "6100: ",
                    span(:removed, "8984: ")
                ),
                vbox(:right:top,
                    "101,",
                    span(:removed, "0,")
                ),
                vbox(:left:top,
                    "81",
                    span(:removed, "00")
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:glo.f, :wil.a]);
    }


    with link = "point.de.Roddan" {
        with layer = -1 marker(:de.bk :removed :left, ba[:ron] << 0.5dt);
        station(:bottom :removed, ba[:ron] << 0.5dt << 1.4sh,
            "Roddan", "107,53"
        );
    }


    with link = "point.de.Bad-Wilsnack" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:wil.a, :wil.f] >> 0.5dt);

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:wil.a, :wil.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wil.a + 300m] << 0.5dt
                --  ba[:wil.a + 300m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:wil.a + 690m - 0.5dl, :wil.a + 690m + 1dl] >> 1.5dt
        );
        track(:station :cat:ac15 :pax,
                ba[:wil.a + 689m, :wil.a + 690m] >> 0.5dt
            --  ba[:wil.a + 690m + 1dl, :wil + 320m - 1dl] >> 1.5dt
            --  ba[:wil + 320m, :wil + 321m] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:wil + 320m - 1dl, :wil + 550m] >> 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:wil] << 0.5dt);
        station(:left :cat:ac15 :pax, ba[:wil] << 0.5dt << 2.0sh,
            "Bad Wilsnack", "112,80"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:wil + 1sw, :kuh - 1sw]);
    }


    with link = "point.de.Lüben" {
        with layer = -1 marker(:de.bk :removed :right, ba[:lun] >> 0.5dt);
        station(:top :removed, ba[:lun] >> 0.5dt >> 1.3sh,
            "Lüben", "116,63"
        );
    }


    with link = "point.de.Kuhblank" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:kuh - 1sw, :kuh + 1sw]
        );
        with layer = -1 marker(:de.uest :closed :right, ba[:kuh] >> 0.5dt);
        with layer = -2 marker(:de.bf :gone, ba[:kuh] >> 0.5dt);
        station(:top :closed, ba[:kuh] >> 0.5dt >> 1.3sh,
            "Kuhblank", "119,96"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:kuh + 1sw, :wit.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:kuh + 1.6km], "6100");
    }


    with link = "point.de.Breese" {
        with layer = -1 marker(:de.bk :removed :right, ba[:brs] >> 0.5dt);
        station(:top :removed, ba[:brs] >> 0.5dt >> 1.3sh,
            "Breese", "122,92"
        );
    }

    with link = "line.de.6100", layer = -4 {
        track(:first :double :removed, ba.wis[:wis.ya, :wis - 1sw]);
    }


    with link = "point.de.Wittenberge-Süd", layer = -1 {
        track(:first:station :double :removed,
                ba.wis[:wis - 1sw, :wis + 1sw]
        );
        marker(:de.hp :removed :right, ba.wis[:wis] >> 0.5dt);
        station(:right :removed, ba.wis[:wis + 1.5sw] >> 0.5dt >> 1.4sh,
            "Wittenberge Süd", "125,2"
        );
    }


    with link = "line.de.6100", layer = -1 {
        track(:first :double :removed, ba.wis[:wis + 1sw, :wis.yf]);
    }


    with link = "point.de.Wittenberge" {
        let mw = path("d4.de.w.6401");

        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:wit.a, :wit.u] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wit.u - 6.5dl] >> 0.5dt
                --  ba[:wit.u - 5dl] >> 1.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:wit.a, :wit.u] << 0.5dt);
            track(:station :cat:ac15 :pax,
                    ba[:wit - 5dl] << 0.5dt
                --  ba[:wit - 4dl] >> 0.5dt
            );
            track(:station :cat:ac15 :pax,
                    ba[:wit - 4dl] << 0.5dt
                --  ba[:wit - 3dl] << 1.5dt
            );
            with layer = -1 track(:station :cat:ac15,
                    ba[:wit.u - 9dl] << 0.5dt
                --  ba[:wit.u - 7.5dl] >> 0.5dt
            );

        # Gl. 3 (Str. 6941)
        track(:second:station :cat:ac15 :pax,
                ba[:wit - 1.1dl, :wit - 1dl] >> 0.5dt
            --  ba[:wit, :wit.u] >> 1.5dt
        );

        # Gl. 4 (Str. 6401 L)
        track(:first:station :cat:ac15 :pax,
                mw[:wit.ya, :wit.ya + 0.1dl] << 0.5dt
            ..  ba[:wit.yb - 100m - 5dl] << 4dt
            --  ba[:wit.yb - 100m] << 1.5dt
            --  ba[:wit.yb, :wit.ym + 1dl] << 1.5dt
            --  ba[:wit.ym + 2dl, :wit.ym + 2.1dl] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:wit.ym + 1dl, :wit.ym + 2.5dl] << 1.5dt
        );

        # Gl. 6
        track(:station :cat:ac15 :pax,
                ba[:wit - 2.1dl, :wit - 2dl] << 1.5dt
            --  ba[:wit - 1dl, :wit + 420m - 1dl] << 2.5dt
            --  ba[:wit + 420m, :wit + 421m] << 1.5dt
        );

        # Gl. 7
        with layer = -1 track(:station :cat:ac15,
                ba[:wit - 0.01dl, :wit] >> 1.5dt
            --  ba[:wit + 1dl, :wit.u - 4dl] >> 2.5dt
            --  ba[:wit.u - 3dl, :wit.u - 2.9dl] >> 1.5dt
        );

        # Str. 6401 R
        track(:first:station :cat:ac15 :pax,
                mw[:wit.ya, :wit.ya + 0.1dl] >> 0.5dt
            ..  ba[:wit.yb - 100m - 6dl] << 3.5dt
            --  ba[:wit.yb - 100m] << 0.5dt
        );

        # Gl. 41/42
        with layer = -1 track(:station :cat:ac15,
                ba[:wit.xa, :wit.yb - 100m - 8dl] << 1.5dt
        );

        # Gl. 43
        with layer = -1 track(:station :cat:ac15,
                ba[:wit.xa + 1dl, :wit.yb - 100m - 8dl] << 2.5dt
        );

        # Gl. 44
        with layer = -1 track(:station :cat:ac15,
                ba[:wit.xa - 220m, :wit.xa] << 1.5dt
            --  ba[:wit.xa + 2dl, :wit.yb - 100m - 8dl] << 3.5dt
            --  ba[:wit.yb - 100m - 4dl, :wit.yb - 100m - 2dl] << 1.5dt
        );

        # Anschl. Stadt Wittenberg
        with layer = -2 track(:station,
                ba[:wit.xc, :wit.xc + 750m] << 2.5dt
            ..  ba[:wit.xa - 225m, :wit.xa - 220m] << 1.5dt
        );
        with layer = -2 track(:station,
                ba[:wit.xc + 49m, :wit.xc + 50m] << 2.5dt
            --  ba[:wit.xc + 50m + 1dl, :wit.xc + 750m - 1dl] << 3.5dt
            --  ba[:wit.xc + 750m, :wit.xc + 751m] << 2.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:wit.n] << 2.5dt);
        station(:left :cat:ac15 :pax :right_align,
            ba[:wit.n - 0.4sw] << 2.5dt << 1.6sh,
            span(:bold, "Wittenberge"),
            hbox(:center:top,
                vbox(:right:top,
                    span(:removed, "1151: "),
                    "6100: ",
                    "6401: ",
                    "6941: "
                ),
                vbox(:right:top,
                    span(:removed, ""),
                    "126,",
                    "53,",
                    "0,"
                ),
                vbox(:left:top,
                    span(:removed, ""),
                    "79 ",
                    "81 ",
                    "14 "
                ),
                vbox(:right:top,
                    span(:removed, ""),
                    span(:removed, "← "),
                    span(:removed, "← "),
                    span(:removed, "← ")
                ),
                vbox(:right:top,
                    span(:removed, "126,"),
                    span(:removed, "126,"),
                    span(:removed, "53,"),
                    span(:removed, "0,")
                ),
                vbox(:left:top,
                    span(:removed, "62"),
                    span(:removed, "62"),
                    span(:removed, "84"),
                    span(:removed, "00")
                )
           )
       );
    }


    with link = "point.de.Wittenberge-Nord" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:wit.u, :wit.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wit.u] >> 0.5dt
                --  ba[:wit.u + 2dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:wit.u, :wit.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wit.f - 330m - 2dl] << 0.5dt
                --  ba[:wit.f - 330m] >> 0.5dt
            );

        # Gl. 64
        with layer = -1 track(:station :cat:ac15,
                ba[:wit.u + 2.9dl, :wit.u + 3dl] << 0.5dt
            --  ba[:wit.u + 4dl, :wit.f - 330m - 4dl] << 1.5dt
            --  ba[:wit.f - 330m - 3dl, :wit.f - 330m - 2.9dl] << 0.5dt
        );

        marker(:de.bft :cat:ac15 :left, ba[:win] << 1.5dt);
        station(:right :cat:ac15, ba[:win - 0.4sw] >> 1.5dt,
            "Wittenberge Nord", "??"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:wit.f, :der.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:sld - 1.6km], "6100");
    }


    with link = "point.de.Schilde" {
        with layer = -1 marker(:de.bk :removed :right, ba[:sld] >> 0.5dt);
        label(ba[:sld + 0.2sw] >> 0.5dt >> 1.4sh,
            vbox(:left:middle,
                span(:medium :gone, "Bentwisch"),
                hbox(:left:top,
                    vbox(:center:top,
                        span(:medium :closed, "Schilde"),
                        span(:xsmall :closed, "132,10")
                    )
                )
            )
        );
    }


    with link = "point.de.Dergenthin" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:der.a, :der.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:der.f - 350m - 2dl] >> 0.5dt
                --  ba[:der.f - 350m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:der.a, :der.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:der - 180m] << 0.5dt
                --  ba[:der - 180m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:der - 180m + 2.5dl, :der - 180m + 4dl] >> 1.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                ba[:der - 180m + 2.9dl, :der - 180m + 3dl] >> 0.5dt
            --  ba[:der - 180m + 4dl, :der.f - 350m - 4dl] >> 1.5dt
            --  ba[:der.f - 350m - 3dl, :der.f - 350m - 2.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:der.f - 350m - 4dl, :der.f - 350m - 2.5dl] >> 1.5dt
        );

        # Gl. 5
        with layer = -1 track(:station :cat:ac15,
                ba[:der - 180m + 4.9dl, :der - 180m + 5dl] >> 1.5dt
            --  ba[:der - 180m + 6dl, :der.f - 350m - 6dl] >> 2.5dt
            --  ba[:der.f - 350m - 5dl, :der.f - 350m - 4.9dl] >> 1.5dt
        );

        with layer = -1 marker(:de.bbf :cat:ac15 :left, ba[:der] << 0.5dt);
        with layer = -5 marker(:de.bf :removed :left, ba[:der] << 0.5dt);
        station(:left :cat:ac15, ba[:der - 0.4sw] << 0.5dt << 1.4sw,
            "Dergenthin", "135,78"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:der + 1sw, :kat.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:neb + 2.6km], "6100");
    }


    with link = "point.de.Nebelin" {
        with layer = -1 marker(:de.bk :removed :right, ba[:neb] >> 0.5dt);
        station(:right :removed, ba[:neb - 0.4sw] >> 0.5dt >> 1.2sw,
            "Nebelin", "139,29"
        );
    }


    with link = "point.de.Karstädt" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:kat.a, :kat.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:kat.a + 320m] >> 0.5dt
                --  ba[:kat.a + 320m + 2dt] << 0.5dt
            );
            with layer = -2 track(:station,
                    ba[:kat.yb - 0.5dl] >> 0.5dt
                --  ba[:kat.yb + 0.5dl] >> 1.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:kat.a, :kat.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:kat.yb] << 0.5dt
                --  ba[:kat.yb + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:kat.a + 320m + 2.5dl, :kat.a + 320m + 4dl] << 1.5dt
        );
        track(:station :cat:ac15 :pax,
                ba[:kat.a + 320m + 2.9dl, :kat.a + 320m + 3dl] << 0.5dt
            --  ba[:kat.a + 320m + 4dl, :kat.yb - 2dl] << 1.5dt
            --  ba[:kat.yb - 1dl, :kat.yb - 0.9dl] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:kat.yb - 2dl, :kat.yb - 0.5dl] << 1.5dt
        );

        # Gl. 10
        with layer = -2 track(:station,
                ba[:kat + 300m, :kat.f + 390m] >> 1.5dt
        );

        # Gl. 11?
        with layer = -2 track(:station,
                ba[:kat.yb + 1.9dl, :kat.yb + 2dl] >> 1.5dt
            --  ba[:kat.yb + 3dl, :kat.f + 250m - 1dl] >> 2.5dt
            --  ba[:kat.f + 250m, :kat.f + 251m] >> 1.5dt
        );

        # Anschl. Braas
        with layer = -2 track(:station,
                ba[:kat + 179m, :kat + 180m] << 1.5dt
            --  ba[:kat + 180m + 1dl, :kat + 540m] << 2.5dt
        );

        marker(:de.bf :cat:ac15 :pax :right, ba[:kat] >> 0.5dt);
        station(:left :cat:ac15 :pax :right_align, ba[:kat - 0.4sw] << 3.5dt,
            span(:bold, "Karstädt"),
            hbox(:center:top,
                vbox(:right:top,
                    "6100: ",
                    span(:removed, "6944: ")
                ),
                vbox(:right:top,
                    "144,38 ",
                    span(:removed, "")
                ),
                vbox(:right:top,
                    span(:removed, "← 144,"),
                    span(:removed, "14,")
                ),
                vbox(:left:top,
                    span(:removed, "32"),
                    span(:removed, "78")
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:kat.f, :wrn.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:kat + 4.6km], "6100");
    }


    with link = "point.de.Streesow" {
        with layer = -1 marker(:de.uest :removed :right, ba[:stw] >> 0.5dt);
        station(:top :removed, ba[:stw - 0.2sw] >> 0.5dt >> 1.6sw,
            "Streesow", "149,94"
        );
    }


    with link = "point.de.Klein-Warnow" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:wrn.a, :wrn.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wrn.f - 420m - 2dl] >> 0.5dt
                --  ba[:wrn.f - 420m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:wrn.a, :wrn.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:wrn.a + 260m] << 0.5dt
                --  ba[:wrn.a + 260m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:wrn.a + 250m + 2.5dl, :wrn.a + 260m + 4dl] >> 1.5dt
        );
        with layer = -1 track(:station :cat:ac15 :pax,
                ba[:wrn.a + 260m + 2.9dl, :wrn.a + 260m + 3dl] >> 0.5dt
            --  ba[:wrn.a + 260m + 4dl, :wrn.f - 420m - 4dl] >> 1.5dt
            --  ba[:wrn.f - 420m - 3dl, :wrn.f - 420m - 2.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:wrn.f - 420m - 4dl, :wrn.f - 420m - 2.5dl] >> 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:wrn] << 0.5dt);
        label(:cat:ac15 :pax, ba[:wrn - 0.4sw] << 0.5dt << 1.0sw,
            hbox(:right:top,
                vbox(:right:top,
                    span(:medium :removed, "Wendisch Warnow"),
                    vbox(:center:top,
                        span(:medium, "Klein Warnow"),
                        span(:xsmall, "154,83")
                    )
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:wrn.f, :grb.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:grb - 2.2km], "6100");
    }


    with link = "point.de.Neese" {
        with layer = -1 marker(:de.bk :removed :right, ba[:nee] >> 0.5dt);
        station(:top :removed, ba[:nee - 0.2sw] >> 0.5dt >> 1.4sw,
            "Neese", "158,56"
        );
    }


    with link = "point.de.point.de.Grabow-Meckl" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:grb.a, :grb.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:grb.f - 350m - 2dl] >> 0.5dt
                --  ba[:grb.f - 350m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:grb.a, :grb.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:grb.a + 450m] << 0.5dt
                --  ba[:grb.a + 450m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:grb.a + 450m + 2.5dl, :grb.a + 450m + 4dl] >> 1.5dt
        );
        track(:station :cat:ac15 :pax,
                ba[:grb.a + 450m + 2.9dl, :grb.a + 450m + 3dl] >> 0.5dt
            --  ba[:grb.a + 450m + 4dl, :grb.f - 350m - 4dl] >> 1.5dt
            --  ba[:grb.f - 350m - 3dl, :grb.f - 350m - 2.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:grb.f - 350m - 4dl, :grb.f - 350m - 2.5dl] >> 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:grb] << 0.5dt);
        station(:left :cat:ac15 :pax, ba[:grb - 0.3sw] << 0.5dt << 2.0sh,
            hbox(:center:base,
                span(:regular, "Grabow "),
                span(:light, "(Meckl)")
            ),
            "163,21"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:grb + 1sw, :lud.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:grh + 1.6km], "6100");
    }


    with link = "point.de.Grünhof" {
        with layer = -1 marker(:de.bk :removed :right, ba[:grh] >> 0.5dt);
        station(:top :removed, ba[:grh - 0.2sw] >> 0.5dt >> 1.5sw,
            "Grünhof", "166,21"
        );
    }


    with link = "point.de.Ludwigslust" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:lud.a, :lud.f] >> 0.5dt);

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:lud.a, :lud.f] << 0.5dt);
            track(:station :cat:ac15 :pax,
                    ba[:lud.yp + 1.7dl] << 0.5dt
                --  ba[:lud.yp + 2.7dl] >> 0.5dt
            );

        # Gl. 11 (Str. 6935 - Str. 6441 R)
        track(:second:station :pax,
                path("d4.de.6935")[:lud.b, :lud.yp - 2dl] >> 2.5dt
        );
        track(:first:station :cat:ac15 :pax,
                ba[:lud.yp - 0.1dl, :lud.yp] >> 0.5dt
            --  ba[:lud.yp + 2dl, :lud.yp + 9.7dl] >> 2.5dt
            --  ba[:lud.yp + 10.7dl, :lud.ys - 6.3dl] >> 3.5dt
            --  ba[:lud.ys - 5.3dl, :lud.ys] >> 2.5dt
        );

        # Gl. 12 (Str. 6441 L)
        with layer = -2 track(:station,
                ba[:lud.yp + 2.2dl, :lud.yp + 4.7dl] >> 1.5dt
        );
        track(:first:station :cat:ac15 :pax,
                ba[:lud.yp + 3.69dl, :lud.yp + 3.7dl] >> 0.5dt
            --  ba[:lud.yp + 4.7dl, :lud.yp + 10.4dl] >> 1.5dt
            --  ba[:lud.yp + 11.4dl, :lud.ys - 7dl] >> 2.5dt
            --  ba[:lud.ys - 6dl, :lud.ys] >> 1.5dt
        );
            with layer = -1 track(:station :cat:ac15,
                    ba[:lud.yp + 5.7dl] >> 1.5dt
                --  ba[:lud.yp + 6.7dl] >> 2.5dt
            );

        # Gl. 13
        with layer = -1 track(:station :cat:ac15,
                ba[:lud + 300m + 2.29dl, :lud + 300m + 2.3dl] >> 3.5dt
            --  ba[:lud + 300m + 3.3dl, :lud.w3 - 1dl] >> 4.5dt
        );

        # Gl. 14
        with layer = -1 track(:station :cat:ac15,
                ba[:lud + 299m, :lud + 300m] >> 2.5dt
            --  ba[:lud + 300m + 1dl, :lud.ys - 9dl] >> 1.5dt
            --  ba[:lud.ys - 8dl, :lud.ys - 7.9dl] >> 2.5dt
        );

        # Gl. 15
        track(:station :cat:ac15 :pax,
                ba[:lud.yp + 7.9dl, :lud.yp + 8dl] >> 2.5dt
            --  ba[:lud.yp + 10dl, :lud + 300m + 0.3dl] >> 4.5dt
            --  ba[:lud + 300m + 1.3dl, :lud + 300m + 1.31dl] >> 3.5dt
        );

        # Gl. 17
        with layer = -1 track(:station :cat:ac15,
                ba[:lud.yp + 11dl, :lud + 300m - 0.7dl] >> 5.5dt
            --  ba[:lud + 300m + 0.3dl, :lud + 300m + 0.31dl] >> 4.5dt
        );

        # Gl. 19
        with layer = -1 track(:station :cat:ac15,
                ba[:lud.yp + 12dl, :lud.w3 - 4.7dl] >> 6.5dt
            --  ba[:lud.w3 - 3.7dl, :lud.w3 - 2dl] >> 5.5dt
        );

        # Gl. 21
        with layer = -1 track(:station :cat:ac15,
                ba[:lud.yp + 9.99dl, :lud.yp + 10dl] >> 4.5dt
            --  ba[:lud.yp + 13dl, :lud.w3 - 4dl] >> 7.5dt
            --  ba[:lud.w3, :lud.w3 + 0.1dl] >> 3.5dt
        );
            with layer = -2 track(:station,
                    ba[:lud + 250m] >> 7.5dt
                --  ba[:lud + 250m + 1dl] >> 8.5dt
            );
            with layer = -2 track(:station,
                    ba[:lud.w3 - 4dl] >> 7.5dt
                --  ba[:lud.w3 - 3dl] >> 8.5dt
            );

        # Gl. 23
        with layer = -2 track(:station,
                ba[:lud.yp + 14dl, :lud.w3 + 3dl] >> 8.5dt
        );
            with layer = -2 track(:station,
                    ba[:lud + 250m + 2dl] >> 8.5dt
                --  ba[:lud + 250m + 3dl] >> 9.5dt
            );

        # Gl. 31
        with layer = -2 track(:station,
                ba[:lud + 200m, :lud.w3 - 3dl] >> 9.5dt
            --  ba[:lud.w3 - 2dl, :lud.w3 - 1.9dl] >> 8.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:lud] << 0.5dt);
        station(:left :cat:ac15 :pax :right_align,
            ba[:lud - 0.4sw] << 0.5dt << 2.0sh,
            span(:bold, "Ludwigslust"),
            hbox(:center:top,
                vbox(:right:top,
                    "6100: ",
                    "6441: ",
                    "6935: "
                ),
                vbox(:right:top,
                    "170,",
                    " 30,",
                    "?"
                ),
                vbox(:left:top,
                    "78",
                    "39",
                    "?"
                ),
                vbox(:center:top,
                    span(:removed, " ← "),
                    span(:removed, " ← "),
                    span(:removed, " ← ")
                ),
                vbox(:right:top,
                    span(:removed, "170,"),
                    span(:removed, "30,"),
                    span(:removed, "0,")
                ),
                vbox(:left:top,
                    span(:removed, "76"),
                    span(:removed, "28"),
                    span(:removed, "00")
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:lud.f, :wes - 1sw]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:wes - 0.8km], "6100");
    }


    with link = "point.de.Weselsdorf" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:wes - 1sw, :wes + 1sw]
        );
        with layer = -1 marker(:de.hp :removed :left, ba[:wes] << 0.5dt);
        station(:left :removed, ba[:wes - 0.4sw] << 0.5dt << 2.0sh,
            "Weselsdorf", "174,50"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:wes + 1sw, :jas.a]);
    }


    with link = "point.de.Niendorf-Ludwigslust" {
        with layer = -1 marker(:de.bk :removed :right, ba[:nie] >> 0.5dt);
        station(:left :removed, ba[:nie - 0.4sw] << 0.5dt << 8pt,
            "Niendorf", "175,67"
        );
    }


    with link = "point.de.Jasnitz" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:jas.a, :jas.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:jas.a + 280m] >> 0.5dt
                --  ba[:jas.a + 280m + 2dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:jas.a, :jas.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:jas.f - 450m - 2dl] << 0.5dt
                --  ba[:jas.f - 450m] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:jas.a + 280m + 2.5dl, :jas.a + 280m + 4dl] << 1.5dt
        );
        track(:station :cat:ac15 :pax,
                ba[:jas.a + 280m + 2.9dl, :jas.a + 280m + 3dl] << 0.5dt
            --  ba[:jas.a + 280m + 4dl, :jas.f - 450m - 4dl] << 1.5dt
            --  ba[:jas.f - 450m - 3dl, :jas.f - 450m - 2.9dl] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:jas.f - 450m - 4dl, :jas.f - 450m - 2.5dl] << 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :right, ba[:jas] >> 0.5dt);
        station(:top :cat:ac15 :pax, ba[:jas] >> 0.5dt >> 1.4sh,
            "Jasnitz", "180,63"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:jas.f, :str - 1sw]);
    }


    with link = "point.de.Strohkirchen" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:str - 1sw, :str + 1sw]
        );
        marker(:de.hp :cat:ac15 :pax :right, ba[:str] >> 0.5dt);
        with layer = -1 marker(:de.bk :removed :right, ba[:str] >> 0.5dt);
        station(:top :cat:ac15 :pax, ba[:str] >> 0.5dt >> 1.5sh,
            "Strohkirchen", "184,65"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:str + 1sw, :hag.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:mor - 1.8km], "6100");
    }


    with link = "point.de.Moraas" {
        with layer = -1 marker(:de.bk :removed :right, ba[:mor] >> 0.5dt);
        station(:top :removed, ba[:mor] >> 0.5dt >> 1.4sh,
            "Moraas", "188,74"
        );
    }


    with link = "point.de.Hagenow-Land" {
        let hh = path("d4.de.6442");

        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax,
                ba[:hag.a, :hag.xa] >> 0.5dt
            ..  hh[:hag + 420m, :hag.yz + 4.3dl] << 2.5dt
            --  ba[:hag.yz - 0.7dl, :hag.f] >> 0.5dt
        )
            with layer = -1 track(:station :cat:ac15,
                    ba[:hag.xz + 2dl] >> 0.5dt
                --  ba[:hag.xz + 3.5dl] >> 1.5dt
            );
            with layer = -1 track(:station :cat:ac15,
                    ba[:hag.xz + 600m] >> 0.5dt
                --  ba[:hag.xz + 600m + 0.5dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax,
                ba[:hag.a, :hag.xa] << 0.5dt
            ..  hh[:hag + 420m, :hag.yz + 3.6dl] << 3.5dt
            --  ba[:hag.yz, :hag.f] << 0.5dt
        );
            track(:station :cat:ac15 :pax,
                    ba[:hag.a + 280m] << 0.5dt
                --  ba[:hag.a + 280m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                hh[:hag + 200m + 0.5dl, :hag + 200m - 1dl] << 1.5dt
        );
        track(:station :cat:ac15 :pax,
                hh[:hag + 201m, :hag + 200m] << 2.5dt
            --  hh[:hag + 200m - 1dl, :hag.yz + 5dl] << 1.5dt
            --  hh[:hag.yz + 1.4dl, :hag.yz + 1.39dl] >> 1.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                ba[:hag.yz, :hag.f - 270m - 4dl] >> 1.5dt
            --  ba[:hag.f - 270m - 3dl, :hag.f - 250m - 2.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:hag.f - 270m - 4dl, :hag.f - 270m - 2.5dl] >> 1.5dt
        );

        # Gl. 4
        with layer = -2 track(:station,
                ba[:hag.xb, :hag.xb + 1dl] << 1dt
            ..  hh[:hag + 420m, :hag + 300m] << 4.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                hh[:hag + 300m + 1.1dl, :hag + 300m + 1dl] << 3.5dt
            --  hh[:hag + 300m, :hag.yz + 2.9dl] << 4.5dt
            --  ba[:hag.yz + 0.7dl, :hag.xz + 0.71dl] << 1.5dt
            --  ba[:hag.xz + 1.9dl, :hag.xz + 1.91dl] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:hag.xz + 0.7dl, :hag.xz + 2.5dl] << 1.5dt
        );

        # Gl. 7 (Str. 6442 R)
        track(:first:station :cat:ac15 :pax,
                hh[:hag.b, :hag.yz] >> 1.5dt
            --  hh[:hag.yz - 1dl, :hag.yz - 1.1dl] >> 0.5dt
        );

        # Gl. 9 (Str. 6442 L)
        track(:first:station :cat:ac15 :pax,
                hh[:hag.b, :hag.yz + 3dl] >> 2.5dt
            --  hh[:hag.yz + 2dl, :hag.yz + 1.9dl] >> 1.5dt
        );

        # Str. 6928
        with layer = -1 track(:second:station :pax,
                ba[:hag.yz, :hag.yz + 1dl] >> 1.5dt
            --  ba[:hag.yz + 2dl, :hag.yz + 3dl] >> 2.5dt
            ..  path("d4.de.w.6928")[:hag.gg - 0.1dl, :hag.gg]
        );

        marker(:de.bf :cat:ac15 :pax :right, hh[:hag] << 1.5dt);
        station(:right :cat:ac15 :pax, ba[:hag + 0.5sw] << 4.5dt << 6pt,
            span(:medium:bold, "Hagenow Land"),
            hbox(:center:top :xsmall,
                vbox(:right:top,
                    "6100: ",
                    "6442: ",
                    "6928: "
                ),
                vbox(:right:top,
                    "191,",
                    "0,",
                    "0,"
                ),
                vbox(:left:top,
                    "83",
                    "20 ",
                    "00"
                )
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:hag.f, :pri.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:pat + 1.5km], "6100");
    }


    with link = "point.de.Paetow" {
        with layer = -1 marker(:de.bk :removed :right, ba[:pat] >> 0.5dt);
        station(:right :removed, ba[:pat + 0.5sw] << 3.0dt,
            "Paetow", "194,65"
        );
    }


    with link = "point.de.Warlitz" {
        with layer = -2 marker(:de.bk :removed :left, ba[:war] << 0.5dt);
        station(:bottom :removed, ba[:war] << 0.5dt << 1.4sh,
            "Warlitz", "198,57"
        );
    }


    with link = "point.de.Pritzier" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:pri.a, :pri.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:pri.a + 250m] >> 0.5dt
                --  ba[:pri.a + 250m + 2dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:pri.a, :pri.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:pri.f - 450m - 2dl] << 0.5dt
                --  ba[:pri.f - 450m] >> 0.5dt
            );

        # Gl. 4
        with layer = -1 track(:station :cat:ac15,
                ba[:pri + 179m, :pri + 180m] << 0.5dt
            --  ba[:pri + 180m + 1dl, :pri.f - 450m - 4dl] << 1.5dt
            --  ba[:pri.f - 450m - 3dl, :pri.f - 450m - 2.9dl] << 0.5dt
        );

        # Gl. 6
        with layer = -2 track(:station,
                ba[:pri + 180m + 1.9dl, :pri + 180m + 2dl] << 1.5dt
            --  ba[:pri + 180m + 3dl, :pri + 650m - 1dl] << 2.5dt
            --  ba[:pri + 650m, :pri + 651m] << 1.5dt
        );

        # Gl. 7
        with layer = -2 track(:station,
                ba[:pri + 0.6sw, :pri + 180m + 3dl] << 2.5dt
        );

        # Gl. 8
        with layer = -2 track(:station,
                ba[:pri + 0.6sw, :pri + 180m + 1dl] << 1.5dt
        );

        # Gl. 15
        with layer = -2 track(:station,
                ba[:pri.f - 450m - 4dl, :pri.f - 450m - 2.5dl] << 1.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:pri] << 0.5dt);
        station(:bottom :cat:ac15 :pax, ba[:pri] << 0.5dt << 1.4sh,
            "Pritzier", "202,60"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:pri.f, :brh.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:mel + 1.5km], "6100");
    }


    with link = "point.de.Melkof" {
        with layer = -1 marker(:de.bk :removed :left, ba[:mel] << 0.5dt);
        station(:bottom :removed, ba[:mel] << 0.5dt << 1.2sh,
            "Melkof", "206,54"
        );
    }


    with link = "point.de.Brahlstorf" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:brh.a , :brh.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:brh.a + 250m] >> 0.5dt
                --  ba[:brh.a + 250m + 2dl] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:brh.a , :brh.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:brh.f - 450m - 2dl] << 0.5dt
                --  ba[:brh.f - 450m] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station, ba[:brh - 3dl, :brh - 1dl] >> 1.5dt);
        with layer = -1 track(:station :cat:ac15,
                ba[:brh - 2.1dl, :brh - 2dl] >> 0.5dt
            --  ba[:brh - 1dl, :brh.f - 450m - 4dl] >> 1.5dt
            --  ba[:brh.f - 450m - 3dl, :brh.f - 450m - 2.9dl] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:brh.f - 450m - 4dl, :brh.f - 450m - 2.5dl] >> 1.5dt
        );

        # Gl. 4
        with layer = -1 track(:station :cat:ac15,
                ba[:brh - 621m, :brh - 620m] << 0.5dt
            --  ba[:brh - 620m + 1dl, :brh + 500m - 1dl] << 1.5dt
            --  ba[:brh + 500m, :brh + 501m] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:brh + 500m - 1dl, :brh + 600m] << 1.5dt
        );
        with layer = -4 track(:station :removed,
                ba[:brh + 600m, :brh + 800m] << 1.5dt
        );

        # Gl. 5
        with layer = -2 track(:station,
                ba[:brh - 620m, :brh - 4dl] << 2.5dt
            --  ba[:brh - 3dl, :brh - 2.9dl] << 1.5dt
        );

        # Gl. 7
        with layer = -2 track(:station,
                ba[:brh - 620m + 1.9dl, :brh - 620m + 2dl] << 1.5dt
            --  ba[:brh - 620m + 4dl, :brh - 4dl] << 3.5dt
        );

        with layer = -2 marker(
            :de.bf :cat:ac15 :pax :right, ba[:brh] >> 1.5dt
        );
        station(:top :cat:ac15 :pax, ba[:brh] >> 1.5dt >> 1.4sh,
            span(:bold, "Brahlstorf"),
            "6100: 211,54"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:brh.f, :kfd - 1sw]);
    }


    with link = "point.de.Kuhlenfeld" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:kfd - 1sw, :kfd + 1sw]
        );
        with layer = -1 marker(:de.bf :removed :left, ba[:kfd] << 0.5dt);
        station(:bottom :removed, ba[:kfd] << 0.5dt << 1.2sh,
            "Kuhlenfeld", "218,17"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:kfd + 1sw, :boi.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:ngu + 1.2km], "6100");
    }


    with link = "point.de.Neu-Gülze" {
        with layer = -1 marker(:de.bk :removed :left, ba[:ngu] << 0.5dt);
        station(:bottom :removed, ba[:ngu] << 0.5dt << 1.2sh,
            "Neu Gülze", "221,21"
        );
    }


    with link = "point.de.Boizenburg" {
        # Gl. 1 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:boi.a, :boi.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:boi.f - 330m - 2dl] >> 0.5dt
                --  ba[:boi.f - 330m] << 0.5dt
            );

        # Gl. 2 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:boi.a, :boi.f] << 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:boi.a + 430m] << 0.5dt
                --  ba[:boi.a + 430m + 2dl] >> 0.5dt
            );

        # Gl. 3
        with layer = -2 track(:station,
                ba[:boi - 120m, :boi + 120m + 1dl] >> 1.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                ba[:boi + 119m, :boi + 120m] >> 0.5dt
            --  ba[:boi + 120m + 1dl, :boi.f - 700m - 1dl] >> 1.5dt
            --  ba[:boi.f - 700m, :boi.f - 699m] >> 0.5dt
        );
        with layer = -2 track(:station,
                ba[:boi.f - 700m - 1dl, :boi.f - 700m + 0.5dl] >> 1.5dt
        );

        # Gl. 4
        with layer = -2 track(:station,
                ba[:boi + 120m - 0.5dl, :boi + 120m + 1dl] << 1.5dt
        );
        with layer = -1 track(:station :cat:ac15,
                ba[:boi + 119m, :boi + 120m] << 0.5dt
            --  ba[:boi + 120m + 1dl, :boi.f - 700m - 1dl] << 1.5dt
            --  ba[:boi.f - 700m, :boi.f - 699m] << 0.5dt
        );
        with layer = -2 track(:station,
                ba[:boi.f - 700m - 1dl, :boi.f - 700m + 0.5dl] << 1.5dt
        );

        # Gl. 5
        with layer = -2 track(:station,
                ba[:boi + 1dl, :boi + 550m - 1dl] >> 2.5dt
            --  ba[:boi + 550m, :boi + 551m] >> 1.5dt
        );

        # Gl. 7
        with layer = -2 track(:station,
                ba[:boi - 0.1dl, :boi] >> 1.5dt
            --  ba[:boi + 2dl, :boi + 550m - 4dl] >> 3.5dt
            --  ba[:boi + 550m - 3dl, :boi + 550m - 2.9dl] >> 2.5dt
        );

        # Gl. 8
        with layer = -2 track(:station,
                ba[:boi + 2.9dl, :boi + 3dl] >> 3.5dt
            --  ba[:boi + 4dl, :boi + 6dl] >> 4.5dt
        );

        # Gl. 11
        with layer = -2 track(:station,
                ba[:boi + 550m - 6.1dl, :boi + 550m - 6dl] >> 3.5dt
            --  ba[:boi + 550m - 5dl, :boi + 550m - 2dl] >> 4.5dt
        );

        # Anschl. Kohlenhandel
        with layer = -2 track(:station,
                ba[:boi + 550m - 2.1dl, :boi + 550m - 2dl] >> 2.5dt
            --  ba[:boi + 550m - 1dl, :boi + 550m + 3dl] >> 3.5dt
        );

        marker(:de.bf :cat:ac15 :pax :left, ba[:boi] << 0.5dt);
        station(:bottom :cat:ac15 :pax, ba[:boi] << 0.5dt << 1.6sh,
            span(:bold, "Boizenburg"),
            "6100: 224,95"
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:boi.f, :sah.a]);
        with layer = 1 line_badge(:cat:ac15 :pax, ba[:met + 1.2km], "6100");
    }


    with link = "point.de.Metlitzhof" {
        with layer = -1 marker(:de.bk :removed :right, ba[:met] >> 0.5dt);
        station(:right :removed, ba[:met - 0.45sw] >> 0.5dt >> 1.2sh,
            "Metlitzhof", "228,27"
        );
    }


    with link = "point.de.Schwanheide" {
        # Gl. 1 (Str. 6100 L)
        track(:first:station :cat:ac15 :pax, ba[:sah.a, :sah.f] << 0.5dt);
            with layer = -4 track(:station :removed,
                    ba[:sah.w1] << 0.5dt
                --  ba[:sah.w1 + 1dl] >> 0.5dt
            );
            with layer = -1 track(:station :cat:ac15,
                    ba[:sah.xu + 0.5dl] << 0.5dt
                --  ba[:sah.xu + 2.5dl] >> 0.5dt
            );
            with layer = -4 track(:station :removed,
                    ba[:sah + 0.5sw] << 0.5dt
                --  ba[:sah + 0.5sw + 1dl] >> 0.5dt
            );

        # Gl. 2 (Str. 6100 R)
        track(:first:station :cat:ac15 :pax, ba[:sah.a, :sah.f] >> 0.5dt);
            with layer = -1 track(:station :cat:ac15,
                    ba[:sah.xu - 2.5dl] >> 0.5dt
                --  ba[:sah.xu - 0.5dl] << 0.5dt
            );
            with layer = -4 track(:station :removed,
                    ba[:sah + 0.5sw + 3dl] >> 0.5dt
                --  ba[:sah + 0.5sw + 4dl] >> 1.5dt
            );
            with layer = -4 track(:station :removed,
                    ba[:sah + 0.5sw + 5dl] >> 0.5dt
                --  ba[:sah + 0.5sw + 6dl] << 0.5dt
            );

        # Gl. 3
        with layer = -4 track(:station :removed,
                ba[:sah.w1 + 3dl, :sah + 0.5sw + 5dl] >> 1.5dt
        );
            with layer = -4 track(:station :removed,
                    ba[:sah + 0.5sw + 1dl] >> 1.5dt
                --  ba[:sah + 0.5sw + 2dl] >> 0.5dt
            );

        # Gl. 4
        with layer = -4 track(:station :removed,
                ba[:sah.w1 + 1.9dl, :sah.w1 + 2dl] >> 0.5dt
            --  ba[:sah.w1 + 4dl, :sah - 0.5sw - 1dl] >> 2.5dt
            --  ba[:sah - 0.5sw, :sah - 0.49sw] >> 1.5dt
        );

        with layer = -5 {
            marker(:de.hp :cat:ac15 :pax :right, ba[:sah] >> 1.5dt);
            marker(:de.uest :cat:ac15 :pax :right, ba[:sah] >> 1.5dt);
        }
        with layer = -6 marker(:de.bf :removed :right, ba[:sah] >> 1.5dt);
        station(:right :left_align :cat:ac15 :pax,
            ba[:sah - 0.4sw] >> 1.5dt >> 1.4sh,
            "Schwanheide",
            hbox(:left:base,
                "  232,01",
                span(:removed, "← 232,02 ← 232,52")
            )
        );
    }


    with link = "line.de.6100" {
        track(:first :double :cat:ac15 :pax, ba[:sah.f, :gsah - 0.5sw]);
    }


    with link = "point.de.Zweedorf" {
        with layer = -1 marker(:de.bk :removed :left, ba[:zwe] << 0.5dt);
        station(:left :removed, ba[:zwe - 0.2sw] << 0.5dt << 1.8sh,
            "Zweedorf", "234,92"
        );
    }


    with link = "point.de.Schwanheide-LGr" {
        track(:first:station :double :cat:ac15 :pax,
                ba[:gsah - 0.5sw, :gsah + 0.5sw]
        );
        with layer = -4 {
            marker(:de.dirgr :removed :right, ba[:gsah] >> 0.5dt);
            marker(:statdt :removed :right, ba[:gsah] << 0.5dt);
            marker(:de.dirgr :removed :left, ba[:gsah] << 0.5dt);
        }
        slabel(:top :removed, ba[:gsah] >> 4.5dt,
            vbox(:center:bottom :xsmall,
                "DB | DR",
                "       6100: 236,475"
            )
        );
    }
}

