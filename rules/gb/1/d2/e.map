# GB ECM1.  Kings Cross - Shaftholme Junction.
with detail = 2 {
    let ecm = path("d2.gb.1.ecm1");

    with link = "line.gb.ECM1" {
        track(:first :double :cat:ac25 :pax, ecm[:pot, :pet]);
        track(:first :double :cat:ac25 :pax, ecm[:pet, :nwa]);
        
        line_badge(:cat:ac25 :pax, ecm[:hun + 8km], "ECM1");
        line_badge(:cat:ac25 :pax, ecm[:ess + 9.5km], "ECM1");
    }

    with link = "point.gb.Hatfield" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:hat]);
        slabel(:right :cat:ac25 :pax, ecm[:hat] + (1.5dt, 1.0dt),
            "Hatfield"
        );
    }

    with link = "point.gb.Welwyn-Garden-City" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:wel]);
    }

    with link = "point.gb.Stevenage" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:ste]);
        slabel(:left :cat:ac25 :pax, ecm[:ste] + (-1.8dt, 1.0dt),
            "Stevenage"
        );
    }

    with link = "point.gb.Hitchin" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:hit]);
        slabel(:left :cat:ac25 :pax, ecm[:hit] + (-1.8dt, 1.3dt),
            "Hitchin"
        );
    }

    with link = "point.gb.Biggleswade" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:big]);
        slabel(:right :cat:ac25 :pax, ecm[:big] + (1.5dt, 1.0dt),
            "Biggleswade"
        );
    }

    with link = "point.gb.Huntingdon" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:hun]);
        slabel(:left :cat:ac25 :pax, ecm[:hun] + (-1.5dt, 0.5dt),
            "Huntingdon"
        );
    }

    with link = "point.gb.Holme" {
        with layer = 1 marker(:statdot :removed, ecm[:hol]);
        slabel(:left :removed, ecm[:hol] + (-1.8dt, 0.8dt), "Holme");
    }

    with link = "point.gb.Peterborough" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:pet]);
        slabel(:right :cat:ac25 :pax, ecm[:pet] + (1.8dt, 0.5dt),
            "Peterborough"
        );
    }

    with link = "point.gb.Essendine" {
        with layer = 1 marker(:statdot :removed, ecm[:ess]);
        slabel(:left :removed, ecm[:ess] + (-1.8dt, 1.3dt), "Essendine");
    }

    with link = "point.gb.Grantham" {
        with layer = 1 marker(:statdot :cat:ac25 :pax, ecm[:gra]);
        slabel(:right :cat:ac25 :pax, ecm[:gra] + (1.8dt, 0dt),
            "Grantham"
        );
    }

    with link = "point.gb.Barkston" {
        with layer = 1 marker(:statdot :removed, ecm[:bar]);
        slabel(:right :removed, ecm[:bar] + (1.8dt, 1.3dt), "Barkston");
    }
}

