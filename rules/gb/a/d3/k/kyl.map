# GB KYL.  Dingwall - Kyle of Lochalsh
#
let dk = path("d4.gb.kyl");

with detail = 3 {
    # point.gb.Dingwall-Jn  gb.WCK

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:din.yk + 1sw, :fod - 1sw]);
        line_label(:right:s :pax, dk[:din.yk + 1.8km], "KYL");
    }

    with link = "point.gb.Fodderty-Jn" {
        track(:first:station :pax, dk[:fod - 1sw, :fod + 1sw]);
        track(:first:station :removed, path("d2.gb.dfs")[:fod, :fod + 1sw]);
        marker(:left :de.abzw :removed, dk[:fod]);
        slabel(:bottom :removed, dk[:fod] << 1.4sh, "Fodderty Jn.");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:fod + 1sw, :ach - 1sw]);
        line_label(:right:s :pax, dk[:ach + 3.3km], "KYL");
    }

    with link = "point.gb.Achterneed" {
        track(:first:station :pax, dk[:ach - 1sw, :ach + 1sw]);
        marker(:left :de.bf :removed, dk[:ach] @ 2);
        slabel(:right :removed, dk[:ach] + (-1.5sw, -2.5dt), "Achterneed");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:ach + 1sw, :gar - 1sw]);
    }

    with link = "point.gb.Garve" {
        track(:first:station :pax, dk[:gar - 1sw, :gar + 1sw]);
        marker(:right :de.bf :pax, dk[:gar]);
        slabel(:right :pax, dk[:gar - 0.4sw] >> 1.4sh, "Garve");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:gar + 1sw, :loc - 1sw]);
    }

    with link = "point.gb.Lochluichart" {
        track(:first:station :pax, dk[:loc - 1sw, :loc + 1sw]);
        marker(:right :de.hp :pax, dk[:loc]);
        slabel(:left :pax, dk[:loc] + (0.8sw, -1.4sh), "Lochluichart");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:loc + 1sw, :aca - 1sw]);
    }

    with link = "point.gb.Achanalt" {
        track(:first:station :pax, dk[:aca - 1sw, :aca + 1sw]);
        marker(:right :de.hp :pax, dk[:aca]);
        marker(:right :de.exbf :pax, dk[:aca]);
        slabel(:top :pax, dk[:aca] >> 1dt >> 1.2sh, "Achanalt");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:aca + 1sw, :acn - 1sw]);
        line_badge(:pax, dk[:aca + 2.8km], "KYL");
    }

    with link = "point.gb.Achnasheen" {
        track(:first:station :pax, dk[:acn - 1sw, :acn + 1sw]);
        marker(:right :de.bf :pax, dk[:acn]);
        slabel(:left :pax, dk[:acn + 0.35sw] >> 1.25sh, "Achnasheen");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:acn + 1sw, :gle - 1sw]);
    }

    with link = "point.gb.Glencarron" {
        track(:first:station :pax, dk[:gle - 1sw, :gle + 1sw]);
        marker(:left :de.hp :removed, dk[:gle]);
        slabel(:right :removed, dk[:gle] + (0.3sw, 2.4sh), "Glencarron");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:gle + 1sw, :acs - 1sw]);
    }

    with link = "point.gb.Achnashellach" {
        track(:first:station :pax, dk[:acs - 1sw, :acs + 1sw]);
        marker(:left :de.hp :pax, dk[:acs]);
        slabel(:left :pax, dk[:acs - 0.5sw] >> 1.0dt, "Achnashellach");
    }
        
    with link = "line.gb.KYL" {
        track(:first :pax, dk[:acs + 1sw, :sta - 1sw]);
        line_badge(:pax, dk[:acs + 4.8km], "KYL");
    }

    with link = "point.gb.Strathcarron" {
        track(:first:station :pax, dk[:sta - 1sw, :sta + 1sw]);
        marker(:right :de.bf :pax, dk[:sta]);
        slabel(:left :pax, dk[:sta + 0.5sw] >> 1.4sh, "Strathcarron");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:sta + 1sw, :att - 1sw]);
    }

    with link = "point.gb.Attadale" {
        track(:first:station :pax, dk[:att - 1sw, :att + 1sw]);
        marker(:left :de.hp :pax, dk[:att]);
        marker(:left :de.exbf :pax, dk[:att]);
        slabel(:right :pax, dk[:att + 0.25sw] << 1dt << 1.5sh, "Attadale");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:att + 1sw, :sto - 1sw]);
    }

    with link = "point.gb.Stromeferry" {
        track(:first:station :pax, dk[:sto - 1sw, :sto + 1sw]);
        marker(:right :de.hp :pax, dk[:sto]);
        marker(:right :de.exbf :pax, dk[:sto]);
        slabel(:top :pax, dk[:sto] >> 1.0dt >> 1.4sh,
            "Stromeferry      "
        );
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:sto + 1sw, :dun - 1sw]);
    }

    with link = "point.gb.Duncraig" {
        track(:first:station :pax, dk[:dun - 1sw, :dun + 1sw]);
        marker(:left :de.hp :pax, dk[:dun] @ 10);
        slabel(:right :pax, dk[:dun] + (1.2sw, 1.5sw), "Duncraig");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:dun + 1sw, :plo - 1sw]);
    }

    with link = "point.gb.Plockton" {
        track(:first:station :pax, dk[:plo - 1sw, :plo + 1sw]);
        marker(:right :de.hp :pax, dk[:plo]);  
        marker(:right :de.exbf :pax, dk[:plo]);  
        slabel(:left :pax, dk[:plo + 0.2sw] >> 1.0dt >> 1.2sh, "Plockton");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:plo + 1sw, :dui - 1sw]);
    }

    with link = "point.gb.Duirinish" {
        track(:first:station :pax, dk[:dui - 1sw, :dui + 1sw]);
        marker(:left :de.hp :pax, dk[:dui]);
        slabel(:left :pax, dk[:dui + 0.3sw] >> 1.5dt, "Duirinish");
    }

    with link = "line.gb.KYL" {
        track(:first :pax, dk[:dui + 1sw, :kyl.f - 1.5sw]);
        line_label(:right:e :pax, dk[:dui + 2.7km], "KYL");
    }

    with link = "point.gb.Kyle-of-Lochalsh" {
        track(:first:station :pax, dk[:kyl.f - 1.5sw, :kyl.f]);
        marker(:left :de.bf :pax, dk[:kyl.f - 0.5sw] << 0.5dt);
        slabel(:left :pax, dk[:kyl.f] + (-0.8sw, 0.4sw),
            span(:bold, "Kyle of Lochalsh")
        );
    }
}

